{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap","webpack:///./node_modules/@babel/runtime/helpers/interopRequireDefault.js","webpack:///./src/app/core/redux/types/routing.js","webpack:///external \"immutable\"","webpack:///external \"react\"","webpack:///./node_modules/@babel/runtime/helpers/defineProperty.js","webpack:///./node_modules/@babel/runtime/regenerator/index.js","webpack:///./node_modules/@babel/runtime/helpers/interopRequireWildcard.js","webpack:///./src/app/core/util/helpers.js","webpack:///./node_modules/@babel/runtime/helpers/classCallCheck.js","webpack:///./src/app/core/redux/selectors/routing.js","webpack:///./src/app/core/redux/types/navigation.js","webpack:///./src/app/core/util/ContensisDeliveryApi.js","webpack:///./node_modules/@babel/runtime/helpers/createClass.js","webpack:///./src/app/core/redux/actions/routing.js","webpack:///./node_modules/@babel/runtime/helpers/toConsumableArray.js","webpack:///./src/app/core/redux/types/version.js","webpack:///external \"react-router-dom\"","webpack:///./node_modules/@babel/runtime/helpers/slicedToArray.js","webpack:///./node_modules/@babel/runtime/helpers/arrayWithHoles.js","webpack:///./node_modules/@babel/runtime/helpers/iterableToArrayLimit.js","webpack:///./node_modules/@babel/runtime/helpers/nonIterableRest.js","webpack:///external \"regenerator-runtime\"","webpack:///./node_modules/@babel/runtime/helpers/asyncToGenerator.js","webpack:///./node_modules/redux-saga/dist/redux-saga-effects-npm-proxy.esm.js","webpack:///./src/app/core/redux/selectors/navigation.js","webpack:///external \"react-hot-loader\"","webpack:///external \"react-redux\"","webpack:///./node_modules/@babel/runtime/helpers/typeof.js","webpack:///./src/app/core/redux/actions/version.js","webpack:///external \"@redux-saga/core/effects\"","webpack:///./src/app/core/redux/selectors/version.js","webpack:///./node_modules/prop-types/index.js","webpack:///external \"react-loadable\"","webpack:///./src/app/core/routes/RouteLoader.js","webpack:///external \"isomorphic-fetch\"","webpack:///./node_modules/@babel/runtime/helpers/arrayWithoutHoles.js","webpack:///./node_modules/@babel/runtime/helpers/iterableToArray.js","webpack:///./node_modules/@babel/runtime/helpers/nonIterableSpread.js","webpack:///./src/app/core/redux/history.js","webpack:///external \"history\"","webpack:///./src/app/core/util/pickProject.js","webpack:///external \"contensis-delivery-api\"","webpack:///./src/app/core/redux/store.js","webpack:///external \"redux\"","webpack:///external \"redux-immutable\"","webpack:///external \"redux-thunk\"","webpack:///external \"redux-saga\"","webpack:///./src/app/core/redux/reducers/routing.js","webpack:///./src/app/core/redux/reducers/version.js","webpack:///./src/app/core/redux/reducers/navigation.js","webpack:///./src/app/core/redux/routerMiddleware.js","webpack:///./src/app/core/redux/sagas/index.js","webpack:///./src/app/core/redux/sagas/routing.js","webpack:///external \"loglevel\"","webpack:///./src/app/core/redux/sagas/navigation.js","webpack:///./src/app/App.js","webpack:///(webpack)/buildin/module.js","webpack:///./node_modules/prop-types/factoryWithThrowingShims.js","webpack:///./node_modules/prop-types/lib/ReactPropTypesSecret.js","webpack:///external \"react-router-config\"","webpack:///./src/app/pages/NotFound.js","webpack:///./src/app/core/routes/Status.js","webpack:///./src/app/core/util/ToJs.js","webpack:///./src/app/lib.js","webpack:///./src/server/internalServer.js","webpack:///external \"express\"","webpack:///./src/server/util/displayStartupConfiguration.js","webpack:///./src/server/core/localDns.js","webpack:///external \"evil-dns\"","webpack:///./src/server/util/fetchMyIp.js","webpack:///./src/server/core/reverseProxies.js","webpack:///external \"http-proxy\"","webpack:///./src/server/core/webApp.js","webpack:///external \"fs\"","webpack:///external \"react-dom/server\"","webpack:///external \"react-loadable/webpack\"","webpack:///external \"styled-components\"","webpack:///external \"react-helmet\"","webpack:///external \"serialize-javascript\"","webpack:///external \"minify-css-string\"","webpack:///./src/server/util/types.js","webpack:///external \"browserslist-useragent\""],"names":["ROUTING_PREFIX","GET_ENTRY","SET_ENTRY","SET_NODE","SET_ANCESTORS","SET_ENTRY_ID","SET_NAVIGATION_NOT_FOUND","SET_NAVIGATION_PATH","SET_ROUTE_LOADING","SET_TARGET_PROJECT","SET_ROUTE","CALL_HISTORY_METHOD","ProjectHelper","val","formatter","Intl","NumberFormat","style","currency","minimumFractionDigits","format","e","preventDefault","children","document","getElementById","display","str","replace","letter","index","toLowerCase","toUpperCase","stringToTrim","s","c","RegExp","arr","connector","length","slice","join","toString","composer","fieldName","composerField","filter","type","map","value","uri","work","uriParts","split","part","elem","pos","indexOf","seperator","item","trim","object","forEach","cfi","getComposerContent","component","find","fileSize","kb","Math","ceil","mb","round","parseFloat","pow","toFixed","re","ext","exec","imageUrl","newImageUrl","includes","encodedString","translate_re","translate","nbsp","amp","quot","lt","gt","match","entity","numStr","num","parseInt","String","fromCharCode","event","action","code","keyCode","which","list","keyGetter","Map","key","has","set","get","push","payload","getWebPImageUri","formatedUri","resizeImage","image","height","width","asset","sys","resizeImageUri","paramDelimeter","flattenArray","reduce","acc","concat","api","url","options","fetch","then","response","setTimeout","ok","Error","statusText","json","data","error","dynamicSort","property","sortOrder","substr","a","b","result","randomString","text","possible","i","charAt","floor","random","selectRouteEntry","state","getIn","selectRouteEntryDepends","List","selectRouteEntryEntryId","selectRouteEntryContentTypeId","entry","selectRouteEntrySlug","selectRouteEntryID","selectCurrentPath","selectCurrentProject","selectIsNotFound","selectCurrentAncestors","selectRouteLoading","ACTION_PREFIX","GET_NODE_TREE","SET_NODE_TREE","GET_NODE_TREE_ERROR","getClientConfig","project","config","DELIVERY_API_CONFIG","projectId","window","PROXY_DELIVERY_API","rootUrl","responseHandler","GetClientSideDeliveryApiStatus","currentHostname","location","hostname","GetDeliveryApiStatusFromHostname","endsWith","fixImageUri","Object","keys","some","k","id","userTransforms","transformations","version","versionNo","GetResponseGuids","Ids","language","dataFormat","subIds","GetAllResponseGuids","returnItems","unique","Set","DeliveryApi","query","linkDepth","env","client","Client","create","entries","search","deliveryApiStatus","baseConfig","versionStatus","deliveryApi","CacheNode","next","prev","LruCache","limit","head","tail","size","node","remove","setHead","CachedSearch","request","JSON","stringify","clientConfig","contentTypes","taxonomy","resolveChildren","extendTaxonomyNode","execute","cache","promise","getTaxonomyId","taxonomyLookup","n","parts","cachedSearch","setNotFound","notFound","setNavigationPath","path","staticRoute","withEvents","statePath","setCurrentProject","allowedGroups","setRoute","setRouteEntry","VERSION_PREFIX","SET_VERSION","SET_VERSION_STATUS","hasNavigationTree","selectNavigationRoot","selectNavigationDepends","setVersion","commitRef","buildNo","setVersionStatus","status","selectCommitRef","selectBuildNumber","selectVersionStatus","getTrimmedPath","lastChar","substring","RouteLoader","contentTypeId","isNotFound","routes","matchedStaticRoute","pathname","StaticRoutes","isStaticRoute","trimmedPath","setPath","serverPath","route","p","startsWith","MatchedComponent","ContentTypeMappings","contentTypeID","propTypes","PropTypes","objectOf","array","string","bool","func","mapStateToProps","mapDispatchToProps","module","selectedHistory","createBrowserHistory","createMemoryHistory","history","browserHistory","servers","SERVERS","alias","publicUri","PUBLIC_URI","projects","PROJECTS","pickProject","featureReducers","initialState","thunkMiddleware","thunk","reduxDevToolsMiddleware","f","__REDUX_DEVTOOLS_EXTENSION__","sagaMiddleware","middleware","applyMiddleware","reducers","navigation","NavigationReducer","routing","RoutingReducer","VersionReducer","combinedReducers","store","runSaga","run","close","dispatch","END","currentPath","currentNode","currentProject","entryID","entryDepends","currentNodeAncestors","ancestors","depends","loading","contensisVersionStatus","root","treeDepends","isError","isReady","nodes","routerMiddleware","method","args","featureSagas","rootSaga","subSagas","routingSagas","navigationSagas","setRouteSaga","getRouteSaga","do404","onRouteLoad","routeEntry","fetchNode","toJS","pathNode","scroll","top","getClient","getRoot","entryFields","entryLinkDepth","splitPath","entryGuid","previewEntry","getAncestors","onRouteLoaded","log","stack","ensureNodeTreeSaga","deliveryApiVersionStatus","depth","AppRoot","props","NotFound","Status","staticContext","number","isRequired","element","WrappedComponent","wrappedComponentProps","KEY","VALUE","propsJS","newProps","wrappedComponentProp","Iterable","isIterable","internalServer","require","exports","app","httpProxy","apiProxy","start","ReactApp","ServerFeatures","disable","reverseProxyPaths","use","express","maxage","on","Loadable","preloadAll","server","listen","console","info","emit","DisplayStartupConfiguration","apiConfig","localDns","disableDnsChanges","configureLocalEndpoint","evilDns","add","internalVip","internalIp","fetchMyIp","headers","ipJson","ip","createProxyServer","reverseProxies","deliveryApiProxy","all","req","res","target","iis","web","changeOrigin","cms","addStandardHeaders","packagejson","navDepends","recordDepends","allDepends","allDependsHeaderValue","name","header","addVarnishAuthenticationHeaders","setHeader","stateEntry","readFileSync","fs","loadBundleData","build","stats","templates","bundle","parse","templateHTML","html","templateHTMLStatic","templateHTMLFragment","fragment","webApp","withReducers","withSagas","versionData","dynamicPaths","disableSsrRedux","bundles","legacy","modern","versionInfo","originalUrl","useragent","isModernUser","allowHigherVersions","accessMethod","isDynamicNormalised","dynamic","onlyDynamic","isReduxRequestNormalised","redux","isFragmentNormalised","isStaticNormalised","DYNAMIC","AccessMethods","REDUX","FRAGMENT","STATIC","context","initialEntries","versionStatusFromHostname","groups","modules","jsx","moduleName","isDynamicHint","dynamicBundles","dynamicBundleScripts","publicPath","responseHtmlDynamic","send","toPromise","sheet","ServerStyleSheet","collectStyles","helmet","Helmet","renderStatic","rewind","title","metadata","meta","redirect","reduxState","getState","styleTags","getStyleTags","bundleScripts","serialisedReduxData","responseHTML","err"],"mappings":"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","file":"zengenti-isomorphic-base.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"immutable\"), require(\"react\"), require(\"react-router-dom\"), require(\"regenerator-runtime\"), require(\"react-hot-loader\"), require(\"react-redux\"), require(\"@redux-saga/core/effects\"), require(\"react-loadable\"), require(\"isomorphic-fetch\"), require(\"history\"), require(\"contensis-delivery-api\"), require(\"redux\"), require(\"redux-immutable\"), require(\"redux-thunk\"), require(\"redux-saga\"), require(\"loglevel\"), require(\"react-router-config\"), require(\"express\"), require(\"evil-dns\"), require(\"http-proxy\"), require(\"react-dom/server\"), require(\"react-loadable/webpack\"), require(\"styled-components\"), require(\"react-helmet\"), require(\"serialize-javascript\"), require(\"minify-css-string\"), require(\"browserslist-useragent\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"immutable\", \"react\", \"react-router-dom\", \"regenerator-runtime\", \"react-hot-loader\", \"react-redux\", \"@redux-saga/core/effects\", \"react-loadable\", \"isomorphic-fetch\", \"history\", \"contensis-delivery-api\", \"redux\", \"redux-immutable\", \"redux-thunk\", \"redux-saga\", \"loglevel\", \"react-router-config\", \"express\", \"evil-dns\", \"http-proxy\", \"react-dom/server\", \"react-loadable/webpack\", \"styled-components\", \"react-helmet\", \"serialize-javascript\", \"minify-css-string\", \"browserslist-useragent\"], factory);\n\telse {\n\t\tvar a = typeof exports === 'object' ? factory(require(\"immutable\"), require(\"react\"), require(\"react-router-dom\"), require(\"regenerator-runtime\"), require(\"react-hot-loader\"), require(\"react-redux\"), require(\"@redux-saga/core/effects\"), require(\"react-loadable\"), require(\"isomorphic-fetch\"), require(\"history\"), require(\"contensis-delivery-api\"), require(\"redux\"), require(\"redux-immutable\"), require(\"redux-thunk\"), require(\"redux-saga\"), require(\"loglevel\"), require(\"react-router-config\"), require(\"express\"), require(\"evil-dns\"), require(\"http-proxy\"), require(\"react-dom/server\"), require(\"react-loadable/webpack\"), require(\"styled-components\"), require(\"react-helmet\"), require(\"serialize-javascript\"), require(\"minify-css-string\"), require(\"browserslist-useragent\")) : factory(root[\"immutable\"], root[\"react\"], root[\"react-router-dom\"], root[\"regenerator-runtime\"], root[\"react-hot-loader\"], root[\"react-redux\"], root[\"@redux-saga/core/effects\"], root[\"react-loadable\"], root[\"isomorphic-fetch\"], root[\"history\"], root[\"contensis-delivery-api\"], root[\"redux\"], root[\"redux-immutable\"], root[\"redux-thunk\"], root[\"redux-saga\"], root[\"loglevel\"], root[\"react-router-config\"], root[\"express\"], root[\"evil-dns\"], root[\"http-proxy\"], root[\"react-dom/server\"], root[\"react-loadable/webpack\"], root[\"styled-components\"], root[\"react-helmet\"], root[\"serialize-javascript\"], root[\"minify-css-string\"], root[\"browserslist-useragent\"]);\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(global, function(__WEBPACK_EXTERNAL_MODULE__2__, __WEBPACK_EXTERNAL_MODULE__3__, __WEBPACK_EXTERNAL_MODULE__16__, __WEBPACK_EXTERNAL_MODULE__21__, __WEBPACK_EXTERNAL_MODULE__25__, __WEBPACK_EXTERNAL_MODULE__26__, __WEBPACK_EXTERNAL_MODULE__29__, __WEBPACK_EXTERNAL_MODULE__32__, __WEBPACK_EXTERNAL_MODULE__34__, __WEBPACK_EXTERNAL_MODULE__39__, __WEBPACK_EXTERNAL_MODULE__41__, __WEBPACK_EXTERNAL_MODULE__43__, __WEBPACK_EXTERNAL_MODULE__44__, __WEBPACK_EXTERNAL_MODULE__45__, __WEBPACK_EXTERNAL_MODULE__46__, __WEBPACK_EXTERNAL_MODULE__53__, __WEBPACK_EXTERNAL_MODULE__59__, __WEBPACK_EXTERNAL_MODULE__65__, __WEBPACK_EXTERNAL_MODULE__68__, __WEBPACK_EXTERNAL_MODULE__71__, __WEBPACK_EXTERNAL_MODULE__74__, __WEBPACK_EXTERNAL_MODULE__75__, __WEBPACK_EXTERNAL_MODULE__76__, __WEBPACK_EXTERNAL_MODULE__77__, __WEBPACK_EXTERNAL_MODULE__78__, __WEBPACK_EXTERNAL_MODULE__79__, __WEBPACK_EXTERNAL_MODULE__81__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 63);\n","function _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nmodule.exports = _interopRequireDefault;","const ROUTING_PREFIX = '@ROUTING/';\r\nexport const GET_ENTRY = `${ROUTING_PREFIX}_GET_ENTRY`;\r\nexport const SET_ENTRY = `${ROUTING_PREFIX}_SET_ENTRY`;\r\nexport const SET_NODE = `${ROUTING_PREFIX}_SET_NODE`;\r\nexport const SET_ANCESTORS = `${ROUTING_PREFIX}_SET_ANCESTORS`;\r\nexport const SET_ENTRY_ID = `${ROUTING_PREFIX}_SET_ENTRY_ID`;\r\n\r\nexport const SET_NAVIGATION_NOT_FOUND = `${ROUTING_PREFIX}_SET_NOT_FOUND`;\r\nexport const SET_NAVIGATION_PATH = `${ROUTING_PREFIX}_SET_NAVIGATION_PATH`;\r\nexport const SET_ROUTE_LOADING = `${ROUTING_PREFIX}_SET_ROUTE_LOADING`;\r\n\r\nexport const SET_TARGET_PROJECT = `${ROUTING_PREFIX}_SET_TARGET_PROJECT`;\r\n\r\nexport const SET_ROUTE = `${ROUTING_PREFIX}_SET_ROUTE`;\r\nexport const CALL_HISTORY_METHOD = `${ROUTING_PREFIX}_CALL_HISTORY_METHOD`;\r\n","module.exports = __WEBPACK_EXTERNAL_MODULE__2__;","module.exports = __WEBPACK_EXTERNAL_MODULE__3__;","function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nmodule.exports = _defineProperty;","module.exports = require(\"regenerator-runtime\");\n","function _getRequireWildcardCache() {\n  if (typeof WeakMap !== \"function\") return null;\n  var cache = new WeakMap();\n\n  _getRequireWildcardCache = function _getRequireWildcardCache() {\n    return cache;\n  };\n\n  return cache;\n}\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  }\n\n  var cache = _getRequireWildcardCache();\n\n  if (cache && cache.has(obj)) {\n    return cache.get(obj);\n  }\n\n  var newObj = {};\n\n  if (obj != null) {\n    var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;\n\n    for (var key in obj) {\n      if (Object.prototype.hasOwnProperty.call(obj, key)) {\n        var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;\n\n        if (desc && (desc.get || desc.set)) {\n          Object.defineProperty(newObj, key, desc);\n        } else {\n          newObj[key] = obj[key];\n        }\n      }\n    }\n  }\n\n  newObj[\"default\"] = obj;\n\n  if (cache) {\n    cache.set(obj, newObj);\n  }\n\n  return newObj;\n}\n\nmodule.exports = _interopRequireWildcard;","export default class ProjectHelper {\r\n  static currencyFormat(val) {\r\n    const formatter = new Intl.NumberFormat('en-GB', {\r\n      style: 'currency',\r\n      currency: 'GBP',\r\n      minimumFractionDigits: 0,\r\n    });\r\n    return formatter.format(val);\r\n  }\r\n\r\n  static showChildren(e) {\r\n    e.preventDefault;\r\n\r\n    let children = document.getElementById(e);\r\n    if (children.style.display == 'block') {\r\n      children.style.display = 'none';\r\n    } else {\r\n      children.style.display = 'block';\r\n    }\r\n  }\r\n\r\n  static camelize(str) {\r\n    return str\r\n      .replace(/(?:^\\w|[A-Z]|\\b\\w)/g, (letter, index) => {\r\n        return index == 0 ? letter.toLowerCase() : letter.toUpperCase();\r\n      })\r\n      .replace(/\\s+/g, '');\r\n  }\r\n\r\n  static ltrim(stringToTrim) {\r\n    return stringToTrim.replace(/^\\s+/, '');\r\n  }\r\n\r\n  static trim(s, c = ' ') {\r\n    if (c === ']') c = '\\\\]';\r\n    if (c === '\\\\') c = '\\\\\\\\';\r\n    return s.replace(new RegExp('^[' + c + ']+|[' + c + ']+$', 'g'), '');\r\n  }\r\n\r\n  static ArrayToSentence(arr, connector = 'and') {\r\n    return arr.length > 1\r\n      ? arr.slice(0, -1).join(', ') + ' ' + connector + ' ' + arr.slice(-1)\r\n      : arr.toString();\r\n  }\r\n\r\n  static GetComposerContent(composer, fieldName) {\r\n    if (composer) {\r\n      let composerField = composer\r\n        .filter(c => c.type === fieldName)\r\n        .map(c => {\r\n          return c.value;\r\n        });\r\n      return composerField;\r\n    }\r\n    return null;\r\n  }\r\n\r\n  static dedupeUriSlashes(uri) {\r\n    const work = uri.replace('//', '~~'); // replace first instance of double slash with tildes to switch out again for slashes later\r\n    const uriParts = work.split('/').filter(part => part); // split the working url into parts and filter any null parts\r\n    return uriParts.join('/').replace('~~', '//');\r\n  }\r\n\r\n  static dedupeArray(arr) {\r\n    // remove duplicates from simple array\r\n    return arr.filter((elem, pos, arr) => arr.indexOf(elem) == pos);\r\n  }\r\n\r\n  static stringToArray(s, seperator = ',') {\r\n    return typeof s === 'string'\r\n      ? s.split(seperator).map(item => ProjectHelper.trim(item))\r\n      : s;\r\n  }\r\n\r\n  static composedFieldToObject(composer) {\r\n    // convert array of [ { type: 'type', value: composerItem } ]\r\n    // to plain object of { type: composerItem }\r\n    const object = {};\r\n    composer.forEach(\r\n      cfi =>\r\n        (object[cfi.type] = ProjectHelper.getComposerContent(\r\n          cfi.type,\r\n          composer\r\n        ))\r\n    );\r\n    return object;\r\n  }\r\n\r\n  static getComposerContent(type, composer) {\r\n    const component = composer.find(c => c.type === type);\r\n    return component && component.value;\r\n  }\r\n\r\n  static getFileSize(fileSize) {\r\n    const kb = Math.ceil(fileSize * 0.0009765625);\r\n    const mb =\r\n      Math.round(\r\n        parseFloat((fileSize * 0.00000095367432 * Math.pow(10, 2)).toFixed(2))\r\n      ) / Math.pow(10, 2);\r\n\r\n    if (kb < 1000) {\r\n      return kb + 'KB';\r\n    }\r\n    return mb + 'MB';\r\n  }\r\n\r\n  static getFileExtension(uri) {\r\n    const re = /(?:\\.([^.]+))?$/;\r\n    const ext = re.exec(uri)[1];\r\n\r\n    if (ext) {\r\n      return ext.toUpperCase();\r\n    }\r\n    return '';\r\n  }\r\n  static renderImageAsWebP(imageUrl) {\r\n    //Set new url to current url by default\r\n    let newImageUrl = imageUrl;\r\n    //First check if image has has webp referenced in url\r\n    if (imageUrl && !imageUrl.includes('webp')) {\r\n      //Check if image already has transformations\r\n      if (!imageUrl.includes('?')) {\r\n        //If not load image as webp\r\n        newImageUrl = imageUrl + '?f=webp';\r\n      } else {\r\n        //Otherwise append webp format to existing transformations\r\n        newImageUrl = imageUrl + '&f=webp';\r\n      }\r\n    }\r\n    return newImageUrl;\r\n  }\r\n\r\n  static decodeEntities(encodedString) {\r\n    var translate_re = /&(nbsp|amp|quot|lt|gt);/g;\r\n    var translate = {\r\n      nbsp: ' ',\r\n      amp: '&',\r\n      quot: '\"',\r\n      lt: '<',\r\n      gt: '>',\r\n    };\r\n    return encodedString\r\n      .replace(translate_re, function(match, entity) {\r\n        return translate[entity];\r\n      })\r\n      .replace(/&#(\\d+);/gi, function(match, numStr) {\r\n        var num = parseInt(numStr, 10);\r\n        return String.fromCharCode(num);\r\n      });\r\n  }\r\n\r\n  static keyPress(event, action) {\r\n    var code = event.keyCode || event.which;\r\n    if (code === 13) {\r\n      action;\r\n    }\r\n  }\r\n\r\n  static GroupBy(list, keyGetter) {\r\n    const map = new Map();\r\n    list.forEach(item => {\r\n      const key = keyGetter(item);\r\n      if (!map.has(key)) {\r\n        map.set(key, [item]);\r\n      } else {\r\n        map.get(key).push(item);\r\n      }\r\n    });\r\n    return map;\r\n  }\r\n}\r\nexport function action(type, payload = {}) {\r\n  return { type, ...payload };\r\n}\r\n\r\nexport const getWebPImageUri = uri => {\r\n  let formatedUri = uri;\r\n  if (uri.indexOf('.gif') == -1) {\r\n    if (uri.indexOf('f=') == -1 && uri.indexOf('format=') == -1) {\r\n      if (uri.indexOf('?') > -1) {\r\n        formatedUri = `${uri}&f=webp`;\r\n      } else {\r\n        formatedUri = `${uri}?f=webp`;\r\n      }\r\n    }\r\n    if (\r\n      formatedUri.indexOf('q=') == -1 &&\r\n      formatedUri.indexOf('quality=') == -1\r\n    ) {\r\n      if (formatedUri.indexOf('?') > -1) {\r\n        formatedUri = `${formatedUri}&q=70`;\r\n      } else {\r\n        formatedUri = `${formatedUri}?q=70`;\r\n      }\r\n    }\r\n  }\r\n  return formatedUri;\r\n};\r\n\r\nexport const resizeImage = (image, height, width) => {\r\n  if (image.asset && image.asset.sys && image.asset.sys.uri) {\r\n    image.asset.sys.uri = resizeImageUri(image.asset.sys.uri, height, width);\r\n  }\r\n};\r\nexport const resizeImageUri = (uri, height, width) => {\r\n  let formatedUri = uri;\r\n  let paramDelimeter = '?';\r\n  if (uri.indexOf('?') > -1) {\r\n    paramDelimeter = '&';\r\n  }\r\n  if (width) {\r\n    if (\r\n      formatedUri.indexOf('w=') == -1 &&\r\n      formatedUri.indexOf('width=') == -1\r\n    ) {\r\n      formatedUri = `${formatedUri}${paramDelimeter}w=${width}`;\r\n      paramDelimeter = '&';\r\n    }\r\n  }\r\n  if (height) {\r\n    if (\r\n      formatedUri.indexOf('h=') == -1 &&\r\n      formatedUri.indexOf('height=') == -1\r\n    ) {\r\n      formatedUri = `${formatedUri}${paramDelimeter}h=${height}`;\r\n    }\r\n  }\r\n\r\n  return formatedUri;\r\n};\r\n\r\nexport function flattenArray(arr) {\r\n  // flatten arrays inside the supplied array and\r\n  // remove duplicates from the result\r\n  return arr\r\n    .reduce((acc, val) => acc.concat(val), [])\r\n    .filter((elem, pos, arr) => arr.indexOf(elem) == pos);\r\n}\r\n\r\nexport async function api(url, options) {\r\n  return fetch(url, options)\r\n    .then(async response => {\r\n      setTimeout(() => null, 0);\r\n      if (!response.ok) {\r\n        throw new Error(response.statusText);\r\n      }\r\n      return response.json().then(data => data);\r\n    })\r\n    .catch(error => {\r\n      //console.log(error);\r\n      throw error;\r\n    });\r\n}\r\n\r\nexport function dynamicSort(property) {\r\n  var sortOrder = 1;\r\n  if (property[0] === '-') {\r\n    sortOrder = -1;\r\n    property = property.substr(1);\r\n  }\r\n  return function(a, b) {\r\n    /* next line works with strings and numbers,\r\n     * and you may want to customize it to your needs\r\n     */\r\n    var result =\r\n      a[property] < b[property] ? -1 : a[property] > b[property] ? 1 : 0;\r\n    return result * sortOrder;\r\n  };\r\n}\r\n\r\nexport const randomString = length => {\r\n  let text = '';\r\n  const possible =\r\n    'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\r\n  for (var i = 0; i < length; i++) {\r\n    text += possible.charAt(Math.floor(Math.random() * possible.length));\r\n  }\r\n  return text;\r\n};\r\n","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nmodule.exports = _classCallCheck;","import { List, Map } from 'immutable';\r\n\r\nexport const selectRouteEntry = state => {\r\n  return state.getIn(['routing', 'entry'], Map({}));\r\n};\r\nexport const selectRouteEntryDepends = state => {\r\n  return state.getIn(['routing', 'entryDepends'], new List());\r\n};\r\nexport const selectRouteEntryEntryId = state => {\r\n  return state.getIn(['routing', 'entry', 'sys', 'id'], null);\r\n};\r\nexport const selectRouteEntryContentTypeId = state => {\r\n  const entry = selectRouteEntry(state);\r\n  return entry && entry.getIn(['sys', 'contentTypeId'], null);\r\n};\r\nexport const selectRouteEntrySlug = state => {\r\n  return state.getIn(['routing', 'entry', 'sys', 'slug'], null);\r\n};\r\nexport const selectRouteEntryID = state => {\r\n  return state.getIn(['routing', 'entryID']);\r\n};\r\nexport const selectCurrentPath = state => {\r\n  return state.getIn(['routing', 'currentPath']);\r\n};\r\nexport const selectCurrentProject = state => {\r\n  return state.getIn(['routing', 'currentProject']);\r\n};\r\nexport const selectIsNotFound = state => {\r\n  return state.getIn(['routing', 'notFound']);\r\n};\r\nexport const selectCurrentAncestors = state => {\r\n  return state.getIn(['routing', 'currentNodeAncestors']);\r\n};\r\nexport const selectRouteLoading = state => {\r\n  return state.getIn(['routing', 'routeLoading']);\r\n};\r\n","const ACTION_PREFIX = '@NAVIGATION/';\r\nexport const GET_NODE_TREE = `${ACTION_PREFIX}_GET_NODE_TREE`;\r\nexport const SET_NODE_TREE = `${ACTION_PREFIX}_SET_NODE_TREE`;\r\nexport const GET_NODE_TREE_ERROR = `${ACTION_PREFIX}_GET_NODE_TREE_ERROR`;\r\n","import { Client } from 'contensis-delivery-api';\r\n\r\nconst getClientConfig = project => {\r\n  let config = DELIVERY_API_CONFIG; /* global DELIVERY_API_CONFIG */\r\n  if (project) {\r\n    config.projectId = project;\r\n  }\r\n\r\n  if (\r\n    typeof window != 'undefined' &&\r\n    PROXY_DELIVERY_API /* global PROXY_DELIVERY_API */\r\n  ) {\r\n    // ensure a relative url is used to bypass the need for CORS (separate OPTIONS calls)\r\n    config.rootUrl = '';\r\n    config.responseHandler = {\r\n      404: () => null,\r\n    };\r\n  }\r\n  return config;\r\n};\r\nexport * from 'contensis-delivery-api';\r\n\r\n// This should only be executed on the client as it relies on the window.\r\nexport const GetClientSideDeliveryApiStatus = () => {\r\n  if (typeof window != 'undefined') {\r\n    const currentHostname = window.location.hostname;\r\n    return GetDeliveryApiStatusFromHostname(currentHostname);\r\n  }\r\n  return null;\r\n};\r\n\r\nexport const GetDeliveryApiStatusFromHostname = currentHostname => {\r\n  if (currentHostname.indexOf('localhost') > -1) return 'latest';\r\n\r\n  if (currentHostname.endsWith('contensis.cloud')) {\r\n    if (currentHostname.indexOf('preview.') > -1) {\r\n      return 'latest';\r\n    } else {\r\n      return 'published';\r\n    }\r\n  }\r\n\r\n  if (currentHostname.endsWith('cloud.contensis.com')) {\r\n    if (currentHostname.indexOf('preview-') > -1) {\r\n      return 'latest';\r\n    } else {\r\n      return 'published';\r\n    }\r\n  }\r\n\r\n  return 'published';\r\n};\r\n\r\nexport const fixImageUri = object => {\r\n  Object.keys(object).some(function(k) {\r\n    if (k === 'asset') {\r\n      //Should always have an ID, but lets check...\r\n      if (object[k].sys && object[k].sys.id) {\r\n        // We can exclude assets here i think... ?\r\n        let userTransforms = object[k].transformations\r\n          ? `&${object[k].transformations}`\r\n          : '';\r\n\r\n        object[k].sys.uri = `/api/image/${\r\n          object[k].sys.id\r\n        }?invalidationKey=${object[k].sys &&\r\n          object[k].sys.version.versionNo}${userTransforms}`;\r\n      }\r\n      return false;\r\n    }\r\n    if (object[k] && typeof object[k] === 'object') {\r\n      fixImageUri(object[k]);\r\n      return false;\r\n    }\r\n  });\r\n};\r\n\r\nexport const GetResponseGuids = object => {\r\n  let Ids = [];\r\n  Object.keys(object).some(function(k) {\r\n    if (k === 'sys') {\r\n      //Should always have an ID, but lets check...\r\n      if (object[k].id && object[k].language) {\r\n        // We can exclude assets here i think... ?\r\n        if (object[k].dataFormat) {\r\n          if (object[k].dataFormat !== 'asset') {\r\n            Ids.push(`${object[k].id}_${object[k].language.toLowerCase()}`);\r\n          }\r\n        } else {\r\n          // If we don't have a dataformat add it anyhow, for safety\r\n          Ids.push(`${object[k].id}_${object[k].language.toLowerCase()}`);\r\n        }\r\n      }\r\n      return false;\r\n    }\r\n    if (object[k] && typeof object[k] === 'object') {\r\n      let subIds = GetResponseGuids(object[k]);\r\n      if (subIds.length > 0) {\r\n        Ids.push(...subIds);\r\n      }\r\n      return false;\r\n    }\r\n  });\r\n  return Ids;\r\n};\r\n\r\nexport const GetAllResponseGuids = object => {\r\n  if (!object) return [];\r\n  let returnItems = GetResponseGuids(object);\r\n  let unique = [...new Set(returnItems)];\r\n  return unique;\r\n};\r\nclass DeliveryApi {\r\n  search(query, linkDepth, project, env) {\r\n    const client = Client.create(getClientConfig(project, env));\r\n    return client.entries.search(query, linkDepth || 1);\r\n  }\r\n\r\n  getClient(deliveryApiStatus = 'published', project, env) {\r\n    const baseConfig = getClientConfig(project, env);\r\n    baseConfig.versionStatus = deliveryApiStatus;\r\n    return Client.create(baseConfig);\r\n  }\r\n  getEntry(id, linkDepth = 1, deliveryApiStatus = 'published', project, env) {\r\n    const baseConfig = getClientConfig(project, env);\r\n    baseConfig.versionStatus = deliveryApiStatus;\r\n    const client = Client.create(baseConfig);\r\n    // return client.entries.get(id, linkDepth);\r\n    return client.entries.get({ id, linkDepth });\r\n  }\r\n}\r\n\r\nexport const deliveryApi = new DeliveryApi();\r\n\r\nclass CacheNode {\r\n  constructor(key, value) {\r\n    this.key = key;\r\n    this.value = value;\r\n    this.next = null;\r\n    this.prev = null;\r\n  }\r\n}\r\n\r\nclass LruCache {\r\n  constructor(limit = 100) {\r\n    this.map = {};\r\n    this.head = null;\r\n    this.tail = null;\r\n    this.limit = limit || 100;\r\n    this.size = 0;\r\n  }\r\n\r\n  get(key) {\r\n    if (this.map[key]) {\r\n      let value = this.map[key].value;\r\n      let node = new CacheNode(key, value);\r\n      this.remove(key);\r\n      this.setHead(node);\r\n      return value;\r\n    }\r\n  }\r\n\r\n  set(key, value) {\r\n    let node = new CacheNode(key, value);\r\n    if (this.map[key]) {\r\n      this.remove(key);\r\n    } else {\r\n      if (this.size >= this.limit) {\r\n        delete this.map[this.tail.key];\r\n        this.size--;\r\n        this.tail = this.tail.prev;\r\n        this.tail.next = null;\r\n      }\r\n    }\r\n    this.setHead(node);\r\n  }\r\n\r\n  setHead(node) {\r\n    node.next = this.head;\r\n    node.prev = null;\r\n    if (this.head) {\r\n      this.head.prev = node;\r\n    }\r\n    this.head = node;\r\n    if (!this.tail) {\r\n      this.tail = node;\r\n    }\r\n    this.size++;\r\n    this.map[node.key] = node;\r\n  }\r\n\r\n  remove(key) {\r\n    let node = this.map[key];\r\n    if (node.prev) {\r\n      node.prev.next = node.next;\r\n    } else {\r\n      this.head = node.next;\r\n    }\r\n    if (node.next) {\r\n      node.next.prev = node.prev;\r\n    } else {\r\n      this.tail = node.prev;\r\n    }\r\n    delete this.map[key];\r\n    this.size--;\r\n  }\r\n}\r\n\r\nclass CachedSearch {\r\n  cache = new LruCache();\r\n  taxonomyLookup = {};\r\n\r\n  search(query, linkDepth, project, env) {\r\n    const client = Client.create(getClientConfig(project, env));\r\n    return this.request(\r\n      project + JSON.stringify(query) + linkDepth.toString(),\r\n      () => client.entries.search(query, linkDepth)\r\n    );\r\n  }\r\n\r\n  get(id, linkDepth, versionStatus, project, env) {\r\n    const client = Client.create(getClientConfig(project, env));\r\n    client.clientConfig.versionStatus = versionStatus;\r\n    return this.request(id, () => client.entries.get({ id, linkDepth }));\r\n  }\r\n\r\n  getContentType(id, project, env) {\r\n    const client = Client.create(getClientConfig(project, env));\r\n    return this.request(`[CONTENT TYPE] ${id} ${project}`, () =>\r\n      client.contentTypes.get(id)\r\n    );\r\n  }\r\n\r\n  getTaxonomyNode(key, project, env) {\r\n    const client = Client.create(getClientConfig(project, env));\r\n    return this.request(`[TAXONOMY NODE] ${key}`, () =>\r\n      client.taxonomy\r\n        .resolveChildren(key)\r\n        .then(node => this.extendTaxonomyNode(node))\r\n    );\r\n  }\r\n\r\n  request(key, execute) {\r\n    if (!this.cache.get(key) || typeof window == 'undefined') {\r\n      let promise = execute();\r\n      this.cache.set(key, promise);\r\n      promise.catch(() => {\r\n        this.cache.remove(key);\r\n      });\r\n    }\r\n    return this.cache.get(key);\r\n  }\r\n\r\n  extendTaxonomyNode(node) {\r\n    let id = this.getTaxonomyId(node);\r\n    this.taxonomyLookup[id] = node.key;\r\n    return {\r\n      ...node,\r\n      id,\r\n      children: node.children\r\n        ? node.children.map(n => this.extendTaxonomyNode(n))\r\n        : null,\r\n    };\r\n  }\r\n\r\n  getTaxonomyId(node) {\r\n    if (node.key) {\r\n      let parts = node.key.split('/');\r\n      return parts[parts.length - 1];\r\n    }\r\n    return '';\r\n  }\r\n\r\n  getTaxonomyKey(id) {\r\n    return this.taxonomyLookup[id];\r\n  }\r\n}\r\n\r\nexport const cachedSearch = new CachedSearch();\r\n","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nmodule.exports = _createClass;","import { action } from '~/core/util/helpers';\r\nimport {\r\n  SET_ENTRY,\r\n  SET_NAVIGATION_NOT_FOUND,\r\n  SET_NAVIGATION_PATH,\r\n  SET_TARGET_PROJECT,\r\n  SET_ROUTE,\r\n} from '~/core/redux/types/routing';\r\n\r\nexport const setNotFound = notFound =>\r\n  action(SET_NAVIGATION_NOT_FOUND, { notFound });\r\nexport const setNavigationPath = (\r\n  path,\r\n  location,\r\n  staticRoute,\r\n  withEvents,\r\n  statePath\r\n) =>\r\n  action(SET_NAVIGATION_PATH, {\r\n    path,\r\n    location,\r\n    staticRoute,\r\n    withEvents,\r\n    statePath,\r\n  });\r\nexport const setCurrentProject = (project, allowedGroups) =>\r\n  action(SET_TARGET_PROJECT, { project, allowedGroups });\r\nexport const setRoute = (path, state) => action(SET_ROUTE, { path, state });\r\nexport const setRouteEntry = entry => action(SET_ENTRY, { entry });\r\n","var arrayWithoutHoles = require(\"./arrayWithoutHoles\");\n\nvar iterableToArray = require(\"./iterableToArray\");\n\nvar nonIterableSpread = require(\"./nonIterableSpread\");\n\nfunction _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || nonIterableSpread();\n}\n\nmodule.exports = _toConsumableArray;","const VERSION_PREFIX = '@VERSION/';\r\nexport const SET_VERSION = `${VERSION_PREFIX}SET_VERSION`;\r\nexport const SET_VERSION_STATUS = `${VERSION_PREFIX}SET_VERSION_STATUS`;\r\n","module.exports = __WEBPACK_EXTERNAL_MODULE__16__;","var arrayWithHoles = require(\"./arrayWithHoles\");\n\nvar iterableToArrayLimit = require(\"./iterableToArrayLimit\");\n\nvar nonIterableRest = require(\"./nonIterableRest\");\n\nfunction _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || nonIterableRest();\n}\n\nmodule.exports = _slicedToArray;","function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nmodule.exports = _arrayWithHoles;","function _iterableToArrayLimit(arr, i) {\n  if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === \"[object Arguments]\")) {\n    return;\n  }\n\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nmodule.exports = _iterableToArrayLimit;","function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}\n\nmodule.exports = _nonIterableRest;","module.exports = __WEBPACK_EXTERNAL_MODULE__21__;","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nfunction _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}\n\nmodule.exports = _asyncToGenerator;","export * from '@redux-saga/core/effects';\n","export const hasNavigationTree = state => {\r\n  return state.getIn(['navigation', 'isReady']);\r\n};\r\n\r\nexport const selectNavigationRoot = state => {\r\n  return state.getIn(['navigation', 'root']);\r\n};\r\n\r\nexport const selectNavigationDepends = state => {\r\n  return state.getIn(['navigation', 'treeDepends']);\r\n};\r\n","module.exports = __WEBPACK_EXTERNAL_MODULE__25__;","module.exports = __WEBPACK_EXTERNAL_MODULE__26__;","function _typeof2(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof2 = function _typeof2(obj) { return typeof obj; }; } else { _typeof2 = function _typeof2(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof2(obj); }\n\nfunction _typeof(obj) {\n  if (typeof Symbol === \"function\" && _typeof2(Symbol.iterator) === \"symbol\") {\n    module.exports = _typeof = function _typeof(obj) {\n      return _typeof2(obj);\n    };\n  } else {\n    module.exports = _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : _typeof2(obj);\n    };\n  }\n\n  return _typeof(obj);\n}\n\nmodule.exports = _typeof;","import { action } from '~/core/util/helpers';\r\nimport { SET_VERSION, SET_VERSION_STATUS } from '~/core/redux/types/version';\r\n\r\nexport const setVersion = (commitRef, buildNo) =>\r\n  action(SET_VERSION, { commitRef, buildNo });\r\n\r\nexport const setVersionStatus = status =>\r\n  action(SET_VERSION_STATUS, { status });\r\n","module.exports = __WEBPACK_EXTERNAL_MODULE__29__;","export const selectCommitRef = state => {\r\n  return state.getIn(['version', 'commitRef']);\r\n};\r\nexport const selectBuildNumber = state => {\r\n  return state.getIn(['version', 'buildNo']);\r\n};\r\n\r\nexport const selectVersionStatus = state => {\r\n  return state.getIn(['version', 'contensisVersionStatus']);\r\n};\r\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nif (process.env.NODE_ENV !== 'production') {\n  var ReactIs = require('react-is');\n\n  // By explicitly using `prop-types` you are opting into new development behavior.\n  // http://fb.me/prop-types-in-prod\n  var throwOnDirectAccess = true;\n  module.exports = require('./factoryWithTypeCheckers')(ReactIs.isElement, throwOnDirectAccess);\n} else {\n  // By explicitly using `prop-types` you are opting into new production behavior.\n  // http://fb.me/prop-types-in-prod\n  module.exports = require('./factoryWithThrowingShims')();\n}\n","module.exports = __WEBPACK_EXTERNAL_MODULE__32__;","import React, { useEffect } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { connect } from 'react-redux';\r\nimport { hot } from 'react-hot-loader';\r\nimport { Redirect, useLocation } from 'react-router-dom';\r\nimport { renderRoutes, matchRoutes } from 'react-router-config';\r\n\r\nimport {\r\n  selectRouteEntry,\r\n  selectRouteEntryContentTypeId,\r\n  selectIsNotFound,\r\n  selectCurrentProject,\r\n  selectCurrentPath,\r\n} from '~/core/redux/selectors/routing';\r\nimport { setNavigationPath } from '~/core/redux/actions/routing';\r\nimport NotFound from '~/pages/NotFound';\r\n\r\nimport { Status } from './Status';\r\nimport { toJS } from '../util/ToJs';\r\n\r\nconst getTrimmedPath = path => {\r\n  if (path !== '/') {\r\n    const lastChar = path[path.length - 1];\r\n    if (lastChar == '/') {\r\n      return path.substring(0, path.length - 1);\r\n    }\r\n  }\r\n  return path;\r\n};\r\n\r\nconst RouteLoader = ({\r\n  statePath,\r\n  projectId,\r\n  contentTypeId,\r\n  entry,\r\n  isNotFound,\r\n  setNavigationPath,\r\n  routes,\r\n  //location,\r\n  //history,\r\n  withEvents,\r\n}) => {\r\n  const location = useLocation();\r\n  // Match any Static Routes a developer has defined\r\n  const matchedStaticRoute = pathname =>\r\n    matchRoutes(\r\n      routes.StaticRoutes,\r\n      typeof window != 'undefined' ? window.location.pathname : pathname\r\n    );\r\n  const isStaticRoute = pathname => matchedStaticRoute(pathname).length > 0;\r\n\r\n  const trimmedPath = getTrimmedPath(location.pathname);\r\n\r\n  const setPath = () => {\r\n    const staticRoute =\r\n      isStaticRoute(trimmedPath) && matchedStaticRoute(trimmedPath)[0];\r\n    let serverPath = null;\r\n    if (staticRoute) {\r\n      serverPath = staticRoute.route.path\r\n        .split('/')\r\n        .filter(p => !p.startsWith(':'))\r\n        .join('/');\r\n    }\r\n\r\n    setNavigationPath(\r\n      serverPath || trimmedPath,\r\n      location,\r\n      staticRoute,\r\n      withEvents,\r\n      statePath\r\n    );\r\n  };\r\n\r\n  if (typeof window == 'undefined') setPath();\r\n\r\n  useEffect(() => {\r\n    setPath();\r\n  }, [location]);\r\n\r\n  // Render any Static Routes a developer has defined\r\n  if (isStaticRoute(trimmedPath)) {\r\n    return renderRoutes(routes.StaticRoutes, {\r\n      projectId,\r\n      contentTypeId,\r\n      entry,\r\n    });\r\n  }\r\n\r\n  // Need to redirect when url endswith a /\r\n  if (location.pathname.length > trimmedPath.length) {\r\n    return <Redirect to={trimmedPath} />;\r\n  }\r\n  // Match any Defined Content Type Mappings\r\n  if (contentTypeId) {\r\n    const MatchedComponent = routes.ContentTypeMappings.find(\r\n      item => item.contentTypeID == contentTypeId\r\n    );\r\n\r\n    if (MatchedComponent) {\r\n      return (\r\n        <MatchedComponent.component\r\n          projectId={projectId}\r\n          contentTypeId={contentTypeId}\r\n          entry={entry}\r\n        />\r\n      );\r\n    }\r\n  }\r\n\r\n  if (isNotFound) {\r\n    return (\r\n      <Status code={404}>\r\n        <NotFound />\r\n      </Status>\r\n    );\r\n  }\r\n\r\n  return null;\r\n};\r\n\r\nRouteLoader.propTypes = {\r\n  routes: PropTypes.objectOf(PropTypes.array, PropTypes.array),\r\n  withEvents: PropTypes.object,\r\n  // location: PropTypes.object.isRequired,\r\n  // history: PropTypes.object.isRequired,\r\n  statePath: PropTypes.string,\r\n  projectId: PropTypes.string,\r\n  contentTypeId: PropTypes.string,\r\n  entry: PropTypes.object,\r\n  isNotFound: PropTypes.bool,\r\n  setNavigationPath: PropTypes.func,\r\n};\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    statePath: selectCurrentPath(state),\r\n    projectId: selectCurrentProject(state),\r\n    entry: selectRouteEntry(state),\r\n    contentTypeId: selectRouteEntryContentTypeId(state),\r\n    isNotFound: selectIsNotFound(state),\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = {\r\n  setNavigationPath: (path, location, staticRoute, withEvents, statePath) =>\r\n    setNavigationPath(path, location, staticRoute, withEvents, statePath),\r\n};\r\n\r\nexport default hot(module)(\r\n  connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n  )(toJS(RouteLoader))\r\n);\r\n","module.exports = __WEBPACK_EXTERNAL_MODULE__34__;","function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  }\n}\n\nmodule.exports = _arrayWithoutHoles;","function _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}\n\nmodule.exports = _iterableToArray;","function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}\n\nmodule.exports = _nonIterableSpread;","import { createBrowserHistory, createMemoryHistory } from 'history';\r\n\r\n// Create a history depending on the environment\r\nconst selectedHistory =\r\n  typeof window !== 'undefined' ? createBrowserHistory : createMemoryHistory;\r\n\r\nexport const history = (options = {}) => selectedHistory(options);\r\nexport const browserHistory = selectedHistory();\r\n","module.exports = __WEBPACK_EXTERNAL_MODULE__39__;","const servers = SERVERS; /* global SERVERS */\r\nconst alias = servers.alias.toLowerCase();\r\nconst publicUri = PUBLIC_URI; /* global PUBLIC_URI */\r\nconst projects = PROJECTS; /* global PROJECTS */\r\n\r\n// return a projectId via the request hostname\r\nconst pickProject = (hostname, query) => {\r\n  // if localhost we can only infer via a querystring, and take your word for it\r\n  if (hostname == 'localhost') {\r\n    return (query && query.p) || projects[0].id;\r\n  }\r\n\r\n  // if hostname is the actual public uri we can return the first project from the list\r\n  if (hostname == publicUri) {\r\n    return projects[0].id;\r\n  }\r\n\r\n  let project = 'unknown';\r\n\r\n  // go through all the defined projects\r\n  Object.entries(projects).map(([, p]) => {\r\n    // check if we're accessing via the project's public uri\r\n    if (hostname.includes(p.publicUri)) project = p.id;\r\n\r\n    // the url structure is different for website (we don't prefix)\r\n    if (p.id.startsWith('website')) {\r\n      // check for internal and external hostnames\r\n      // we check live and preview distinctly so our rule does not clash with\r\n      // hostnames that use a project prefix\r\n      if (\r\n        hostname.includes(`live-${alias}.cloud.contensis.com`) ||\r\n        hostname.includes(`live.${alias}.contensis.cloud`) ||\r\n        hostname.includes(`preview-${alias}.cloud.contensis.com`) ||\r\n        hostname.includes(`preview.${alias}.contensis.cloud`)\r\n      )\r\n        project = p.id;\r\n    } else {\r\n      // check for internal and external hostnames, prefixed with the projectId\r\n      if (\r\n        hostname.includes(\r\n          `${p.id.toLowerCase()}-${alias}.cloud.contensis.com`\r\n        ) ||\r\n        hostname.includes(`${p.id.toLowerCase()}.${alias}.contensis.cloud`)\r\n      )\r\n        project = p.id;\r\n    }\r\n  });\r\n  return project;\r\n};\r\n\r\nexport default pickProject;\r\n","module.exports = __WEBPACK_EXTERNAL_MODULE__41__;","import { compose, createStore, applyMiddleware } from 'redux';\r\nimport { combineReducers } from 'redux-immutable';\r\nimport thunk from 'redux-thunk';\r\nimport createSagaMiddleware, { END } from 'redux-saga';\r\n\r\n// Core reducers\r\nimport RoutingReducer from './reducers/routing';\r\nimport VersionReducer from './reducers/version';\r\nimport NavigationReducer from './reducers/navigation';\r\nimport routerMiddleware from './routerMiddleware';\r\n\r\nexport default (featureReducers, initialState, history) => {\r\n  const thunkMiddleware = [thunk];\r\n\r\n  let reduxDevToolsMiddleware = f => f;\r\n\r\n  if (typeof window != 'undefined') {\r\n    reduxDevToolsMiddleware = window.__REDUX_DEVTOOLS_EXTENSION__\r\n      ? window.__REDUX_DEVTOOLS_EXTENSION__()\r\n      : f => f;\r\n  }\r\n\r\n  const sagaMiddleware = createSagaMiddleware();\r\n  const middleware = compose(\r\n    applyMiddleware(\r\n      ...thunkMiddleware,\r\n      sagaMiddleware,\r\n      routerMiddleware(history)\r\n    ),\r\n    reduxDevToolsMiddleware\r\n  );\r\n\r\n  let reducers = {\r\n    navigation: NavigationReducer,\r\n    routing: RoutingReducer,\r\n    version: VersionReducer,\r\n    ...featureReducers,\r\n  };\r\n\r\n  const combinedReducers = combineReducers(reducers);\r\n\r\n  const store = initialState => {\r\n    const store = createStore(combinedReducers, initialState, middleware);\r\n    store.runSaga = sagaMiddleware.run;\r\n    store.close = () => store.dispatch(END);\r\n    return store;\r\n  };\r\n\r\n  return store(initialState);\r\n};\r\n","module.exports = __WEBPACK_EXTERNAL_MODULE__43__;","module.exports = __WEBPACK_EXTERNAL_MODULE__44__;","module.exports = __WEBPACK_EXTERNAL_MODULE__45__;","module.exports = __WEBPACK_EXTERNAL_MODULE__46__;","import { Map, fromJS, List } from 'immutable';\r\nimport {\r\n  SET_ENTRY_ID,\r\n  SET_ENTRY,\r\n  SET_NAVIGATION_PATH,\r\n  SET_NAVIGATION_NOT_FOUND,\r\n  SET_NODE,\r\n  SET_ANCESTORS,\r\n  SET_ROUTE_LOADING,\r\n  SET_TARGET_PROJECT,\r\n  SET_ROUTE,\r\n} from '~/core/redux/types/routing';\r\nimport {\r\n  GetAllResponseGuids,\r\n  // fixImageUri,\r\n} from '~/core/util/ContensisDeliveryApi';\r\n\r\nlet initialState = Map({\r\n  currentPath: '/',\r\n  currentNode: [],\r\n  currentProject: 'unknown',\r\n  notFound: false,\r\n  entryID: null,\r\n  entry: null,\r\n  entryDepends: new List(),\r\n  contentTypeId: null,\r\n  currentNodeAncestors: new List(),\r\n});\r\n\r\nexport default (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case SET_ENTRY_ID: {\r\n      if (action.id === '') {\r\n        return state;\r\n      }\r\n      return state.set('entryID', action.id);\r\n    }\r\n    case SET_ANCESTORS: {\r\n      return state.set('currentNodeAncestors', fromJS(action.ancestors));\r\n    }\r\n    case SET_NODE: {\r\n      // We have the entry stored elsewhere, so lets not keep it twice.\r\n      if (action.node && action.node.entry) delete action.node.entry;\r\n      return state.set('currentNode', fromJS(action.node));\r\n    }\r\n    case SET_ENTRY: {\r\n      // Get Depends for entry\r\n      var depends = GetAllResponseGuids(action.entry);\r\n      // if (action.entry) {\r\n      //   fixImageUri(action.entry);\r\n      // }\r\n      return state\r\n        .set('entryDepends', fromJS(depends))\r\n        .set('entry', fromJS(action.entry));\r\n    }\r\n    case SET_NAVIGATION_PATH: {\r\n      if (action.path) {\r\n        return state\r\n          .set('currentPath', fromJS(action.path))\r\n          .set('location', fromJS(action.location))\r\n          .set('staticRoute', fromJS(action.staticRoute));\r\n      }\r\n      return state;\r\n    }\r\n    case SET_ROUTE: {\r\n      return state.set('nextPath', action.path);\r\n    }\r\n    case SET_NAVIGATION_NOT_FOUND: {\r\n      return state.set('notFound', fromJS(action.notFound));\r\n    }\r\n    case SET_ROUTE_LOADING: {\r\n      return state.set('routeLoading', action.loading);\r\n    }\r\n    case SET_TARGET_PROJECT: {\r\n      return state\r\n        .set('currentProject', action.project)\r\n        .set('allowedGroups', fromJS(action.allowedGroups));\r\n    }\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import { Map } from 'immutable';\r\nimport { SET_VERSION, SET_VERSION_STATUS } from '~/core/redux/types/version';\r\n\r\nlet initialState = Map({\r\n  commitRef: null,\r\n  buildNo: null,\r\n  contensisVersionStatus: 'published',\r\n});\r\n\r\nexport default (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case SET_VERSION_STATUS: {\r\n      return state.set('contensisVersionStatus', action.status);\r\n    }\r\n    case SET_VERSION: {\r\n      return state\r\n        .set('commitRef', action.commitRef)\r\n        .set('buildNo', action.buildNo);\r\n    }\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import { Map, fromJS, List } from 'immutable';\r\n\r\nimport {\r\n  SET_NODE_TREE,\r\n  GET_NODE_TREE_ERROR,\r\n} from '~/core/redux/types/navigation';\r\n\r\nconst initialState = Map({\r\n  root: null,\r\n  treeDepends: new List([]),\r\n  isError: false,\r\n  isReady: false,\r\n});\r\n\r\nexport default (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case SET_NODE_TREE: {\r\n      return state.set('root', fromJS(action.nodes)).set('isReady', true);\r\n    }\r\n    case GET_NODE_TREE_ERROR: {\r\n      return state.set('isError', true);\r\n    }\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import { CALL_HISTORY_METHOD } from '~/core/redux/types/routing';\r\n\r\n/**\r\n * This middleware captures CALL_HISTORY_METHOD actions to redirect to the\r\n * provided history object. This will prevent these actions from reaching your\r\n * reducer or any middleware that comes after this one.\r\n */\r\n/* eslint-disable no-unused-vars */\r\nconst routerMiddleware = history => store => next => action => {\r\n  if (action.type !== CALL_HISTORY_METHOD) {\r\n    return next(action);\r\n  }\r\n\r\n  const {\r\n    payload: { method, args },\r\n  } = action;\r\n  history[method](...args);\r\n};\r\n\r\nexport default routerMiddleware;\r\n","// index.js\r\nimport { all } from 'redux-saga/effects';\r\nimport { routingSagas } from './routing';\r\nimport { navigationSagas } from './navigation';\r\nexport default function(featureSagas = []) {\r\n  return function* rootSaga() {\r\n    const subSagas = [...routingSagas, ...navigationSagas];\r\n    yield all([...subSagas, ...featureSagas]);\r\n  };\r\n}\r\n","// load-entries.js\r\nimport * as log from 'loglevel';\r\nimport { takeEvery, put, select, call, all } from 'redux-saga/effects';\r\nimport {\r\n  SET_ENTRY_ID,\r\n  SET_ENTRY,\r\n  SET_NAVIGATION_NOT_FOUND,\r\n  SET_NODE,\r\n  SET_ANCESTORS,\r\n  SET_NAVIGATION_PATH,\r\n  SET_ROUTE,\r\n  CALL_HISTORY_METHOD,\r\n} from '~/core/redux/types/routing';\r\nimport { deliveryApi } from '~/core/util/ContensisDeliveryApi';\r\nimport { selectVersionStatus } from '~/core/redux/selectors/version';\r\nimport {\r\n  selectCurrentPath,\r\n  selectCurrentProject,\r\n  selectRouteEntry,\r\n} from '~/core/redux/selectors/routing';\r\nimport { GET_NODE_TREE } from '../types/navigation';\r\nimport { hasNavigationTree } from '../selectors/navigation';\r\n\r\nexport const routingSagas = [\r\n  takeEvery(SET_NAVIGATION_PATH, getRouteSaga),\r\n  takeEvery(SET_ROUTE, setRouteSaga),\r\n];\r\n\r\nfunction* setRouteSaga(action) {\r\n  // To navigate / push a specific route via redux middleware\r\n  yield put({\r\n    type: CALL_HISTORY_METHOD,\r\n    payload: {\r\n      method: 'push',\r\n      args: [action.path, action.state],\r\n    },\r\n  });\r\n  // yield put({\r\n  //   type: SET_NAVIGATION_PATH,\r\n  //   path: action.path,\r\n  //   staticRoute: action.isStatic,\r\n  //   withEvents: action.withEvents,\r\n  // });\r\n}\r\n\r\nfunction* getRouteSaga(action) {\r\n  let entry = null;\r\n  try {\r\n    const { withEvents } = action;\r\n    if (withEvents && withEvents.onRouteLoad) {\r\n      yield withEvents.onRouteLoad(action);\r\n    }\r\n    const state = yield select();\r\n    const routeEntry = selectRouteEntry(state);\r\n    if (\r\n      (action.staticRoute && !action.staticRoute.route.fetchNode) ||\r\n      (routeEntry && action.statePath === action.path)\r\n    ) {\r\n      // Do we need to fetch node/validate routes for a static route?\r\n      // For a genuinely static route we recieve a 404 in browser console,\r\n      // and a wasted network call.\r\n      if (routeEntry) entry = routeEntry.toJS();\r\n    } else {\r\n      const currentPath = selectCurrentPath(state);\r\n      const deliveryApiStatus = selectVersionStatus(state);\r\n      const project = selectCurrentProject(state);\r\n\r\n      let pathNode = null;\r\n      let ancestors = null;\r\n      // Scroll into View\r\n      if (typeof window !== 'undefined') {\r\n        window.scroll({\r\n          top: 0,\r\n        });\r\n      }\r\n      if (currentPath === '/') {\r\n        pathNode = yield deliveryApi\r\n          .getClient(deliveryApiStatus, project)\r\n          .nodes.getRoot({\r\n            entryFields: '*',\r\n            entryLinkDepth: 4,\r\n            language: 'en-GB',\r\n          });\r\n      } else {\r\n        // if (currentPath.startsWith('/preview/')) {\r\n        //   let splitPath = currentPath.split('/');\r\n        //   let entryGuid = splitPath[2];\r\n\r\n        //   // According to product dev we cannot use Node API\r\n        //   // for previewing entries as it gives a response of []\r\n        //   // -- apparently it is not correct to request latest content\r\n        //   // with Node API\r\n        //   pathNode = yield deliveryApi\r\n        //     .getClient(deliveryApiStatus, project)\r\n        //     .nodes.getByEntry({\r\n        //       entryId: entryGuid,\r\n        //       entryFields: '*',\r\n        //       entryLinkDepth: 4,\r\n        //     });\r\n        //   pathNode = pathNode[0];\r\n        if (currentPath && currentPath.startsWith('/preview/')) {\r\n          let splitPath = currentPath.split('/');\r\n          let entryGuid = splitPath[2];\r\n          if (splitPath.length == 3) {\r\n            let previewEntry = yield deliveryApi\r\n              .getClient(deliveryApiStatus, project)\r\n              .entries.get({ id: entryGuid, linkDepth: 4 });\r\n            if (previewEntry) {\r\n              yield call(setRouteEntry, previewEntry);\r\n            } else {\r\n              yield call(do404);\r\n            }\r\n          }\r\n        } else {\r\n          pathNode = yield deliveryApi\r\n            .getClient(deliveryApiStatus, project)\r\n            .nodes.get({\r\n              path: currentPath,\r\n              entryFields: '*',\r\n              entryLinkDepth: 4,\r\n            });\r\n        }\r\n\r\n        if (pathNode)\r\n          ancestors = yield deliveryApi\r\n            .getClient(deliveryApiStatus, project)\r\n            .nodes.getAncestors(pathNode.id);\r\n      }\r\n\r\n      if (\r\n        pathNode &&\r\n        pathNode.entry &&\r\n        pathNode.entry.sys &&\r\n        pathNode.entry.sys.id\r\n      ) {\r\n        entry = pathNode.entry;\r\n        yield call(setRouteEntry, entry, pathNode, ancestors);\r\n      } else {\r\n        yield call(do404);\r\n      }\r\n    }\r\n    if (withEvents && withEvents.onRouteLoaded) {\r\n      yield withEvents.onRouteLoaded({ ...action, entry });\r\n    }\r\n\r\n    if (!hasNavigationTree(state))\r\n      // Load navigation clientside only, a put() should help that work\r\n      yield put({ type: GET_NODE_TREE });\r\n  } catch (e) {\r\n    log.error(...['Error running route saga:', e, e.stack]);\r\n    yield call(do404);\r\n  }\r\n}\r\n\r\nfunction* setRouteEntry(entry, node, ancestors) {\r\n  yield all([\r\n    put({\r\n      type: SET_NAVIGATION_NOT_FOUND,\r\n      notFound: false,\r\n    }),\r\n    put({\r\n      type: SET_NODE,\r\n      node,\r\n    }),\r\n    put({\r\n      type: SET_ENTRY,\r\n      entry: entry,\r\n    }),\r\n    put({\r\n      type: SET_ENTRY_ID,\r\n      id: entry.sys.id,\r\n    }),\r\n    put({\r\n      type: SET_ANCESTORS,\r\n      ancestors,\r\n    }),\r\n  ]);\r\n}\r\n\r\nfunction* do404() {\r\n  yield put({\r\n    type: SET_NAVIGATION_NOT_FOUND,\r\n    notFound: true,\r\n  });\r\n  yield put({\r\n    type: SET_ENTRY_ID,\r\n    id: null,\r\n  });\r\n}\r\n","module.exports = __WEBPACK_EXTERNAL_MODULE__53__;","import { takeEvery, put, select } from 'redux-saga/effects';\r\n\r\nimport { deliveryApi } from '~/core/util/ContensisDeliveryApi';\r\nimport {\r\n  GET_NODE_TREE,\r\n  SET_NODE_TREE,\r\n  GET_NODE_TREE_ERROR,\r\n} from '~/core/redux/types/navigation';\r\nimport { hasNavigationTree } from '~/core/redux/selectors/navigation';\r\nimport { selectVersionStatus } from '../selectors/version';\r\nimport { selectCurrentProject } from '../selectors/routing';\r\n\r\nexport const navigationSagas = [takeEvery(GET_NODE_TREE, ensureNodeTreeSaga)];\r\n\r\nexport function* ensureNodeTreeSaga() {\r\n  const state = yield select();\r\n  try {\r\n    if (!hasNavigationTree(state)) {\r\n      const deliveryApiVersionStatus = yield select(selectVersionStatus);\r\n      const project = yield select(selectCurrentProject);\r\n      const nodes = yield deliveryApi\r\n        .getClient(deliveryApiVersionStatus, project)\r\n        .nodes.getRoot({\r\n          depth: 2,\r\n          entryFields: 'entryTitle, metaInformation, sys.contentTypeId',\r\n        });\r\n      if (nodes) {\r\n        yield put({ type: SET_NODE_TREE, nodes });\r\n      } else {\r\n        yield put({ type: GET_NODE_TREE_ERROR });\r\n      }\r\n    }\r\n  } catch (ex) {\r\n    yield put({ type: GET_NODE_TREE_ERROR, error: ex.toString() });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport { hot } from 'react-hot-loader';\r\nimport RouteLoader from '~/core/routes/RouteLoader';\r\n\r\nconst AppRoot = props => {\r\n  return <RouteLoader {...props} />;\r\n};\r\n\r\nexport default hot(module)(AppRoot);\r\n","module.exports = function(module) {\n\tif (!module.webpackPolyfill) {\n\t\tmodule.deprecate = function() {};\n\t\tmodule.paths = [];\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactPropTypesSecret = require('./lib/ReactPropTypesSecret');\n\nfunction emptyFunction() {}\nfunction emptyFunctionWithReset() {}\nemptyFunctionWithReset.resetWarningCache = emptyFunction;\n\nmodule.exports = function() {\n  function shim(props, propName, componentName, location, propFullName, secret) {\n    if (secret === ReactPropTypesSecret) {\n      // It is still safe when called from React.\n      return;\n    }\n    var err = new Error(\n      'Calling PropTypes validators directly is not supported by the `prop-types` package. ' +\n      'Use PropTypes.checkPropTypes() to call them. ' +\n      'Read more at http://fb.me/use-check-prop-types'\n    );\n    err.name = 'Invariant Violation';\n    throw err;\n  };\n  shim.isRequired = shim;\n  function getShim() {\n    return shim;\n  };\n  // Important!\n  // Keep this list in sync with production version in `./factoryWithTypeCheckers.js`.\n  var ReactPropTypes = {\n    array: shim,\n    bool: shim,\n    func: shim,\n    number: shim,\n    object: shim,\n    string: shim,\n    symbol: shim,\n\n    any: shim,\n    arrayOf: getShim,\n    element: shim,\n    elementType: shim,\n    instanceOf: getShim,\n    node: shim,\n    objectOf: getShim,\n    oneOf: getShim,\n    oneOfType: getShim,\n    shape: getShim,\n    exact: getShim,\n\n    checkPropTypes: emptyFunctionWithReset,\n    resetWarningCache: emptyFunction\n  };\n\n  ReactPropTypes.PropTypes = ReactPropTypes;\n\n  return ReactPropTypes;\n};\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactPropTypesSecret = 'SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED';\n\nmodule.exports = ReactPropTypesSecret;\n","module.exports = __WEBPACK_EXTERNAL_MODULE__59__;","import React from 'react';\r\nconst NotFound = () => (\r\n  <>\r\n    <header>\r\n      <h1>404 Page Not Found</h1>\r\n    </header>\r\n  </>\r\n);\r\nexport default NotFound;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { Route } from 'react-router-dom';\r\n\r\nexport const Status = ({ code, children }) => {\r\n  return (\r\n    <Route\r\n      render={({ staticContext }) => {\r\n        if (staticContext) staticContext.status = code;\r\n        return children;\r\n      }}\r\n    />\r\n  );\r\n};\r\n\r\nStatus.propTypes = {\r\n  code: PropTypes.number.isRequired,\r\n  children: PropTypes.element,\r\n};\r\n","import React from 'react';\r\nimport { Iterable } from 'immutable';\r\n\r\nexport const toJS = WrappedComponent => wrappedComponentProps => {\r\n  const KEY = 0;\r\n  const VALUE = 1;\r\n\r\n  const propsJS = Object.entries(wrappedComponentProps).reduce(\r\n    (newProps, wrappedComponentProp) => {\r\n      newProps[wrappedComponentProp[KEY]] = Iterable.isIterable(\r\n        wrappedComponentProp[VALUE]\r\n      )\r\n        ? wrappedComponentProp[VALUE].toJS()\r\n        : wrappedComponentProp[VALUE];\r\n      return newProps;\r\n    },\r\n    {}\r\n  );\r\n\r\n  return <WrappedComponent {...propsJS} />;\r\n};\r\n","const internalServer = require('../server/internalServer').default;\r\n\r\nexports.app = internalServer.app;\r\nexports.httpProxy = internalServer.apiProxy;\r\nexports.start = internalServer.start;\r\n\r\nconst ReactApp = require('~/App').default;\r\nconst RouteLoader = require('~/core/routes/RouteLoader').default;\r\n\r\nexports.ReactApp = ReactApp;\r\nexports.RouteLoader = RouteLoader;\r\n","import 'isomorphic-fetch';\r\nimport express from 'express';\r\nimport Loadable from 'react-loadable';\r\n\r\nimport DisplayStartupConfiguration from './util/displayStartupConfiguration';\r\nimport ConfigureLocalDNS from './core/localDns';\r\nimport ConfigureReverseProxies, { apiProxy } from './core/reverseProxies';\r\n// import ServerFeatures from './features/configure';\r\nimport ConfigureWebApp from './core/webApp';\r\n\r\nconst app = express();\r\n\r\nconst start = (ReactApp, config, ServerFeatures) => {\r\n  app.disable('x-powered-by');\r\n\r\n  // Output some information about the used build/startup configuration\r\n  DisplayStartupConfiguration(config);\r\n\r\n  // Configure DNS to make life easier\r\n  ConfigureLocalDNS();\r\n\r\n  // Set-up local proxy for images from cms, to save doing rewrites and extra code\r\n  ServerFeatures(app);\r\n  ConfigureReverseProxies(app, config.reverseProxyPaths);\r\n  ConfigureWebApp(app, ReactApp, config);\r\n\r\n  app.use('/static', express.static('dist/static', { maxage: '31557600h' }));\r\n\r\n  app.on('ready', () => {\r\n    Loadable.preloadAll().then(() => {\r\n      var server = app.listen(3001, () => {\r\n        console.info(`HTTP server is listening @ port 3001`);\r\n        setTimeout(function() {\r\n          app.emit('app_started');\r\n        }, 500);\r\n      });\r\n      app.on('stop', () => {\r\n        server.close(function() {\r\n          console.info('GoodBye :(');\r\n        });\r\n      });\r\n    });\r\n  });\r\n};\r\n\r\nexport default { app, apiProxy, start };\r\n","module.exports = __WEBPACK_EXTERNAL_MODULE__65__;","const servers = SERVERS; /* global SERVERS */\r\nconst projects = PROJECTS; /* global PROJECTS */\r\n\r\nconst DisplayStartupConfiguration = config => {\r\n  /* eslint-disable no-console */\r\n  console.log();\r\n  console.log(\r\n    `Configured servers:\r\n`,\r\n    JSON.stringify(servers, null, 2)\r\n  );\r\n  console.log();\r\n  console.log(\r\n    `Configured projects:\r\n`,\r\n    JSON.stringify(projects, null, 2)\r\n  );\r\n  console.log();\r\n  console.log(\r\n    'Reverse proxy paths: ',\r\n    JSON.stringify(config.reverseProxyPaths, null, 2)\r\n  );\r\n  console.log();\r\n\r\n  /* eslint-enable no-console */\r\n};\r\n\r\nexport default DisplayStartupConfiguration;\r\n","import evilDns from 'evil-dns';\r\nimport fetchMyIp from '../util/fetchMyIp';\r\n\r\nconst servers = SERVERS; /* global SERVERS */\r\nconst apiConfig = DELIVERY_API_CONFIG; /* global DELIVERY_API_CONFIG */\r\n\r\nconst localDns = () => {\r\n  const disableDnsChanges = false;\r\n\r\n  const configureLocalEndpoint = () => {\r\n    if (!disableDnsChanges) {\r\n      evilDns.add(`*${servers.alias}.cloud.contensis.com`, servers.internalVip);\r\n\r\n      if (apiConfig.internalIp)\r\n        evilDns.add(apiConfig.rootUrl, apiConfig.internalIp);\r\n    }\r\n  };\r\n\r\n  // Break api.ipify to test\r\n  // evilDns.add('api.ipify.org', '8.8.8.8');\r\n  fetchMyIp(servers, configureLocalEndpoint);\r\n};\r\n\r\nexport default localDns;\r\n","module.exports = __WEBPACK_EXTERNAL_MODULE__68__;","const fetchMyIp = (env, configureLocalEndpoint) => {\r\n  /* eslint-disable no-console */\r\n  fetch('https://api.ipify.org?format=json', {\r\n    method: 'GET',\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n    },\r\n  })\r\n    .then(\r\n      response => {\r\n        return response.json();\r\n      },\r\n      error => {\r\n        console.log(\r\n          `Could not work out where I am so defaulting to local DNS, as I am probably running as a container this is what matters most. Not developers at home or tests :( Sorry. error: ${error}`\r\n        );\r\n        configureLocalEndpoint();\r\n      }\r\n    )\r\n    .then(ipJson => {\r\n      console.log(`Current public ip -> ${JSON.stringify(ipJson)}`);\r\n      if (ipJson.ip.startsWith('185.18.13')) {\r\n        console.log(\r\n          `Using local endpoint for ${env.alias} -> ${env.internalVip}`\r\n        );\r\n        configureLocalEndpoint();\r\n      } else {\r\n        console.log(`Outside Zengenti network, use real DNS.`);\r\n      }\r\n    })\r\n    .catch(error => {\r\n      configureLocalEndpoint();\r\n      console.log(\r\n        `Could not work out where I am so defaulting to local DNS, as I am probably running as a container this is what matters most. Not developers at home or tests :( Sorry. error: ${error}`\r\n      );\r\n    });\r\n  /* eslint-enable no-console */\r\n};\r\n\r\nexport default fetchMyIp;\r\n","import httpProxy from 'http-proxy';\r\n\r\nconst servers = SERVERS; /* global SERVERS */\r\nexport const apiProxy = httpProxy.createProxyServer();\r\n\r\nconst reverseProxies = (app, reverseProxyPaths) => {\r\n  deliveryApiProxy(apiProxy, app);\r\n\r\n  app.all(reverseProxyPaths, (req, res) => {\r\n    const target = servers.iis;\r\n\r\n    apiProxy.web(req, res, { target, changeOrigin: true });\r\n    apiProxy.on('error', e => {\r\n      /* eslint-disable no-console */\r\n      console.log(\r\n        `Proxy Request for ${req.path} HostName:${req.hostname} failed with ${e}`\r\n      );\r\n      /* eslint-enable no-console */\r\n    });\r\n  });\r\n};\r\n\r\nconst deliveryApiProxy = (apiProxy, app) => {\r\n  // This is just here to stop cors requests on localhost. In Production this is mapped using varnish.\r\n  app.all(['/api/delivery/*', '/api/image/*'], (req, res) => {\r\n    /* eslint-disable no-console */\r\n    const target = servers.cms;\r\n    console.log(`Proxying api request to ${servers.alias}`);\r\n    apiProxy.web(req, res, {\r\n      target,\r\n      changeOrigin: true,\r\n    });\r\n    apiProxy.on('error', e => {\r\n      /* eslint-disable no-console */\r\n      console.log(\r\n        `Proxy request for ${req.path} HostName:${req.hostname} failed with ${e}`\r\n      );\r\n      /* eslint-enable no-console */\r\n    });\r\n  });\r\n};\r\n\r\nexport default reverseProxies;\r\n","module.exports = __WEBPACK_EXTERNAL_MODULE__71__;","import fs from 'fs';\r\nimport React from 'react';\r\nimport { StaticRouter } from 'react-router-dom';\r\nimport { Provider as ReduxProvider } from 'react-redux';\r\nimport Loadable from 'react-loadable';\r\nimport { renderToString } from 'react-dom/server';\r\nimport { getBundles } from 'react-loadable/webpack';\r\nimport { ServerStyleSheet } from 'styled-components';\r\nimport Helmet from 'react-helmet';\r\nimport serialize from 'serialize-javascript';\r\nimport minifyCssString from 'minify-css-string';\r\nimport { history } from '~/core/redux/history';\r\n\r\nimport { AccessMethods } from '../util/types';\r\nimport pickProject from '~/core/util/pickProject';\r\nimport { GetDeliveryApiStatusFromHostname } from '~/core/util/ContensisDeliveryApi';\r\n\r\nimport { setCurrentProject } from '~/core/redux/actions/routing';\r\nimport { setVersion, setVersionStatus } from '~/core/redux/actions/version';\r\n\r\nimport { selectNavigationDepends } from '~/core/redux/selectors/navigation';\r\nimport {\r\n  selectRouteEntryDepends,\r\n  selectRouteEntry,\r\n  selectCurrentProject,\r\n} from '~/core/redux/selectors/routing';\r\nimport createStore from '~/core/redux/store';\r\nimport rootSaga from '~/core/redux/sagas/index.js';\r\nimport { fromJS } from 'immutable';\r\nimport { matchesUA } from 'browserslist-useragent';\r\n\r\nconst addStandardHeaders = (state, response, packagejson, allowedGroups) => {\r\n  if (state) {\r\n    /* eslint-disable no-console */\r\n    try {\r\n      console.log('About to add header');\r\n      let navDepends = selectNavigationDepends(state);\r\n      let recordDepends = selectRouteEntryDepends(state);\r\n      navDepends = navDepends.toJS();\r\n      recordDepends = recordDepends.toJS();\r\n      console.log(`navDepends count: ${navDepends.length}`);\r\n      console.log(`recordDepends count: ${recordDepends.length}`);\r\n      const allDepends = [...navDepends, ...recordDepends];\r\n      let allDependsHeaderValue = allDepends.join(' ');\r\n      allDependsHeaderValue = ` ${packagejson.name}-app ${allDependsHeaderValue} ${packagejson.name}-app`;\r\n      response.header('surrogate-key', allDependsHeaderValue);\r\n\r\n      addVarnishAuthenticationHeaders(state, response, allowedGroups);\r\n    } catch (e) {\r\n      console.log('Error Adding headers');\r\n      console.log(e);\r\n    }\r\n  }\r\n  response.setHeader('Surrogate-Control', 'max-age=3600');\r\n};\r\n\r\nconst addVarnishAuthenticationHeaders = (state, response, allowedGroups) => {\r\n  if (state) {\r\n    try {\r\n      const stateEntry = selectRouteEntry(state);\r\n      const project = selectCurrentProject(state);\r\n      if (\r\n        stateEntry &&\r\n        stateEntry.getIn(['authentication', 'isLoginRequired'])\r\n      ) {\r\n        response.header(\r\n          'x-contensis-viewer-groups',\r\n          allowedGroups[project].join('|')\r\n        );\r\n      }\r\n    } catch (e) {\r\n      console.log('Error adding authentication header');\r\n      console.log(e);\r\n    }\r\n  }\r\n};\r\n\r\nconst readFileSync = path => fs.readFileSync(path, 'utf8');\r\n\r\nconst loadBundleData = ({ stats, templates }, build) => {\r\n  try {\r\n    const bundle = {};\r\n    bundle.stats = JSON.parse(\r\n      readFileSync(stats.replace('/target', build ? `/${build}` : ''))\r\n    );\r\n    bundle.templates = {\r\n      templateHTML: readFileSync(\r\n        templates.html.replace('/target', build ? `/${build}` : '')\r\n      ),\r\n      templateHTMLStatic: readFileSync(\r\n        templates.static.replace('/target', build ? `/${build}` : '')\r\n      ),\r\n      templateHTMLFragment: readFileSync(\r\n        templates.fragment.replace('/target', build ? `/${build}` : '')\r\n      ),\r\n    };\r\n    return bundle;\r\n  } catch {\r\n    //console.log(ex);\r\n  }\r\n};\r\n\r\nconst webApp = (app, ReactApp, config) => {\r\n  const {\r\n    routes,\r\n    withReducers,\r\n    withSagas,\r\n    withEvents,\r\n    packagejson,\r\n    versionData,\r\n    dynamicPaths,\r\n    allowedGroups,\r\n    disableSsrRedux,\r\n  } = config;\r\n\r\n  const bundles = {\r\n    default: loadBundleData(config),\r\n    legacy: loadBundleData(config, 'legacy'),\r\n    modern: loadBundleData(config, 'modern'),\r\n  };\r\n  if (!bundles.default) bundles.default = bundles.legacy || bundles.modern;\r\n\r\n  const versionInfo = JSON.parse(fs.readFileSync(versionData, 'utf8'));\r\n\r\n  app.get('/*', (request, response, next) => {\r\n    if (request.originalUrl.startsWith('/static/')) return next();\r\n    const useragent = request.headers['user-agent'];\r\n    const isModernUser = matchesUA(useragent, {\r\n      env: 'modern',\r\n      allowHigherVersions: true,\r\n    });\r\n\r\n    const { url } = request;\r\n\r\n    // Determine functional params and set access methods\r\n    let accessMethod = {};\r\n\r\n    const isDynamicNormalised = request.query.dynamic\r\n      ? request.query.dynamic.toLowerCase()\r\n      : 'false';\r\n\r\n    // Hack for certain pages to avoid SSR\r\n    const onlyDynamic = dynamicPaths.includes(request.path);\r\n\r\n    const isReduxRequestNormalised = request.query.redux\r\n      ? request.query.redux.toLowerCase()\r\n      : 'false';\r\n\r\n    const isFragmentNormalised = request.query.fragment\r\n      ? request.query.fragment.toLowerCase()\r\n      : 'false';\r\n\r\n    const isStaticNormalised = request.query.static\r\n      ? request.query.static.toLowerCase()\r\n      : 'false';\r\n\r\n    if (onlyDynamic || isDynamicNormalised === 'true')\r\n      accessMethod.DYNAMIC = AccessMethods.DYNAMIC;\r\n    if (isReduxRequestNormalised === 'true')\r\n      accessMethod.REDUX = AccessMethods.REDUX;\r\n    if (isFragmentNormalised === 'true')\r\n      accessMethod.FRAGMENT = AccessMethods.FRAGMENT;\r\n    if (isStaticNormalised === 'true')\r\n      accessMethod.STATIC = AccessMethods.STATIC;\r\n\r\n    const context = {};\r\n    let status = 200;\r\n\r\n    // Create a store (with a memory history) from our current url\r\n    const store = createStore(\r\n      withReducers,\r\n      fromJS({}),\r\n      history({ initialEntries: [url] })\r\n    );\r\n    //const store = createStore(withReducers);\r\n\r\n    // dispatch any global and non-saga related actions before calling our JSX\r\n    const versionStatusFromHostname = GetDeliveryApiStatusFromHostname(\r\n      request.hostname\r\n    );\r\n\r\n    store.dispatch(setVersionStatus(versionStatusFromHostname));\r\n    store.dispatch(setVersion(versionInfo.commitRef, versionInfo.buildNo));\r\n\r\n    const project = pickProject(request.hostname, request.query);\r\n\r\n    const groups = allowedGroups && allowedGroups[project];\r\n    store.dispatch(setCurrentProject(project, groups));\r\n\r\n    const modules = [];\r\n\r\n    const jsx = (\r\n      <Loadable.Capture report={moduleName => modules.push(moduleName)}>\r\n        <ReduxProvider store={store}>\r\n          <StaticRouter context={context} location={url}>\r\n            <ReactApp routes={routes} withEvents={withEvents} />\r\n          </StaticRouter>\r\n        </ReduxProvider>\r\n      </Loadable.Capture>\r\n    );\r\n\r\n    /* eslint-disable no-console */\r\n    console.log(\r\n      `Request for ${request.path} hostname: ${request.hostname} versionStatus: ${versionStatusFromHostname}`\r\n    );\r\n    /* eslint-enable no-console */\r\n\r\n    const target = isModernUser ? bundles.modern : bundles.legacy;\r\n\r\n    const { templates, stats } = target || bundles.default;\r\n\r\n    const {\r\n      templateHTML,\r\n      templateHTMLFragment,\r\n      templateHTMLStatic,\r\n    } = templates;\r\n\r\n    // Serve a blank HTML page with client scripts to load the app in the browser\r\n    if (accessMethod.DYNAMIC) {\r\n      // Dynamic doesn't need sagas\r\n      renderToString(jsx);\r\n\r\n      const isDynamicHint = `<script>window.isDynamic = true;</script>`;\r\n      const dynamicBundles = getBundles(stats, modules);\r\n      const dynamicBundleScripts = dynamicBundles\r\n        .map(bundle => `<script src=\"${bundle.publicPath}\"></script>`)\r\n        .join('');\r\n      const responseHtmlDynamic = templateHTML\r\n        .replace('{{TITLE}}', '')\r\n        .replace('{{SEO_CRITICAL_METADATA}}', '')\r\n        .replace('{{CRITICAL_CSS}}', '')\r\n        .replace('{{APP}}', '')\r\n        .replace('{{LOADABLE_CHUNKS}}', dynamicBundleScripts)\r\n        .replace('{{REDUX_DATA}}', isDynamicHint);\r\n      response.setHeader('Surrogate-Control', 'max-age=3600');\r\n      response.status(status).send(responseHtmlDynamic);\r\n    }\r\n\r\n    // Render the JSX server side and send response as per access method options\r\n    if (!accessMethod.DYNAMIC) {\r\n      store\r\n        .runSaga(rootSaga(withSagas))\r\n        .toPromise()\r\n        .then(() => {\r\n          const sheet = new ServerStyleSheet();\r\n\r\n          const html = renderToString(sheet.collectStyles(jsx));\r\n\r\n          const helmet = Helmet.renderStatic();\r\n          Helmet.rewind();\r\n          let title = helmet.title.toString();\r\n          const metadata = helmet.meta.toString();\r\n\r\n          if (context.status === 404) {\r\n            status = 404;\r\n            title = '<title>404 page not found</title>';\r\n          }\r\n\r\n          if (context.url) {\r\n            return response.redirect(302, context.url);\r\n          }\r\n\r\n          const reduxState = store.getState();\r\n\r\n          const styleTags = sheet.getStyleTags();\r\n\r\n          const bundles = getBundles(stats, modules);\r\n\r\n          const bundleScripts = bundles\r\n            .map(bundle => `<script src=\"${bundle.publicPath}\"></script>`)\r\n            .join('');\r\n\r\n          let serialisedReduxData = '';\r\n          if (context.status !== 404) {\r\n            if (accessMethod.REDUX) {\r\n              serialisedReduxData = serialize(reduxState);\r\n              addStandardHeaders(\r\n                reduxState,\r\n                response,\r\n                packagejson,\r\n                allowedGroups\r\n              );\r\n              response.status(status).json(serialisedReduxData);\r\n              return true;\r\n            }\r\n            if (!disableSsrRedux) {\r\n              serialisedReduxData = serialize(reduxState);\r\n              serialisedReduxData = `<script>window.REDUX_DATA = ${serialisedReduxData}</script>`;\r\n            }\r\n          }\r\n          if (context.status === 404) {\r\n            accessMethod.STATIC = AccessMethods.STATIC;\r\n          }\r\n\r\n          // Responses\r\n          let responseHTML = '';\r\n\r\n          // Static page served as a fragment\r\n          if (accessMethod.FRAGMENT && accessMethod.STATIC) {\r\n            addStandardHeaders(\r\n              reduxState,\r\n              response,\r\n              packagejson,\r\n              allowedGroups\r\n            );\r\n            responseHTML = minifyCssString(styleTags) + html;\r\n          }\r\n\r\n          // Page fragment served with client scripts and redux data that hydrate the app client side\r\n          if (accessMethod.FRAGMENT && !accessMethod.STATIC) {\r\n            responseHTML = templateHTMLFragment\r\n              .replace('{{TITLE}}', title)\r\n              .replace('{{SEO_CRITICAL_METADATA}}', metadata)\r\n              .replace('{{CRITICAL_CSS}}', minifyCssString(styleTags))\r\n              .replace('{{APP}}', html)\r\n              .replace('{{LOADABLE_CHUNKS}}', bundleScripts)\r\n              .replace('{{REDUX_DATA}}', serialisedReduxData);\r\n          }\r\n\r\n          // Full HTML page served statically\r\n          if (!accessMethod.FRAGMENT && accessMethod.STATIC) {\r\n            responseHTML = templateHTMLStatic\r\n              .replace('{{TITLE}}', title)\r\n              .replace('{{SEO_CRITICAL_METADATA}}', metadata)\r\n              .replace('{{CRITICAL_CSS}}', minifyCssString(styleTags))\r\n              .replace('{{APP}}', html)\r\n              .replace('{{LOADABLE_CHUNKS}}', '');\r\n          }\r\n\r\n          // Full HTML page served with client scripts and redux data that hydrate the app client side\r\n          if (!accessMethod.FRAGMENT && !accessMethod.STATIC) {\r\n            responseHTML = templateHTML\r\n              .replace('{{TITLE}}', title)\r\n              .replace('{{SEO_CRITICAL_METADATA}}', metadata)\r\n              .replace('{{CRITICAL_CSS}}', styleTags)\r\n              .replace('{{APP}}', html)\r\n              .replace('{{LOADABLE_CHUNKS}}', bundleScripts)\r\n              .replace('{{REDUX_DATA}}', serialisedReduxData);\r\n          }\r\n          addStandardHeaders(reduxState, response, packagejson, allowedGroups);\r\n          response.status(status).send(responseHTML);\r\n        })\r\n        .catch(err => {\r\n          // Handle any error that occurred in any of the previous\r\n          // promises in the chain.\r\n          /* eslint-disable no-console */\r\n          console.log(err);\r\n          /* eslint-enable no-console */\r\n          response\r\n            .status(500)\r\n            .send(\r\n              `Error occurred: <br />${err.stack} <br />${JSON.stringify(err)}`\r\n            );\r\n        });\r\n      renderToString(jsx);\r\n\r\n      store.close();\r\n    }\r\n  });\r\n};\r\n\r\nexport default webApp;\r\n","module.exports = require(\"fs\");","module.exports = __WEBPACK_EXTERNAL_MODULE__74__;","module.exports = __WEBPACK_EXTERNAL_MODULE__75__;","module.exports = __WEBPACK_EXTERNAL_MODULE__76__;","module.exports = __WEBPACK_EXTERNAL_MODULE__77__;","module.exports = __WEBPACK_EXTERNAL_MODULE__78__;","module.exports = __WEBPACK_EXTERNAL_MODULE__79__;","export const AccessMethods = {\r\n  DYNAMIC: 'dynamic',\r\n  STATIC: 'static',\r\n  FRAGMENT: 'fragment',\r\n  REDUX: 'redux',\r\n};\r\n","module.exports = __WEBPACK_EXTERNAL_MODULE__81__;"],"sourceRoot":""}
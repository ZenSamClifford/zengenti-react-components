{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap","webpack:///./node_modules/redux-saga/dist/redux-saga-effects-npm-proxy.esm.js","webpack:///./src/app/features/login/redux/types.js","webpack:///external \"immutable\"","webpack:///./src/app/core/redux/types/routing.js","webpack:///./src/app/core/util/helpers.js","webpack:///external \"react\"","webpack:///external \"contensis-delivery-api\"","webpack:///./src/app/features/login/redux/selectors.js","webpack:///./src/app/core/redux/selectors/routing.js","webpack:///external \"prop-types\"","webpack:///./src/app/features/login/util/CookieHelper.class.js","webpack:///./src/app/features/login/util/LoginHelper.class.js","webpack:///./src/app/features/login/util/SecurityApi.class.js","webpack:///external \"query-string\"","webpack:///./src/app/core/util/ContensisDeliveryApi.js","webpack:///./src/app/features/login/redux/reducers.js","webpack:///./src/app/core/redux/types/navigation.js","webpack:///external \"react-redux\"","webpack:///external \"react-router-dom\"","webpack:///./src/app/features/login/redux/actions.js","webpack:///./src/app/features/login/components/withLogin.js","webpack:///./src/app/features/login/index.js","webpack:///./src/app/core/redux/types/version.js","webpack:///./src/app/core/util/navigation.js","webpack:///./src/app/core/util/ToJs.js","webpack:///./src/app/core/redux/actions/routing.js","webpack:///./src/app/features/login/redux/sagas.js","webpack:///external \"react-hot-loader\"","webpack:///external \"react-router-config\"","webpack:///external \"@redux-saga/core/effects\"","webpack:///external \"js-cookie\"","webpack:///./src/app/core/redux/selectors/version.js","webpack:///./src/app/core/redux/selectors/navigation.js","webpack:///./src/app/core/routes/RouteLoader.js","webpack:///./src/app/core/redux/actions/version.js","webpack:///external \"redux\"","webpack:///./src/app/pages/NotFound.js","webpack:///./src/app/core/routes/Status.js","webpack:///external \"loglevel\"","webpack:///external \"react-loadable\"","webpack:///./src/app/core/redux/history.js","webpack:///external \"history\"","webpack:///external \"redux-saga\"","webpack:///./src/app/core/util/pickProject.js","webpack:///./src/app/core/schema.js","webpack:///./src/app/core/util/performance.js","webpack:///./src/app/core/search/util.js","webpack:///./src/app/core/search/expressions.js","webpack:///./src/app/core/redux/sagas/queries.js","webpack:///./src/app/core/redux/sagas/routing.js","webpack:///./src/app/core/redux/sagas/navigation.js","webpack:///./src/app/core/redux/sagas/index.js","webpack:///./src/app/core/redux/reducers/routing.js","webpack:///./src/app/core/redux/reducers/version.js","webpack:///./src/app/core/redux/reducers/navigation.js","webpack:///./src/app/core/redux/routerMiddleware.js","webpack:///./src/app/core/redux/store.js","webpack:///./src/app/App.js","webpack:///(webpack)/buildin/harmony-module.js","webpack:///external \"redux-immutable\"","webpack:///external \"redux-thunk\"","webpack:///external \"react-dom/server\"","webpack:///external \"minify-css-string\"","webpack:///external \"isomorphic-fetch\"","webpack:///external \"express\"","webpack:///external \"evil-dns\"","webpack:///external \"fs\"","webpack:///external \"react-loadable/webpack\"","webpack:///external \"react-helmet\"","webpack:///external \"serialize-javascript\"","webpack:///external \"http-proxy\"","webpack:///external \"styled-components\"","webpack:///external \"fromentries\"","webpack:///./src/app/lib.js","webpack:///external \"xxhashjs\"","webpack:///./src/server/util/displayStartupConfiguration.js","webpack:///./src/server/util/fetchMyIp.js","webpack:///./src/server/core/localDns.js","webpack:///./src/server/core/reverseProxies.js","webpack:///./src/server/util/types.js","webpack:///./src/server/util/handleResponse.js","webpack:///./src/server/util/cacheHashing.js","webpack:///./src/server/core/webApp.js","webpack:///./src/server/internalServer.js"],"names":["ACTION_PREFIX","UPDATE_USER","LOGIN_USER","LOGIN_SUCCESSFUL","LOGIN_FAILED","LOGOUT_USER","TOGGLE_LOGIN_MODE","CREATE_USER_ACCOUNT","VALIDATE_USER","VALIDATE_USER_SUCCESS","VALIDATE_USER_FAILED","FORGOT_USER_PASSWORD","FORGOT_USER_PASSWORD_COMPLETE","CHANGE_USER_PASSWORD","CHANGE_USER_PASSWORD_FAILED","CHANGE_USER_PASSWORD_COMPLETE","SET_RECAPTCHA_KEY","SET_RECAPTCHA_RESPONSE","ROUTING_PREFIX","GET_ENTRY","SET_ENTRY","SET_NODE","SET_ANCESTORS","SET_SIBLINGS","SET_ENTRY_ID","SET_ENTRY_RELATED_ARTICLES","SET_NAVIGATION_NOT_FOUND","SET_NAVIGATION_PATH","SET_TARGET_PROJECT","SET_ROUTE","CALL_HISTORY_METHOD","action","type","payload","getWebPImageUri","uri","formatedUri","indexOf","resizeImage","image","height","width","asset","sys","resizeImageUri","paramDelimeter","flattenArray","arr","reduce","acc","val","concat","filter","elem","pos","api","url","options","fetch","then","response","setTimeout","ok","Error","statusText","json","data","catch","error","dynamicSort","property","sortOrder","substr","a","b","result","randomString","length","text","possible","i","charAt","Math","floor","random","selectUser","state","get","selectUsername","getIn","selectUserLoggedIn","selectUserGroups","selectUserMessage","selectLoginScreenMode","selectPasswordMessage","selectChangePasswordMessage","selectCaptchaSiteKey","selectCaptchaData","selectCaptchaResponse","selectCaptchaToken","selectRouteEntry","Map","selectNodeDepends","List","selectCurrentTreeID","selectEntryDepends","selectRouteEntryEntryId","selectRouteEntryContentTypeId","entry","selectRouteEntrySlug","selectRouteEntryID","selectCurrentPath","selectCurrentSearch","selectQueryStringAsObject","queryParams","selectCurrentProject","selectIsNotFound","selectCurrentAncestors","selectCurrentNode","selectBreadcrumb","push","selectRouteLoading","COOKIE_VALID_DAYS","_cookie","Cookies","withConverter","read","value","decodeURIComponent","write","encodeURIComponent","CookieHelper","GetCookie","name","SetCookie","maxAgeDays","set","expires","DeleteCookie","remove","LOGIN_COOKIE","LAST_USERNAME_COOKIE","DISPLAY_NAME_COOKIE","USER_LANGUAGE_COOKIE","AVATAR_COOKIE","LoginHelper","GetLoginCookie","SetLoginCookies","user","securityToken","username","GetCachedCredentials","displayName","languageId","avatar","GetCachedCredentialsSSR","cookies","ClearCachedCredentials","ValidateUser","groups","cached","SecurityApi","SecurityToken","logonResult","LogonResult","id","UserID","loginScreenMode","loggedIn","userWithGroups","GetGroups","LoginUser","password","loginResponse","LogonUser","failedLogin","CheckResult","userInfoResponse","GetUserInfo","JSON","parse","GroupCollection","errorMessage","map","group","GroupName","GroupId","fullName","Fullname","emailAddress","Email","LogoutUser","initialUserState","toJS","ClientRedirectToLogin","window","location","href","LoginPageUrl","pathname","search","ForgotPassword","currentUrl","protocol","host","passwordResponse","ChangePassword","oldPassword","newPassword","newPasswordConfirm","ValidatePassword","ChangePasswordWithToken","token","btoa","pword","test","Results","CMS_URL","SERVERS","cms","config","REGISTER_USER_URI","LOGON_USER_URI","VALIDATE_USER_URI","USER_INFO_URI","FORGOT_PASSWORD_URI","CHANGE_PASSWORD_URI","CHANGE_PASSWORD_TOKEN_URI","AUTH_CAPTCHA_URI","LOGIN_URL","REGISTER_USER_URL","LOGON_USER_URL","VALIDATE_USER_URL","USER_INFO_URL","BASE_OPTIONS","method","headers","AuthoriseRecaptcha","body","ip","applicationName","stringify","bodyToken","ContensisCMSUserName","RegisterUser","email","responseBody","getClientConfig","project","DELIVERY_API_CONFIG","projectId","PROXY_DELIVERY_API","rootUrl","responseHandler","GetClientSideDeliveryApiStatus","currentHostname","hostname","GetDeliveryApiStatusFromHostname","endsWith","GetResponseGuids","object","Ids","Object","keys","some","k","language","dataFormat","toLowerCase","subIds","GetAllResponseGuids","returnItems","unique","Set","DeliveryApi","query","linkDepth","env","client","Client","create","entries","getClient","deliveryApiStatus","baseConfig","versionStatus","getEntry","deliveryApi","CacheNode","constructor","key","next","prev","LruCache","limit","head","tail","size","node","setHead","CachedSearch","cache","taxonomyLookup","request","toString","clientConfig","getContentType","contentTypes","getTaxonomyNode","taxonomy","resolveChildren","extendTaxonomyNode","getRootNode","nodes","getRoot","getNode","path","getAncestors","getChildren","getSiblings","execute","promise","getTaxonomyId","children","n","parts","split","getTaxonomyKey","cachedSearch","passwordReset","passwordResetMessage","changePasswordMessage","recaptcha","isHuman","fromJS","newMode","loginMode","setIn","GET_NODE_TREE","SET_NODE_TREE","GET_NODE_TREE_ERROR","loginUser","validateUser","logoutUser","toggleLoginMode","createUserAccount","forgotPassword","changePassword","changePasswordWithToken","setRecaptchaKey","setRecaptchaResponse","getDisplayName","WrappedComponent","withLogin","mapStateToProps","userMessage","screenMode","passwordMessage","captchaSiteKey","isLoggedIn","currentPath","queryString","mapDispatchToProps","captchaResponse","ConnectedComponent","connect","VERSION_PREFIX","SET_VERSION","SET_VERSION_STATUS","routeParams","staticRoute","match","params","buildUrl","route","qs","clientHostname","port","addHostname","PUBLIC_URI","wrappedComponentProps","KEY","VALUE","propsJS","newProps","wrappedComponentProp","Iterable","isIterable","setNotFound","notFound","setNavigationPath","withEvents","statePath","routes","setCurrentProject","allowedGroups","setRoute","setRouteEntry","userSagas","takeEvery","loginUserSaga","logoutUserSaga","validateUserSaga","createUserAccountSaga","getGroups","call","updateUserSaga","redirect","fork","select","ClientRedirectToHome","currentQs","qsToken","securitytoken","userState","put","from","currentSearch","redirectUri","redirect_uri","message","history","registerResponse","registrationResult","verifiedEmail","failedToCreateAccount","selectCommitRef","selectBuildNumber","selectVersionStatus","hasNavigationTree","selectNavigationRoot","selectNavigationDepends","getTrimmedPath","lastChar","substring","RouteLoader","contentTypeId","isLoading","isNotFound","loadingComponent","notFoundComponent","useLocation","matchedStaticRoute","matchRoutes","StaticRoutes","isStaticRoute","trimmedPath","setPath","useCallback","serverPath","isExact","p","startsWith","join","useEffect","renderRoutes","LoadingComponent","MatchedComponent","ContentTypeMappings","find","item","contentTypeID","NotFoundComponent","NotFound","propTypes","PropTypes","string","bool","func","objectOf","array","hot","module","setVersion","commitRef","buildNo","setVersionStatus","status","Status","code","staticContext","number","isRequired","element","selectedHistory","createBrowserHistory","createMemoryHistory","browserHistory","servers","alias","publicUri","projects","PROJECTS","pickProject","includes","DataFormats","webpage","filename","includeInSearch","slug","Fields","entryTitle","entryDescription","keywords","wildcard","Projects","website","VersionStatus","published","latest","ContentTypes","contentPage","WebpageFormats","FilterExpressionTypes","contentType","field","now","Date","performance","fixFreeTextForElastic","s","illegalChars","encodedChars","illegalRegEx","RegExp","c","encodedRegEx","replace","timedSearch","duration","start","end","extractQuotedPhrases","searchTerm","pattern","callCustomApi","customApi","filters","fieldExpression","operator","weight","Array","isArray","equalToOrIn","Op","contentTypeIdExpression","contentTypeIds","webpageTemplates","expressions","dataFormatExpression","or","filterExpressions","param","withContentTypeIds","notContentTypeIds","andExpr","and","dataFormatExpr","withExpr","notExpr","not","add","defaultExpressions","equalTo","defaultSearchExpressions","includeInSearchExpressions","exists","orderByExpression","orderBy","expression","OrderBy","ob","desc","asc","in","customWhereExpressions","where","clause","idx","termExpressions","weightedSearchFields","quotedPhrases","modifiedSearchTerm","forEach","qp","trim","operators","containsOp","f","term","fieldId","freeTextOp","fieldOperators","addRange","contains","routeEntryByFields","fields","Query","routingSagas","getRouteSaga","setRouteSaga","args","appsays","onRouteLoad","doNavigation","customNavigation","entryLinkDepth","setContentTypeLimits","ct","routeEntry","isHome","isPreview","customRouting","fetchNode","pathNode","ancestors","siblings","scroll","top","currentPathDepth","depth","entryFields","splitPath","entryGuid","previewEntry","items","do404","onRouteLoaded","tree","treeDepth","e","log","stack","all","navigationSagas","ensureNodeTreeSaga","deliveryApiVersionStatus","ex","featureSagas","rootSaga","subSagas","initialState","currentNode","currentProject","entryID","entryDepends","currentNodeAncestors","currentTreeId","ancestorIDs","currentNodeDepends","allNodeDepends","union","component","nodeDepends","removeIn","currentNodeSiblingParent","siblingIDs","parentId","contensisVersionStatus","root","treeDepends","isError","isReady","routerMiddleware","store","featureReducers","thunkMiddleware","thunk","reduxDevToolsMiddleware","__REDUX_DEVTOOLS_EXTENSION__","sagaMiddleware","createSagaMiddleware","middleware","compose","applyMiddleware","reducers","navigation","NavigationReducer","routing","RoutingReducer","UserReducer","version","VersionReducer","combinedReducers","combineReducers","createStore","runSaga","run","close","dispatch","END","AppRoot","props","internalServer","require","default","exports","app","httpProxy","apiProxy","ReactApp","DisplayStartupConfiguration","console","reverseProxyPaths","fetchMyIp","configureLocalEndpoint","ipJson","internalVip","apiConfig","localDns","disableDnsChanges","evilDns","internalIp","createProxyServer","reverseProxies","deliveryApiProxy","req","res","target","iis","web","changeOrigin","on","AccessMethods","DYNAMIC","STATIC","FRAGMENT","REDUX","ResponseMethod","send","handleResponse","content","hashKeys","XXHash","returnKeys","cacheKey","inputBuffer","Buffer","hashed","h32","reversedhex","reverse","outputBuffer","addStandardHeaders","packagejson","nodeDependsKeys","nodeKey","allDepends","allDependsHashed","surrogateKeyHeader","header","addVarnishAuthenticationHeaders","setHeader","stateEntry","globalGroups","allGroups","readFileSync","fs","loadBundleData","stats","templates","build","bundle","templateHTML","html","templateHTMLStatic","static","templateHTMLFragment","fragment","webApp","withReducers","withSagas","versionData","differentialBundles","dynamicPaths","disableSsrRedux","handleResponses","bundles","legacy","modern","versionInfo","originalUrl","accessMethod","isDynamicNormalised","dynamic","onlyDynamic","ssr","isReduxRequestNormalised","redux","isFragmentNormalised","isStaticNormalised","context","initialEntries","versionStatusFromHostname","modules","jsx","moduleName","fromEntries","lib","paths","renderToString","isDynamicHint","dynamicBundles","getBundles","dynamicBundleScripts","publicPath","responseHtmlDynamic","toPromise","sheet","ServerStyleSheet","collectStyles","helmet","Helmet","renderStatic","rewind","title","metadata","meta","reduxState","getState","styleTags","getStyleTags","bundleScripts","serialisedReduxData","serialize","responseHTML","minifyCssString","err","express","ServerFeatures","disable","ConfigureReverseProxies","ConfigureWebApp","use","maxage","ConfigureLocalDNS","Loadable","preloadAll","server","listen","info","emit"],"mappings":"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","file":"zengenti-isomorphic-base.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"immutable\"), require(\"react\"), require(\"contensis-delivery-api\"), require(\"prop-types\"), require(\"query-string\"), require(\"react-redux\"), require(\"react-router-dom\"), require(\"react-hot-loader\"), require(\"react-router-config\"), require(\"@redux-saga/core/effects\"), require(\"js-cookie\"), require(\"redux\"), require(\"loglevel\"), require(\"react-loadable\"), require(\"history\"), require(\"redux-saga\"), require(\"redux-immutable\"), require(\"redux-thunk\"), require(\"react-dom/server\"), require(\"minify-css-string\"), require(\"isomorphic-fetch\"), require(\"express\"), require(\"evil-dns\"), require(\"react-loadable/webpack\"), require(\"react-helmet\"), require(\"serialize-javascript\"), require(\"http-proxy\"), require(\"styled-components\"), require(\"fromentries\"), require(\"xxhashjs\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"immutable\", \"react\", \"contensis-delivery-api\", \"prop-types\", \"query-string\", \"react-redux\", \"react-router-dom\", \"react-hot-loader\", \"react-router-config\", \"@redux-saga/core/effects\", \"js-cookie\", \"redux\", \"loglevel\", \"react-loadable\", \"history\", \"redux-saga\", \"redux-immutable\", \"redux-thunk\", \"react-dom/server\", \"minify-css-string\", \"isomorphic-fetch\", \"express\", \"evil-dns\", \"react-loadable/webpack\", \"react-helmet\", \"serialize-javascript\", \"http-proxy\", \"styled-components\", \"fromentries\", \"xxhashjs\"], factory);\n\telse {\n\t\tvar a = typeof exports === 'object' ? factory(require(\"immutable\"), require(\"react\"), require(\"contensis-delivery-api\"), require(\"prop-types\"), require(\"query-string\"), require(\"react-redux\"), require(\"react-router-dom\"), require(\"react-hot-loader\"), require(\"react-router-config\"), require(\"@redux-saga/core/effects\"), require(\"js-cookie\"), require(\"redux\"), require(\"loglevel\"), require(\"react-loadable\"), require(\"history\"), require(\"redux-saga\"), require(\"redux-immutable\"), require(\"redux-thunk\"), require(\"react-dom/server\"), require(\"minify-css-string\"), require(\"isomorphic-fetch\"), require(\"express\"), require(\"evil-dns\"), require(\"react-loadable/webpack\"), require(\"react-helmet\"), require(\"serialize-javascript\"), require(\"http-proxy\"), require(\"styled-components\"), require(\"fromentries\"), require(\"xxhashjs\")) : factory(root[\"immutable\"], root[\"react\"], root[\"contensis-delivery-api\"], root[\"prop-types\"], root[\"query-string\"], root[\"react-redux\"], root[\"react-router-dom\"], root[\"react-hot-loader\"], root[\"react-router-config\"], root[\"@redux-saga/core/effects\"], root[\"js-cookie\"], root[\"redux\"], root[\"loglevel\"], root[\"react-loadable\"], root[\"history\"], root[\"redux-saga\"], root[\"redux-immutable\"], root[\"redux-thunk\"], root[\"react-dom/server\"], root[\"minify-css-string\"], root[\"isomorphic-fetch\"], root[\"express\"], root[\"evil-dns\"], root[\"react-loadable/webpack\"], root[\"react-helmet\"], root[\"serialize-javascript\"], root[\"http-proxy\"], root[\"styled-components\"], root[\"fromentries\"], root[\"xxhashjs\"]);\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(global, function(__WEBPACK_EXTERNAL_MODULE__2__, __WEBPACK_EXTERNAL_MODULE__5__, __WEBPACK_EXTERNAL_MODULE__6__, __WEBPACK_EXTERNAL_MODULE__9__, __WEBPACK_EXTERNAL_MODULE__12__, __WEBPACK_EXTERNAL_MODULE__16__, __WEBPACK_EXTERNAL_MODULE__17__, __WEBPACK_EXTERNAL_MODULE__24__, __WEBPACK_EXTERNAL_MODULE__25__, __WEBPACK_EXTERNAL_MODULE__26__, __WEBPACK_EXTERNAL_MODULE__27__, __WEBPACK_EXTERNAL_MODULE__33__, __WEBPACK_EXTERNAL_MODULE__37__, __WEBPACK_EXTERNAL_MODULE__38__, __WEBPACK_EXTERNAL_MODULE__40__, __WEBPACK_EXTERNAL_MODULE__41__, __WEBPACK_EXTERNAL_MODULE__47__, __WEBPACK_EXTERNAL_MODULE__48__, __WEBPACK_EXTERNAL_MODULE__49__, __WEBPACK_EXTERNAL_MODULE__50__, __WEBPACK_EXTERNAL_MODULE__51__, __WEBPACK_EXTERNAL_MODULE__52__, __WEBPACK_EXTERNAL_MODULE__53__, __WEBPACK_EXTERNAL_MODULE__55__, __WEBPACK_EXTERNAL_MODULE__56__, __WEBPACK_EXTERNAL_MODULE__57__, __WEBPACK_EXTERNAL_MODULE__59__, __WEBPACK_EXTERNAL_MODULE__60__, __WEBPACK_EXTERNAL_MODULE__61__, __WEBPACK_EXTERNAL_MODULE__63__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 62);\n","export * from '@redux-saga/core/effects';\n","const ACTION_PREFIX = '@USER/';\nexport const UPDATE_USER = `${ACTION_PREFIX}UPDATE_USER`;\nexport const LOGIN_USER = `${ACTION_PREFIX}LOGIN_USER`;\nexport const LOGIN_SUCCESSFUL = `${ACTION_PREFIX}LOGIN_SUCCESSFUL`;\nexport const LOGIN_FAILED = `${ACTION_PREFIX}LOGIN_FAILED`;\nexport const LOGOUT_USER = `${ACTION_PREFIX}LOGOUT_USER`;\nexport const TOGGLE_LOGIN_MODE = `${ACTION_PREFIX}TOGGLE_LOGIN_MODE`;\nexport const CREATE_USER_ACCOUNT = `${ACTION_PREFIX}CREATE_USER_ACCOUNT`;\nexport const VALIDATE_USER = `${ACTION_PREFIX}VALIDATE_USER`;\nexport const VALIDATE_USER_SUCCESS = `${ACTION_PREFIX}VALIDATE_USER_SUCCESS`;\nexport const VALIDATE_USER_FAILED = `${ACTION_PREFIX}VALIDATE_USER_FAILED`;\nexport const FORGOT_USER_PASSWORD = `${ACTION_PREFIX}FORGOT_USER_PASSWORD`;\nexport const FORGOT_USER_PASSWORD_COMPLETE = `${ACTION_PREFIX}FORGOT_USER_PASSWORD_COMPLETE`;\nexport const CHANGE_USER_PASSWORD = `${ACTION_PREFIX}CHANGE_USER_PASSWORD`;\nexport const CHANGE_USER_PASSWORD_FAILED = `${ACTION_PREFIX}CHANGE_USER_PASSWORD_FAILED`;\nexport const CHANGE_USER_PASSWORD_COMPLETE = `${ACTION_PREFIX}CHANGE_USER_PASSWORD_COMPLETE`;\nexport const SET_RECAPTCHA_KEY = `${ACTION_PREFIX}SET_RECAPTCHA_KEY`;\nexport const SET_RECAPTCHA_RESPONSE = `${ACTION_PREFIX}SET_RECAPTCHA_RESPONSE`;\n","module.exports = __WEBPACK_EXTERNAL_MODULE__2__;","const ROUTING_PREFIX = '@ROUTING/';\nexport const GET_ENTRY = `${ROUTING_PREFIX}_GET_ENTRY`;\nexport const SET_ENTRY = `${ROUTING_PREFIX}_SET_ENTRY`;\nexport const SET_NODE = `${ROUTING_PREFIX}_SET_NODE`;\nexport const SET_ANCESTORS = `${ROUTING_PREFIX}_SET_ANCESTORS`;\nexport const SET_SIBLINGS = `${ROUTING_PREFIX}_SET_SIBLINGS`;\nexport const SET_ENTRY_ID = `${ROUTING_PREFIX}_SET_ENTRY_ID`;\nexport const SET_ENTRY_RELATED_ARTICLES = `${ROUTING_PREFIX}_SET_ENTRY_RELATED_ARTICLES`;\n\nexport const SET_NAVIGATION_NOT_FOUND = `${ROUTING_PREFIX}_SET_NOT_FOUND`;\nexport const SET_NAVIGATION_PATH = `${ROUTING_PREFIX}_SET_NAVIGATION_PATH`;\n\nexport const SET_TARGET_PROJECT = `${ROUTING_PREFIX}_SET_TARGET_PROJECT`;\n\nexport const SET_ROUTE = `${ROUTING_PREFIX}_SET_ROUTE`;\nexport const CALL_HISTORY_METHOD = `${ROUTING_PREFIX}_CALL_HISTORY_METHOD`;\n","export function action(type, payload = {}) {\n  return { type, ...payload };\n}\n\nexport const getWebPImageUri = uri => {\n  let formatedUri = uri;\n  if (uri.indexOf('.gif') == -1) {\n    if (uri.indexOf('f=') == -1 && uri.indexOf('format=') == -1) {\n      if (uri.indexOf('?') > -1) {\n        formatedUri = `${uri}&f=webp`;\n      } else {\n        formatedUri = `${uri}?f=webp`;\n      }\n    }\n    if (\n      formatedUri.indexOf('q=') == -1 &&\n      formatedUri.indexOf('quality=') == -1\n    ) {\n      if (formatedUri.indexOf('?') > -1) {\n        formatedUri = `${formatedUri}&q=70`;\n      } else {\n        formatedUri = `${formatedUri}?q=70`;\n      }\n    }\n  }\n  return formatedUri;\n};\n\nexport const resizeImage = (image, height, width) => {\n  if (image.asset && image.asset.sys && image.asset.sys.uri) {\n    image.asset.sys.uri = resizeImageUri(image.asset.sys.uri, height, width);\n  }\n};\nexport const resizeImageUri = (uri, height, width) => {\n  let formatedUri = uri;\n  let paramDelimeter = '?';\n  if (uri.indexOf('?') > -1) {\n    paramDelimeter = '&';\n  }\n  if (width) {\n    if (\n      formatedUri.indexOf('w=') == -1 &&\n      formatedUri.indexOf('width=') == -1\n    ) {\n      formatedUri = `${formatedUri}${paramDelimeter}w=${width}`;\n      paramDelimeter = '&';\n    }\n  }\n  if (height) {\n    if (\n      formatedUri.indexOf('h=') == -1 &&\n      formatedUri.indexOf('height=') == -1\n    ) {\n      formatedUri = `${formatedUri}${paramDelimeter}h=${height}`;\n    }\n  }\n\n  return formatedUri;\n};\n\nexport function flattenArray(arr) {\n  // flatten arrays inside the supplied array and\n  // remove duplicates from the result\n  return arr\n    .reduce((acc, val) => acc.concat(val), [])\n    .filter((elem, pos, arr) => arr.indexOf(elem) == pos);\n}\n\nexport async function api(url, options) {\n  return fetch(url, options)\n    .then(async response => {\n      setTimeout(() => null, 0);\n      if (!response.ok) {\n        throw new Error(response.statusText);\n      }\n      return response.json().then(data => data);\n    })\n    .catch(error => {\n      //console.log(error);\n      throw error;\n    });\n}\n\nexport function dynamicSort(property) {\n  var sortOrder = 1;\n  if (property[0] === '-') {\n    sortOrder = -1;\n    property = property.substr(1);\n  }\n  return function(a, b) {\n    /* next line works with strings and numbers,\n     * and you may want to customize it to your needs\n     */\n    var result =\n      a[property] < b[property] ? -1 : a[property] > b[property] ? 1 : 0;\n    return result * sortOrder;\n  };\n}\n\nexport const randomString = length => {\n  let text = '';\n  const possible =\n    'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n  for (var i = 0; i < length; i++) {\n    text += possible.charAt(Math.floor(Math.random() * possible.length));\n  }\n  return text;\n};\n","module.exports = __WEBPACK_EXTERNAL_MODULE__5__;","module.exports = __WEBPACK_EXTERNAL_MODULE__6__;","export const selectUser = state => {\n  return state.get('user');\n};\nexport const selectUsername = state => {\n  return state.getIn(['user', 'username']);\n};\nexport const selectUserLoggedIn = state => {\n  return state.getIn(['user', 'loggedIn']);\n};\nexport const selectUserGroups = state => {\n  return state.getIn(['user', 'groups']);\n};\nexport const selectUserMessage = state => {\n  return state.getIn(['user', 'logonResult']);\n};\nexport const selectLoginScreenMode = state => {\n  return state.getIn(['user', 'loginScreenMode']);\n};\nexport const selectPasswordMessage = state => {\n  return state.getIn(['user', 'passwordResetMessage']);\n};\nexport const selectChangePasswordMessage = state => {\n  return state.getIn(['user', 'changePasswordMessage']);\n};\nexport const selectCaptchaSiteKey = state => {\n  return state.getIn(['user', 'recaptcha', 'key']);\n};\nexport const selectCaptchaData = state => {\n  return state.getIn(['user', 'recaptcha', 'response']);\n};\nexport const selectCaptchaResponse = state => {\n  return state.getIn(['user', 'recaptcha', 'response', 'isHuman']);\n};\nexport const selectCaptchaToken = state => {\n  return state.getIn(['user', 'recaptcha', 'response', 'token']);\n};\n","import { List, Map } from 'immutable';\nimport { queryParams } from '~/core/util/navigation';\n\nexport const selectRouteEntry = state => {\n  return state.getIn(['routing', 'entry'], Map({}));\n};\nexport const selectNodeDepends = state => {\n  return state.getIn(['routing', 'nodeDepends'], new List([]));\n};\nexport const selectCurrentTreeID = state => {\n  return state.getIn(['routing', 'currentTreeId']);\n};\nexport const selectEntryDepends = state => {\n  return state.getIn(['routing', 'entryDepends']);\n};\nexport const selectRouteEntryEntryId = state => {\n  return state.getIn(['routing', 'entry', 'sys', 'id'], null);\n};\nexport const selectRouteEntryContentTypeId = state => {\n  const entry = selectRouteEntry(state);\n  return entry && entry.getIn(['sys', 'contentTypeId'], null);\n};\nexport const selectRouteEntrySlug = state => {\n  return state.getIn(['routing', 'entry', 'sys', 'slug'], null);\n};\nexport const selectRouteEntryID = state => {\n  return state.getIn(['routing', 'entryID']);\n};\nexport const selectCurrentPath = state => {\n  return state.getIn(['routing', 'currentPath']);\n};\nexport const selectCurrentSearch = state => {\n  return state.getIn(['routing', 'location', 'search']);\n};\nexport const selectQueryStringAsObject = state =>\n  queryParams(selectCurrentSearch(state));\nexport const selectCurrentProject = state => {\n  return state.getIn(['routing', 'currentProject']);\n};\nexport const selectIsNotFound = state => {\n  return state.getIn(['routing', 'notFound']);\n};\nexport const selectCurrentAncestors = state => {\n  return state.getIn(['routing', 'currentNodeAncestors'], new List());\n};\nexport const selectCurrentNode = state => {\n  return state.getIn(['routing', 'currentNode']);\n};\nexport const selectBreadcrumb = state => {\n  return (selectCurrentAncestors(state) || new List()).push(\n    selectCurrentNode(state)\n  );\n};\nexport const selectRouteLoading = state => {\n  return state.getIn(['routing', 'isLoading']);\n};\n","module.exports = __WEBPACK_EXTERNAL_MODULE__9__;","import Cookies from 'js-cookie';\n\nconst COOKIE_VALID_DAYS = 1; // 0 = Session cookie\n\n// Override the default js-cookie conversion / encoding\n// methods so the written values work with Contensis sites\nconst _cookie = Cookies.withConverter({\n  read: value => decodeURIComponent(value),\n  write: value => encodeURIComponent(value),\n});\n\nexport class CookieHelper {\n  static GetCookie(name) {\n    return _cookie.get(name);\n  }\n\n  static SetCookie(name, value, maxAgeDays = COOKIE_VALID_DAYS) {\n    maxAgeDays === 0\n      ? _cookie.set(name, value)\n      : _cookie.set(name, value, { expires: maxAgeDays });\n  }\n\n  static DeleteCookie(name) {\n    _cookie.remove(name);\n  }\n}\n","// import { ajax } from 'jquery';\n// import queryString from 'query-string';\n\nimport { CookieHelper } from './CookieHelper.class';\nimport { SecurityApi } from './SecurityApi.class';\n\nimport { initialUserState } from '../redux/reducers';\n// import { randomString } from '~/core/util/helpers';\n// import userManager from './oidc/userManager';\n\nconst LOGIN_COOKIE = 'ContensisCMSUserName';\nconst LAST_USERNAME_COOKIE = 'ContensisLastUserName';\nconst DISPLAY_NAME_COOKIE = 'ContensisDisplayName';\nconst USER_LANGUAGE_COOKIE = 'User_LanguageID';\nconst AVATAR_COOKIE = 'ContensisAvatar';\n\n// const contensis = CONTENSIS; /* global CONTENSIS */\n\nexport class LoginHelper {\n  static GetLoginCookie() {\n    return CookieHelper.GetCookie(LOGIN_COOKIE);\n  }\n\n  static SetLoginCookies(user) {\n    if (user.securityToken)\n      CookieHelper.SetCookie(LOGIN_COOKIE, user.securityToken);\n    if (user.username) {\n      CookieHelper.SetCookie(LAST_USERNAME_COOKIE, user.username);\n      CookieHelper.SetCookie(DISPLAY_NAME_COOKIE, user.username);\n    }\n  }\n\n  static GetCachedCredentials() {\n    return {\n      securityToken: CookieHelper.GetCookie(LOGIN_COOKIE),\n      username: CookieHelper.GetCookie(LAST_USERNAME_COOKIE),\n      displayName: CookieHelper.GetCookie(DISPLAY_NAME_COOKIE),\n      languageId: CookieHelper.GetCookie(USER_LANGUAGE_COOKIE),\n      avatar: CookieHelper.GetCookie(AVATAR_COOKIE),\n    };\n  }\n\n  static GetCachedCredentialsSSR(cookies) {\n    return {\n      securityToken: cookies[LOGIN_COOKIE],\n      username: cookies[LAST_USERNAME_COOKIE],\n      displayName: cookies[DISPLAY_NAME_COOKIE],\n      languageId: cookies[USER_LANGUAGE_COOKIE],\n      avatar: cookies[AVATAR_COOKIE],\n    };\n  }\n\n  static ClearCachedCredentials() {\n    CookieHelper.DeleteCookie(LOGIN_COOKIE);\n    CookieHelper.DeleteCookie(LAST_USERNAME_COOKIE);\n    CookieHelper.DeleteCookie(DISPLAY_NAME_COOKIE);\n    CookieHelper.DeleteCookie(USER_LANGUAGE_COOKIE);\n    CookieHelper.DeleteCookie(AVATAR_COOKIE);\n  }\n\n  static async ValidateUser(groups = false, cookies = null) {\n    const cached = cookies\n      ? this.GetCachedCredentialsSSR(cookies)\n      : this.GetCachedCredentials();\n\n    if (cached.securityToken) {\n      const response = await SecurityApi.ValidateUser(cached.securityToken);\n\n      if (!response) return false;\n\n      // Convert result to a User object\n      const user = {\n        username: cached.username,\n        securityToken: encodeURIComponent(response.SecurityToken),\n        logonResult: response.LogonResult,\n        id: response.UserID,\n        loginScreenMode: 'login',\n      };\n\n      if (user.logonResult !== 0) {\n        // Clear the cookie cache so we don't need to validate again\n        LoginHelper.ClearCachedCredentials();\n      } else {\n        // Set logged in flag\n        user.loggedIn = true;\n\n        if (groups) {\n          const userWithGroups = await this.GetGroups(user);\n          return userWithGroups;\n        }\n      }\n\n      return user;\n    }\n    return false;\n  }\n\n  static async LoginUser(username, password, groups = false) {\n    if (username && password) {\n      // Call LogonUser API\n      const loginResponse = await SecurityApi.LogonUser(username, password);\n      if (loginResponse) {\n        // Extract the elements we need from the response\n        const { SecurityToken, LogonResult, UserID } = loginResponse;\n        const failedLogin = !!LogonResult; // 0 is successful\n\n        // Map response to new user object\n        const user = {\n          username,\n          failedLogin,\n          loggedIn: !!SecurityToken && !failedLogin,\n          securityToken: SecurityToken,\n          id: UserID,\n          logonResult: this.CheckResult(LogonResult),\n        };\n\n        if (!user.failedLogin && !!user.securityToken) {\n          this.SetLoginCookies(user);\n\n          if (groups) {\n            const userWithGroups = await this.GetGroups(user);\n            return userWithGroups;\n          }\n        }\n\n        return user;\n      } else {\n        // Create user object to show login failed due to service fault\n        return {\n          securityToken: null,\n          loggedIn: false,\n          failedLogin: true,\n          logonResult: 'Service Fault',\n        };\n      }\n    }\n  }\n\n  static async GetGroups(user) {\n    if (!user.securityToken) {\n      return user;\n    }\n\n    const userInfoResponse = await SecurityApi.GetUserInfo(user.securityToken);\n    if (userInfoResponse) {\n      const response = JSON.parse(userInfoResponse);\n\n      if (response.Error || !response.GroupCollection) {\n        user.errorMessage = `Problem fetching user info: ${response.Error}`;\n      } else {\n        user.groups = response.GroupCollection.map(group => ({\n          name: group.GroupName,\n          id: group.GroupId,\n        }));\n        user.fullName = response.Fullname;\n        user.emailAddress = response.Email;\n      }\n    }\n    return user;\n  }\n\n  static LogoutUser() {\n    this.ClearCachedCredentials();\n    return initialUserState.toJS();\n  }\n\n  static ClientRedirectToLogin(uri) {\n    if (typeof window != 'undefined') {\n      window.location.href = LoginHelper.LoginPageUrl(uri); // LoginHelper.IsWsFedSignin()\n      // ? LoginHelper.WsFedLoginPageUrl(window.location)\n      // : LoginHelper.LoginPageUrl(uri);\n    }\n  }\n\n  static LoginPageUrl(uri) {\n    return `${uri || '/login'}?redirect_uri=${window.location.pathname +\n      window.location.search}`;\n  }\n  // static WsFedLoginPageUrl(currentLocation) {\n  //   const loginPage = contensis.ADFS_LOGIN_PAGE.replace(\n  //     '{redirect_uri}',\n  //     encodeURIComponent(currentLocation.toString().split('#')[0])\n  //   ).replace('{nonce}', randomString(5));\n  //   return `${contensis.URL}${loginPage}`.replace(/([^:]\\/)\\/+/g, '$1');\n  // }\n\n  // static IsWsFedSignin() {\n  //   return contensis.WSFED_SIGNIN;\n  // }\n\n  // static WsFedSignin(redirectUri) {\n  //   userManager.signinRedirect({\n  //     scope: 'openid',\n  //     response_type: 'id_token',\n  //     redirect_uri: redirectUri || window.location.toString(),\n  //   });\n  // }\n\n  // static WsFedLogout() {\n  //   ajax(`${contensis.URL}authenticate/logout/`, {\n  //     dataType: 'jsonp',\n  //     jsonp: false,\n  //     async: false,\n  //   });\n  // }\n\n  static async ForgotPassword(username) {\n    if (username) {\n      const currentUrl = window.location.protocol + '//' + window.location.host;\n      const passwordResponse = await SecurityApi.ForgotPassword(\n        username,\n        currentUrl\n      );\n      if (passwordResponse) {\n        // Extract the elements we need from the response\n        return passwordResponse;\n      }\n    }\n  }\n\n  static async ChangePassword(\n    username,\n    oldPassword,\n    newPassword,\n    newPasswordConfirm\n  ) {\n    if (newPassword && newPasswordConfirm) {\n      if (this.ValidatePassword(newPassword)) {\n        const passwordResponse = await SecurityApi.ChangePassword(\n          username,\n          oldPassword,\n          newPassword,\n          newPasswordConfirm\n        );\n        //const passwordResponse = await SecurityApi.ChangePassword(btoa(username), btoa(oldPassword), btoa(newPassword), btoa(newPasswordConfirm));\n        if (passwordResponse) {\n          // Extract the elements we need from the response\n          return passwordResponse;\n        }\n      } else {\n        return 'New password does not meet the requirements: \\r\\n\\r\\n - Must be a minimum of 8 characters long \\r\\n - Must contain at least 1 uppercase character \\r\\n - Must contain at least 1 special character or number';\n      }\n    }\n  }\n\n  static async ChangePasswordWithToken(token, newPassword, newPasswordConfirm) {\n    if (newPassword && newPasswordConfirm) {\n      if (this.ValidatePassword(newPassword)) {\n        const passwordResponse = await SecurityApi.ChangePasswordWithToken(\n          token,\n          btoa(newPassword),\n          btoa(newPasswordConfirm)\n        );\n        //const passwordResponse = await SecurityApi.ChangePassword(btoa(username), btoa(oldPassword), btoa(newPassword), btoa(newPasswordConfirm));\n        if (passwordResponse) {\n          // Extract the elements we need from the response\n          return passwordResponse;\n        }\n      } else {\n        return 'New password does not meet the requirements: \\r\\n\\r\\n - Must be a minimum of 8 characters long \\r\\n - Must contain at least 1 uppercase character \\r\\n - Must contain at least 1 special character or number';\n      }\n    }\n  }\n\n  static ValidatePassword(pword) {\n    //Password must be over 8 characters long\n    if (pword.length < 8) return false;\n    //This only returns true if the following criteria is met:\n    //  *8 chars or more\n    //  *Must contain at least 1 capital letter\n    //  *Must contain at least 1 number or special character\n    return /^(?:(?=.*[a-z])(?:(?=.*[A-Z])(?=.*[\\d\\W])|(?=.*\\W)(?=.*\\d))|(?=.*\\W)(?=.*[A-Z])(?=.*\\d)).{8,}$/.test(\n      pword\n    );\n  }\n\n  static CheckResult(result) {\n    const Results = {\n      '0': 'OK',\n      '-2': 'Incorrect username or password',\n      '-3': 'Account disabled',\n      '-4': 'Account locked',\n      '-5': 'Log on from this PC is denied',\n      '-6': 'Log on at this time is denied',\n      '-7': 'Account already logged in',\n      '-9': 'Unspecified error',\n      '2': 'Password change required',\n      '3': 'Insufficient privileges',\n      '-10': 'Account expired',\n      '-11': 'Maintenance mode',\n      '4': 'Security token expired',\n      '': 'An error has occured',\n    };\n    return Results[result];\n  }\n}\n","const CMS_URL = SERVERS.cms; /* global SERVERS */\n\nconst config = {\n  REGISTER_USER_URI: 'Security/RegisterUser',\n  LOGON_USER_URI: 'REST/Contensis/Security/AuthenticateApplication',\n  VALIDATE_USER_URI: 'REST/Contensis/Security/IsAuthenticated',\n  USER_INFO_URI: 'REST/Contensis/Security/GetUserInfo',\n  FORGOT_PASSWORD_URI: 'Security/ResetPasswordEmail',\n  CHANGE_PASSWORD_URI: 'Security/ChangePassword',\n  CHANGE_PASSWORD_TOKEN_URI: 'Security/ChangePasswordWithToken',\n  AUTH_CAPTCHA_URI: 'Security/AuthenticateCaptcha',\n  LOGIN_URL: '/business-government/partner',\n};\n\nconst REGISTER_USER_URL = `${CMS_URL}/${config.REGISTER_USER_URI}`;\nconst LOGON_USER_URL = `${CMS_URL}/${config.LOGON_USER_URI}`;\nconst VALIDATE_USER_URL = `${CMS_URL}/${config.VALIDATE_USER_URI}`;\nconst USER_INFO_URL = `${CMS_URL}/${config.USER_INFO_URI}`;\nconst FORGOT_PASSWORD_URI = `/${config.FORGOT_PASSWORD_URI}`;\nconst CHANGE_PASSWORD_URI = `/${config.CHANGE_PASSWORD_URI}`;\nconst AUTH_CAPTCHA_URI = `/${config.AUTH_CAPTCHA_URI}`;\nconst CHANGE_PASSWORD_TOKEN_URI = `/${config.CHANGE_PASSWORD_TOKEN_URI}`;\n\nconst BASE_OPTIONS = {\n  method: 'GET',\n  headers: { 'Content-Type': 'application/json' },\n};\n\nexport class SecurityApi {\n  static async AuthoriseRecaptcha(token) {\n    const url = `${AUTH_CAPTCHA_URI}?captchaToken=${encodeURIComponent(token)}`;\n    const options = {\n      headers: { 'Content-Type': 'application/json' },\n      method: 'POST',\n    };\n    return await SecurityApi.get(url, options);\n  }\n\n  static async LogonUser(username, password) {\n    const body = {\n      username,\n      password,\n      ip: '127.0.0.1',\n      applicationName: 'DesktopTool',\n    };\n    const options = {\n      ...BASE_OPTIONS,\n      method: 'POST',\n      body: JSON.stringify(body),\n    };\n    return await SecurityApi.get(LOGON_USER_URL, options);\n  }\n\n  static async ValidateUser(securityToken) {\n    const url = `${VALIDATE_USER_URL}?token=${encodeURIComponent(\n      securityToken\n    )}`;\n    const bodyToken = encodeURIComponent(\n      decodeURIComponent(decodeURIComponent(securityToken))\n    );\n    const options = {\n      ...BASE_OPTIONS,\n      method: 'POST',\n      body: JSON.stringify({ securityToken: bodyToken }),\n    };\n    return await SecurityApi.get(url, options);\n  }\n\n  static async GetUserInfo(securityToken) {\n    const options = {\n      ...BASE_OPTIONS,\n      headers: {\n        ['Content-Type']: 'text/plain',\n        ContensisCMSUserName: securityToken,\n      },\n    };\n    return await SecurityApi.get(USER_INFO_URL, options);\n  }\n\n  static async RegisterUser(email, password) {\n    const body = { email, password };\n    const options = {\n      ...BASE_OPTIONS,\n      method: 'POST',\n      body: JSON.stringify(body),\n    };\n    return await SecurityApi.get(REGISTER_USER_URL, options);\n  }\n\n  static async ChangePassword(\n    username,\n    oldPassword,\n    newPassword,\n    newPasswordConfirm\n  ) {\n    const url = `${CHANGE_PASSWORD_URI}?username=${encodeURIComponent(\n      username\n    )}&oldPassword=${encodeURIComponent(\n      oldPassword\n    )}&newPassword=${encodeURIComponent(\n      newPassword\n    )}&newPasswordConfirm=${encodeURIComponent(newPasswordConfirm)}`;\n    const options = {\n      headers: { 'Content-Type': 'application/json' },\n      method: 'POST',\n    };\n    return await SecurityApi.get(url, options);\n  }\n\n  static async ChangePasswordWithToken(token, newPassword, newPasswordConfirm) {\n    const url = `${CHANGE_PASSWORD_TOKEN_URI}?token=${token}&newPassword=${encodeURIComponent(\n      newPassword\n    )}&confirmPassword=${encodeURIComponent(newPasswordConfirm)}`;\n    const options = {\n      headers: { 'Content-Type': 'application/json' },\n      method: 'POST',\n    };\n    return await SecurityApi.get(url, options);\n  }\n\n  static async ForgotPassword(username, currentUrl) {\n    const url = `${FORGOT_PASSWORD_URI}?username=${encodeURIComponent(\n      username\n    )}&currentUrl=${encodeURIComponent(currentUrl)}`;\n    const options = {\n      headers: { 'Content-Type': 'application/json' },\n      method: 'POST',\n    };\n    return await SecurityApi.get(url, options);\n  }\n\n  static async get(url, options = BASE_OPTIONS) {\n    try {\n      const responseBody = await api(url, options);\n      if (responseBody) return responseBody;\n      return false;\n    } catch (error) {\n      return false;\n    }\n  }\n}\n\nasync function api(url, options) {\n  return fetch(url, options)\n    .then(async response => {\n      setTimeout(() => null, 0);\n      if (!response.ok) {\n        throw new Error(response.statusText);\n      }\n      return response.json().then(data => data);\n    })\n    .catch(error => {\n      //console.log(error);\n      throw error;\n    });\n}\n","module.exports = __WEBPACK_EXTERNAL_MODULE__12__;","import { Client } from 'contensis-delivery-api';\n\nconst getClientConfig = project => {\n  let config = DELIVERY_API_CONFIG; /* global DELIVERY_API_CONFIG */\n  if (project) {\n    config.projectId = project;\n  }\n\n  if (\n    typeof window != 'undefined' &&\n    PROXY_DELIVERY_API /* global PROXY_DELIVERY_API */\n  ) {\n    // ensure a relative url is used to bypass the need for CORS (separate OPTIONS calls)\n    config.rootUrl = '';\n    config.responseHandler = {\n      404: () => null,\n    };\n  }\n  return config;\n};\n\nexport * from 'contensis-delivery-api';\n\n// This should only be executed on the client as it relies on the window.\nexport const GetClientSideDeliveryApiStatus = () => {\n  if (typeof window != 'undefined') {\n    const currentHostname = window.location.hostname;\n    return GetDeliveryApiStatusFromHostname(currentHostname);\n  }\n  return null;\n};\n\nexport const GetDeliveryApiStatusFromHostname = currentHostname => {\n  if (currentHostname.indexOf('localhost') > -1) return 'latest';\n\n  if (currentHostname.endsWith('contensis.cloud')) {\n    if (currentHostname.indexOf('preview.') > -1) {\n      return 'latest';\n    } else {\n      return 'published';\n    }\n  }\n\n  if (currentHostname.endsWith('cloud.contensis.com')) {\n    if (currentHostname.indexOf('preview-') > -1) {\n      return 'latest';\n    } else {\n      return 'published';\n    }\n  }\n\n  return 'published';\n};\n\nexport const GetResponseGuids = object => {\n  let Ids = [];\n  Object.keys(object).some(function(k) {\n    if (k === 'sys') {\n      //Should always have an ID, but lets check...\n      if (object[k].id && object[k].language) {\n        // We can exclude assets here i think... ?\n        if (object[k].dataFormat) {\n          if (object[k].dataFormat !== 'asset') {\n            Ids.push(`${object[k].id}_${object[k].language.toLowerCase()}`);\n          }\n        } else {\n          // If we don't have a dataformat add it anyhow, for safety\n          Ids.push(`${object[k].id}_${object[k].language.toLowerCase()}`);\n        }\n      }\n      return false;\n    }\n    if (object[k] && typeof object[k] === 'object') {\n      let subIds = GetResponseGuids(object[k]);\n      if (subIds.length > 0) {\n        Ids.push(...subIds);\n      }\n      return false;\n    }\n  });\n  return Ids;\n};\n\nexport const GetAllResponseGuids = object => {\n  if (!object) return [];\n  let returnItems = GetResponseGuids(object);\n  let unique = new Set(returnItems);\n  return unique;\n};\nclass DeliveryApi {\n  search(query, linkDepth, project, env) {\n    const client = Client.create(getClientConfig(project, env));\n    return client.entries.search(\n      query,\n      typeof linkDepth !== 'undefined' ? linkDepth : 1\n    );\n  }\n\n  getClient(deliveryApiStatus = 'published', project, env) {\n    const baseConfig = getClientConfig(project, env);\n    baseConfig.versionStatus = deliveryApiStatus;\n    return Client.create(baseConfig);\n  }\n  getEntry(id, linkDepth = 0, deliveryApiStatus = 'published', project, env) {\n    const baseConfig = getClientConfig(project, env);\n    baseConfig.versionStatus = deliveryApiStatus;\n    const client = Client.create(baseConfig);\n    // return client.entries.get(id, linkDepth);\n    return client.entries.get({ id, linkDepth });\n  }\n}\n\nexport const deliveryApi = new DeliveryApi();\n\nclass CacheNode {\n  constructor(key, value) {\n    this.key = key;\n    this.value = value;\n    this.next = null;\n    this.prev = null;\n  }\n}\n\nclass LruCache {\n  constructor(limit = 100) {\n    this.map = {};\n    this.head = null;\n    this.tail = null;\n    this.limit = limit || 100;\n    this.size = 0;\n  }\n\n  get(key) {\n    if (this.map[key]) {\n      let value = this.map[key].value;\n      let node = new CacheNode(key, value);\n      this.remove(key);\n      this.setHead(node);\n      return value;\n    }\n  }\n\n  set(key, value) {\n    let node = new CacheNode(key, value);\n    if (this.map[key]) {\n      this.remove(key);\n    } else {\n      if (this.size >= this.limit) {\n        delete this.map[this.tail.key];\n        this.size--;\n        this.tail = this.tail.prev;\n        this.tail.next = null;\n      }\n    }\n    this.setHead(node);\n  }\n\n  setHead(node) {\n    node.next = this.head;\n    node.prev = null;\n    if (this.head) {\n      this.head.prev = node;\n    }\n    this.head = node;\n    if (!this.tail) {\n      this.tail = node;\n    }\n    this.size++;\n    this.map[node.key] = node;\n  }\n\n  remove(key) {\n    let node = this.map[key];\n    if (node.prev) {\n      node.prev.next = node.next;\n    } else {\n      this.head = node.next;\n    }\n    if (node.next) {\n      node.next.prev = node.prev;\n    } else {\n      this.tail = node.prev;\n    }\n    delete this.map[key];\n    this.size--;\n  }\n}\n\nclass CachedSearch {\n  cache = new LruCache();\n  taxonomyLookup = {};\n\n  search(query, linkDepth, project, env) {\n    const client = Client.create(getClientConfig(project, env));\n    return this.request(\n      project + JSON.stringify(query) + linkDepth.toString(),\n      () => client.entries.search(query, linkDepth)\n    );\n  }\n\n  get(id, linkDepth, versionStatus, project, env) {\n    const client = Client.create(getClientConfig(project, env));\n    client.clientConfig.versionStatus = versionStatus;\n    return this.request(id, () => client.entries.get({ id, linkDepth }));\n  }\n\n  getContentType(id, project, env) {\n    const client = Client.create(getClientConfig(project, env));\n    return this.request(`[CONTENT TYPE] ${id} ${project}`, () =>\n      client.contentTypes.get(id)\n    );\n  }\n\n  getTaxonomyNode(key, project, env) {\n    const client = Client.create(getClientConfig(project, env));\n    return this.request(`[TAXONOMY NODE] ${key}`, () =>\n      client.taxonomy\n        .resolveChildren(key)\n        .then(node => this.extendTaxonomyNode(node))\n    );\n  }\n\n  getRootNode(options, project, env) {\n    const client = Client.create(getClientConfig(project, env));\n    return this.request(`${project} / ${JSON.stringify(options)}`, () =>\n      client.nodes.getRoot(options)\n    );\n  }\n\n  getNode(options, project, env) {\n    const client = Client.create(getClientConfig(project, env));\n    return this.request(\n      `${project} ${(options && options.path) || options} ${JSON.stringify(\n        options\n      )}`,\n      () => client.nodes.get(options)\n    );\n  }\n\n  getAncestors(options, project, env) {\n    const client = Client.create(getClientConfig(project, env));\n    return this.request(\n      `${project} [A] ${(options && options.id) || options} ${JSON.stringify(\n        options\n      )}`,\n      () => client.nodes.getAncestors(options)\n    );\n  }\n\n  getChildren(options, project, env) {\n    const client = Client.create(getClientConfig(project, env));\n    return this.request(\n      `${project} [C] ${(options && options.id) || options} ${JSON.stringify(\n        options\n      )}`,\n      () => client.nodes.getChildren(options)\n    );\n  }\n\n  getSiblings(options, project, env) {\n    const client = Client.create(getClientConfig(project, env));\n    return this.request(\n      `${project} [S] ${(options && options.id) || options} ${JSON.stringify(\n        options\n      )}`,\n      () => client.nodes.getSiblings(options)\n    );\n  }\n\n  request(key, execute) {\n    if (!this.cache.get(key) || typeof window == 'undefined') {\n      let promise = execute();\n      this.cache.set(key, promise);\n      promise.catch(() => {\n        this.cache.remove(key);\n      });\n    }\n    return this.cache.get(key);\n  }\n\n  extendTaxonomyNode(node) {\n    let id = this.getTaxonomyId(node);\n    this.taxonomyLookup[id] = node.key;\n    return {\n      ...node,\n      id,\n      children: node.children\n        ? node.children.map(n => this.extendTaxonomyNode(n))\n        : null,\n    };\n  }\n\n  getTaxonomyId(node) {\n    if (node.key) {\n      let parts = node.key.split('/');\n      return parts[parts.length - 1];\n    }\n    return '';\n  }\n\n  getTaxonomyKey(id) {\n    return this.taxonomyLookup[id];\n  }\n}\n\nexport const cachedSearch = new CachedSearch();\n","import { List, Map, fromJS } from 'immutable';\nimport {\n  UPDATE_USER,\n  TOGGLE_LOGIN_MODE,\n  SET_RECAPTCHA_KEY,\n  SET_RECAPTCHA_RESPONSE,\n} from './types';\n\nexport const initialUserState = Map({\n  loggedIn: false,\n  failedLogin: null,\n  username: null,\n  id: null,\n  securityToken: null,\n  logonResult: null,\n  groups: new List([]),\n  emailAddress: null,\n  fullName: null,\n  loginScreenMode: 'login',\n  passwordReset: false,\n  passwordResetMessage: null,\n  changePasswordMessage: null,\n  recaptcha: new Map({\n    key: null,\n    response: new Map({ isHuman: false, token: null }),\n  }),\n});\n\nexport default (state = initialUserState, action) => {\n  switch (action.type) {\n    case UPDATE_USER: {\n      const { user } = action;\n      return state\n        .set(\n          'loggedIn',\n          typeof user.loggedIn !== 'undefined'\n            ? user.loggedIn\n            : state.get('loggedIn')\n        )\n        .set(\n          'failedLogin',\n          typeof user.failedLogin !== 'undefined'\n            ? user.failedLogin\n            : state.get('failedLogin')\n        )\n        .set('username', user.username || state.get('username'))\n        .set('id', user.id || state.get('id'))\n        .set('securityToken', user.securityToken || state.get('securityToken'))\n        .set('logonResult', user.logonResult || state.get('logonResult'))\n        .set('groups', fromJS(user.groups) || state.get('groups'))\n        .set('emailAddress', user.emailAddress || state.get('emailAddress'))\n        .set('fullName', user.fullName || state.get('fullName'))\n        .set(\n          'passwordReset',\n          typeof user.passwordReset !== 'undefined'\n            ? user.passwordReset\n            : state.get('passwordReset')\n        )\n        .set(\n          'passwordResetMessage',\n          user.passwordResetMessage || state.get('passwordResetMessage')\n        )\n        .set(\n          'changePasswordMessage',\n          user.changePasswordMessage || state.get('changePasswordMessage')\n        );\n    }\n    case TOGGLE_LOGIN_MODE: {\n      const newMode = action.loginMode;\n      return state.set('loginScreenMode', newMode);\n    }\n    case SET_RECAPTCHA_KEY: {\n      return state.setIn(['recaptcha', 'key'], action.key);\n    }\n    case SET_RECAPTCHA_RESPONSE: {\n      return state\n        .setIn(['recaptcha', 'response', 'isHuman'], action.isHuman)\n        .setIn(['recaptcha', 'response', 'token'], action.token);\n    }\n    default:\n      return state;\n  }\n};\n","const ACTION_PREFIX = '@NAVIGATION/';\nexport const GET_NODE_TREE = `${ACTION_PREFIX}_GET_NODE_TREE`;\nexport const SET_NODE_TREE = `${ACTION_PREFIX}_SET_NODE_TREE`;\nexport const GET_NODE_TREE_ERROR = `${ACTION_PREFIX}_GET_NODE_TREE_ERROR`;\n","module.exports = __WEBPACK_EXTERNAL_MODULE__16__;","module.exports = __WEBPACK_EXTERNAL_MODULE__17__;","import { action } from '~/core/util/helpers';\nimport {\n  CHANGE_USER_PASSWORD,\n  CREATE_USER_ACCOUNT,\n  FORGOT_USER_PASSWORD,\n  LOGIN_USER,\n  LOGOUT_USER,\n  TOGGLE_LOGIN_MODE,\n  SET_RECAPTCHA_KEY,\n  SET_RECAPTCHA_RESPONSE,\n  VALIDATE_USER,\n} from './types';\n\nexport const loginUser = (username, password) =>\n  action(LOGIN_USER, { username, password });\nexport const validateUser = cookies => action(VALIDATE_USER, { cookies });\nexport const logoutUser = () => action(LOGOUT_USER);\n\nexport const toggleLoginMode = loginMode =>\n  action(TOGGLE_LOGIN_MODE, { loginMode });\nexport const createUserAccount = () => action(CREATE_USER_ACCOUNT);\nexport const forgotPassword = username =>\n  action(FORGOT_USER_PASSWORD, { username });\nexport const changePassword = (oldPassword, newPassword, newPasswordConfirm) =>\n  action(CHANGE_USER_PASSWORD, {\n    oldPassword,\n    newPassword,\n    newPasswordConfirm,\n  });\nexport const changePasswordWithToken = (\n  token,\n  newPassword,\n  newPasswordConfirm\n) => action(CHANGE_USER_PASSWORD, { token, newPassword, newPasswordConfirm });\nexport const setRecaptchaKey = key => action(SET_RECAPTCHA_KEY, { key });\nexport const setRecaptchaResponse = (isHuman, token) =>\n  action(SET_RECAPTCHA_RESPONSE, { isHuman, token });\n","import { connect } from 'react-redux';\nimport {\n  loginUser,\n  logoutUser,\n  toggleLoginMode,\n  forgotPassword,\n  changePassword,\n  changePasswordWithToken,\n  setRecaptchaResponse,\n} from '../redux/actions';\nimport {\n  selectUser,\n  selectUserMessage,\n  selectLoginScreenMode,\n  selectPasswordMessage,\n  selectChangePasswordMessage,\n  selectCaptchaSiteKey,\n  selectCaptchaResponse,\n  selectUserLoggedIn,\n} from '../redux/selectors';\nimport { toJS } from '~/core/util/ToJs';\nimport {\n  selectCurrentPath,\n  selectQueryStringAsObject,\n} from '~/core/redux/selectors/routing';\n\nconst getDisplayName = WrappedComponent => {\n  return WrappedComponent.displayName || WrappedComponent.name || 'Component';\n};\n\nconst withLogin = WrappedComponent => {\n  // Returns a redux-connected component with the following props:\n  // this.propTypes = {\n  //   loginUser: PropTypes.func,\n  //   logoutUser: PropTypes.func,\n  //   user: PropTypes.object,\n  // };\n\n  const mapStateToProps = state => {\n    return {\n      user: selectUser(state),\n      userMessage: selectUserMessage(state),\n      screenMode: selectLoginScreenMode(state),\n      passwordMessage: selectPasswordMessage(state),\n      changePasswordMessage: selectChangePasswordMessage(state),\n      captchaSiteKey: selectCaptchaSiteKey(state),\n      isHuman: selectCaptchaResponse(state),\n      isLoggedIn: selectUserLoggedIn(state),\n      currentPath: selectCurrentPath(state),\n      queryString: selectQueryStringAsObject(state),\n    };\n  };\n\n  const mapDispatchToProps = {\n    loginUser,\n    logoutUser,\n    toggleLoginMode,\n    forgotPassword,\n    changePassword,\n    changePasswordWithToken,\n    captchaResponse: setRecaptchaResponse,\n  };\n\n  const ConnectedComponent = connect(\n    mapStateToProps,\n    mapDispatchToProps\n  )(toJS(WrappedComponent));\n\n  ConnectedComponent.displayName = `${getDisplayName(WrappedComponent)}`;\n\n  return ConnectedComponent;\n};\n\nexport default withLogin;\n","import * as actions from './redux/actions';\nimport * as selectors from './redux/selectors';\nimport * as types from './redux/types';\nexport { actions, selectors, types };\n\nexport { default as reducer } from './redux/reducers';\nexport { userSagas as sagas } from './redux/sagas';\n\nexport { default as withLogin } from './components/withLogin';\n","const VERSION_PREFIX = '@VERSION/';\nexport const SET_VERSION = `${VERSION_PREFIX}SET_VERSION`;\nexport const SET_VERSION_STATUS = `${VERSION_PREFIX}SET_VERSION_STATUS`;\n","import queryString from 'query-string';\n\nexport function queryParams(search) {\n  return queryString.parse(\n    typeof window != 'undefined' ? window.location.search : search\n  );\n}\nexport const routeParams = staticRoute =>\n  staticRoute && staticRoute.match ? staticRoute.match.params : {};\n\nexport const buildUrl = (route, params) => {\n  const qs = queryString.stringify(params);\n  const path = qs ? `${route}?${qs}` : route;\n  return path;\n};\n\nexport const clientHostname = () =>\n  `${window.location.protocol}//${window.location.hostname}:${window.location.port}`;\n\nexport const addHostname =\n  typeof window == 'undefined' || window.location.host == 'localhost:3000'\n    ? `https://${PUBLIC_URI /* global PUBLIC_URI */}`\n    : clientHostname();\n","import React from 'react';\nimport { Iterable } from 'immutable';\n\nexport const toJS = WrappedComponent => wrappedComponentProps => {\n  const KEY = 0;\n  const VALUE = 1;\n\n  const propsJS = Object.entries(wrappedComponentProps).reduce(\n    (newProps, wrappedComponentProp) => {\n      newProps[wrappedComponentProp[KEY]] = Iterable.isIterable(\n        wrappedComponentProp[VALUE]\n      )\n        ? wrappedComponentProp[VALUE].toJS()\n        : wrappedComponentProp[VALUE];\n      return newProps;\n    },\n    {}\n  );\n\n  return <WrappedComponent {...propsJS} />;\n};\n","import { action } from '~/core/util/helpers';\nimport {\n  SET_ENTRY,\n  SET_NAVIGATION_NOT_FOUND,\n  SET_NAVIGATION_PATH,\n  SET_TARGET_PROJECT,\n  SET_ROUTE,\n} from '~/core/redux/types/routing';\n\nexport const setNotFound = notFound =>\n  action(SET_NAVIGATION_NOT_FOUND, { notFound });\nexport const setNavigationPath = (\n  path,\n  location,\n  staticRoute,\n  withEvents,\n  statePath,\n  routes\n) =>\n  action(SET_NAVIGATION_PATH, {\n    path,\n    location,\n    staticRoute,\n    withEvents,\n    statePath,\n    routes,\n  });\nexport const setCurrentProject = (project, allowedGroups) =>\n  action(SET_TARGET_PROJECT, { project, allowedGroups });\nexport const setRoute = (path, state) => action(SET_ROUTE, { path, state });\nexport const setRouteEntry = entry => action(SET_ENTRY, { entry });\n","import { takeEvery, select, put, fork, call } from 'redux-saga/effects';\nimport queryString from 'query-string';\nimport {\n  LOGIN_USER,\n  LOGIN_SUCCESSFUL,\n  LOGIN_FAILED,\n  LOGOUT_USER,\n  CREATE_USER_ACCOUNT,\n  VALIDATE_USER,\n  VALIDATE_USER_SUCCESS,\n  VALIDATE_USER_FAILED,\n  UPDATE_USER,\n  FORGOT_USER_PASSWORD,\n  CHANGE_USER_PASSWORD,\n} from './types';\nimport { initialUserState } from './reducers';\nimport { SET_ROUTE } from '~/core/redux/types/routing';\nimport { selectCurrentSearch } from '~/core/redux/selectors/routing';\nimport { selectUser, selectUsername } from './selectors';\nimport { LoginHelper } from '../util/LoginHelper.class';\nimport { SecurityApi } from '../util/SecurityApi.class';\n\nexport const userSagas = [\n  takeEvery(LOGIN_USER, loginUserSaga),\n  takeEvery(LOGOUT_USER, logoutUserSaga),\n\n  takeEvery(VALIDATE_USER, validateUserSaga),\n\n  takeEvery(CREATE_USER_ACCOUNT, createUserAccountSaga),\n  takeEvery(FORGOT_USER_PASSWORD, forgotPassword),\n  takeEvery(CHANGE_USER_PASSWORD, changePassword),\n];\n\nfunction* loginUserSaga(action) {\n  const getGroups = true;\n\n  const { username, password } = action;\n  if (username && password) {\n    const user = yield LoginHelper.LoginUser(username, password, getGroups);\n\n    yield call(updateUserSaga, {\n      type: user.failedLogin ? LOGIN_FAILED : LOGIN_SUCCESSFUL,\n      user,\n      redirect: !user.failedLogin,\n    });\n  } else {\n    yield LoginHelper.ClientRedirectToLogin();\n  }\n}\n\nfunction* logoutUserSaga() {\n  const user = LoginHelper.LogoutUser();\n  yield fork(updateUserSaga, { user });\n  const state = yield select();\n\n  yield LoginHelper.ClientRedirectToHome(state.getIn(['router', 'location']));\n}\n\nexport function* validateUserSaga(action) {\n  const getGroups = true;\n\n  const state = yield select();\n  const currentQs = queryString.parse(\n    state.getIn(['router', 'location', 'search'])\n  );\n\n  const qsToken = currentQs.securityToken || currentQs.securitytoken;\n\n  if (qsToken) {\n    LoginHelper.SetLoginCookies({ securityToken: qsToken });\n  }\n\n  const cookies = !qsToken\n    ? action.cookies\n    : {\n        ContensisCMSUserName: encodeURIComponent(qsToken),\n        ...action.cookies,\n      };\n  const user = yield LoginHelper.ValidateUser(getGroups, cookies);\n\n  const type =\n    user && user.loggedIn ? VALIDATE_USER_SUCCESS : VALIDATE_USER_FAILED;\n\n  yield call(updateUserSaga, {\n    type,\n    user: user && !user.loggedIn ? initialUserState : user,\n  });\n}\n\nfunction* updateUserSaga(action) {\n  const userState = yield select(selectUser);\n  yield put({\n    type: UPDATE_USER,\n    from: action.type,\n    user: { ...userState.toJS(), ...action.user },\n  });\n  if (action.redirect) {\n    const currentSearch = yield select(selectCurrentSearch);\n    const qs = queryString.parse(currentSearch);\n    const redirectUri = qs.redirect_uri;\n    if (redirectUri) {\n      yield put({ type: SET_ROUTE, path: redirectUri });\n    }\n  }\n}\n\nfunction* forgotPassword(action) {\n  const message = yield LoginHelper.ForgotPassword(action.username);\n  yield put({\n    type: UPDATE_USER,\n    user: {\n      passwordReset: true,\n      passwordResetMessage: message,\n    },\n    history,\n  });\n}\n\nfunction* changePassword(action) {\n  const state = yield select();\n  const username = selectUsername(state);\n  let message = '';\n  if (action.token) {\n    message = yield LoginHelper.ChangePasswordWithToken(\n      action.token,\n      action.newPassword,\n      action.newPasswordConfirm\n    );\n  } else {\n    message = yield LoginHelper.ChangePassword(\n      username,\n      action.oldPassword,\n      action.newPassword,\n      action.newPasswordConfirm\n    );\n  }\n  yield put({\n    type: UPDATE_USER,\n    user: {\n      logonResult: message,\n    },\n    history,\n  });\n}\n\nfunction* createUserAccountSaga() {\n  const userState = yield select(selectUser);\n  if (userState.username && userState.password) {\n    // Call RegisterUser API\n    const registerResponse = yield SecurityApi.RegisterUser(\n      userState.username,\n      userState.password\n    );\n\n    if (registerResponse) {\n      const { securityToken, registrationResult, id } = registerResponse;\n\n      if (securityToken) {\n        const user = {\n          ...userState,\n          id,\n          securityToken,\n          password: null,\n          loggedIn: true,\n          verifiedEmail: false,\n          failedLogin: false,\n          failedToCreateAccount: false,\n          registrationResult,\n        };\n        yield put({ type: UPDATE_USER, user });\n      } else {\n        const user = {\n          ...userState,\n          securityToken: null,\n          loggedIn: false,\n          verifiedEmail: false,\n          failedLogin: true,\n          failedToCreateAccount: true,\n          registrationResult,\n        };\n        yield put({ type: UPDATE_USER, user });\n      }\n    } else {\n      yield put({\n        type: UPDATE_USER,\n        user: { ...userState, registrationResult: 'ServiceFault' },\n      });\n    }\n  }\n}\n","module.exports = __WEBPACK_EXTERNAL_MODULE__24__;","module.exports = __WEBPACK_EXTERNAL_MODULE__25__;","module.exports = __WEBPACK_EXTERNAL_MODULE__26__;","module.exports = __WEBPACK_EXTERNAL_MODULE__27__;","export const selectCommitRef = state => {\n  return state.getIn(['version', 'commitRef']);\n};\nexport const selectBuildNumber = state => {\n  return state.getIn(['version', 'buildNo']);\n};\n\nexport const selectVersionStatus = state => {\n  return state.getIn(['version', 'contensisVersionStatus']);\n};\n","export const hasNavigationTree = state => {\n  return state.getIn(['navigation', 'isReady']);\n};\n\nexport const selectNavigationRoot = state => {\n  return state.getIn(['navigation', 'root']);\n};\n\nexport const selectNavigationDepends = state => {\n  return state.getIn(['navigation', 'treeDepends']);\n};\n","import React, { useEffect, useCallback } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { hot } from 'react-hot-loader';\nimport { Redirect, useLocation } from 'react-router-dom';\nimport { renderRoutes, matchRoutes } from 'react-router-config';\n\nimport {\n  selectRouteEntry,\n  selectRouteEntryContentTypeId,\n  selectRouteLoading,\n  selectIsNotFound,\n  selectCurrentProject,\n  selectCurrentPath,\n} from '~/core/redux/selectors/routing';\nimport { setNavigationPath } from '~/core/redux/actions/routing';\nimport NotFound from '~/pages/NotFound';\n\nimport { Status } from './Status';\nimport { toJS } from '../util/ToJs';\nimport { selectUserLoggedIn } from '~/features/login/redux/selectors';\n\nconst getTrimmedPath = path => {\n  if (path !== '/') {\n    const lastChar = path[path.length - 1];\n    if (lastChar == '/') {\n      return path.substring(0, path.length - 1);\n    }\n  }\n  return path;\n};\n\nconst RouteLoader = ({\n  statePath,\n  projectId,\n  contentTypeId,\n  entry,\n  isLoading,\n  isLoggedIn,\n  isNotFound,\n  loadingComponent,\n  notFoundComponent,\n  setNavigationPath,\n  routes,\n  withEvents,\n}) => {\n  const location = useLocation();\n\n  // Match any Static Routes a developer has defined\n  const matchedStaticRoute = () =>\n    matchRoutes(routes.StaticRoutes, location.pathname);\n  const isStaticRoute = () => matchedStaticRoute().length > 0;\n\n  const trimmedPath = getTrimmedPath(location.pathname);\n\n  const staticRoute = isStaticRoute() && matchedStaticRoute()[0];\n\n  const setPath = useCallback(() => {\n    let serverPath = null;\n    if (staticRoute && staticRoute.match && staticRoute.match.isExact) {\n      serverPath = staticRoute.route.path\n        .split('/')\n        .filter(p => !p.startsWith(':'))\n        .join('/');\n    }\n\n    setNavigationPath(\n      serverPath || trimmedPath,\n      location,\n      staticRoute,\n      withEvents,\n      statePath,\n      routes\n    );\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [\n    setNavigationPath,\n    // staticRoute,\n    withEvents,\n    location,\n    routes,\n    // statePath,\n    trimmedPath,\n  ]);\n\n  if (typeof window == 'undefined') setPath();\n\n  useEffect(() => {\n    setPath();\n  }, [location, setPath]);\n\n  // Need to redirect when url endswith a /\n  if (location.pathname.length > trimmedPath.length) {\n    return <Redirect to={trimmedPath} />;\n  }\n  // Render any Static Routes a developer has defined\n  if (isStaticRoute(trimmedPath)) {\n    return renderRoutes(routes.StaticRoutes, {\n      projectId,\n      contentTypeId,\n      entry,\n      isLoggedIn,\n    });\n  }\n\n  // Render a supplied Loading component if the route\n  // is not a static route and is in a loading state\n  if (isLoading && !isNotFound && loadingComponent) {\n    const LoadingComponent = loadingComponent;\n    return <LoadingComponent />;\n  }\n\n  // Match any defined Content Type Mappings\n  if (contentTypeId) {\n    const MatchedComponent = routes.ContentTypeMappings.find(\n      item => item.contentTypeID == contentTypeId\n    );\n\n    if (MatchedComponent) {\n      return (\n        <MatchedComponent.component\n          projectId={projectId}\n          contentTypeId={contentTypeId}\n          entry={entry}\n          isLoggedIn={isLoggedIn}\n        />\n      );\n    }\n  }\n\n  const NotFoundComponent = notFoundComponent ? notFoundComponent : NotFound;\n  if (isNotFound) {\n    return (\n      <Status code={404}>\n        <NotFoundComponent />\n      </Status>\n    );\n  }\n\n  return null;\n};\n\nRouteLoader.propTypes = {\n  contentTypeId: PropTypes.string,\n  entry: PropTypes.object,\n  isLoading: PropTypes.bool,\n  isLoggedIn: PropTypes.bool,\n  isNotFound: PropTypes.bool,\n  loadingComponent: PropTypes.func,\n  notFoundComponent: PropTypes.func,\n  projectId: PropTypes.string,\n  routes: PropTypes.objectOf(PropTypes.array, PropTypes.array),\n  setNavigationPath: PropTypes.func,\n  statePath: PropTypes.string,\n  withEvents: PropTypes.object,\n};\n\nconst mapStateToProps = state => {\n  return {\n    statePath: selectCurrentPath(state),\n    projectId: selectCurrentProject(state),\n    entry: selectRouteEntry(state),\n    contentTypeId: selectRouteEntryContentTypeId(state),\n    isNotFound: selectIsNotFound(state),\n    isLoggedIn: selectUserLoggedIn(state),\n    isLoading: selectRouteLoading(state),\n  };\n};\n\nconst mapDispatchToProps = {\n  setNavigationPath,\n};\n\nexport default hot(module)(\n  connect(\n    mapStateToProps,\n    mapDispatchToProps\n  )(toJS(RouteLoader))\n);\n","import { action } from '~/core/util/helpers';\nimport { SET_VERSION, SET_VERSION_STATUS } from '~/core/redux/types/version';\n\nexport const setVersion = (commitRef, buildNo) =>\n  action(SET_VERSION, { commitRef, buildNo });\n\nexport const setVersionStatus = status =>\n  action(SET_VERSION_STATUS, { status });\n","module.exports = __WEBPACK_EXTERNAL_MODULE__33__;","import React from 'react';\nconst NotFound = () => (\n  <>\n    <header>\n      <h1>404 Page Not Found</h1>\n    </header>\n  </>\n);\nexport default NotFound;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Route } from 'react-router-dom';\n\nexport const Status = ({ code, children }) => {\n  return (\n    <Route\n      render={({ staticContext }) => {\n        if (staticContext) staticContext.status = code;\n        return children;\n      }}\n    />\n  );\n};\n\nStatus.propTypes = {\n  code: PropTypes.number.isRequired,\n  children: PropTypes.element,\n};\n","module.exports = __WEBPACK_EXTERNAL_MODULE__37__;","module.exports = __WEBPACK_EXTERNAL_MODULE__38__;","import { createBrowserHistory, createMemoryHistory } from 'history';\n\n// Create a history depending on the environment\nconst selectedHistory =\n  typeof window !== 'undefined' ? createBrowserHistory : createMemoryHistory;\n\nexport const history = (options = {}) => selectedHistory(options);\nexport const browserHistory = selectedHistory();\n","module.exports = __WEBPACK_EXTERNAL_MODULE__40__;","module.exports = __WEBPACK_EXTERNAL_MODULE__41__;","const servers = SERVERS; /* global SERVERS */\nconst alias = servers.alias.toLowerCase();\nconst publicUri = PUBLIC_URI; /* global PUBLIC_URI */\nconst projects = PROJECTS; /* global PROJECTS */\n\n// return a projectId via the request hostname\nconst pickProject = (hostname, query) => {\n  // if localhost we can only infer via a querystring, and take your word for it\n  if (hostname == 'localhost') {\n    return (query && query.p) || projects[0].id;\n  }\n\n  // if hostname is the actual public uri we can return the first project from the list\n  if (hostname == publicUri) {\n    return projects[0].id;\n  }\n\n  let project = 'unknown';\n\n  // // go through all the defined projects\n  // Object.entries(projects).map(([, p]) => {\n  const p = projects[0];\n\n  // check if we're accessing via the project's public uri\n  if (hostname.includes(p.publicUri)) project = p.id;\n\n  // the url structure is different for website (we don't prefix)\n  if (p.id.startsWith('website')) {\n    // check for internal and external hostnames\n    // we check live and preview distinctly so our rule does not clash with\n    // hostnames that use a project prefix\n    if (\n      hostname.includes(`live-${alias}.cloud.contensis.com`) ||\n      hostname.includes(`live.${alias}.contensis.cloud`) ||\n      hostname.includes(`preview-${alias}.cloud.contensis.com`) ||\n      hostname.includes(`preview.${alias}.contensis.cloud`)\n    )\n      project = p.id;\n  } else {\n    // check for internal and external hostnames, prefixed with the projectId\n    if (\n      hostname.includes(`${p.id.toLowerCase()}-${alias}.cloud.contensis.com`) ||\n      hostname.includes(`${p.id.toLowerCase()}.${alias}.contensis.cloud`)\n    )\n      project = p.id;\n  }\n  // });\n  return project === 'unknown' ? p.id : project;\n};\n\nexport default pickProject;\n","export const DataFormats = {\n  entry: 'entry',\n  webpage: 'webpage',\n};\n\nconst sys = {\n  contentTypeId: 'sys.contentTypeId',\n  dataFormat: 'sys.dataFormat',\n  filename: 'sys.properties.filename',\n  id: 'sys.id',\n  includeInSearch: 'sys.metadata.includeInSearch',\n  slug: 'sys.slug',\n  uri: 'sys.uri',\n  versionStatus: 'sys.versionStatus',\n};\n\nexport const Fields = {\n  entryTitle: 'entryTitle',\n  entryDescription: 'entryDescription',\n  keywords: 'keywords',\n  sys,\n  contentTypeId: 'sys.contentTypeId',\n  wildcard: '*',\n};\n\nexport const Projects = {\n  website: 'website',\n};\n\nexport const VersionStatus = {\n  published: 'published',\n  latest: 'latest',\n};\n\nexport const ContentTypes = {\n  contentPage: 'contentPage',\n};\n\nexport const WebpageFormats = {};\n\nexport const FilterExpressionTypes = {\n  contentType: 'contentType',\n  field: 'field',\n};\n","export const now = () => {\n  if (typeof window == 'undefined') {\n    return Date.now();\n  }\n  return window.performance.now();\n};\n","import { now } from '~/core/util/performance';\nimport { cachedSearch } from '~/core/util/ContensisDeliveryApi';\nimport { buildUrl } from '~/core/util/navigation';\n\nexport function fixFreeTextForElastic(s) {\n  let illegalChars = ['>', '<'];\n  let encodedChars = [\n    '+',\n    '-',\n    '=',\n    '&',\n    '|',\n    '!',\n    '(',\n    ')',\n    '{',\n    '}',\n    '[',\n    ']',\n    '^',\n    '\"',\n    '~',\n    '*',\n    '?',\n    ':',\n    '\\\\',\n    '/',\n  ];\n\n  let illegalRegEx = new RegExp(illegalChars.map(c => '\\\\' + c).join('|'), 'g');\n  let encodedRegEx = new RegExp(encodedChars.map(c => '\\\\' + c).join('|'), 'g');\n\n  s = s.replace(illegalRegEx, '');\n  s = s.replace(encodedRegEx, ''); // (m) => '\\\\\\\\' + m);\n  return s;\n}\n\nexport const timedSearch = async (query, linkDepth, projectId) => {\n  let duration = 0;\n\n  const start = now();\n  const payload = await cachedSearch.search(query, linkDepth, projectId);\n  const end = now();\n\n  duration = end - start;\n\n  return { duration, payload };\n};\n\nexport const extractQuotedPhrases = searchTerm => {\n  const pattern = new RegExp(\n    /(?=[\"'])(?:\"[^\"\\\\]*(?:\\\\[\\s\\S][^\"\\\\]*)*\"|'[^'\\\\]*(?:\\\\[\\s\\S][^'\\\\]*)*')/gm\n  );\n\n  return (searchTerm.match(pattern) || []).map(match =>\n    match.replace(/\"/g, '')\n  );\n};\n\nexport const callCustomApi = async (customApi, filters) => {\n  let uri = buildUrl(customApi.get('uri'), filters);\n  if (!uri) return null;\n  if (typeof window == 'undefined' && uri.startsWith('/'))\n    uri = `http://localhost:3001${uri}`;\n\n  const response = await fetch(uri);\n  return await response.json();\n};\n","import { Op, OrderBy } from 'contensis-delivery-api';\nimport { Fields, DataFormats } from '~/core/schema';\nimport {\n  fixFreeTextForElastic,\n  extractQuotedPhrases,\n} from '~/core/search/util';\n\nexport const fieldExpression = (\n  field,\n  value,\n  operator = 'equalTo',\n  weight = null\n) => {\n  if (!field || !value) return [];\n  if (Array.isArray(value)) return equalToOrIn(field, value, operator);\n  else\n    return !weight\n      ? [Op[operator](field, value)]\n      : [Op[operator](field, value).weight(weight)];\n};\n\nexport const contentTypeIdExpression = (contentTypeIds, webpageTemplates) => {\n  const expressions = [];\n  if (!contentTypeIds && !webpageTemplates) return expressions;\n\n  if (contentTypeIds && contentTypeIds.length > 0) {\n    expressions.push(\n      ...dataFormatExpression(contentTypeIds, DataFormats.entry)\n    );\n  }\n\n  if (webpageTemplates && webpageTemplates.length > 0) {\n    expressions.push(\n      ...dataFormatExpression(webpageTemplates, DataFormats.webpage)\n    );\n  }\n\n  if (expressions.length > 1) return [Op.or(...expressions)];\n\n  return expressions;\n};\n\nexport const filterExpressions = filters => {\n  if (!filters) return [];\n  const expressions = [];\n\n  filters.map(param => {\n    expressions.push(...fieldExpression(param.key, param.value, 'contains'));\n  });\n\n  return expressions;\n};\n\nexport const dataFormatExpression = (\n  contentTypeIds,\n  dataFormat = DataFormats.entry\n) => {\n  if (contentTypeIds && contentTypeIds.length > 0) {\n    /**\n     * We have an array of contentTypeIds some may be prefixed with a \"!\"\n     * to indicate this is a \"not\" expression\n     */\n    const withContentTypeIds = contentTypeIds.filter(c => !c.startsWith('!'));\n    const notContentTypeIds = contentTypeIds\n      .filter(c => c.startsWith('!'))\n      .map(id => id.substring(1));\n\n    const andExpr = Op.and();\n\n    const dataFormatExpr = fieldExpression(Fields.sys.dataFormat, dataFormat);\n\n    const withExpr = fieldExpression(\n      Fields.sys.contentTypeId,\n      withContentTypeIds\n    );\n\n    const notExpr = [\n      Op.not(...fieldExpression(Fields.sys.contentTypeId, notContentTypeIds)),\n    ];\n\n    andExpr.add(...dataFormatExpr);\n    if (withContentTypeIds.length > 0) andExpr.add(...withExpr);\n    if (notContentTypeIds.length > 0) andExpr.add(...notExpr);\n\n    return [andExpr];\n  }\n  return [];\n};\n\nexport const defaultExpressions = versionStatus => {\n  return [Op.equalTo(Fields.sys.versionStatus, versionStatus)];\n};\n\nexport const defaultSearchExpressions = versionStatus => {\n  return [\n    ...defaultExpressions(versionStatus),\n    ...includeInSearchExpressions(),\n  ];\n};\nexport const includeInSearchExpressions = () => [\n  Op.or(\n    Op.and(\n      Op.exists(Fields.sys.includeInSearch, true),\n      Op.equalTo(Fields.sys.includeInSearch, true)\n    ),\n    Op.exists(Fields.sys.includeInSearch, false)\n  ),\n];\n\nexport const orderByExpression = orderBy => {\n  let expression = OrderBy;\n  if (orderBy && orderBy.length > 0) {\n    orderBy.map(\n      ob =>\n        (expression = ob.startsWith('-')\n          ? expression.desc(ob.substring(1))\n          : expression.asc(ob))\n    );\n  }\n  return expression;\n};\n\nconst equalToOrIn = (field, arr, operator = 'equalTo') =>\n  arr.length === 0\n    ? []\n    : arr.length === 1\n    ? [Op[operator](field, arr[0])]\n    : [Op.in(field, ...arr)];\n\nexport const customWhereExpressions = where => {\n  if (!where || !Array.isArray(where)) return [];\n\n  // Accept HTTP style objects and map them to\n  // their equivalent JS client \"Op\" expressions\n  return where.map(clause => {\n    let expression;\n    Object.keys(clause).map((key, idx) => {\n      if (idx === 1) {\n        const operator = key;\n        const value = clause[key];\n        expression = Op[operator](clause.field, value, clause.weight);\n      }\n    });\n    return expression;\n  });\n};\n\nexport const termExpressions = (searchTerm, weightedSearchFields) => {\n  if (searchTerm && weightedSearchFields && weightedSearchFields.length > 0) {\n    // Extract any phrases in quotes to array\n    const quotedPhrases = extractQuotedPhrases(searchTerm);\n\n    // Modify the search term to remove any quoted phrases to leave any remaining terms\n    let modifiedSearchTerm = searchTerm;\n    quotedPhrases.forEach(\n      qp =>\n        (modifiedSearchTerm = modifiedSearchTerm\n          .replace(qp, '')\n          .replace('\"\"', '')\n          .trim())\n    );\n\n    // Push to the operators array to include in the query\n    const operators = [];\n\n    // Helper functions to generate Op expressions\n    const containsOp = (f, term) =>\n      fieldExpression(\n        f.fieldId,\n        fixFreeTextForElastic(term),\n        'contains',\n        f.weight\n      );\n    const freeTextOp = (f, term) =>\n      fieldExpression(\n        f.fieldId,\n        fixFreeTextForElastic(term),\n        'freeText',\n        f.weight\n      );\n\n    // For each weighted search field\n    weightedSearchFields.forEach(f => {\n      // Push to field operators\n      const fieldOperators = [];\n\n      // Add operator expressions for modified search term\n      if (modifiedSearchTerm) {\n        if (\n          [Fields.keywords, Fields.sys.filename, Fields.sys.uri].includes(\n            f.fieldId\n          )\n        ) {\n          fieldOperators.push(...containsOp(f, modifiedSearchTerm));\n        } else {\n          if ([Fields.entryTitle].includes(f.fieldId)) {\n            fieldOperators.push(\n              Op.or(\n                ...containsOp(f, modifiedSearchTerm),\n                ...freeTextOp(f, modifiedSearchTerm)\n              )\n            );\n          } else {\n            fieldOperators.push(...freeTextOp(f, modifiedSearchTerm));\n          }\n        }\n      }\n\n      // Add operator expressions for any quoted phrases\n      quotedPhrases.forEach(qp => fieldOperators.push(...containsOp(f, qp)));\n\n      // If we are using multiple operators for a field we will\n      // wrap each field inside an And operator so we will match\n      // all terms/phrases rather than any terms/phrases\n      if (fieldOperators.length > 1) {\n        operators.push(Op.and(...fieldOperators));\n      } else {\n        operators.push(...fieldOperators);\n      }\n    });\n\n    // Wrap operators in an Or operator\n    return [Op.or().addRange(operators)];\n  } else if (searchTerm) {\n    return [Op.contains(Fields.wildcard, searchTerm)];\n  } else {\n    return [];\n  }\n};\n","// eslint-disable-next-line import/named\nimport { Query } from '~/core/util/ContensisDeliveryApi';\nimport { fieldExpression, defaultExpressions } from '~/core/search/expressions';\n\nexport const routeEntryByFields = (\n  id,\n  fields = [],\n  versionStatus = 'published'\n) => {\n  const query = new Query(\n    ...[...fieldExpression('sys.id', id), ...defaultExpressions(versionStatus)]\n  );\n  query.fields = fields;\n  return query;\n};\n","// load-entries.js\nimport * as log from 'loglevel';\nimport { takeEvery, put, select, call, all } from 'redux-saga/effects';\nimport {\n  SET_ENTRY_ID,\n  SET_ENTRY,\n  SET_NAVIGATION_NOT_FOUND,\n  SET_NODE,\n  SET_ANCESTORS,\n  SET_NAVIGATION_PATH,\n  SET_ROUTE,\n  CALL_HISTORY_METHOD,\n  SET_SIBLINGS,\n} from '~/core/redux/types/routing';\nimport { cachedSearch, deliveryApi } from '~/core/util/ContensisDeliveryApi';\nimport { selectVersionStatus } from '~/core/redux/selectors/version';\nimport {\n  selectCurrentPath,\n  selectCurrentProject,\n  selectRouteEntry,\n} from '~/core/redux/selectors/routing';\nimport { GET_NODE_TREE } from '../types/navigation';\nimport { hasNavigationTree } from '../selectors/navigation';\nimport { routeEntryByFields } from './queries';\n\nexport const routingSagas = [\n  takeEvery(SET_NAVIGATION_PATH, getRouteSaga),\n  takeEvery(SET_ROUTE, setRouteSaga),\n];\n\n/**\n * To navigate / push a specific route via redux middleware\n * @param {path, state} action\n */\nfunction* setRouteSaga(action) {\n  yield put({\n    type: CALL_HISTORY_METHOD,\n    payload: {\n      method: 'push',\n      args: [action.path, action.state],\n    },\n  });\n}\n\nfunction* getRouteSaga(action) {\n  let entry = null;\n  try {\n    const { withEvents, routes, staticRoute } = action;\n    let appsays;\n    if (withEvents && withEvents.onRouteLoad) {\n      appsays = yield withEvents.onRouteLoad(action);\n    }\n    // if appsays customNavigation: true, we will set doNavigation to false\n    // if appsays customNavigation: { ... }, we will set doNavigation to the customNavigation object and check for child elements\n    // if appsays nothing we will set doNavigation to true and continue to do navigation calls\n    const doNavigation =\n      !appsays ||\n      (appsays && appsays.customNavigation === true\n        ? false\n        : (appsays && appsays.customNavigation) || true);\n\n    const entryLinkDepth = (appsays && appsays.entryLinkDepth) || 3;\n    const setContentTypeLimits =\n      routes &&\n      routes.ContentTypeMappings &&\n      !!routes.ContentTypeMappings.find(ct => ct.fields || ct.linkDepth);\n\n    const state = yield select();\n    const routeEntry = selectRouteEntry(state);\n    const currentPath = selectCurrentPath(state);\n    const deliveryApiStatus = selectVersionStatus(state);\n    const project = selectCurrentProject(state);\n    const isHome = currentPath === '/';\n    const isPreview = currentPath && currentPath.startsWith('/preview/');\n    if (\n      !isPreview &&\n      ((appsays && appsays.customRouting) ||\n        (staticRoute && !staticRoute.route.fetchNode) ||\n        (routeEntry && action.statePath === action.path))\n    ) {\n      // To prevent erroneous 404s and wasted network calls, this covers\n      // - appsays customRouting and does SET_ENTRY etc. via the consuming app\n      // - all staticRoutes (where custom 'route.fetchNode' attribute is falsey)\n      // - standard Contensis SiteView Routing where we already have that entry in state\n      if (\n        routeEntry &&\n        (!staticRoute || (staticRoute.route && staticRoute.route.fetchNode))\n      ) {\n        entry = routeEntry.toJS();\n        yield put({\n          type: SET_ENTRY,\n          entry,\n          isLoading: false,\n        });\n      } else yield call(setRouteEntry);\n    } else {\n      let pathNode = null,\n        ancestors = null,\n        siblings = null;\n\n      // Scroll into View\n      if (typeof window !== 'undefined') {\n        window.scroll({\n          top: 0,\n        });\n      }\n\n      let currentPathDepth = currentPath.split('/').length - 1;\n      if (isHome) currentPathDepth = 0;\n\n      // Handle homepage\n      if (isHome) {\n        pathNode = yield cachedSearch.getRootNode(\n          {\n            depth: 0,\n            entryFields: '*',\n            entryLinkDepth,\n            language: 'en-GB',\n            versionStatus: deliveryApiStatus,\n          },\n          project\n        );\n      } else {\n        // Handle preview routes\n        if (isPreview) {\n          let splitPath = currentPath.split('/');\n          let entryGuid = splitPath[2];\n          if (splitPath.length == 3) {\n            // According to product dev we cannot use Node API\n            // for previewing entries as it gives a response of []\n            // -- apparently it is not correct to request latest content\n            // with Node API\n            let previewEntry = yield deliveryApi\n              .getClient(deliveryApiStatus, project)\n              .entries.get({ id: entryGuid, linkDepth: 3 });\n            if (previewEntry) {\n              pathNode = { entry: previewEntry };\n              // yield call(setRouteEntry, previewEntry);\n              // } else {\n              // yield call(do404);\n            }\n          }\n        } else {\n          // Handle all other routes\n          pathNode = yield cachedSearch.getNode(\n            {\n              depth:\n                doNavigation === true || doNavigation.children === true\n                  ? 3\n                  : (doNavigation && doNavigation.children) || 0,\n              path: currentPath,\n              entryFields: setContentTypeLimits\n                ? ['sys.contentTypeId', 'sys.id']\n                : '*',\n              entryLinkDepth: setContentTypeLimits ? 0 : entryLinkDepth,\n              versionStatus: deliveryApiStatus,\n            },\n            project\n          );\n          if (\n            setContentTypeLimits &&\n            pathNode &&\n            pathNode.entry &&\n            pathNode.entry.sys &&\n            pathNode.entry.sys.id\n          ) {\n            const contentType =\n              routes &&\n              routes.ContentTypeMappings &&\n              routes.ContentTypeMappings.find(\n                ct => ct.contentTypeID === pathNode.entry.sys.contentTypeId\n              );\n            const query = routeEntryByFields(\n              pathNode.entry.sys.id,\n              contentType && contentType.fields,\n              deliveryApiStatus\n            );\n            const payload = yield cachedSearch.search(\n              query,\n              contentType && typeof contentType.linkDepth !== 'undefined'\n                ? contentType.linkDepth\n                : 3,\n              project\n            );\n            if (payload && payload.items && payload.items.length > 0) {\n              pathNode.entry = payload.items[0];\n            }\n          }\n        }\n\n        if (\n          pathNode &&\n          pathNode.id &&\n          (doNavigation === true || doNavigation.ancestors)\n        ) {\n          ancestors = yield cachedSearch.getAncestors(pathNode.id, project);\n          // No menu shows the  siblings at this level, so no need to load them.\n          if (\n            currentPathDepth > 1 &&\n            (doNavigation === true || doNavigation.siblings)\n          ) {\n            siblings = yield cachedSearch.getSiblings(\n              {\n                id: pathNode.id,\n                entryFields: ['sys.contentTypeId', 'url'],\n              },\n              project\n            );\n          }\n        }\n      }\n\n      if (\n        pathNode &&\n        pathNode.entry &&\n        pathNode.entry.sys &&\n        pathNode.entry.sys.id\n      ) {\n        entry = pathNode.entry;\n        yield call(setRouteEntry, entry, pathNode, ancestors, siblings);\n      } else {\n        yield call(do404);\n      }\n    }\n    if (withEvents && withEvents.onRouteLoaded) {\n      yield withEvents.onRouteLoaded({ ...action, entry });\n    }\n\n    if (\n      !hasNavigationTree(state) &&\n      (doNavigation === true || doNavigation.tree)\n    )\n      // Load navigation clientside only, a put() should help that work\n      yield put({\n        type: GET_NODE_TREE,\n        treeDepth:\n          doNavigation === true ||\n          !doNavigation.tree ||\n          doNavigation.tree === true\n            ? 2\n            : doNavigation.tree,\n      });\n  } catch (e) {\n    log.error(...['Error running route saga:', e, e.stack]);\n    yield call(do404);\n  }\n}\n\nfunction* setRouteEntry(entry, node, ancestors, siblings) {\n  yield all([\n    put({\n      type: SET_NAVIGATION_NOT_FOUND,\n      notFound: !(entry && entry.sys.id),\n    }),\n    put({\n      type: SET_NODE,\n      node,\n    }),\n    put({\n      type: SET_ENTRY,\n      entry: entry,\n    }),\n    put({\n      type: SET_ENTRY_ID,\n      id: (entry && entry.sys.id) || null,\n    }),\n    put({\n      type: SET_ANCESTORS,\n      ancestors,\n    }),\n    put({\n      type: SET_SIBLINGS,\n      siblings,\n    }),\n  ]);\n}\n\nfunction* do404() {\n  yield put({\n    type: SET_NAVIGATION_NOT_FOUND,\n    notFound: true,\n  });\n  yield put({\n    type: SET_ENTRY_ID,\n    id: null,\n  });\n  yield put({\n    type: SET_ENTRY,\n    entry: null,\n  });\n}\n","import { takeEvery, put, select } from 'redux-saga/effects';\n\nimport { deliveryApi } from '~/core/util/ContensisDeliveryApi';\nimport {\n  GET_NODE_TREE,\n  SET_NODE_TREE,\n  GET_NODE_TREE_ERROR,\n} from '~/core/redux/types/navigation';\nimport { hasNavigationTree } from '~/core/redux/selectors/navigation';\nimport { selectVersionStatus } from '../selectors/version';\nimport { selectCurrentProject } from '../selectors/routing';\n\nexport const navigationSagas = [takeEvery(GET_NODE_TREE, ensureNodeTreeSaga)];\n\nexport function* ensureNodeTreeSaga(action) {\n  const state = yield select();\n  try {\n    if (!hasNavigationTree(state)) {\n      const deliveryApiVersionStatus = yield select(selectVersionStatus);\n      const project = yield select(selectCurrentProject);\n      const nodes = yield deliveryApi\n        .getClient(deliveryApiVersionStatus, project)\n        .nodes.getRoot({\n          depth: action.treeDepth || 2,\n          entryFields: 'entryTitle, metaInformation, sys.contentTypeId',\n        });\n      if (nodes) {\n        yield put({ type: SET_NODE_TREE, nodes });\n      } else {\n        yield put({ type: GET_NODE_TREE_ERROR });\n      }\n    }\n  } catch (ex) {\n    yield put({ type: GET_NODE_TREE_ERROR, error: ex.toString() });\n  }\n}\n","// index.js\nimport { all } from 'redux-saga/effects';\nimport { routingSagas } from './routing';\nimport { sagas as userSagas } from '~/features/login';\nimport { navigationSagas } from './navigation';\nimport { validateUserSaga } from '~/features/login/redux/sagas';\n\nexport default function(featureSagas = []) {\n  return function* rootSaga() {\n    const subSagas = [...routingSagas, ...navigationSagas, ...userSagas];\n    yield all([validateUserSaga({}), ...subSagas, ...featureSagas]);\n  };\n}\n","import { Map, fromJS, List, Set } from 'immutable';\nimport {\n  SET_ENTRY_ID,\n  SET_ENTRY,\n  SET_NAVIGATION_PATH,\n  SET_NAVIGATION_NOT_FOUND,\n  SET_NODE,\n  SET_ANCESTORS,\n  SET_TARGET_PROJECT,\n  SET_ROUTE,\n  SET_SIBLINGS,\n} from '~/core/redux/types/routing';\nimport { GetAllResponseGuids } from '~/core/util/ContensisDeliveryApi';\n\nlet initialState = Map({\n  currentPath: '/',\n  currentNode: [],\n  currentProject: 'unknown',\n  notFound: false,\n  entryID: null,\n  entry: null,\n  entryDepends: new List(),\n  contentTypeId: null,\n  currentNodeAncestors: new List(),\n  currentTreeId: null,\n});\n\nexport default (state = initialState, action) => {\n  switch (action.type) {\n    case SET_ANCESTORS: {\n      if (action.ancestors) {\n        let ancestorIDs = action.ancestors.map(node => {\n          return node.id;\n        });\n\n        let currentNodeDepends = state.get('nodeDepends');\n        const allNodeDepends = Set.union([\n          Set(ancestorIDs),\n          currentNodeDepends,\n        ]);\n        return state\n          .set('nodeDepends', allNodeDepends)\n          .set('currentNodeAncestors', fromJS(action.ancestors));\n      }\n      return state.set('currentNodeAncestors', fromJS(action.ancestors));\n    }\n    case SET_ENTRY: {\n      if (!action.entry)\n        return state\n          .set('entry', null)\n          .set('entryDepends', null)\n          .set('isLoading', action.isLoading);\n      const entryDepends = GetAllResponseGuids(action.entry);\n      return state\n        .set('entryDepends', fromJS(entryDepends))\n        .set('entry', fromJS(action.entry))\n        .set('isLoading', action.isLoading);\n    }\n    case SET_ENTRY_ID: {\n      if (action.id === '') {\n        return state;\n      }\n      return state.set('entryID', action.id);\n    }\n    case SET_NAVIGATION_PATH: {\n      let staticRoute = false;\n      if (action.staticRoute) {\n        staticRoute = { ...action.staticRoute };\n      }\n      if (action.path) {\n        return state\n          .set('currentPath', fromJS(action.path))\n          .set('location', fromJS(action.location))\n          .set(\n            'staticRoute',\n            fromJS({\n              ...staticRoute,\n              route: { ...staticRoute.route, component: null },\n            })\n          )\n          .set('isLoading', typeof window !== 'undefined');\n      }\n      return state;\n    }\n    case SET_NAVIGATION_NOT_FOUND: {\n      return state\n        .set('notFound', fromJS(action.notFound))\n        .set('isLoading', false);\n    }\n    case SET_NODE: {\n      const { node } = action;\n      if (!node) return state;\n      // On Set Node, we reset all dependants.\n      const nodeDepends = Set([node.id]);\n      return state\n        .set('nodeDepends', nodeDepends)\n        .set('currentNode', fromJS(action.node))\n        .removeIn(['currentNode', 'entry']); // We have the entry stored elsewhere, so lets not keep it twice.\n    }\n    case SET_ROUTE: {\n      return state.set('nextPath', action.path);\n    }\n    case SET_SIBLINGS: {\n      // Can be null in some cases like the homepage.\n      let currentNodeSiblingParent = null;\n      let siblingIDs = [];\n      if (action.siblings && action.siblings.length > 0) {\n        currentNodeSiblingParent = action.siblings[0].parentId;\n        siblingIDs = action.siblings.map(node => {\n          return node.id;\n        });\n      }\n      let currentNodeDepends = state.get('nodeDepends');\n      const allNodeDepends = Set.union([Set(siblingIDs), currentNodeDepends]);\n      return state\n        .set('nodeDepends', allNodeDepends)\n        .set('currentNodeSiblings', fromJS(action.siblings))\n        .set('currentNodeSiblingsParent', currentNodeSiblingParent);\n    }\n    case SET_TARGET_PROJECT: {\n      return state\n        .set('currentProject', action.project)\n        .set('currentTreeId', '') //getTreeID(action.project))\n        .set('allowedGroups', fromJS(action.allowedGroups));\n    }\n    default:\n      return state;\n  }\n};\n","import { Map } from 'immutable';\nimport { SET_VERSION, SET_VERSION_STATUS } from '~/core/redux/types/version';\n\nlet initialState = Map({\n  commitRef: null,\n  buildNo: null,\n  contensisVersionStatus: 'published',\n});\n\nexport default (state = initialState, action) => {\n  switch (action.type) {\n    case SET_VERSION_STATUS: {\n      return state.set('contensisVersionStatus', action.status);\n    }\n    case SET_VERSION: {\n      return state\n        .set('commitRef', action.commitRef)\n        .set('buildNo', action.buildNo);\n    }\n    default:\n      return state;\n  }\n};\n","import { Map, fromJS, List } from 'immutable';\n\nimport {\n  SET_NODE_TREE,\n  GET_NODE_TREE_ERROR,\n} from '~/core/redux/types/navigation';\n\nconst initialState = Map({\n  root: null,\n  treeDepends: new List([]),\n  isError: false,\n  isReady: false,\n});\n\nexport default (state = initialState, action) => {\n  switch (action.type) {\n    case SET_NODE_TREE: {\n      return state.set('root', fromJS(action.nodes)).set('isReady', true);\n    }\n    case GET_NODE_TREE_ERROR: {\n      return state.set('isError', true);\n    }\n    default:\n      return state;\n  }\n};\n","import { CALL_HISTORY_METHOD } from '~/core/redux/types/routing';\n\n/**\n * This middleware captures CALL_HISTORY_METHOD actions to redirect to the\n * provided history object. This will prevent these actions from reaching your\n * reducer or any middleware that comes after this one.\n */\n/* eslint-disable no-unused-vars */\nconst routerMiddleware = history => store => next => action => {\n  if (action.type !== CALL_HISTORY_METHOD) {\n    return next(action);\n  }\n\n  const {\n    payload: { method, args },\n  } = action;\n  history[method](...args);\n};\n\nexport default routerMiddleware;\n","import { compose, createStore, applyMiddleware } from 'redux';\nimport { combineReducers } from 'redux-immutable';\nimport thunk from 'redux-thunk';\nimport createSagaMiddleware, { END } from 'redux-saga';\n\n// Core reducers\nimport RoutingReducer from './reducers/routing';\nimport { reducer as UserReducer } from '~/features/login';\nimport VersionReducer from './reducers/version';\nimport NavigationReducer from './reducers/navigation';\nimport routerMiddleware from './routerMiddleware';\n\nexport default (featureReducers, initialState, history) => {\n  const thunkMiddleware = [thunk];\n\n  let reduxDevToolsMiddleware = f => f;\n\n  if (typeof window != 'undefined') {\n    reduxDevToolsMiddleware = window.__REDUX_DEVTOOLS_EXTENSION__\n      ? window.__REDUX_DEVTOOLS_EXTENSION__()\n      : f => f;\n  }\n\n  const sagaMiddleware = createSagaMiddleware();\n  const middleware = compose(\n    applyMiddleware(\n      ...thunkMiddleware,\n      sagaMiddleware,\n      routerMiddleware(history)\n    ),\n    reduxDevToolsMiddleware\n  );\n\n  let reducers = {\n    navigation: NavigationReducer,\n    routing: RoutingReducer,\n    user: UserReducer,\n    version: VersionReducer,\n    ...featureReducers,\n  };\n\n  const combinedReducers = combineReducers(reducers);\n\n  const store = initialState => {\n    const store = createStore(combinedReducers, initialState, middleware);\n    store.runSaga = sagaMiddleware.run;\n    store.close = () => store.dispatch(END);\n    return store;\n  };\n\n  return store(initialState);\n};\n","import React from 'react';\nimport { hot } from 'react-hot-loader';\nimport RouteLoader from '~/core/routes/RouteLoader';\n\nconst AppRoot = props => {\n  return <RouteLoader {...props} />;\n};\n\nexport default hot(module)(AppRoot);\n","module.exports = function(originalModule) {\n\tif (!originalModule.webpackPolyfill) {\n\t\tvar module = Object.create(originalModule);\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"exports\", {\n\t\t\tenumerable: true\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n","module.exports = __WEBPACK_EXTERNAL_MODULE__47__;","module.exports = __WEBPACK_EXTERNAL_MODULE__48__;","module.exports = __WEBPACK_EXTERNAL_MODULE__49__;","module.exports = __WEBPACK_EXTERNAL_MODULE__50__;","module.exports = __WEBPACK_EXTERNAL_MODULE__51__;","module.exports = __WEBPACK_EXTERNAL_MODULE__52__;","module.exports = __WEBPACK_EXTERNAL_MODULE__53__;","module.exports = require(\"fs\");","module.exports = __WEBPACK_EXTERNAL_MODULE__55__;","module.exports = __WEBPACK_EXTERNAL_MODULE__56__;","module.exports = __WEBPACK_EXTERNAL_MODULE__57__;","module.exports = __WEBPACK_EXTERNAL_MODULE__59__;","module.exports = __WEBPACK_EXTERNAL_MODULE__60__;","module.exports = __WEBPACK_EXTERNAL_MODULE__61__;","const internalServer = require('../server/internalServer').default;\n\nexports.app = internalServer.app;\nexports.httpProxy = internalServer.apiProxy;\nexports.start = internalServer.start;\n\nconst ReactApp = require('~/App').default;\n\nexports.ReactApp = ReactApp;\n","module.exports = __WEBPACK_EXTERNAL_MODULE__63__;","const servers = SERVERS; /* global SERVERS */\nconst projects = PROJECTS; /* global PROJECTS */\n\nconst DisplayStartupConfiguration = config => {\n  /* eslint-disable no-console */\n  console.log();\n  console.log(\n    `Configured servers:\n`,\n    JSON.stringify(servers, null, 2)\n  );\n  console.log();\n  console.log(\n    `Configured projects:\n`,\n    JSON.stringify(projects, null, 2)\n  );\n  console.log();\n  console.log(\n    'Reverse proxy paths: ',\n    JSON.stringify(config.reverseProxyPaths, null, 2)\n  );\n  console.log();\n\n  /* eslint-enable no-console */\n};\n\nexport default DisplayStartupConfiguration;\n","const fetchMyIp = async (env, configureLocalEndpoint) => {\n  /* eslint-disable no-console */\n  try {\n    const response = await fetch('https://api.ipify.org?format=json', {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n    });\n\n    const ipJson = await response.json();\n    console.log(`Current public ip -> ${JSON.stringify(ipJson)}`);\n    if (ipJson.ip.startsWith('185.18.13')) {\n      console.log(\n        `Using local endpoint for ${env.alias} -> ${env.internalVip}`\n      );\n      configureLocalEndpoint();\n    } else {\n      console.log(`Outside Zengenti network, use real DNS.`);\n    }\n  } catch (error) {\n    console.log(\n      `Could not work out where I am so defaulting to local DNS, as I am probably running as a container this is what matters most. Not developers at home or tests :( Sorry. error: ${error}`\n    );\n    configureLocalEndpoint();\n  }\n\n  /* eslint-enable no-console */\n};\n\nexport default fetchMyIp;\n","import evilDns from 'evil-dns';\nimport fetchMyIp from '../util/fetchMyIp';\n\nconst servers = SERVERS; /* global SERVERS */\nconst apiConfig = DELIVERY_API_CONFIG; /* global DELIVERY_API_CONFIG */\n\nconst localDns = async () => {\n  const disableDnsChanges = false;\n\n  const configureLocalEndpoint = () => {\n    if (!disableDnsChanges) {\n      evilDns.add(`*${servers.alias}.cloud.contensis.com`, servers.internalVip);\n\n      if (apiConfig.internalIp)\n        evilDns.add(apiConfig.rootUrl, apiConfig.internalIp);\n    }\n  };\n\n  // Break api.ipify to test\n  // evilDns.add('api.ipify.org', '8.8.8.8');\n  await fetchMyIp(servers, configureLocalEndpoint);\n};\n\nexport default localDns;\n","import httpProxy from 'http-proxy';\n\nconst servers = SERVERS; /* global SERVERS */\nexport const apiProxy = httpProxy.createProxyServer();\n\nconst reverseProxies = (app, reverseProxyPaths) => {\n  deliveryApiProxy(apiProxy, app);\n\n  app.all(reverseProxyPaths, (req, res) => {\n    const target = servers.iis;\n\n    apiProxy.web(req, res, { target, changeOrigin: true });\n    apiProxy.on('error', e => {\n      /* eslint-disable no-console */\n      console.log(\n        `Proxy Request for ${req.path} HostName:${req.hostname} failed with ${e}`\n      );\n      /* eslint-enable no-console */\n    });\n  });\n};\n\nconst deliveryApiProxy = (apiProxy, app) => {\n  // This is just here to stop cors requests on localhost. In Production this is mapped using varnish.\n  app.all(['/api/delivery/*', '/api/image/*'], (req, res) => {\n    /* eslint-disable no-console */\n    const target = servers.cms;\n    console.log(`Proxying api request to ${servers.alias}`);\n    apiProxy.web(req, res, {\n      target,\n      changeOrigin: true,\n    });\n    apiProxy.on('error', e => {\n      /* eslint-disable no-console */\n      console.log(\n        `Proxy request for ${req.path} HostName:${req.hostname} failed with ${e}`\n      );\n      /* eslint-enable no-console */\n    });\n  });\n};\n\nexport default reverseProxies;\n","export const AccessMethods = {\n  DYNAMIC: 'dynamic',\n  STATIC: 'static',\n  FRAGMENT: 'fragment',\n  REDUX: 'redux',\n};\n\nexport const ResponseMethod = {\n  send: 'send',\n  json: 'json',\n  end: 'end',\n};\n","/* eslint-disable no-console */\nimport { ResponseMethod } from './types';\n\n/**\n * Web Application Response handler, sends a prepared express js response\n * with the supplied content sending in the specified manner\n * @param {response} request express js request object\n * @param {response} response express js response object\n * @param {string | object} content the content to send in the response body\n * @param {function} send the response function to call e.g res.send() res.json() res.end()\n */\nconst handleResponse = (\n  request,\n  response,\n  content,\n  send = ResponseMethod.send\n) => {\n  // console.log('---', response.statusCode, '---');\n  response[send](content);\n};\n\nexport default handleResponse;\n","export const hashKeys = keys => {\n  const XXHash = require('xxhashjs');\n  const returnKeys = [];\n  keys.forEach(cacheKey => {\n    const inputBuffer = Buffer.from(cacheKey.toLowerCase(), 'utf-8');\n\n    const hashed = XXHash.h32(inputBuffer, 0x0).toString(16);\n    const reversedhex = hashed\n      .match(/[a-fA-F0-9]{2}/g)\n      .reverse()\n      .join('');\n\n    const outputBuffer = Buffer.from(reversedhex, 'hex');\n\n    returnKeys.push(outputBuffer.toString('base64').substring(0, 6));\n  });\n  return returnKeys;\n};\n","import fs from 'fs';\nimport React from 'react';\nimport { StaticRouter } from 'react-router-dom';\nimport { Provider as ReduxProvider } from 'react-redux';\nimport Loadable from 'react-loadable';\nimport { renderToString } from 'react-dom/server';\nimport { getBundles } from 'react-loadable/webpack';\nimport { ServerStyleSheet } from 'styled-components';\nimport Helmet from 'react-helmet';\nimport serialize from 'serialize-javascript';\nimport minifyCssString from 'minify-css-string';\nimport { fromJS } from 'immutable';\nimport fromEntries from 'fromentries';\n\nimport { history } from '~/core/redux/history';\n\nimport { AccessMethods } from '../util/types';\nimport handleResponse from '../util/handleResponse';\nimport { hashKeys } from '../util/cacheHashing';\n\nimport pickProject from '~/core/util/pickProject';\nimport { GetDeliveryApiStatusFromHostname } from '~/core/util/ContensisDeliveryApi';\n\nimport { setCurrentProject } from '~/core/redux/actions/routing';\nimport { setVersion, setVersionStatus } from '~/core/redux/actions/version';\n\nimport {\n  selectCurrentProject,\n  selectCurrentTreeID,\n  selectEntryDepends,\n  selectNodeDepends,\n  selectRouteEntry,\n} from '~/core/redux/selectors/routing';\n\nimport createStore from '~/core/redux/store';\nimport rootSaga from '~/core/redux/sagas/index.js';\nimport { matchRoutes } from 'react-router-config';\n\nconst addStandardHeaders = (state, response, packagejson, groups) => {\n  if (state) {\n    /* eslint-disable no-console */\n    try {\n      console.log('About to add header');\n      let entryDepends = selectEntryDepends(state);\n      entryDepends = Array.from(entryDepends || {});\n      console.log(`entryDepends count: ${entryDepends.length}`);\n\n      let nodeDepends = selectNodeDepends(state).toJS();\n      let currentTreeId = selectCurrentTreeID(state);\n      let nodeDependsKeys = nodeDepends.map(nodeKey => {\n        return `${currentTreeId}_${nodeKey}`;\n      });\n      const allDepends = [...entryDepends, ...nodeDependsKeys];\n      const allDependsHashed = hashKeys(allDepends);\n\n      const surrogateKeyHeader =\n        packagejson.name == 'os-main'\n          ? ` ${packagejson.name}-app ${allDependsHashed.join(\n              ' '\n            )} ${allDepends.join(' ')}`\n          : ` ${packagejson.name}-app ${allDependsHashed.join(' ')}`;\n\n      response.header('surrogate-key', surrogateKeyHeader);\n\n      console.log(`depends hashed: ${allDependsHashed.join(' ')}`);\n      console.log(`depends hashed: ${allDepends.join(' ')}`);\n\n      addVarnishAuthenticationHeaders(state, response, groups);\n\n      response.setHeader('Surrogate-Control', 'max-age=3600');\n    } catch (e) {\n      console.log('Error Adding headers', e.message);\n      // console.log(e);\n    }\n  }\n};\n\nconst addVarnishAuthenticationHeaders = (state, response, groups = {}) => {\n  if (state) {\n    try {\n      const stateEntry = selectRouteEntry(state);\n      const project = selectCurrentProject(state);\n      const { globalGroups, allowedGroups } = groups;\n      // console.log(globalGroups, allowedGroups);\n      let allGroups = Array.from((globalGroups && globalGroups[project]) || {});\n      if (\n        stateEntry &&\n        stateEntry.getIn(['authentication', 'isLoginRequired']) &&\n        allowedGroups &&\n        allowedGroups[project]\n      ) {\n        allGroups = [...allGroups, ...allowedGroups[project]];\n      }\n      response.header('x-contensis-viewer-groups', allGroups.join('|'));\n    } catch (e) {\n      console.log('Error adding authentication header');\n      console.log(e);\n    }\n  }\n};\n\nconst readFileSync = path => fs.readFileSync(path, 'utf8');\n\nconst loadBundleData = ({ stats, templates }, build) => {\n  const bundle = {};\n  try {\n    bundle.stats = JSON.parse(\n      readFileSync(stats.replace('/target', build ? `/${build}` : ''))\n    );\n  } catch (ex) {\n    //console.log(ex);\n    bundle.stats = null;\n  }\n  try {\n    bundle.templates = {\n      templateHTML: readFileSync(\n        templates.html.replace('/target', build ? `/${build}` : '')\n      ),\n      templateHTMLStatic: readFileSync(\n        templates.static.replace('/target', build ? `/${build}` : '')\n      ),\n      templateHTMLFragment: readFileSync(\n        templates.fragment.replace('/target', build ? `/${build}` : '')\n      ),\n    };\n  } catch (ex) {\n    //console.log(ex);\n    bundle.templates = null;\n  }\n  return bundle;\n};\n\nconst webApp = (app, ReactApp, config) => {\n  const {\n    routes,\n    withReducers,\n    withSagas,\n    withEvents,\n    packagejson,\n    versionData,\n    differentialBundles,\n    dynamicPaths,\n    allowedGroups,\n    globalGroups,\n    disableSsrRedux,\n    handleResponses,\n  } = config;\n\n  const bundles = {\n    default: loadBundleData(config),\n    legacy: loadBundleData(config, 'legacy'),\n    modern: loadBundleData(config, 'modern'),\n  };\n  if (!bundles.default || bundles.default === {})\n    bundles.default = bundles.legacy || bundles.modern;\n\n  const versionInfo = JSON.parse(fs.readFileSync(versionData, 'utf8'));\n\n  const responseHandler =\n    typeof handleResponses === 'function' ? handleResponses : handleResponse;\n\n  app.get('/*', (request, response, next) => {\n    if (request.originalUrl.startsWith('/static/')) return next();\n    const { url } = request;\n\n    const matchedStaticRoute = () =>\n      matchRoutes(routes.StaticRoutes, request.path);\n    const isStaticRoute = () => matchedStaticRoute().length > 0;\n    const staticRoute = isStaticRoute() && matchedStaticRoute()[0];\n\n    // Determine functional params and set access methods\n    let accessMethod = {};\n\n    const isDynamicNormalised = request.query.dynamic\n      ? request.query.dynamic.toLowerCase()\n      : 'false';\n\n    // Hack for certain pages to avoid SSR\n    const onlyDynamic =\n      dynamicPaths.includes(request.path) ||\n      (staticRoute && staticRoute.route.ssr === false);\n\n    const isReduxRequestNormalised = request.query.redux\n      ? request.query.redux.toLowerCase()\n      : 'false';\n\n    const isFragmentNormalised = request.query.fragment\n      ? request.query.fragment.toLowerCase()\n      : 'false';\n\n    const isStaticNormalised = request.query.static\n      ? request.query.static.toLowerCase()\n      : 'false';\n\n    if (onlyDynamic || isDynamicNormalised === 'true')\n      accessMethod.DYNAMIC = AccessMethods.DYNAMIC;\n    if (isReduxRequestNormalised === 'true')\n      accessMethod.REDUX = AccessMethods.REDUX;\n    if (isFragmentNormalised === 'true')\n      accessMethod.FRAGMENT = AccessMethods.FRAGMENT;\n    if (isStaticNormalised === 'true')\n      accessMethod.STATIC = AccessMethods.STATIC;\n\n    const context = {};\n    let status = 200;\n\n    // Create a store (with a memory history) from our current url\n    const store = createStore(\n      withReducers,\n      fromJS({}),\n      history({ initialEntries: [url] })\n    );\n    //const store = createStore(withReducers);\n\n    // dispatch any global and non-saga related actions before calling our JSX\n    const versionStatusFromHostname = GetDeliveryApiStatusFromHostname(\n      request.hostname\n    );\n\n    store.dispatch(\n      setVersionStatus(request.query.versionStatus || versionStatusFromHostname)\n    );\n    store.dispatch(setVersion(versionInfo.commitRef, versionInfo.buildNo));\n\n    const project = pickProject(request.hostname, request.query);\n\n    const groups = allowedGroups && allowedGroups[project];\n    store.dispatch(setCurrentProject(project, groups));\n\n    const modules = [];\n\n    const jsx = (\n      <Loadable.Capture report={moduleName => modules.push(moduleName)}>\n        <ReduxProvider store={store}>\n          <StaticRouter context={context} location={url}>\n            <ReactApp routes={routes} withEvents={withEvents} />\n          </StaticRouter>\n        </ReduxProvider>\n      </Loadable.Capture>\n    );\n\n    /* eslint-disable no-console */\n    console.log(\n      `Request for ${request.path} hostname: ${request.hostname} versionStatus: ${versionStatusFromHostname}`\n    );\n    /* eslint-enable no-console */\n\n    const templates = bundles.default.templates || bundles.legacy.templates;\n    const stats =\n      bundles.modern.stats && bundles.legacy.stats\n        ? fromEntries(\n            Object.entries(bundles.modern.stats).map(([lib, paths]) => [\n              lib,\n              bundles.legacy.stats[lib]\n                ? [...paths, ...bundles.legacy.stats[lib]]\n                : paths,\n            ])\n          )\n        : bundles.default.stats;\n\n    const {\n      templateHTML,\n      templateHTMLFragment,\n      templateHTMLStatic,\n    } = templates;\n\n    // Serve a blank HTML page with client scripts to load the app in the browser\n    if (accessMethod.DYNAMIC) {\n      // Dynamic doesn't need sagas\n      renderToString(jsx);\n\n      const isDynamicHint = `<script>window.isDynamic = true;</script>`;\n      const dynamicBundles = getBundles(stats, modules);\n      const dynamicBundleScripts = dynamicBundles\n        .map(bundle => {\n          if (bundle.publicPath.includes('/modern/'))\n            return differentialBundles\n              ? `<script type=\"module\" src=\"${bundle.publicPath}\"></script>`\n              : null;\n          return `<script nomodule src=\"${bundle.publicPath}\"></script>`;\n        })\n        .filter(f => f)\n        .join('');\n      const responseHtmlDynamic = templateHTML\n        .replace('{{TITLE}}', '')\n        .replace('{{SEO_CRITICAL_METADATA}}', '')\n        .replace('{{CRITICAL_CSS}}', '')\n        .replace('{{APP}}', '')\n        .replace('{{LOADABLE_CHUNKS}}', dynamicBundleScripts)\n        .replace('{{REDUX_DATA}}', isDynamicHint);\n      response.setHeader('Surrogate-Control', 'max-age=3600');\n      response.status(status); //.send(responseHtmlDynamic);\n      responseHandler(request, response, responseHtmlDynamic);\n    }\n\n    // Render the JSX server side and send response as per access method options\n    if (!accessMethod.DYNAMIC) {\n      store\n        .runSaga(rootSaga(withSagas))\n        .toPromise()\n        .then(() => {\n          const sheet = new ServerStyleSheet();\n\n          const html = renderToString(sheet.collectStyles(jsx));\n\n          const helmet = Helmet.renderStatic();\n          Helmet.rewind();\n          let title = helmet.title.toString();\n          const metadata = helmet.meta.toString();\n\n          if (context.status === 404) {\n            status = 404;\n            title = '<title>404 page not found</title>';\n          }\n\n          if (context.url) {\n            return response.redirect(302, context.url);\n          }\n\n          const reduxState = store.getState();\n\n          const styleTags = sheet.getStyleTags();\n\n          const bundles = getBundles(stats, modules);\n\n          const bundleScripts = bundles\n            .map(bundle => {\n              if (bundle.publicPath.includes('/modern/'))\n                return differentialBundles\n                  ? `<script type=\"module\" src=\"${bundle.publicPath}\"></script>`\n                  : null;\n              return `<script nomodule src=\"${bundle.publicPath}\"></script>`;\n            })\n            .filter(f => f)\n            .join('');\n\n          let serialisedReduxData = '';\n          if (context.status !== 404) {\n            if (accessMethod.REDUX) {\n              serialisedReduxData = serialize(reduxState);\n              addStandardHeaders(reduxState, response, packagejson, {\n                allowedGroups,\n                globalGroups,\n              });\n              response.status(status); //.json(serialisedReduxData);\n              responseHandler(request, response, serialisedReduxData, 'json');\n              return true;\n            }\n            if (!disableSsrRedux) {\n              serialisedReduxData = serialize(reduxState);\n              serialisedReduxData = `<script>window.REDUX_DATA = ${serialisedReduxData}</script>`;\n            }\n          }\n          if (context.status === 404) {\n            accessMethod.STATIC = AccessMethods.STATIC;\n          }\n\n          // Responses\n          let responseHTML = '';\n\n          // Static page served as a fragment\n          if (accessMethod.FRAGMENT && accessMethod.STATIC) {\n            addStandardHeaders(reduxState, response, packagejson, {\n              allowedGroups,\n              globalGroups,\n            });\n            responseHTML = minifyCssString(styleTags) + html;\n          }\n\n          // Page fragment served with client scripts and redux data that hydrate the app client side\n          if (accessMethod.FRAGMENT && !accessMethod.STATIC) {\n            responseHTML = templateHTMLFragment\n              .replace('{{TITLE}}', title)\n              .replace('{{SEO_CRITICAL_METADATA}}', metadata)\n              .replace('{{CRITICAL_CSS}}', minifyCssString(styleTags))\n              .replace('{{APP}}', html)\n              .replace('{{LOADABLE_CHUNKS}}', bundleScripts)\n              .replace('{{REDUX_DATA}}', serialisedReduxData);\n          }\n\n          // Full HTML page served statically\n          if (!accessMethod.FRAGMENT && accessMethod.STATIC) {\n            responseHTML = templateHTMLStatic\n              .replace('{{TITLE}}', title)\n              .replace('{{SEO_CRITICAL_METADATA}}', metadata)\n              .replace('{{CRITICAL_CSS}}', minifyCssString(styleTags))\n              .replace('{{APP}}', html)\n              .replace('{{LOADABLE_CHUNKS}}', '');\n          }\n\n          // Full HTML page served with client scripts and redux data that hydrate the app client side\n          if (!accessMethod.FRAGMENT && !accessMethod.STATIC) {\n            responseHTML = templateHTML\n              .replace('{{TITLE}}', title)\n              .replace('{{SEO_CRITICAL_METADATA}}', metadata)\n              .replace('{{CRITICAL_CSS}}', styleTags)\n              .replace('{{APP}}', html)\n              .replace('{{LOADABLE_CHUNKS}}', bundleScripts)\n              .replace('{{REDUX_DATA}}', serialisedReduxData);\n          }\n          addStandardHeaders(reduxState, response, packagejson, {\n            allowedGroups,\n            globalGroups,\n          });\n          try {\n            response.status(status); //.send(responseHTML);\n            responseHandler(request, response, responseHTML);\n          } catch (err) {\n            // eslint-disable-next-line no-console\n            console.log(err.message);\n          }\n        })\n        .catch(err => {\n          // Handle any error that occurred in any of the previous\n          // promises in the chain.\n          /* eslint-disable no-console */\n          console.log(err);\n          /* eslint-enable no-console */\n          response.status(500);\n          responseHandler(\n            request,\n            response,\n            `Error occurred: <br />${err.stack} <br />${JSON.stringify(err)}`\n          );\n          // .send(\n          //   `Error occurred: <br />${err.stack} <br />${JSON.stringify(err)}`\n          // );\n        });\n      renderToString(jsx);\n\n      store.close();\n    }\n  });\n};\n\nexport default webApp;\n","import 'isomorphic-fetch';\nimport express from 'express';\nimport Loadable from 'react-loadable';\n\nimport DisplayStartupConfiguration from './util/displayStartupConfiguration';\nimport ConfigureLocalDNS from './core/localDns';\nimport ConfigureReverseProxies, { apiProxy } from './core/reverseProxies';\n// import ServerFeatures from './features/configure';\nimport ConfigureWebApp from './core/webApp';\n\nconst app = express();\n\nconst start = (ReactApp, config, ServerFeatures) => {\n  app.disable('x-powered-by');\n\n  // Output some information about the used build/startup configuration\n  DisplayStartupConfiguration(config);\n\n  // Set-up local proxy for images from cms, to save doing rewrites and extra code\n  ServerFeatures(app);\n  ConfigureReverseProxies(app, config.reverseProxyPaths);\n  ConfigureWebApp(app, ReactApp, config);\n\n  app.use('/static', express.static('dist/static', { maxage: '31557600h' }));\n\n  app.on('ready', async () => {\n    // Configure DNS to make life easier\n    await ConfigureLocalDNS();\n\n    Loadable.preloadAll().then(() => {\n      var server = app.listen(3001, () => {\n        console.info(`HTTP server is listening @ port 3001`);\n        setTimeout(function() {\n          app.emit('app_started');\n        }, 500);\n      });\n      app.on('stop', () => {\n        server.close(function() {\n          console.info('GoodBye :(');\n        });\n      });\n    });\n  });\n};\n\nexport default { app, apiProxy, start };\n"],"sourceRoot":""}
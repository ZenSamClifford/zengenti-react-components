{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap","webpack:///external \"@babel/runtime/helpers/interopRequireDefault\"","webpack:///external \"@babel/runtime/regenerator\"","webpack:///external \"immutable\"","webpack:///external \"@babel/runtime/helpers/defineProperty\"","webpack:///external \"react\"","webpack:///external \"@babel/runtime/helpers/asyncToGenerator\"","webpack:///./src/app/core/redux/selectors/routing.js","webpack:///external \"@babel/runtime/helpers/interopRequireWildcard\"","webpack:///./src/app/core/redux/types/routing.js","webpack:///./src/app/features/login/redux/types.js","webpack:///./src/app/features/login/redux/selectors.js","webpack:///external \"@babel/runtime/helpers/classCallCheck\"","webpack:///external \"@babel/runtime/helpers/createClass\"","webpack:///./src/app/core/util/helpers.js","webpack:///./src/app/features/login/redux/reducers.js","webpack:///external \"query-string\"","webpack:///./src/app/features/login/index.js","webpack:///external \"react-redux\"","webpack:///./src/app/core/util/ContensisDeliveryApi.js","webpack:///./node_modules/redux-saga/dist/redux-saga-effects-npm-proxy.esm.js","webpack:///external \"@babel/runtime/helpers/toConsumableArray\"","webpack:///./src/app/core/util/navigation.js","webpack:///./src/app/features/login/redux/actions.js","webpack:///external \"@redux-saga/core/effects\"","webpack:///./src/app/features/login/util/SecurityApi.class.js","webpack:///./src/app/core/util/ToJs.js","webpack:///external \"react-router-dom\"","webpack:///./src/app/core/redux/actions/routing.js","webpack:///./src/app/core/redux/types/navigation.js","webpack:///./src/app/features/login/redux/sagas.js","webpack:///external \"react-hot-loader\"","webpack:///./src/app/core/redux/types/version.js","webpack:///./src/app/features/login/util/LoginHelper.class.js","webpack:///external \"prop-types\"","webpack:///./src/app/features/login/util/CookieHelper.class.js","webpack:///external \"js-cookie\"","webpack:///./src/app/features/login/components/withLogin.js","webpack:///./src/app/core/redux/selectors/version.js","webpack:///./src/app/core/redux/selectors/navigation.js","webpack:///./src/app/core/routes/RouteLoader.js","webpack:///external \"@babel/runtime/helpers/slicedToArray\"","webpack:///external \"@babel/runtime/helpers/typeof\"","webpack:///external \"contensis-delivery-api\"","webpack:///./src/app/core/redux/actions/version.js","webpack:///./src/app/App.js","webpack:///(webpack)/buildin/module.js","webpack:///external \"react-router-config\"","webpack:///./src/app/pages/NotFound.js","webpack:///./src/app/core/routes/Status.js","webpack:///external \"react-loadable\"","webpack:///external \"isomorphic-fetch\"","webpack:///./src/app/core/redux/history.js","webpack:///external \"history\"","webpack:///./src/app/core/util/pickProject.js","webpack:///./src/app/core/redux/store.js","webpack:///external \"redux\"","webpack:///external \"redux-immutable\"","webpack:///external \"redux-thunk\"","webpack:///external \"redux-saga\"","webpack:///./src/app/core/redux/reducers/routing.js","webpack:///./src/app/core/redux/reducers/version.js","webpack:///./src/app/core/redux/reducers/navigation.js","webpack:///./src/app/core/redux/routerMiddleware.js","webpack:///./src/app/core/redux/sagas/index.js","webpack:///./src/app/core/redux/sagas/routing.js","webpack:///external \"loglevel\"","webpack:///./src/app/core/redux/sagas/queries.js","webpack:///external \"@babel/runtime/helpers/construct\"","webpack:///./src/app/core/search/expressions.js","webpack:///./src/app/core/schema.js","webpack:///./src/app/core/search/util.js","webpack:///./src/app/core/util/performance.js","webpack:///./src/app/core/redux/sagas/navigation.js","webpack:///./src/app/lib.js","webpack:///./src/server/internalServer.js","webpack:///external \"express\"","webpack:///./src/server/util/displayStartupConfiguration.js","webpack:///./src/server/core/localDns.js","webpack:///external \"evil-dns\"","webpack:///./src/server/util/fetchMyIp.js","webpack:///./src/server/core/reverseProxies.js","webpack:///external \"http-proxy\"","webpack:///./src/server/core/webApp.js","webpack:///external \"fs\"","webpack:///external \"react-dom/server\"","webpack:///external \"react-loadable/webpack\"","webpack:///external \"styled-components\"","webpack:///external \"react-helmet\"","webpack:///external \"serialize-javascript\"","webpack:///external \"minify-css-string\"","webpack:///external \"fromentries\"","webpack:///./src/server/util/types.js","webpack:///./src/server/util/cacheHashing.js","webpack:///external \"xxhashjs\""],"names":["selectRouteEntry","state","getIn","selectNodeDepends","List","selectCurrentTreeID","selectEntryDepends","selectRouteEntryEntryId","selectRouteEntryContentTypeId","entry","selectRouteEntrySlug","selectRouteEntryID","selectCurrentPath","selectCurrentSearch","selectQueryStringAsObject","selectCurrentProject","selectIsNotFound","selectCurrentAncestors","selectCurrentNode","selectBreadcrumb","push","selectRouteLoading","ROUTING_PREFIX","GET_ENTRY","SET_ENTRY","SET_NODE","SET_ANCESTORS","SET_SIBLINGS","SET_ENTRY_ID","SET_ENTRY_RELATED_ARTICLES","SET_NAVIGATION_NOT_FOUND","SET_NAVIGATION_PATH","SET_TARGET_PROJECT","SET_ROUTE","CALL_HISTORY_METHOD","ACTION_PREFIX","UPDATE_USER","LOGIN_USER","LOGIN_SUCCESSFUL","LOGIN_FAILED","LOGOUT_USER","TOGGLE_LOGIN_MODE","CREATE_USER_ACCOUNT","VALIDATE_USER","VALIDATE_USER_SUCCESS","VALIDATE_USER_FAILED","FORGOT_USER_PASSWORD","FORGOT_USER_PASSWORD_COMPLETE","CHANGE_USER_PASSWORD","CHANGE_USER_PASSWORD_FAILED","CHANGE_USER_PASSWORD_COMPLETE","SET_RECAPTCHA_KEY","SET_RECAPTCHA_RESPONSE","selectUser","get","selectUsername","selectUserLoggedIn","selectUserGroups","selectUserMessage","selectLoginScreenMode","selectPasswordMessage","selectChangePasswordMessage","selectCaptchaSiteKey","selectCaptchaData","selectCaptchaResponse","selectCaptchaToken","action","type","payload","getWebPImageUri","uri","formatedUri","indexOf","resizeImage","image","height","width","asset","sys","resizeImageUri","paramDelimeter","flattenArray","arr","reduce","acc","val","concat","filter","elem","pos","api","url","options","fetch","then","response","setTimeout","ok","Error","statusText","json","data","error","dynamicSort","property","sortOrder","substr","a","b","result","randomString","length","text","possible","i","charAt","Math","floor","random","initialUserState","loggedIn","failedLogin","username","id","securityToken","logonResult","groups","emailAddress","fullName","loginScreenMode","passwordReset","passwordResetMessage","changePasswordMessage","recaptcha","Map","key","isHuman","token","user","set","newMode","loginMode","setIn","getClientConfig","project","config","DELIVERY_API_CONFIG","projectId","window","PROXY_DELIVERY_API","rootUrl","responseHandler","GetClientSideDeliveryApiStatus","currentHostname","location","hostname","GetDeliveryApiStatusFromHostname","endsWith","GetResponseGuids","object","Ids","Object","keys","some","k","language","dataFormat","toLowerCase","subIds","GetAllResponseGuids","returnItems","unique","Set","DeliveryApi","query","linkDepth","env","client","Client","create","entries","search","deliveryApiStatus","baseConfig","versionStatus","deliveryApi","CacheNode","value","next","prev","LruCache","limit","map","head","tail","size","node","remove","setHead","CachedSearch","request","JSON","stringify","toString","clientConfig","contentTypes","taxonomy","resolveChildren","extendTaxonomyNode","nodes","getRoot","path","getAncestors","getChildren","getSiblings","execute","cache","promise","getTaxonomyId","taxonomyLookup","children","n","parts","split","cachedSearch","queryParams","queryString","parse","routeParams","staticRoute","match","params","buildUrl","route","qs","clientHostname","protocol","port","addHostname","host","PUBLIC_URI","loginUser","password","validateUser","cookies","logoutUser","toggleLoginMode","createUserAccount","forgotPassword","changePassword","oldPassword","newPassword","newPasswordConfirm","changePasswordWithToken","setRecaptchaKey","setRecaptchaResponse","CMS_URL","SERVERS","cms","REGISTER_USER_URI","LOGON_USER_URI","VALIDATE_USER_URI","USER_INFO_URI","FORGOT_PASSWORD_URI","CHANGE_PASSWORD_URI","CHANGE_PASSWORD_TOKEN_URI","AUTH_CAPTCHA_URI","LOGIN_URL","REGISTER_USER_URL","LOGON_USER_URL","VALIDATE_USER_URL","USER_INFO_URL","BASE_OPTIONS","method","headers","SecurityApi","encodeURIComponent","body","ip","applicationName","bodyToken","decodeURIComponent","email","currentUrl","responseBody","toJS","WrappedComponent","wrappedComponentProps","KEY","VALUE","propsJS","newProps","wrappedComponentProp","Iterable","isIterable","setNotFound","notFound","setNavigationPath","withEvents","statePath","routes","setCurrentProject","allowedGroups","setRoute","setRouteEntry","GET_NODE_TREE","SET_NODE_TREE","GET_NODE_TREE_ERROR","loginUserSaga","logoutUserSaga","validateUserSaga","updateUserSaga","createUserAccountSaga","userSagas","getGroups","LoginHelper","LoginUser","redirect","ClientRedirectToLogin","LogoutUser","ClientRedirectToHome","currentQs","qsToken","securitytoken","SetLoginCookies","ContensisCMSUserName","ValidateUser","userState","from","currentSearch","redirectUri","redirect_uri","ForgotPassword","message","history","ChangePasswordWithToken","ChangePassword","RegisterUser","registerResponse","registrationResult","verifiedEmail","failedToCreateAccount","VERSION_PREFIX","SET_VERSION","SET_VERSION_STATUS","LOGIN_COOKIE","LAST_USERNAME_COOKIE","DISPLAY_NAME_COOKIE","USER_LANGUAGE_COOKIE","AVATAR_COOKIE","CookieHelper","GetCookie","SetCookie","displayName","languageId","avatar","DeleteCookie","cached","GetCachedCredentialsSSR","GetCachedCredentials","SecurityToken","LogonResult","UserID","ClearCachedCredentials","GetGroups","userWithGroups","LogonUser","loginResponse","CheckResult","GetUserInfo","userInfoResponse","GroupCollection","errorMessage","group","name","GroupName","GroupId","Fullname","Email","href","LoginPageUrl","pathname","passwordResponse","ValidatePassword","btoa","pword","test","Results","COOKIE_VALID_DAYS","_cookie","Cookies","withConverter","read","write","maxAgeDays","expires","getDisplayName","withLogin","mapStateToProps","userMessage","screenMode","passwordMessage","captchaSiteKey","isLoggedIn","currentPath","mapDispatchToProps","captchaResponse","ConnectedComponent","selectCommitRef","selectBuildNumber","selectVersionStatus","hasNavigationTree","selectNavigationRoot","selectNavigationDepends","getTrimmedPath","lastChar","substring","RouteLoader","contentTypeId","isNotFound","notFoundComponent","matchedStaticRoute","StaticRoutes","isStaticRoute","trimmedPath","setPath","serverPath","isExact","p","startsWith","join","MatchedComponent","ContentTypeMappings","find","item","contentTypeID","NotFoundComponent","NotFound","propTypes","PropTypes","objectOf","array","string","loading","bool","func","isLoading","module","setVersion","commitRef","buildNo","setVersionStatus","status","AppRoot","props","Status","code","staticContext","number","isRequired","element","selectedHistory","createBrowserHistory","createMemoryHistory","browserHistory","servers","alias","publicUri","projects","PROJECTS","pickProject","includes","featureReducers","initialState","thunkMiddleware","thunk","reduxDevToolsMiddleware","f","__REDUX_DEVTOOLS_EXTENSION__","sagaMiddleware","middleware","applyMiddleware","reducers","navigation","NavigationReducer","routing","RoutingReducer","UserReducer","version","VersionReducer","combinedReducers","store","runSaga","run","close","dispatch","END","currentNode","currentProject","entryID","entryDepends","currentNodeAncestors","currentTreeId","ancestors","ancestorIDs","currentNodeDepends","allNodeDepends","union","component","nodeDepends","removeIn","currentNodeSiblingParent","siblingIDs","siblings","parentId","contensisVersionStatus","root","treeDepends","isError","isReady","routerMiddleware","args","featureSagas","rootSaga","subSagas","routingSagas","navigationSagas","setRouteSaga","getRouteSaga","do404","onRouteLoad","appsays","doNavigation","customNavigation","entryLinkDepth","setContentTypeLimits","ct","fields","routeEntry","customRouting","fetchNode","pathNode","scroll","top","currentPathDepth","getRootNode","depth","entryFields","splitPath","entryGuid","getClient","previewEntry","getNode","contentType","items","onRouteLoaded","tree","treeDepth","log","stack","routeEntryByFields","Query","fieldExpression","field","operator","weight","Array","isArray","equalToOrIn","Op","contentTypeIdExpression","contentTypeIds","webpageTemplates","expressions","dataFormatExpression","DataFormats","webpage","or","filterExpressions","filters","param","withContentTypeIds","c","notContentTypeIds","andExpr","and","dataFormatExpr","Fields","withExpr","notExpr","not","add","defaultExpressions","equalTo","defaultSearchExpressions","includeInSearchExpressions","exists","includeInSearch","orderByExpression","orderBy","expression","OrderBy","ob","desc","asc","customWhereExpressions","where","clause","idx","termExpressions","searchTerm","weightedSearchFields","quotedPhrases","modifiedSearchTerm","forEach","qp","replace","trim","operators","containsOp","term","fieldId","freeTextOp","fieldOperators","keywords","filename","entryTitle","addRange","contains","wildcard","slug","entryDescription","Projects","website","VersionStatus","published","latest","ContentTypes","contentPage","WebpageFormats","FilterExpressionTypes","fixFreeTextForElastic","s","illegalChars","encodedChars","illegalRegEx","RegExp","encodedRegEx","timedSearch","duration","start","end","extractQuotedPhrases","pattern","callCustomApi","customApi","now","Date","performance","ensureNodeTreeSaga","deliveryApiVersionStatus","internalServer","require","exports","app","httpProxy","apiProxy","ReactApp","ServerFeatures","disable","reverseProxyPaths","use","express","maxage","on","Loadable","preloadAll","server","listen","console","info","emit","DisplayStartupConfiguration","apiConfig","localDns","disableDnsChanges","configureLocalEndpoint","evilDns","internalVip","internalIp","fetchMyIp","ipJson","createProxyServer","reverseProxies","deliveryApiProxy","all","req","res","target","iis","web","changeOrigin","e","addStandardHeaders","packagejson","nodeDependsKeys","nodeKey","allDepends","allDependsHashed","header","addVarnishAuthenticationHeaders","setHeader","stateEntry","globalGroups","allGroups","readFileSync","fs","loadBundleData","build","stats","templates","bundle","templateHTML","html","templateHTMLStatic","templateHTMLFragment","fragment","webApp","withReducers","withSagas","versionData","differentialBundles","dynamicPaths","disableSsrRedux","bundles","legacy","modern","versionInfo","originalUrl","accessMethod","isDynamicNormalised","dynamic","onlyDynamic","isReduxRequestNormalised","redux","isFragmentNormalised","isStaticNormalised","DYNAMIC","AccessMethods","REDUX","FRAGMENT","STATIC","context","initialEntries","versionStatusFromHostname","modules","jsx","moduleName","lib","paths","isDynamicHint","dynamicBundles","dynamicBundleScripts","publicPath","responseHtmlDynamic","send","toPromise","sheet","ServerStyleSheet","collectStyles","helmet","Helmet","renderStatic","rewind","title","metadata","meta","reduxState","getState","styleTags","getStyleTags","bundleScripts","serialisedReduxData","responseHTML","err","hashKeys","XXHash","returnKeys","cacheKey","inputBuffer","Buffer","hashed","h32","reversedhex","reverse","outputBuffer"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;QCVA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;;;QAGA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA,0CAA0C,gCAAgC;QAC1E;QACA;;QAEA;QACA;QACA;QACA,wDAAwD,kBAAkB;QAC1E;QACA,iDAAiD,cAAc;QAC/D;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,yCAAyC,iCAAiC;QAC1E,gHAAgH,mBAAmB,EAAE;QACrI;QACA;;QAEA;QACA;QACA;QACA,2BAA2B,0BAA0B,EAAE;QACvD,iCAAiC,eAAe;QAChD;QACA;QACA;;QAEA;QACA,sDAAsD,+DAA+D;;QAErH;QACA;;;QAGA;QACA;;;;;;;AClFA,gD;;;;;;ACAA,gD;;;;;;ACAA,gD;;;;;;ACAA,gD;;;;;;ACAA,gD;;;;;;ACAA,gD;;;;;;;;;;;;;;ACAA;;AACA;;AAEO,IAAMA,gBAAgB,GAAG,SAAnBA,gBAAmB,CAAAC,KAAK,EAAI;AACvC,SAAOA,KAAK,CAACC,KAAN,CAAY,CAAC,SAAD,EAAY,OAAZ,CAAZ,EAAkC,oBAAI,EAAJ,CAAlC,CAAP;AACD,CAFM;;;;AAGA,IAAMC,iBAAiB,GAAG,SAApBA,iBAAoB,CAAAF,KAAK,EAAI;AACxC,SAAOA,KAAK,CAACC,KAAN,CAAY,CAAC,SAAD,EAAY,aAAZ,CAAZ,EAAwC,IAAIE,eAAJ,CAAS,EAAT,CAAxC,CAAP;AACD,CAFM;;;;AAGA,IAAMC,mBAAmB,GAAG,SAAtBA,mBAAsB,CAAAJ,KAAK,EAAI;AAC1C,SAAOA,KAAK,CAACC,KAAN,CAAY,CAAC,SAAD,EAAY,eAAZ,CAAZ,CAAP;AACD,CAFM;;;;AAGA,IAAMI,kBAAkB,GAAG,SAArBA,kBAAqB,CAAAL,KAAK,EAAI;AACzC,SAAOA,KAAK,CAACC,KAAN,CAAY,CAAC,SAAD,EAAY,cAAZ,CAAZ,CAAP;AACD,CAFM;;;;AAGA,IAAMK,uBAAuB,GAAG,SAA1BA,uBAA0B,CAAAN,KAAK,EAAI;AAC9C,SAAOA,KAAK,CAACC,KAAN,CAAY,CAAC,SAAD,EAAY,OAAZ,EAAqB,KAArB,EAA4B,IAA5B,CAAZ,EAA+C,IAA/C,CAAP;AACD,CAFM;;;;AAGA,IAAMM,6BAA6B,GAAG,SAAhCA,6BAAgC,CAAAP,KAAK,EAAI;AACpD,MAAMQ,KAAK,GAAGT,gBAAgB,CAACC,KAAD,CAA9B;AACA,SAAOQ,KAAK,IAAIA,KAAK,CAACP,KAAN,CAAY,CAAC,KAAD,EAAQ,eAAR,CAAZ,EAAsC,IAAtC,CAAhB;AACD,CAHM;;;;AAIA,IAAMQ,oBAAoB,GAAG,SAAvBA,oBAAuB,CAAAT,KAAK,EAAI;AAC3C,SAAOA,KAAK,CAACC,KAAN,CAAY,CAAC,SAAD,EAAY,OAAZ,EAAqB,KAArB,EAA4B,MAA5B,CAAZ,EAAiD,IAAjD,CAAP;AACD,CAFM;;;;AAGA,IAAMS,kBAAkB,GAAG,SAArBA,kBAAqB,CAAAV,KAAK,EAAI;AACzC,SAAOA,KAAK,CAACC,KAAN,CAAY,CAAC,SAAD,EAAY,SAAZ,CAAZ,CAAP;AACD,CAFM;;;;AAGA,IAAMU,iBAAiB,GAAG,SAApBA,iBAAoB,CAAAX,KAAK,EAAI;AACxC,SAAOA,KAAK,CAACC,KAAN,CAAY,CAAC,SAAD,EAAY,aAAZ,CAAZ,CAAP;AACD,CAFM;;;;AAGA,IAAMW,mBAAmB,GAAG,SAAtBA,mBAAsB,CAAAZ,KAAK,EAAI;AAC1C,SAAOA,KAAK,CAACC,KAAN,CAAY,CAAC,SAAD,EAAY,UAAZ,EAAwB,QAAxB,CAAZ,CAAP;AACD,CAFM;;;;AAGA,IAAMY,yBAAyB,GAAG,SAA5BA,yBAA4B,CAAAb,KAAK;AAAA,SAC5C,6BAAYY,mBAAmB,CAACZ,KAAD,CAA/B,CAD4C;AAAA,CAAvC;;;;AAEA,IAAMc,oBAAoB,GAAG,SAAvBA,oBAAuB,CAAAd,KAAK,EAAI;AAC3C,SAAOA,KAAK,CAACC,KAAN,CAAY,CAAC,SAAD,EAAY,gBAAZ,CAAZ,CAAP;AACD,CAFM;;;;AAGA,IAAMc,gBAAgB,GAAG,SAAnBA,gBAAmB,CAAAf,KAAK,EAAI;AACvC,SAAOA,KAAK,CAACC,KAAN,CAAY,CAAC,SAAD,EAAY,UAAZ,CAAZ,CAAP;AACD,CAFM;;;;AAGA,IAAMe,sBAAsB,GAAG,SAAzBA,sBAAyB,CAAAhB,KAAK,EAAI;AAC7C,SAAOA,KAAK,CAACC,KAAN,CAAY,CAAC,SAAD,EAAY,sBAAZ,CAAZ,EAAiD,IAAIE,eAAJ,EAAjD,CAAP;AACD,CAFM;;;;AAGA,IAAMc,iBAAiB,GAAG,SAApBA,iBAAoB,CAAAjB,KAAK,EAAI;AACxC,SAAOA,KAAK,CAACC,KAAN,CAAY,CAAC,SAAD,EAAY,aAAZ,CAAZ,CAAP;AACD,CAFM;;;;AAGA,IAAMiB,gBAAgB,GAAG,SAAnBA,gBAAmB,CAAAlB,KAAK,EAAI;AACvC,SAAO,CAACgB,sBAAsB,CAAChB,KAAD,CAAtB,IAAiC,IAAIG,eAAJ,EAAlC,EAA8CgB,IAA9C,CACLF,iBAAiB,CAACjB,KAAD,CADZ,CAAP;AAGD,CAJM;;;;AAKA,IAAMoB,kBAAkB,GAAG,SAArBA,kBAAqB,CAAApB,KAAK,EAAI;AACzC,SAAOA,KAAK,CAACC,KAAN,CAAY,CAAC,SAAD,EAAY,WAAZ,CAAZ,CAAP;AACD,CAFM;;;;;;;;ACrDP,gD;;;;;;;;;;;;;ACAA,IAAMoB,cAAc,GAAG,WAAvB;AACO,IAAMC,SAAS,aAAMD,cAAN,eAAf;;AACA,IAAME,SAAS,aAAMF,cAAN,eAAf;;AACA,IAAMG,QAAQ,aAAMH,cAAN,cAAd;;AACA,IAAMI,aAAa,aAAMJ,cAAN,mBAAnB;;AACA,IAAMK,YAAY,aAAML,cAAN,kBAAlB;;AACA,IAAMM,YAAY,aAAMN,cAAN,kBAAlB;;AACA,IAAMO,0BAA0B,aAAMP,cAAN,gCAAhC;;AAEA,IAAMQ,wBAAwB,aAAMR,cAAN,mBAA9B;;AACA,IAAMS,mBAAmB,aAAMT,cAAN,yBAAzB;;AAEA,IAAMU,kBAAkB,aAAMV,cAAN,wBAAxB;;AAEA,IAAMW,SAAS,aAAMX,cAAN,eAAf;;AACA,IAAMY,mBAAmB,aAAMZ,cAAN,yBAAzB;;;;;;;;;;;;;;ACfP,IAAMa,aAAa,GAAG,QAAtB;AACO,IAAMC,WAAW,aAAMD,aAAN,gBAAjB;;AACA,IAAME,UAAU,aAAMF,aAAN,eAAhB;;AACA,IAAMG,gBAAgB,aAAMH,aAAN,qBAAtB;;AACA,IAAMI,YAAY,aAAMJ,aAAN,iBAAlB;;AACA,IAAMK,WAAW,aAAML,aAAN,gBAAjB;;AACA,IAAMM,iBAAiB,aAAMN,aAAN,sBAAvB;;AACA,IAAMO,mBAAmB,aAAMP,aAAN,wBAAzB;;AACA,IAAMQ,aAAa,aAAMR,aAAN,kBAAnB;;AACA,IAAMS,qBAAqB,aAAMT,aAAN,0BAA3B;;AACA,IAAMU,oBAAoB,aAAMV,aAAN,yBAA1B;;AACA,IAAMW,oBAAoB,aAAMX,aAAN,yBAA1B;;AACA,IAAMY,6BAA6B,aAAMZ,aAAN,kCAAnC;;AACA,IAAMa,oBAAoB,aAAMb,aAAN,yBAA1B;;AACA,IAAMc,2BAA2B,aAAMd,aAAN,gCAAjC;;AACA,IAAMe,6BAA6B,aAAMf,aAAN,kCAAnC;;AACA,IAAMgB,iBAAiB,aAAMhB,aAAN,sBAAvB;;AACA,IAAMiB,sBAAsB,aAAMjB,aAAN,2BAA5B;;;;;;;;;;;;;;;ACjBA,IAAMkB,UAAU,GAAG,SAAbA,UAAa,CAAApD,KAAK,EAAI;AACjC,SAAOA,KAAK,CAACqD,GAAN,CAAU,MAAV,CAAP;AACD,CAFM;;;;AAGA,IAAMC,cAAc,GAAG,SAAjBA,cAAiB,CAAAtD,KAAK,EAAI;AACrC,SAAOA,KAAK,CAACC,KAAN,CAAY,CAAC,MAAD,EAAS,UAAT,CAAZ,CAAP;AACD,CAFM;;;;AAGA,IAAMsD,kBAAkB,GAAG,SAArBA,kBAAqB,CAAAvD,KAAK,EAAI;AACzC,SAAOA,KAAK,CAACC,KAAN,CAAY,CAAC,MAAD,EAAS,UAAT,CAAZ,CAAP;AACD,CAFM;;;;AAGA,IAAMuD,gBAAgB,GAAG,SAAnBA,gBAAmB,CAAAxD,KAAK,EAAI;AACvC,SAAOA,KAAK,CAACC,KAAN,CAAY,CAAC,MAAD,EAAS,QAAT,CAAZ,CAAP;AACD,CAFM;;;;AAGA,IAAMwD,iBAAiB,GAAG,SAApBA,iBAAoB,CAAAzD,KAAK,EAAI;AACxC,SAAOA,KAAK,CAACC,KAAN,CAAY,CAAC,MAAD,EAAS,aAAT,CAAZ,CAAP;AACD,CAFM;;;;AAGA,IAAMyD,qBAAqB,GAAG,SAAxBA,qBAAwB,CAAA1D,KAAK,EAAI;AAC5C,SAAOA,KAAK,CAACC,KAAN,CAAY,CAAC,MAAD,EAAS,iBAAT,CAAZ,CAAP;AACD,CAFM;;;;AAGA,IAAM0D,qBAAqB,GAAG,SAAxBA,qBAAwB,CAAA3D,KAAK,EAAI;AAC5C,SAAOA,KAAK,CAACC,KAAN,CAAY,CAAC,MAAD,EAAS,sBAAT,CAAZ,CAAP;AACD,CAFM;;;;AAGA,IAAM2D,2BAA2B,GAAG,SAA9BA,2BAA8B,CAAA5D,KAAK,EAAI;AAClD,SAAOA,KAAK,CAACC,KAAN,CAAY,CAAC,MAAD,EAAS,uBAAT,CAAZ,CAAP;AACD,CAFM;;;;AAGA,IAAM4D,oBAAoB,GAAG,SAAvBA,oBAAuB,CAAA7D,KAAK,EAAI;AAC3C,SAAOA,KAAK,CAACC,KAAN,CAAY,CAAC,MAAD,EAAS,WAAT,EAAsB,KAAtB,CAAZ,CAAP;AACD,CAFM;;;;AAGA,IAAM6D,iBAAiB,GAAG,SAApBA,iBAAoB,CAAA9D,KAAK,EAAI;AACxC,SAAOA,KAAK,CAACC,KAAN,CAAY,CAAC,MAAD,EAAS,WAAT,EAAsB,UAAtB,CAAZ,CAAP;AACD,CAFM;;;;AAGA,IAAM8D,qBAAqB,GAAG,SAAxBA,qBAAwB,CAAA/D,KAAK,EAAI;AAC5C,SAAOA,KAAK,CAACC,KAAN,CAAY,CAAC,MAAD,EAAS,WAAT,EAAsB,UAAtB,EAAkC,SAAlC,CAAZ,CAAP;AACD,CAFM;;;;AAGA,IAAM+D,kBAAkB,GAAG,SAArBA,kBAAqB,CAAAhE,KAAK,EAAI;AACzC,SAAOA,KAAK,CAACC,KAAN,CAAY,CAAC,MAAD,EAAS,WAAT,EAAsB,UAAtB,EAAkC,OAAlC,CAAZ,CAAP;AACD,CAFM;;;;;;;;ACjCP,iD;;;;;;ACAA,iD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACAO,SAASgE,MAAT,CAAgBC,IAAhB,EAAoC;AAAA,MAAdC,OAAc,uEAAJ,EAAI;AACzC;AAASD,QAAI,EAAJA;AAAT,KAAkBC,OAAlB;AACD;;AAEM,IAAMC,eAAe,GAAG,SAAlBA,eAAkB,CAAAC,GAAG,EAAI;AACpC,MAAIC,WAAW,GAAGD,GAAlB;;AACA,MAAIA,GAAG,CAACE,OAAJ,CAAY,MAAZ,KAAuB,CAAC,CAA5B,EAA+B;AAC7B,QAAIF,GAAG,CAACE,OAAJ,CAAY,IAAZ,KAAqB,CAAC,CAAtB,IAA2BF,GAAG,CAACE,OAAJ,CAAY,SAAZ,KAA0B,CAAC,CAA1D,EAA6D;AAC3D,UAAIF,GAAG,CAACE,OAAJ,CAAY,GAAZ,IAAmB,CAAC,CAAxB,EAA2B;AACzBD,mBAAW,aAAMD,GAAN,YAAX;AACD,OAFD,MAEO;AACLC,mBAAW,aAAMD,GAAN,YAAX;AACD;AACF;;AACD,QACEC,WAAW,CAACC,OAAZ,CAAoB,IAApB,KAA6B,CAAC,CAA9B,IACAD,WAAW,CAACC,OAAZ,CAAoB,UAApB,KAAmC,CAAC,CAFtC,EAGE;AACA,UAAID,WAAW,CAACC,OAAZ,CAAoB,GAApB,IAA2B,CAAC,CAAhC,EAAmC;AACjCD,mBAAW,aAAMA,WAAN,UAAX;AACD,OAFD,MAEO;AACLA,mBAAW,aAAMA,WAAN,UAAX;AACD;AACF;AACF;;AACD,SAAOA,WAAP;AACD,CAtBM;;;;AAwBA,IAAME,WAAW,GAAG,SAAdA,WAAc,CAACC,KAAD,EAAQC,MAAR,EAAgBC,KAAhB,EAA0B;AACnD,MAAIF,KAAK,CAACG,KAAN,IAAeH,KAAK,CAACG,KAAN,CAAYC,GAA3B,IAAkCJ,KAAK,CAACG,KAAN,CAAYC,GAAZ,CAAgBR,GAAtD,EAA2D;AACzDI,SAAK,CAACG,KAAN,CAAYC,GAAZ,CAAgBR,GAAhB,GAAsBS,cAAc,CAACL,KAAK,CAACG,KAAN,CAAYC,GAAZ,CAAgBR,GAAjB,EAAsBK,MAAtB,EAA8BC,KAA9B,CAApC;AACD;AACF,CAJM;;;;AAKA,IAAMG,cAAc,GAAG,SAAjBA,cAAiB,CAACT,GAAD,EAAMK,MAAN,EAAcC,KAAd,EAAwB;AACpD,MAAIL,WAAW,GAAGD,GAAlB;AACA,MAAIU,cAAc,GAAG,GAArB;;AACA,MAAIV,GAAG,CAACE,OAAJ,CAAY,GAAZ,IAAmB,CAAC,CAAxB,EAA2B;AACzBQ,kBAAc,GAAG,GAAjB;AACD;;AACD,MAAIJ,KAAJ,EAAW;AACT,QACEL,WAAW,CAACC,OAAZ,CAAoB,IAApB,KAA6B,CAAC,CAA9B,IACAD,WAAW,CAACC,OAAZ,CAAoB,QAApB,KAAiC,CAAC,CAFpC,EAGE;AACAD,iBAAW,aAAMA,WAAN,SAAoBS,cAApB,eAAuCJ,KAAvC,CAAX;AACAI,oBAAc,GAAG,GAAjB;AACD;AACF;;AACD,MAAIL,MAAJ,EAAY;AACV,QACEJ,WAAW,CAACC,OAAZ,CAAoB,IAApB,KAA6B,CAAC,CAA9B,IACAD,WAAW,CAACC,OAAZ,CAAoB,SAApB,KAAkC,CAAC,CAFrC,EAGE;AACAD,iBAAW,aAAMA,WAAN,SAAoBS,cAApB,eAAuCL,MAAvC,CAAX;AACD;AACF;;AAED,SAAOJ,WAAP;AACD,CAzBM;;;;AA2BA,SAASU,YAAT,CAAsBC,GAAtB,EAA2B;AAChC;AACA;AACA,SAAOA,GAAG,CACPC,MADI,CACG,UAACC,GAAD,EAAMC,GAAN;AAAA,WAAcD,GAAG,CAACE,MAAJ,CAAWD,GAAX,CAAd;AAAA,GADH,EACkC,EADlC,EAEJE,MAFI,CAEG,UAACC,IAAD,EAAOC,GAAP,EAAYP,GAAZ;AAAA,WAAoBA,GAAG,CAACV,OAAJ,CAAYgB,IAAZ,KAAqBC,GAAzC;AAAA,GAFH,CAAP;AAGD;;SAEqBC,G;;;;;;;+BAAf,kBAAmBC,GAAnB,EAAwBC,OAAxB;AAAA;AAAA;AAAA;AAAA;AAAA,8CACEC,KAAK,CAACF,GAAD,EAAMC,OAAN,CAAL,CACJE,IADI;AAAA;AAAA;AAAA;AAAA;AAAA,2CACC,iBAAMC,QAAN;AAAA;AAAA;AAAA;AAAA;AACJC,kCAAU,CAAC;AAAA,iCAAM,IAAN;AAAA,yBAAD,EAAa,CAAb,CAAV;;AADI,4BAECD,QAAQ,CAACE,EAFV;AAAA;AAAA;AAAA;;AAAA,8BAGI,IAAIC,KAAJ,CAAUH,QAAQ,CAACI,UAAnB,CAHJ;;AAAA;AAAA,yDAKGJ,QAAQ,CAACK,IAAT,GAAgBN,IAAhB,CAAqB,UAAAO,IAAI;AAAA,iCAAIA,IAAJ;AAAA,yBAAzB,CALH;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eADD;;AAAA;AAAA;AAAA;AAAA,0BAQE,UAAAC,KAAK,EAAI;AACd;AACA,oBAAMA,KAAN;AACD,aAXI,CADF;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G;;;;AAeA,SAASC,WAAT,CAAqBC,QAArB,EAA+B;AACpC,MAAIC,SAAS,GAAG,CAAhB;;AACA,MAAID,QAAQ,CAAC,CAAD,CAAR,KAAgB,GAApB,EAAyB;AACvBC,aAAS,GAAG,CAAC,CAAb;AACAD,YAAQ,GAAGA,QAAQ,CAACE,MAAT,CAAgB,CAAhB,CAAX;AACD;;AACD,SAAO,UAASC,CAAT,EAAYC,CAAZ,EAAe;AACpB;;;AAGA,QAAIC,MAAM,GACRF,CAAC,CAACH,QAAD,CAAD,GAAcI,CAAC,CAACJ,QAAD,CAAf,GAA4B,CAAC,CAA7B,GAAiCG,CAAC,CAACH,QAAD,CAAD,GAAcI,CAAC,CAACJ,QAAD,CAAf,GAA4B,CAA5B,GAAgC,CADnE;AAEA,WAAOK,MAAM,GAAGJ,SAAhB;AACD,GAPD;AAQD;;AAEM,IAAMK,YAAY,GAAG,SAAfA,YAAe,CAAAC,MAAM,EAAI;AACpC,MAAIC,IAAI,GAAG,EAAX;AACA,MAAMC,QAAQ,GACZ,gEADF;;AAEA,OAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGH,MAApB,EAA4BG,CAAC,EAA7B,EAAiC;AAC/BF,QAAI,IAAIC,QAAQ,CAACE,MAAT,CAAgBC,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,MAAL,KAAgBL,QAAQ,CAACF,MAApC,CAAhB,CAAR;AACD;;AACD,SAAOC,IAAP;AACD,CARM;;;;;;;;;;;;;;;;ACnGP;;AACA;;AAOO,IAAMO,gBAAgB,GAAG,oBAAI;AAClCC,UAAQ,EAAE,KADwB;AAElCC,aAAW,EAAE,IAFqB;AAGlCC,UAAQ,EAAE,IAHwB;AAIlCC,IAAE,EAAE,IAJ8B;AAKlCC,eAAa,EAAE,IALmB;AAMlCC,aAAW,EAAE,IANqB;AAOlCC,QAAM,EAAE,IAAI1H,eAAJ,CAAS,EAAT,CAP0B;AAQlC2H,cAAY,EAAE,IARoB;AASlCC,UAAQ,EAAE,IATwB;AAUlCC,iBAAe,EAAE,OAViB;AAWlCC,eAAa,EAAE,KAXmB;AAYlCC,sBAAoB,EAAE,IAZY;AAalCC,uBAAqB,EAAE,IAbW;AAclCC,WAAS,EAAE,IAAIC,cAAJ,CAAQ;AACjBC,OAAG,EAAE,IADY;AAEjBxC,YAAQ,EAAE,IAAIuC,cAAJ,CAAQ;AAAEE,aAAO,EAAE,KAAX;AAAkBC,WAAK,EAAE;AAAzB,KAAR;AAFO,GAAR;AAduB,CAAJ,CAAzB;;;eAoBQ,oBAAsC;AAAA,MAArCxI,KAAqC,uEAA7BsH,gBAA6B;AAAA,MAAXrD,MAAW;;AACnD,UAAQA,MAAM,CAACC,IAAf;AACE,SAAK/B,kBAAL;AAAkB;AAAA,YACRsG,IADQ,GACCxE,MADD,CACRwE,IADQ;AAEhB,eAAOzI,KAAK,CACT0I,GADI,CAEH,UAFG,EAGH,OAAOD,IAAI,CAAClB,QAAZ,KAAyB,WAAzB,GACIkB,IAAI,CAAClB,QADT,GAEIvH,KAAK,CAACqD,GAAN,CAAU,UAAV,CALD,EAOJqF,GAPI,CAQH,aARG,EASH,OAAOD,IAAI,CAACjB,WAAZ,KAA4B,WAA5B,GACIiB,IAAI,CAACjB,WADT,GAEIxH,KAAK,CAACqD,GAAN,CAAU,aAAV,CAXD,EAaJqF,GAbI,CAaA,UAbA,EAaYD,IAAI,CAAChB,QAAL,IAAiBzH,KAAK,CAACqD,GAAN,CAAU,UAAV,CAb7B,EAcJqF,GAdI,CAcA,IAdA,EAcMD,IAAI,CAACf,EAAL,IAAW1H,KAAK,CAACqD,GAAN,CAAU,IAAV,CAdjB,EAeJqF,GAfI,CAeA,eAfA,EAeiBD,IAAI,CAACd,aAAL,IAAsB3H,KAAK,CAACqD,GAAN,CAAU,eAAV,CAfvC,EAgBJqF,GAhBI,CAgBA,aAhBA,EAgBeD,IAAI,CAACb,WAAL,IAAoB5H,KAAK,CAACqD,GAAN,CAAU,aAAV,CAhBnC,EAiBJqF,GAjBI,CAiBA,QAjBA,EAiBU,uBAAOD,IAAI,CAACZ,MAAZ,KAAuB7H,KAAK,CAACqD,GAAN,CAAU,QAAV,CAjBjC,EAkBJqF,GAlBI,CAkBA,cAlBA,EAkBgBD,IAAI,CAACX,YAAL,IAAqB9H,KAAK,CAACqD,GAAN,CAAU,cAAV,CAlBrC,EAmBJqF,GAnBI,CAmBA,UAnBA,EAmBYD,IAAI,CAACV,QAAL,IAAiB/H,KAAK,CAACqD,GAAN,CAAU,UAAV,CAnB7B,EAoBJqF,GApBI,CAqBH,eArBG,EAsBH,OAAOD,IAAI,CAACR,aAAZ,KAA8B,WAA9B,GACIQ,IAAI,CAACR,aADT,GAEIjI,KAAK,CAACqD,GAAN,CAAU,eAAV,CAxBD,EA0BJqF,GA1BI,CA2BH,sBA3BG,EA4BHD,IAAI,CAACP,oBAAL,IAA6BlI,KAAK,CAACqD,GAAN,CAAU,sBAAV,CA5B1B,EA8BJqF,GA9BI,CA+BH,uBA/BG,EAgCHD,IAAI,CAACN,qBAAL,IAA8BnI,KAAK,CAACqD,GAAN,CAAU,uBAAV,CAhC3B,CAAP;AAkCD;;AACD,SAAKb,wBAAL;AAAwB;AACtB,YAAMmG,OAAO,GAAG1E,MAAM,CAAC2E,SAAvB;AACA,eAAO5I,KAAK,CAAC0I,GAAN,CAAU,iBAAV,EAA6BC,OAA7B,CAAP;AACD;;AACD,SAAKzF,wBAAL;AAAwB;AACtB,eAAOlD,KAAK,CAAC6I,KAAN,CAAY,CAAC,WAAD,EAAc,KAAd,CAAZ,EAAkC5E,MAAM,CAACqE,GAAzC,CAAP;AACD;;AACD,SAAKnF,6BAAL;AAA6B;AAC3B,eAAOnD,KAAK,CACT6I,KADI,CACE,CAAC,WAAD,EAAc,UAAd,EAA0B,SAA1B,CADF,EACwC5E,MAAM,CAACsE,OAD/C,EAEJM,KAFI,CAEE,CAAC,WAAD,EAAc,UAAd,EAA0B,OAA1B,CAFF,EAEsC5E,MAAM,CAACuE,KAF7C,CAAP;AAGD;;AACD;AACE,aAAOxI,KAAP;AAnDJ;AAqDD,C;;;;;;;;AClFD,iD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACAA;;;;AACA;;;;AACA;;;;AAGA;;AACA;;AAEA,iE;;;;;;ACRA,iD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACAA;;AAqBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;AAnBA,IAAM8I,eAAe,GAAG,SAAlBA,eAAkB,CAAAC,OAAO,EAAI;AACjC,MAAIC,MAAM,GAAGC,mBAAb;AAAkC;;AAClC,MAAIF,OAAJ,EAAa;AACXC,UAAM,CAACE,SAAP,GAAmBH,OAAnB;AACD;;AAED,MACE,OAAOI,MAAP,IAAiB,WAAjB,IACAC;AAAmB;AAFrB,IAGE;AACA;AACAJ,YAAM,CAACK,OAAP,GAAiB,EAAjB;AACAL,YAAM,CAACM,eAAP,GAAyB;AACvB,aAAK;AAAA,iBAAM,IAAN;AAAA;AADkB,OAAzB;AAGD;;AACD,SAAON,MAAP;AACD,CAjBD;;AAqBA;AACO,IAAMO,8BAA8B,GAAG,SAAjCA,8BAAiC,GAAM;AAClD,MAAI,OAAOJ,MAAP,IAAiB,WAArB,EAAkC;AAChC,QAAMK,eAAe,GAAGL,MAAM,CAACM,QAAP,CAAgBC,QAAxC;AACA,WAAOC,gCAAgC,CAACH,eAAD,CAAvC;AACD;;AACD,SAAO,IAAP;AACD,CANM;;;;AAQA,IAAMG,gCAAgC,GAAG,SAAnCA,gCAAmC,CAAAH,eAAe,EAAI;AACjE,MAAIA,eAAe,CAACjF,OAAhB,CAAwB,WAAxB,IAAuC,CAAC,CAA5C,EAA+C,OAAO,QAAP;;AAE/C,MAAIiF,eAAe,CAACI,QAAhB,CAAyB,iBAAzB,CAAJ,EAAiD;AAC/C,QAAIJ,eAAe,CAACjF,OAAhB,CAAwB,UAAxB,IAAsC,CAAC,CAA3C,EAA8C;AAC5C,aAAO,QAAP;AACD,KAFD,MAEO;AACL,aAAO,WAAP;AACD;AACF;;AAED,MAAIiF,eAAe,CAACI,QAAhB,CAAyB,qBAAzB,CAAJ,EAAqD;AACnD,QAAIJ,eAAe,CAACjF,OAAhB,CAAwB,UAAxB,IAAsC,CAAC,CAA3C,EAA8C;AAC5C,aAAO,QAAP;AACD,KAFD,MAEO;AACL,aAAO,WAAP;AACD;AACF;;AAED,SAAO,WAAP;AACD,CApBM;;;;AAsBA,IAAMsF,gBAAgB,GAAG,SAAnBA,gBAAmB,CAAAC,MAAM,EAAI;AACxC,MAAIC,GAAG,GAAG,EAAV;AACAC,QAAM,CAACC,IAAP,CAAYH,MAAZ,EAAoBI,IAApB,CAAyB,UAASC,CAAT,EAAY;AACnC,QAAIA,CAAC,KAAK,KAAV,EAAiB;AACf;AACA,UAAIL,MAAM,CAACK,CAAD,CAAN,CAAUzC,EAAV,IAAgBoC,MAAM,CAACK,CAAD,CAAN,CAAUC,QAA9B,EAAwC;AACtC;AACA,YAAIN,MAAM,CAACK,CAAD,CAAN,CAAUE,UAAd,EAA0B;AACxB,cAAIP,MAAM,CAACK,CAAD,CAAN,CAAUE,UAAV,KAAyB,OAA7B,EAAsC;AACpCN,eAAG,CAAC5I,IAAJ,WAAY2I,MAAM,CAACK,CAAD,CAAN,CAAUzC,EAAtB,cAA4BoC,MAAM,CAACK,CAAD,CAAN,CAAUC,QAAV,CAAmBE,WAAnB,EAA5B;AACD;AACF,SAJD,MAIO;AACL;AACAP,aAAG,CAAC5I,IAAJ,WAAY2I,MAAM,CAACK,CAAD,CAAN,CAAUzC,EAAtB,cAA4BoC,MAAM,CAACK,CAAD,CAAN,CAAUC,QAAV,CAAmBE,WAAnB,EAA5B;AACD;AACF;;AACD,aAAO,KAAP;AACD;;AACD,QAAIR,MAAM,CAACK,CAAD,CAAN,IAAa,yBAAOL,MAAM,CAACK,CAAD,CAAb,MAAqB,QAAtC,EAAgD;AAC9C,UAAII,MAAM,GAAGV,gBAAgB,CAACC,MAAM,CAACK,CAAD,CAAP,CAA7B;;AACA,UAAII,MAAM,CAACzD,MAAP,GAAgB,CAApB,EAAuB;AACrBiD,WAAG,CAAC5I,IAAJ,OAAA4I,GAAG,sCAASQ,MAAT,EAAH;AACD;;AACD,aAAO,KAAP;AACD;AACF,GAvBD;AAwBA,SAAOR,GAAP;AACD,CA3BM;;;;AA6BA,IAAMS,mBAAmB,GAAG,SAAtBA,mBAAsB,CAAAV,MAAM,EAAI;AAC3C,MAAI,CAACA,MAAL,EAAa,OAAO,EAAP;AACb,MAAIW,WAAW,GAAGZ,gBAAgB,CAACC,MAAD,CAAlC;AACA,MAAIY,MAAM,GAAG,IAAIC,GAAJ,CAAQF,WAAR,CAAb;AACA,SAAOC,MAAP;AACD,CALM;;;;IAMDE,W;;;;;;;;;2BACGC,K,EAAOC,S,EAAW/B,O,EAASgC,G,EAAK;AACrC,UAAMC,MAAM,GAAGC,6BAAOC,MAAP,CAAcpC,eAAe,CAACC,OAAD,EAAUgC,GAAV,CAA7B,CAAf;;AACA,aAAOC,MAAM,CAACG,OAAP,CAAeC,MAAf,CACLP,KADK,EAEL,OAAOC,SAAP,KAAqB,WAArB,GAAmCA,SAAnC,GAA+C,CAF1C,CAAP;AAID;;;gCAEwD;AAAA,UAA/CO,iBAA+C,uEAA3B,WAA2B;AAAA,UAAdtC,OAAc;AAAA,UAALgC,GAAK;AACvD,UAAMO,UAAU,GAAGxC,eAAe,CAACC,OAAD,EAAUgC,GAAV,CAAlC;AACAO,gBAAU,CAACC,aAAX,GAA2BF,iBAA3B;AACA,aAAOJ,6BAAOC,MAAP,CAAcI,UAAd,CAAP;AACD;;;6BACQ5D,E,EAAkE;AAAA,UAA9DoD,SAA8D,uEAAlD,CAAkD;AAAA,UAA/CO,iBAA+C,uEAA3B,WAA2B;AAAA,UAAdtC,OAAc;AAAA,UAALgC,GAAK;AACzE,UAAMO,UAAU,GAAGxC,eAAe,CAACC,OAAD,EAAUgC,GAAV,CAAlC;AACAO,gBAAU,CAACC,aAAX,GAA2BF,iBAA3B;;AACA,UAAML,MAAM,GAAGC,6BAAOC,MAAP,CAAcI,UAAd,CAAf,CAHyE,CAIzE;;;AACA,aAAON,MAAM,CAACG,OAAP,CAAe9H,GAAf,CAAmB;AAAEqE,UAAE,EAAFA,EAAF;AAAMoD,iBAAS,EAATA;AAAN,OAAnB,CAAP;AACD;;;;;AAGI,IAAMU,WAAW,GAAG,IAAIZ,WAAJ,EAApB;;;IAEDa,S,GACJ,mBAAYnD,GAAZ,EAAiBoD,KAAjB,EAAwB;AAAA;AACtB,OAAKpD,GAAL,GAAWA,GAAX;AACA,OAAKoD,KAAL,GAAaA,KAAb;AACA,OAAKC,IAAL,GAAY,IAAZ;AACA,OAAKC,IAAL,GAAY,IAAZ;AACD,C;;IAGGC,Q;;;AACJ,sBAAyB;AAAA,QAAbC,KAAa,uEAAL,GAAK;AAAA;AACvB,SAAKC,GAAL,GAAW,EAAX;AACA,SAAKC,IAAL,GAAY,IAAZ;AACA,SAAKC,IAAL,GAAY,IAAZ;AACA,SAAKH,KAAL,GAAaA,KAAK,IAAI,GAAtB;AACA,SAAKI,IAAL,GAAY,CAAZ;AACD;;;;wBAEG5D,G,EAAK;AACP,UAAI,KAAKyD,GAAL,CAASzD,GAAT,CAAJ,EAAmB;AACjB,YAAIoD,KAAK,GAAG,KAAKK,GAAL,CAASzD,GAAT,EAAcoD,KAA1B;AACA,YAAIS,IAAI,GAAG,IAAIV,SAAJ,CAAcnD,GAAd,EAAmBoD,KAAnB,CAAX;AACA,aAAKU,MAAL,CAAY9D,GAAZ;AACA,aAAK+D,OAAL,CAAaF,IAAb;AACA,eAAOT,KAAP;AACD;AACF;;;wBAEGpD,G,EAAKoD,K,EAAO;AACd,UAAIS,IAAI,GAAG,IAAIV,SAAJ,CAAcnD,GAAd,EAAmBoD,KAAnB,CAAX;;AACA,UAAI,KAAKK,GAAL,CAASzD,GAAT,CAAJ,EAAmB;AACjB,aAAK8D,MAAL,CAAY9D,GAAZ;AACD,OAFD,MAEO;AACL,YAAI,KAAK4D,IAAL,IAAa,KAAKJ,KAAtB,EAA6B;AAC3B,iBAAO,KAAKC,GAAL,CAAS,KAAKE,IAAL,CAAU3D,GAAnB,CAAP;AACA,eAAK4D,IAAL;AACA,eAAKD,IAAL,GAAY,KAAKA,IAAL,CAAUL,IAAtB;AACA,eAAKK,IAAL,CAAUN,IAAV,GAAiB,IAAjB;AACD;AACF;;AACD,WAAKU,OAAL,CAAaF,IAAb;AACD;;;4BAEOA,I,EAAM;AACZA,UAAI,CAACR,IAAL,GAAY,KAAKK,IAAjB;AACAG,UAAI,CAACP,IAAL,GAAY,IAAZ;;AACA,UAAI,KAAKI,IAAT,EAAe;AACb,aAAKA,IAAL,CAAUJ,IAAV,GAAiBO,IAAjB;AACD;;AACD,WAAKH,IAAL,GAAYG,IAAZ;;AACA,UAAI,CAAC,KAAKF,IAAV,EAAgB;AACd,aAAKA,IAAL,GAAYE,IAAZ;AACD;;AACD,WAAKD,IAAL;AACA,WAAKH,GAAL,CAASI,IAAI,CAAC7D,GAAd,IAAqB6D,IAArB;AACD;;;2BAEM7D,G,EAAK;AACV,UAAI6D,IAAI,GAAG,KAAKJ,GAAL,CAASzD,GAAT,CAAX;;AACA,UAAI6D,IAAI,CAACP,IAAT,EAAe;AACbO,YAAI,CAACP,IAAL,CAAUD,IAAV,GAAiBQ,IAAI,CAACR,IAAtB;AACD,OAFD,MAEO;AACL,aAAKK,IAAL,GAAYG,IAAI,CAACR,IAAjB;AACD;;AACD,UAAIQ,IAAI,CAACR,IAAT,EAAe;AACbQ,YAAI,CAACR,IAAL,CAAUC,IAAV,GAAiBO,IAAI,CAACP,IAAtB;AACD,OAFD,MAEO;AACL,aAAKK,IAAL,GAAYE,IAAI,CAACP,IAAjB;AACD;;AACD,aAAO,KAAKG,GAAL,CAASzD,GAAT,CAAP;AACA,WAAK4D,IAAL;AACD;;;;;IAGGI,Y;;;;;oDACI,IAAIT,QAAJ,E;6DACS,E;;;;;2BAEVhB,K,EAAOC,S,EAAW/B,O,EAASgC,G,EAAK;AACrC,UAAMC,MAAM,GAAGC,6BAAOC,MAAP,CAAcpC,eAAe,CAACC,OAAD,EAAUgC,GAAV,CAA7B,CAAf;;AACA,aAAO,KAAKwB,OAAL,CACLxD,OAAO,GAAGyD,IAAI,CAACC,SAAL,CAAe5B,KAAf,CAAV,GAAkCC,SAAS,CAAC4B,QAAV,EAD7B,EAEL;AAAA,eAAM1B,MAAM,CAACG,OAAP,CAAeC,MAAf,CAAsBP,KAAtB,EAA6BC,SAA7B,CAAN;AAAA,OAFK,CAAP;AAID;;;wBAEGpD,E,EAAIoD,S,EAAWS,a,EAAexC,O,EAASgC,G,EAAK;AAC9C,UAAMC,MAAM,GAAGC,6BAAOC,MAAP,CAAcpC,eAAe,CAACC,OAAD,EAAUgC,GAAV,CAA7B,CAAf;;AACAC,YAAM,CAAC2B,YAAP,CAAoBpB,aAApB,GAAoCA,aAApC;AACA,aAAO,KAAKgB,OAAL,CAAa7E,EAAb,EAAiB;AAAA,eAAMsD,MAAM,CAACG,OAAP,CAAe9H,GAAf,CAAmB;AAAEqE,YAAE,EAAFA,EAAF;AAAMoD,mBAAS,EAATA;AAAN,SAAnB,CAAN;AAAA,OAAjB,CAAP;AACD;;;mCAEcpD,E,EAAIqB,O,EAASgC,G,EAAK;AAC/B,UAAMC,MAAM,GAAGC,6BAAOC,MAAP,CAAcpC,eAAe,CAACC,OAAD,EAAUgC,GAAV,CAA7B,CAAf;;AACA,aAAO,KAAKwB,OAAL,0BAA+B7E,EAA/B,cAAqCqB,OAArC,GAAgD;AAAA,eACrDiC,MAAM,CAAC4B,YAAP,CAAoBvJ,GAApB,CAAwBqE,EAAxB,CADqD;AAAA,OAAhD,CAAP;AAGD;;;oCAEeY,G,EAAKS,O,EAASgC,G,EAAK;AAAA;;AACjC,UAAMC,MAAM,GAAGC,6BAAOC,MAAP,CAAcpC,eAAe,CAACC,OAAD,EAAUgC,GAAV,CAA7B,CAAf;;AACA,aAAO,KAAKwB,OAAL,2BAAgCjE,GAAhC,GAAuC;AAAA,eAC5C0C,MAAM,CAAC6B,QAAP,CACGC,eADH,CACmBxE,GADnB,EAEGzC,IAFH,CAEQ,UAAAsG,IAAI;AAAA,iBAAI,KAAI,CAACY,kBAAL,CAAwBZ,IAAxB,CAAJ;AAAA,SAFZ,CAD4C;AAAA,OAAvC,CAAP;AAKD;;;gCAEWxG,O,EAASoD,O,EAASgC,G,EAAK;AACjC,UAAMC,MAAM,GAAGC,6BAAOC,MAAP,CAAcpC,eAAe,CAACC,OAAD,EAAUgC,GAAV,CAA7B,CAAf;;AACA,aAAO,KAAKwB,OAAL,WAAgBxD,OAAhB,gBAA6ByD,IAAI,CAACC,SAAL,CAAe9G,OAAf,CAA7B,GAAwD;AAAA,eAC7DqF,MAAM,CAACgC,KAAP,CAAaC,OAAb,CAAqBtH,OAArB,CAD6D;AAAA,OAAxD,CAAP;AAGD;;;4BAEOA,O,EAASoD,O,EAASgC,G,EAAK;AAC7B,UAAMC,MAAM,GAAGC,6BAAOC,MAAP,CAAcpC,eAAe,CAACC,OAAD,EAAUgC,GAAV,CAA7B,CAAf;;AACA,aAAO,KAAKwB,OAAL,WACFxD,OADE,cACUpD,OAAO,IAAIA,OAAO,CAACuH,IAApB,IAA6BvH,OADtC,cACiD6G,IAAI,CAACC,SAAL,CACpD9G,OADoD,CADjD,GAIL;AAAA,eAAMqF,MAAM,CAACgC,KAAP,CAAa3J,GAAb,CAAiBsC,OAAjB,CAAN;AAAA,OAJK,CAAP;AAMD;;;iCAEYA,O,EAASoD,O,EAASgC,G,EAAK;AAClC,UAAMC,MAAM,GAAGC,6BAAOC,MAAP,CAAcpC,eAAe,CAACC,OAAD,EAAUgC,GAAV,CAA7B,CAAf;;AACA,aAAO,KAAKwB,OAAL,WACFxD,OADE,kBACcpD,OAAO,IAAIA,OAAO,CAAC+B,EAApB,IAA2B/B,OADxC,cACmD6G,IAAI,CAACC,SAAL,CACtD9G,OADsD,CADnD,GAIL;AAAA,eAAMqF,MAAM,CAACgC,KAAP,CAAaG,YAAb,CAA0BxH,OAA1B,CAAN;AAAA,OAJK,CAAP;AAMD;;;gCAEWA,O,EAASoD,O,EAASgC,G,EAAK;AACjC,UAAMC,MAAM,GAAGC,6BAAOC,MAAP,CAAcpC,eAAe,CAACC,OAAD,EAAUgC,GAAV,CAA7B,CAAf;;AACA,aAAO,KAAKwB,OAAL,WACFxD,OADE,kBACcpD,OAAO,IAAIA,OAAO,CAAC+B,EAApB,IAA2B/B,OADxC,cACmD6G,IAAI,CAACC,SAAL,CACtD9G,OADsD,CADnD,GAIL;AAAA,eAAMqF,MAAM,CAACgC,KAAP,CAAaI,WAAb,CAAyBzH,OAAzB,CAAN;AAAA,OAJK,CAAP;AAMD;;;gCAEWA,O,EAASoD,O,EAASgC,G,EAAK;AACjC,UAAMC,MAAM,GAAGC,6BAAOC,MAAP,CAAcpC,eAAe,CAACC,OAAD,EAAUgC,GAAV,CAA7B,CAAf;;AACA,aAAO,KAAKwB,OAAL,WACFxD,OADE,kBACcpD,OAAO,IAAIA,OAAO,CAAC+B,EAApB,IAA2B/B,OADxC,cACmD6G,IAAI,CAACC,SAAL,CACtD9G,OADsD,CADnD,GAIL;AAAA,eAAMqF,MAAM,CAACgC,KAAP,CAAaK,WAAb,CAAyB1H,OAAzB,CAAN;AAAA,OAJK,CAAP;AAMD;;;4BAEO2C,G,EAAKgF,O,EAAS;AAAA;;AACpB,UAAI,CAAC,KAAKC,KAAL,CAAWlK,GAAX,CAAeiF,GAAf,CAAD,IAAwB,OAAOa,MAAP,IAAiB,WAA7C,EAA0D;AACxD,YAAIqE,OAAO,GAAGF,OAAO,EAArB;AACA,aAAKC,KAAL,CAAW7E,GAAX,CAAeJ,GAAf,EAAoBkF,OAApB;AACAA,eAAO,SAAP,CAAc,YAAM;AAClB,gBAAI,CAACD,KAAL,CAAWnB,MAAX,CAAkB9D,GAAlB;AACD,SAFD;AAGD;;AACD,aAAO,KAAKiF,KAAL,CAAWlK,GAAX,CAAeiF,GAAf,CAAP;AACD;;;uCAEkB6D,I,EAAM;AAAA;;AACvB,UAAIzE,EAAE,GAAG,KAAK+F,aAAL,CAAmBtB,IAAnB,CAAT;AACA,WAAKuB,cAAL,CAAoBhG,EAApB,IAA0ByE,IAAI,CAAC7D,GAA/B;AACA,+BACK6D,IADL;AAEEzE,UAAE,EAAFA,EAFF;AAGEiG,gBAAQ,EAAExB,IAAI,CAACwB,QAAL,GACNxB,IAAI,CAACwB,QAAL,CAAc5B,GAAd,CAAkB,UAAA6B,CAAC;AAAA,iBAAI,MAAI,CAACb,kBAAL,CAAwBa,CAAxB,CAAJ;AAAA,SAAnB,CADM,GAEN;AALN;AAOD;;;kCAEazB,I,EAAM;AAClB,UAAIA,IAAI,CAAC7D,GAAT,EAAc;AACZ,YAAIuF,KAAK,GAAG1B,IAAI,CAAC7D,GAAL,CAASwF,KAAT,CAAe,GAAf,CAAZ;AACA,eAAOD,KAAK,CAACA,KAAK,CAAC/G,MAAN,GAAe,CAAhB,CAAZ;AACD;;AACD,aAAO,EAAP;AACD;;;mCAEcY,E,EAAI;AACjB,aAAO,KAAKgG,cAAL,CAAoBhG,EAApB,CAAP;AACD;;;;;AAGI,IAAMqG,YAAY,GAAG,IAAIzB,YAAJ,EAArB;;;;;;;;ACjTP;AAAA;AAAA;AAAA;AAAyC;;;;;;;ACAzC,iD;;;;;;;;;;;;;;;;;ACAA;;AAEO,SAAS0B,WAAT,CAAqB5C,MAArB,EAA6B;AAClC,SAAO6C,wBAAYC,KAAZ,CACL,OAAO/E,MAAP,IAAiB,WAAjB,GAA+BA,MAAM,CAACM,QAAP,CAAgB2B,MAA/C,GAAwDA,MADnD,CAAP;AAGD;;AACM,IAAM+C,WAAW,GAAG,SAAdA,WAAc,CAAAC,WAAW;AAAA,SACpCA,WAAW,IAAIA,WAAW,CAACC,KAA3B,GAAmCD,WAAW,CAACC,KAAZ,CAAkBC,MAArD,GAA8D,EAD1B;AAAA,CAA/B;;;;AAGA,IAAMC,QAAQ,GAAG,SAAXA,QAAW,CAACC,KAAD,EAAQF,MAAR,EAAmB;AACzC,MAAMG,EAAE,GAAGR,wBAAYxB,SAAZ,CAAsB6B,MAAtB,CAAX;;AACA,MAAMpB,IAAI,GAAGuB,EAAE,aAAMD,KAAN,cAAeC,EAAf,IAAsBD,KAArC;AACA,SAAOtB,IAAP;AACD,CAJM;;;;AAMA,IAAMwB,cAAc,GAAG,SAAjBA,cAAiB;AAAA,mBACzBvF,MAAM,CAACM,QAAP,CAAgBkF,QADS,eACIxF,MAAM,CAACM,QAAP,CAAgBC,QADpB,cACgCP,MAAM,CAACM,QAAP,CAAgBmF,IADhD;AAAA,CAAvB;;;AAGA,IAAMC,WAAW,GACtB,OAAO1F,MAAP,IAAiB,WAAjB,IAAgCA,MAAM,CAACM,QAAP,CAAgBqF,IAAhB,IAAwB,gBAAxD,qBACeC;AAAW;AAD1B,IAEIL,cAAc,EAHb;;;;;;;;;;;;;;;ACnBP;;AACA;;AAYO,IAAMM,SAAS,GAAG,SAAZA,SAAY,CAACvH,QAAD,EAAWwH,QAAX;AAAA,SACvB,qBAAO7M,iBAAP,EAAmB;AAAEqF,YAAQ,EAARA,QAAF;AAAYwH,YAAQ,EAARA;AAAZ,GAAnB,CADuB;AAAA,CAAlB;;;;AAEA,IAAMC,YAAY,GAAG,SAAfA,YAAe,CAAAC,OAAO;AAAA,SAAI,qBAAOzM,oBAAP,EAAsB;AAAEyM,WAAO,EAAPA;AAAF,GAAtB,CAAJ;AAAA,CAA5B;;;;AACA,IAAMC,UAAU,GAAG,SAAbA,UAAa;AAAA,SAAM,qBAAO7M,kBAAP,CAAN;AAAA,CAAnB;;;;AAEA,IAAM8M,eAAe,GAAG,SAAlBA,eAAkB,CAAAzG,SAAS;AAAA,SACtC,qBAAOpG,wBAAP,EAA0B;AAAEoG,aAAS,EAATA;AAAF,GAA1B,CADsC;AAAA,CAAjC;;;;AAEA,IAAM0G,iBAAiB,GAAG,SAApBA,iBAAoB;AAAA,SAAM,qBAAO7M,0BAAP,CAAN;AAAA,CAA1B;;;;AACA,IAAM8M,cAAc,GAAG,SAAjBA,cAAiB,CAAA9H,QAAQ;AAAA,SACpC,qBAAO5E,2BAAP,EAA6B;AAAE4E,YAAQ,EAARA;AAAF,GAA7B,CADoC;AAAA,CAA/B;;;;AAEA,IAAM+H,cAAc,GAAG,SAAjBA,cAAiB,CAACC,WAAD,EAAcC,WAAd,EAA2BC,kBAA3B;AAAA,SAC5B,qBAAO5M,2BAAP,EAA6B;AAC3B0M,eAAW,EAAXA,WAD2B;AAE3BC,eAAW,EAAXA,WAF2B;AAG3BC,sBAAkB,EAAlBA;AAH2B,GAA7B,CAD4B;AAAA,CAAvB;;;;AAMA,IAAMC,uBAAuB,GAAG,SAA1BA,uBAA0B,CACrCpH,KADqC,EAErCkH,WAFqC,EAGrCC,kBAHqC;AAAA,SAIlC,qBAAO5M,2BAAP,EAA6B;AAAEyF,SAAK,EAALA,KAAF;AAASkH,eAAW,EAAXA,WAAT;AAAsBC,sBAAkB,EAAlBA;AAAtB,GAA7B,CAJkC;AAAA,CAAhC;;;;AAKA,IAAME,eAAe,GAAG,SAAlBA,eAAkB,CAAAvH,GAAG;AAAA,SAAI,qBAAOpF,wBAAP,EAA0B;AAAEoF,OAAG,EAAHA;AAAF,GAA1B,CAAJ;AAAA,CAA3B;;;;AACA,IAAMwH,oBAAoB,GAAG,SAAvBA,oBAAuB,CAACvH,OAAD,EAAUC,KAAV;AAAA,SAClC,qBAAOrF,6BAAP,EAA+B;AAAEoF,WAAO,EAAPA,OAAF;AAAWC,SAAK,EAALA;AAAX,GAA/B,CADkC;AAAA,CAA7B;;;;;;;;ACnCP,iD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACAA,IAAMuH,OAAO,GAAGC,OAAO,CAACC,GAAxB;AAA6B;;AAE7B,IAAMjH,MAAM,GAAG;AACbkH,mBAAiB,EAAE,uBADN;AAEbC,gBAAc,EAAE,iDAFH;AAGbC,mBAAiB,EAAE,yCAHN;AAIbC,eAAa,EAAE,qCAJF;AAKbC,qBAAmB,EAAE,6BALR;AAMbC,qBAAmB,EAAE,yBANR;AAObC,2BAAyB,EAAE,kCAPd;AAQbC,kBAAgB,EAAE,8BARL;AASbC,WAAS,EAAE;AATE,CAAf;AAYA,IAAMC,iBAAiB,aAAMZ,OAAN,cAAiB/G,MAAM,CAACkH,iBAAxB,CAAvB;AACA,IAAMU,cAAc,aAAMb,OAAN,cAAiB/G,MAAM,CAACmH,cAAxB,CAApB;AACA,IAAMU,iBAAiB,aAAMd,OAAN,cAAiB/G,MAAM,CAACoH,iBAAxB,CAAvB;AACA,IAAMU,aAAa,aAAMf,OAAN,cAAiB/G,MAAM,CAACqH,aAAxB,CAAnB;AACA,IAAMC,mBAAmB,cAAOtH,MAAM,CAACsH,mBAAd,CAAzB;AACA,IAAMC,mBAAmB,cAAOvH,MAAM,CAACuH,mBAAd,CAAzB;AACA,IAAME,gBAAgB,cAAOzH,MAAM,CAACyH,gBAAd,CAAtB;AACA,IAAMD,yBAAyB,cAAOxH,MAAM,CAACwH,yBAAd,CAA/B;AAEA,IAAMO,YAAY,GAAG;AACnBC,QAAM,EAAE,KADW;AAEnBC,SAAO,EAAE;AAAE,oBAAgB;AAAlB;AAFU,CAArB;;IAKaC,W;;;;;;;;;;;;oDACqB1I,K;;;;;;AACxB9C,mB,aAAS+K,gB,2BAAiCU,kBAAkB,CAAC3I,KAAD,C;AAC5D7C,uB,GAAU;AACdsL,yBAAO,EAAE;AAAE,oCAAgB;AAAlB,mBADK;AAEdD,wBAAM,EAAE;AAFM,iB;;uBAIHE,WAAW,CAAC7N,GAAZ,CAAgBqC,GAAhB,EAAqBC,OAArB,C;;;;;;;;;;;;;;;;;;;;;;;;qDAGQ8B,Q,EAAUwH,Q;;;;;;AACzBmC,oB,GAAO;AACX3J,0BAAQ,EAARA,QADW;AAEXwH,0BAAQ,EAARA,QAFW;AAGXoC,oBAAE,EAAE,WAHO;AAIXC,iCAAe,EAAE;AAJN,iB;AAMP3L,uB,qBACDoL,Y;AACHC,wBAAM,EAAE,M;AACRI,sBAAI,EAAE5E,IAAI,CAACC,SAAL,CAAe2E,IAAf;;;uBAEKF,WAAW,CAAC7N,GAAZ,CAAgBuN,cAAhB,EAAgCjL,OAAhC,C;;;;;;;;;;;;;;;;;;;;;;;;qDAGWgC,a;;;;;;AAClBjC,mB,aAASmL,iB,oBAA2BM,kBAAkB,CAC1DxJ,aAD0D,C;AAGtD4J,yB,GAAYJ,kBAAkB,CAClCK,kBAAkB,CAACA,kBAAkB,CAAC7J,aAAD,CAAnB,CADgB,C;AAG9BhC,uB,qBACDoL,Y;AACHC,wBAAM,EAAE,M;AACRI,sBAAI,EAAE5E,IAAI,CAACC,SAAL,CAAe;AAAE9E,iCAAa,EAAE4J;AAAjB,mBAAf;;;uBAEKL,WAAW,CAAC7N,GAAZ,CAAgBqC,GAAhB,EAAqBC,OAArB,C;;;;;;;;;;;;;;;;;;;;;;;;qDAGUgC,a;;;;;;;;AACjBhC,uB,qBACDoL,Y;AACHE,yBAAO,6DACJ,cADI,EACa,YADb,sEAEiBtJ,aAFjB;;;uBAKIuJ,WAAW,CAAC7N,GAAZ,CAAgByN,aAAhB,EAA+BnL,OAA/B,C;;;;;;;;;;;;;;;;;;;;;;;;qDAGW8L,K,EAAOxC,Q;;;;;;AACzBmC,oB,GAAO;AAAEK,uBAAK,EAALA,KAAF;AAASxC,0BAAQ,EAARA;AAAT,iB;AACPtJ,uB,qBACDoL,Y;AACHC,wBAAM,EAAE,M;AACRI,sBAAI,EAAE5E,IAAI,CAACC,SAAL,CAAe2E,IAAf;;;uBAEKF,WAAW,CAAC7N,GAAZ,CAAgBsN,iBAAhB,EAAmChL,OAAnC,C;;;;;;;;;;;;;;;;;;;;;;;;qDAIb8B,Q,EACAgI,W,EACAC,W,EACAC,kB;;;;;;AAEMjK,mB,aAAS6K,mB,uBAAgCY,kBAAkB,CAC/D1J,QAD+D,C,0BAEhD0J,kBAAkB,CACjC1B,WADiC,C,0BAElB0B,kBAAkB,CACjCzB,WADiC,C,iCAEXyB,kBAAkB,CAACxB,kBAAD,C;AACpChK,uB,GAAU;AACdsL,yBAAO,EAAE;AAAE,oCAAgB;AAAlB,mBADK;AAEdD,wBAAM,EAAE;AAFM,iB;;uBAIHE,WAAW,CAAC7N,GAAZ,CAAgBqC,GAAhB,EAAqBC,OAArB,C;;;;;;;;;;;;;;;;;;;;;;;;qDAGsB6C,K,EAAOkH,W,EAAaC,kB;;;;;;AACjDjK,mB,aAAS8K,yB,oBAAmChI,K,0BAAqB2I,kBAAkB,CACvFzB,WADuF,C,8BAEpEyB,kBAAkB,CAACxB,kBAAD,C;AACjChK,uB,GAAU;AACdsL,yBAAO,EAAE;AAAE,oCAAgB;AAAlB,mBADK;AAEdD,wBAAM,EAAE;AAFM,iB;;uBAIHE,WAAW,CAAC7N,GAAZ,CAAgBqC,GAAhB,EAAqBC,OAArB,C;;;;;;;;;;;;;;;;;;;;;;;;qDAGa8B,Q,EAAUiK,U;;;;;;AAC9BhM,mB,aAAS4K,mB,uBAAgCa,kBAAkB,CAC/D1J,QAD+D,C,yBAEjD0J,kBAAkB,CAACO,UAAD,C;AAC5B/L,uB,GAAU;AACdsL,yBAAO,EAAE;AAAE,oCAAgB;AAAlB,mBADK;AAEdD,wBAAM,EAAE;AAFM,iB;;uBAIHE,WAAW,CAAC7N,GAAZ,CAAgBqC,GAAhB,EAAqBC,OAArB,C;;;;;;;;;;;;;;;;;;;;;;;;qDAGED,G;;;;;;;;AAAKC,uB,8DAAUoL,Y;;;uBAEDtL,GAAG,CAACC,GAAD,EAAMC,OAAN,C;;;AAAxBgM,4B;;qBACFA,Y;;;;;kDAAqBA,Y;;;kDAClB,K;;;;;kDAEA,K;;;;;;;;;;;;;;;;;;;;;;SAKElM,G;;;;;;;+BAAf,mBAAmBC,GAAnB,EAAwBC,OAAxB;AAAA;AAAA;AAAA;AAAA;AAAA,+CACSC,KAAK,CAACF,GAAD,EAAMC,OAAN,CAAL,CACJE,IADI;AAAA;AAAA;AAAA;AAAA;AAAA,2CACC,mBAAMC,QAAN;AAAA;AAAA;AAAA;AAAA;AACJC,kCAAU,CAAC;AAAA,iCAAM,IAAN;AAAA,yBAAD,EAAa,CAAb,CAAV;;AADI,4BAECD,QAAQ,CAACE,EAFV;AAAA;AAAA;AAAA;;AAAA,8BAGI,IAAIC,KAAJ,CAAUH,QAAQ,CAACI,UAAnB,CAHJ;;AAAA;AAAA,2DAKGJ,QAAQ,CAACK,IAAT,GAAgBN,IAAhB,CAAqB,UAAAO,IAAI;AAAA,iCAAIA,IAAJ;AAAA,yBAAzB,CALH;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eADD;;AAAA;AAAA;AAAA;AAAA,0BAQE,UAAAC,KAAK,EAAI;AACd;AACA,oBAAMA,KAAN;AACD,aAXI,CADT;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G;;;;;;;;;;;;;;;;;;AC9IA;;AACA;;AAEO,IAAMuL,IAAI,GAAG,SAAPA,IAAO,CAAAC,gBAAgB;AAAA,SAAI,UAAAC,qBAAqB,EAAI;AAC/D,QAAMC,GAAG,GAAG,CAAZ;AACA,QAAMC,KAAK,GAAG,CAAd;AAEA,QAAMC,OAAO,GAAGjI,MAAM,CAACmB,OAAP,CAAe2G,qBAAf,EAAsC5M,MAAtC,CACd,UAACgN,QAAD,EAAWC,oBAAX,EAAoC;AAClCD,cAAQ,CAACC,oBAAoB,CAACJ,GAAD,CAArB,CAAR,GAAsCK,oBAASC,UAAT,CACpCF,oBAAoB,CAACH,KAAD,CADgB,IAGlCG,oBAAoB,CAACH,KAAD,CAApB,CAA4BJ,IAA5B,EAHkC,GAIlCO,oBAAoB,CAACH,KAAD,CAJxB;AAKA,aAAOE,QAAP;AACD,KARa,EASd,EATc,CAAhB;AAYA,WAAO,gCAAC,gBAAD,EAAsBD,OAAtB,CAAP;AACD,GAjBmC;AAAA,CAA7B;;;;;;;;ACHP,iD;;;;;;;;;;;;;;ACAA;;AACA;;AAQO,IAAMK,WAAW,GAAG,SAAdA,WAAc,CAAAC,QAAQ;AAAA,SACjC,qBAAO1Q,iCAAP,EAAiC;AAAE0Q,YAAQ,EAARA;AAAF,GAAjC,CADiC;AAAA,CAA5B;;;;AAEA,IAAMC,iBAAiB,GAAG,SAApBA,iBAAoB,CAC/BtF,IAD+B,EAE/BzD,QAF+B,EAG/B2E,WAH+B,EAI/BqE,UAJ+B,EAK/BC,SAL+B,EAM/BC,MAN+B;AAAA,SAQ/B,qBAAO7Q,4BAAP,EAA4B;AAC1BoL,QAAI,EAAJA,IAD0B;AAE1BzD,YAAQ,EAARA,QAF0B;AAG1B2E,eAAW,EAAXA,WAH0B;AAI1BqE,cAAU,EAAVA,UAJ0B;AAK1BC,aAAS,EAATA,SAL0B;AAM1BC,UAAM,EAANA;AAN0B,GAA5B,CAR+B;AAAA,CAA1B;;;;AAgBA,IAAMC,iBAAiB,GAAG,SAApBA,iBAAoB,CAAC7J,OAAD,EAAU8J,aAAV;AAAA,SAC/B,qBAAO9Q,2BAAP,EAA2B;AAAEgH,WAAO,EAAPA,OAAF;AAAW8J,iBAAa,EAAbA;AAAX,GAA3B,CAD+B;AAAA,CAA1B;;;;AAEA,IAAMC,QAAQ,GAAG,SAAXA,QAAW,CAAC5F,IAAD,EAAOlN,KAAP;AAAA,SAAiB,qBAAOgC,kBAAP,EAAkB;AAAEkL,QAAI,EAAJA,IAAF;AAAQlN,SAAK,EAALA;AAAR,GAAlB,CAAjB;AAAA,CAAjB;;;;AACA,IAAM+S,aAAa,GAAG,SAAhBA,aAAgB,CAAAvS,KAAK;AAAA,SAAI,qBAAOe,kBAAP,EAAkB;AAAEf,SAAK,EAALA;AAAF,GAAlB,CAAJ;AAAA,CAA3B;;;;;;;;;;;;;;;AC9BP,IAAM0B,aAAa,GAAG,cAAtB;AACO,IAAM8Q,aAAa,aAAM9Q,aAAN,mBAAnB;;AACA,IAAM+Q,aAAa,aAAM/Q,aAAN,mBAAnB;;AACA,IAAMgR,mBAAmB,aAAMhR,aAAN,yBAAzB;;;;;;;;;;;;;;;;;;;;;;ACHP;;AACA;;AACA;;AAaA;;AACA;;AACA;;AACA;;AACA;;AACA;;;;;;;;6BAaUiR,a;;;6BAiBAC,c;;;6BAQOC,gB;;;6BA+BPC,c;;;6BAiBA/D,c;;;6BAYAC,c;;;6BA2BA+D,qB;;AA3HH,IAAMC,SAAS,GAAG,CACvB,wBAAUpR,iBAAV,EAAsB+Q,aAAtB,CADuB,EAEvB,wBAAU5Q,kBAAV,EAAuB6Q,cAAvB,CAFuB,EAIvB,wBAAU1Q,oBAAV,EAAyB2Q,gBAAzB,CAJuB,EAMvB,wBAAU5Q,0BAAV,EAA+B8Q,qBAA/B,CANuB,EAOvB,wBAAU1Q,2BAAV,EAAgC0M,cAAhC,CAPuB,EAQvB,wBAAUxM,2BAAV,EAAgCyM,cAAhC,CARuB,CAAlB;;;AAWP,SAAU2D,aAAV,CAAwBlP,MAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AACQwP,mBADR,GACoB,IADpB;AAGUhM,kBAHV,GAGiCxD,MAHjC,CAGUwD,QAHV,EAGoBwH,QAHpB,GAGiChL,MAHjC,CAGoBgL,QAHpB;;AAAA,gBAIMxH,QAAQ,IAAIwH,QAJlB;AAAA;AAAA;AAAA;;AAAA;AAKiB,iBAAMyE,yBAAYC,SAAZ,CAAsBlM,QAAtB,EAAgCwH,QAAhC,EAA0CwE,SAA1C,CAAN;;AALjB;AAKUhL,cALV;AAAA;AAOI,iBAAM,mBAAK6K,cAAL,EAAqB;AACzBpP,gBAAI,EAAEuE,IAAI,CAACjB,WAAL,GAAmBlF,mBAAnB,GAAkCD,uBADf;AAEzBoG,gBAAI,EAAJA,IAFyB;AAGzBmL,oBAAQ,EAAE,CAACnL,IAAI,CAACjB;AAHS,WAArB,CAAN;;AAPJ;AAAA;AAAA;;AAAA;AAAA;AAaI,iBAAMkM,yBAAYG,qBAAZ,EAAN;;AAbJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAiBA,SAAUT,cAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AACQ3K,cADR,GACeiL,yBAAYI,UAAZ,EADf;AAAA;AAEE,iBAAM,mBAAKR,cAAL,EAAqB;AAAE7K,gBAAI,EAAJA;AAAF,WAArB,CAAN;;AAFF;AAAA;AAGgB,iBAAM,sBAAN;;AAHhB;AAGQzI,eAHR;AAAA;AAKE,iBAAM0T,yBAAYK,oBAAZ,CAAiC/T,KAAK,CAACC,KAAN,CAAY,CAAC,QAAD,EAAW,UAAX,CAAZ,CAAjC,CAAN;;AALF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAQO,SAAUoT,gBAAV,CAA2BpP,MAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AACCwP,mBADD,GACa,IADb;AAAA;AAGS,iBAAM,sBAAN;;AAHT;AAGCzT,eAHD;AAICgU,mBAJD,GAIa/F,wBAAYC,KAAZ,CAChBlO,KAAK,CAACC,KAAN,CAAY,CAAC,QAAD,EAAW,UAAX,EAAuB,QAAvB,CAAZ,CADgB,CAJb;AAQCgU,iBARD,GAQWD,SAAS,CAACrM,aAAV,IAA2BqM,SAAS,CAACE,aARhD;;AAUL,cAAID,OAAJ,EAAa;AACXP,qCAAYS,eAAZ,CAA4B;AAAExM,2BAAa,EAAEsM;AAAjB,aAA5B;AACD;;AAEK9E,iBAdD,GAcW,CAAC8E,OAAD,GACZhQ,MAAM,CAACkL,OADK;AAGViF,gCAAoB,EAAEjD,kBAAkB,CAAC8C,OAAD;AAH9B,aAIPhQ,MAAM,CAACkL,OAJA,CAdX;AAAA;AAoBQ,iBAAMuE,yBAAYW,YAAZ,CAAyBZ,SAAzB,EAAoCtE,OAApC,CAAN;;AApBR;AAoBC1G,cApBD;AAsBCvE,cAtBD,GAuBHuE,IAAI,IAAIA,IAAI,CAAClB,QAAb,GAAwB5E,4BAAxB,GAAgDC,2BAvB7C;AAAA;AAyBL,iBAAM,mBAAK0Q,cAAL,EAAqB;AACzBpP,gBAAI,EAAJA,IADyB;AAEzBuE,gBAAI,EAAEA,IAAI,IAAI,CAACA,IAAI,CAAClB,QAAd,GAAyBD,0BAAzB,GAA4CmB;AAFzB,WAArB,CAAN;;AAzBK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AA+BP,SAAU6K,cAAV,CAAyBrP,MAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACoB,iBAAM,qBAAOb,qBAAP,CAAN;;AADpB;AACQkR,mBADR;AAAA;AAEE,iBAAM,kBAAI;AACRpQ,gBAAI,EAAE/B,kBADE;AAERoS,gBAAI,EAAEtQ,MAAM,CAACC,IAFL;AAGRuE,gBAAI,oBAAO6L,SAAS,CAAC1C,IAAV,EAAP,MAA4B3N,MAAM,CAACwE,IAAnC;AAHI,WAAJ,CAAN;;AAFF;AAAA,eAOMxE,MAAM,CAAC2P,QAPb;AAAA;AAAA;AAAA;;AAAA;AAQ0B,iBAAM,qBAAOhT,6BAAP,CAAN;;AAR1B;AAQU4T,uBARV;AASU/F,YATV,GASeR,wBAAYC,KAAZ,CAAkBsG,aAAlB,CATf;AAUUC,qBAVV,GAUwBhG,EAAE,CAACiG,YAV3B;;AAAA,eAWQD,WAXR;AAAA;AAAA;AAAA;;AAAA;AAYM,iBAAM,kBAAI;AAAEvQ,gBAAI,EAAElC,kBAAR;AAAmBkL,gBAAI,EAAEuH;AAAzB,WAAJ,CAAN;;AAZN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAiBA,SAAUlF,cAAV,CAAyBtL,MAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACkB,iBAAMyP,yBAAYiB,cAAZ,CAA2B1Q,MAAM,CAACwD,QAAlC,CAAN;;AADlB;AACQmN,iBADR;AAAA;AAEE,iBAAM,kBAAI;AACR1Q,gBAAI,EAAE/B,kBADE;AAERsG,gBAAI,EAAE;AACJR,2BAAa,EAAE,IADX;AAEJC,kCAAoB,EAAE0M;AAFlB,aAFE;AAMRC,mBAAO,EAAPA;AANQ,WAAJ,CAAN;;AAFF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAYA,SAAUrF,cAAV,CAAyBvL,MAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACgB,iBAAM,sBAAN;;AADhB;AACQjE,eADR;AAAA;AAEoB,iBAAMA,KAAK,CAACqD,GAAN,CAAU,MAAV,CAAN;;AAFpB;AAEQiR,mBAFR;AAGMM,iBAHN,GAGgB,EAHhB;;AAAA,eAIM3Q,MAAM,CAACuE,KAJb;AAAA;AAAA;AAAA;;AAAA;AAKc,iBAAMkL,yBAAYoB,uBAAZ,CACd7Q,MAAM,CAACuE,KADO,EAEdvE,MAAM,CAACyL,WAFO,EAGdzL,MAAM,CAAC0L,kBAHO,CAAN;;AALd;AAKIiF,iBALJ;AAAA;AAAA;;AAAA;AAAA;AAWc,iBAAMlB,yBAAYqB,cAAZ,CACdT,SAAS,CAAC7M,QADI,EAEdxD,MAAM,CAACwL,WAFO,EAGdxL,MAAM,CAACyL,WAHO,EAIdzL,MAAM,CAAC0L,kBAJO,CAAN;;AAXd;AAWIiF,iBAXJ;;AAAA;AAAA;AAkBE,iBAAM,kBAAI;AACR1Q,gBAAI,EAAE/B,kBADE;AAERsG,gBAAI,EAAE;AACJb,yBAAW,EAAEgN;AADT,aAFE;AAKRC,mBAAO,EAAPA;AALQ,WAAJ,CAAN;;AAlBF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AA2BA,SAAUtB,qBAAV;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AACoB,iBAAM,qBAAOnQ,qBAAP,CAAN;;AADpB;AACQkR,mBADR;;AAAA,gBAEMA,SAAS,CAAC7M,QAAV,IAAsB6M,SAAS,CAACrF,QAFtC;AAAA;AAAA;AAAA;;AAAA;AAI6B,iBAAMiC,yBAAY8D,YAAZ,CAC7BV,SAAS,CAAC7M,QADmB,EAE7B6M,SAAS,CAACrF,QAFmB,CAAN;;AAJ7B;AAIUgG,0BAJV;;AAAA,eASQA,gBATR;AAAA;AAAA;AAAA;;AAUctN,uBAVd,GAUwDsN,gBAVxD,CAUctN,aAVd,EAU6BuN,kBAV7B,GAUwDD,gBAVxD,CAU6BC,kBAV7B,EAUiDxN,EAVjD,GAUwDuN,gBAVxD,CAUiDvN,EAVjD;;AAAA,eAYUC,aAZV;AAAA;AAAA;AAAA;;AAacc,cAbd,qBAca6L,SAdb;AAeU5M,cAAE,EAAFA,EAfV;AAgBUC,yBAAa,EAAbA,aAhBV;AAiBUsH,oBAAQ,EAAE,IAjBpB;AAkBU1H,oBAAQ,EAAE,IAlBpB;AAmBU4N,yBAAa,EAAE,KAnBzB;AAoBU3N,uBAAW,EAAE,KApBvB;AAqBU4N,iCAAqB,EAAE,KArBjC;AAsBUF,8BAAkB,EAAlBA;AAtBV;AAAA;AAwBQ,iBAAM,kBAAI;AAAEhR,gBAAI,EAAE/B,kBAAR;AAAqBsG,gBAAI,EAAJA;AAArB,WAAJ,CAAN;;AAxBR;AAAA;AAAA;;AAAA;AA0BcA,eA1Bd,qBA2Ba6L,SA3Bb;AA4BU3M,yBAAa,EAAE,IA5BzB;AA6BUJ,oBAAQ,EAAE,KA7BpB;AA8BU4N,yBAAa,EAAE,KA9BzB;AA+BU3N,uBAAW,EAAE,IA/BvB;AAgCU4N,iCAAqB,EAAE,IAhCjC;AAiCUF,8BAAkB,EAAlBA;AAjCV;AAAA;AAmCQ,iBAAM,kBAAI;AAAEhR,gBAAI,EAAE/B,kBAAR;AAAqBsG,gBAAI,EAAJA;AAArB,WAAJ,CAAN;;AAnCR;AAAA;AAAA;;AAAA;AAAA;AAsCM,iBAAM,kBAAI;AACRvE,gBAAI,EAAE/B,kBADE;AAERsG,gBAAI,oBAAO6L,SAAP;AAAkBY,gCAAkB,EAAE;AAAtC;AAFI,WAAJ,CAAN;;AAtCN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,C;;;;;;ACjJA,iD;;;;;;;;;;;;;ACAA,IAAMG,cAAc,GAAG,WAAvB;AACO,IAAMC,WAAW,aAAMD,cAAN,gBAAjB;;AACA,IAAME,kBAAkB,aAAMF,cAAN,uBAAxB;;;;;;;;;;;;;;;;;;;;;;;;;ACCP;;AACA;;AAEA;;AANA;AACA;AAMA;AACA;AAEA,IAAMG,YAAY,GAAG,sBAArB;AACA,IAAMC,oBAAoB,GAAG,uBAA7B;AACA,IAAMC,mBAAmB,GAAG,sBAA5B;AACA,IAAMC,oBAAoB,GAAG,iBAA7B;AACA,IAAMC,aAAa,GAAG,iBAAtB,C,CAEA;;IAEalC,W;;;;;;;;;qCACa;AACtB,aAAOmC,2BAAaC,SAAb,CAAuBN,YAAvB,CAAP;AACD;;;oCAEsB/M,I,EAAM;AAC3B,UAAIA,IAAI,CAACd,aAAT,EACEkO,2BAAaE,SAAb,CAAuBP,YAAvB,EAAqC/M,IAAI,CAACd,aAA1C;;AACF,UAAIc,IAAI,CAAChB,QAAT,EAAmB;AACjBoO,mCAAaE,SAAb,CAAuBN,oBAAvB,EAA6ChN,IAAI,CAAChB,QAAlD;;AACAoO,mCAAaE,SAAb,CAAuBL,mBAAvB,EAA4CjN,IAAI,CAAChB,QAAjD;AACD;AACF;;;2CAE6B;AAC5B,aAAO;AACLE,qBAAa,EAAEkO,2BAAaC,SAAb,CAAuBN,YAAvB,CADV;AAEL/N,gBAAQ,EAAEoO,2BAAaC,SAAb,CAAuBL,oBAAvB,CAFL;AAGLO,mBAAW,EAAEH,2BAAaC,SAAb,CAAuBJ,mBAAvB,CAHR;AAILO,kBAAU,EAAEJ,2BAAaC,SAAb,CAAuBH,oBAAvB,CAJP;AAKLO,cAAM,EAAEL,2BAAaC,SAAb,CAAuBF,aAAvB;AALH,OAAP;AAOD;;;4CAE8BzG,O,EAAS;AACtC,aAAO;AACLxH,qBAAa,EAAEwH,OAAO,CAACqG,YAAD,CADjB;AAEL/N,gBAAQ,EAAE0H,OAAO,CAACsG,oBAAD,CAFZ;AAGLO,mBAAW,EAAE7G,OAAO,CAACuG,mBAAD,CAHf;AAILO,kBAAU,EAAE9G,OAAO,CAACwG,oBAAD,CAJd;AAKLO,cAAM,EAAE/G,OAAO,CAACyG,aAAD;AALV,OAAP;AAOD;;;6CAE+B;AAC9BC,iCAAaM,YAAb,CAA0BX,YAA1B;;AACAK,iCAAaM,YAAb,CAA0BV,oBAA1B;;AACAI,iCAAaM,YAAb,CAA0BT,mBAA1B;;AACAG,iCAAaM,YAAb,CAA0BR,oBAA1B;;AACAE,iCAAaM,YAAb,CAA0BP,aAA1B;AACD;;;;;;;;;;;;;;;;;;AAEyB/N,sB,2DAAS,K;AAAOsH,uB,2DAAU,I;AAC5CiH,sB,GAASjH,OAAO,GAClB,KAAKkH,uBAAL,CAA6BlH,OAA7B,CADkB,GAElB,KAAKmH,oBAAL,E;;qBAEAF,MAAM,CAACzO,a;;;;;;uBACcuJ,yBAAYmD,YAAZ,CAAyB+B,MAAM,CAACzO,aAAhC,C;;;AAAjB7B,wB;;oBAEDA,Q;;;;;iDAAiB,K;;;AAEtB;AACM2C,oB,GAAO;AACXhB,0BAAQ,EAAE2O,MAAM,CAAC3O,QADN;AAEXE,+BAAa,EAAEwJ,kBAAkB,CAACrL,QAAQ,CAACyQ,aAAV,CAFtB;AAGX3O,6BAAW,EAAE9B,QAAQ,CAAC0Q,WAHX;AAIX9O,oBAAE,EAAE5B,QAAQ,CAAC2Q,MAJF;AAKXzO,iCAAe,EAAE;AALN,iB;;sBAQTS,IAAI,CAACb,WAAL,KAAqB,C;;;;;AACvB;AACA8L,2BAAW,CAACgD,sBAAZ;;;;;AAEA;AACAjO,oBAAI,CAAClB,QAAL,GAAgB,IAAhB;;qBAEIM,M;;;;;;uBAC2B,KAAK8O,SAAL,CAAelO,IAAf,C;;;AAAvBmO,8B;iDACCA,c;;;iDAIJnO,I;;;iDAEF,K;;;;;;;;;;;;;;;;;;;;;qDAGchB,Q,EAAUwH,Q;;;;;;;;;;;;;;AAAUpH,sB,8DAAS,K;;sBAC9CJ,QAAQ,IAAIwH,Q;;;;;;uBAEciC,yBAAY2F,SAAZ,CAAsBpP,QAAtB,EAAgCwH,QAAhC,C;;;AAAtB6H,6B;;qBACFA,a;;;;;AACF;AACQP,6B,GAAuCO,a,CAAvCP,a,EAAeC,W,GAAwBM,a,CAAxBN,W,EAAaC,M,GAAWK,a,CAAXL,M;AAC9BjP,2B,GAAc,CAAC,CAACgP,W,EAAa;AAEnC;;AACM/N,oB,GAAO;AACXhB,0BAAQ,EAARA,QADW;AAEXD,6BAAW,EAAXA,WAFW;AAGXD,0BAAQ,EAAE,CAAC,CAACgP,aAAF,IAAmB,CAAC/O,WAHnB;AAIXG,+BAAa,EAAE4O,aAJJ;AAKX7O,oBAAE,EAAE+O,MALO;AAMX7O,6BAAW,EAAE,KAAKmP,WAAL,CAAiBP,WAAjB;AANF,iB;;sBAST,CAAC/N,IAAI,CAACjB,WAAN,IAAqB,CAAC,CAACiB,IAAI,CAACd,a;;;;;AAC9B,qBAAKwM,eAAL,CAAqB1L,IAArB;;qBAEIZ,M;;;;;;uBAC2B,KAAK8O,SAAL,CAAelO,IAAf,C;;;AAAvBmO,8B;kDACCA,c;;;kDAIJnO,I;;;kDAGA;AACLd,+BAAa,EAAE,IADV;AAELJ,0BAAQ,EAAE,KAFL;AAGLC,6BAAW,EAAE,IAHR;AAILI,6BAAW,EAAE;AAJR,iB;;;;;;;;;;;;;;;;;;;;;qDAUUa,I;;;;;;oBAChBA,IAAI,CAACd,a;;;;;kDACDc,I;;;;uBAGsByI,yBAAY8F,WAAZ,CAAwBvO,IAAI,CAACd,aAA7B,C;;;AAAzBsP,gC;;AACN,oBAAIA,gBAAJ,EAAsB;AACdnR,0BADc,GACH0G,IAAI,CAAC0B,KAAL,CAAW+I,gBAAX,CADG;;AAGpB,sBAAInR,QAAQ,CAACG,KAAT,IAAkB,CAACH,QAAQ,CAACoR,eAAhC,EAAiD;AAC/CzO,wBAAI,CAAC0O,YAAL,yCAAmDrR,QAAQ,CAACG,KAA5D;AACD,mBAFD,MAEO;AACLwC,wBAAI,CAACZ,MAAL,GAAc/B,QAAQ,CAACoR,eAAT,CAAyBnL,GAAzB,CAA6B,UAAAqL,KAAK;AAAA,6BAAK;AACnDC,4BAAI,EAAED,KAAK,CAACE,SADuC;AAEnD5P,0BAAE,EAAE0P,KAAK,CAACG;AAFyC,uBAAL;AAAA,qBAAlC,CAAd;AAIA9O,wBAAI,CAACV,QAAL,GAAgBjC,QAAQ,CAAC0R,QAAzB;AACA/O,wBAAI,CAACX,YAAL,GAAoBhC,QAAQ,CAAC2R,KAA7B;AACD;AACF;;kDACMhP,I;;;;;;;;;;;;;;;;;;iCAGW;AAClB,WAAKiO,sBAAL;AACA,aAAOpP,2BAAiBsK,IAAjB,EAAP;AACD;;;0CAE4BvN,G,EAAK;AAChC,UAAI,OAAO8E,MAAP,IAAiB,WAArB,EAAkC;AAChCA,cAAM,CAACM,QAAP,CAAgBiO,IAAhB,GAAuBhE,WAAW,CAACiE,YAAZ,CAAyBtT,GAAzB,CAAvB,CADgC,CACsB;AACtD;AACA;AACD;AACF;;;iCAEmBA,G,EAAK;AACvB,uBAAUA,GAAG,IAAI,QAAjB,2BAA0C8E,MAAM,CAACM,QAAP,CAAgBmO,QAAhB,GACxCzO,MAAM,CAACM,QAAP,CAAgB2B,MADlB;AAED,K,CACD;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;qDAE4B3D,Q;;;;;;qBACtBA,Q;;;;;AACIiK,0B,GAAavI,MAAM,CAACM,QAAP,CAAgBkF,QAAhB,GAA2B,IAA3B,GAAkCxF,MAAM,CAACM,QAAP,CAAgBqF,I;;uBACtCoC,yBAAYyD,cAAZ,CAC7BlN,QAD6B,EAE7BiK,UAF6B,C;;;AAAzBmG,gC;;qBAIFA,gB;;;;;kDAEKA,gB;;;;;;;;;;;;;;;;;;;;;qDAMXpQ,Q,EACAgI,W,EACAC,W,EACAC,kB;;;;;;sBAEID,WAAW,IAAIC,kB;;;;;qBACb,KAAKmI,gBAAL,CAAsBpI,WAAtB,C;;;;;;uBAC6BwB,yBAAY6D,cAAZ,CAC7BtN,QAD6B,EAE7BgI,WAF6B,EAG7BC,WAH6B,EAI7BC,kBAJ6B,C;;;AAAzBkI,gC;;qBAOFA,gB;;;;;kDAEKA,gB;;;;;;;kDAGF,8M;;;;;;;;;;;;;;;;;;;;;qDAKwBrP,K,EAAOkH,W,EAAaC,kB;;;;;;sBACnDD,WAAW,IAAIC,kB;;;;;qBACb,KAAKmI,gBAAL,CAAsBpI,WAAtB,C;;;;;;uBAC6BwB,yBAAY4D,uBAAZ,CAC7BtM,KAD6B,EAE7BuP,IAAI,CAACrI,WAAD,CAFyB,EAG7BqI,IAAI,CAACpI,kBAAD,CAHyB,C;;;AAAzBkI,gC;;qBAMFA,gB;;;;;kDAEKA,gB;;;;;;;kDAGF,8M;;;;;;;;;;;;;;;;;;qCAKWG,K,EAAO;AAC7B;AACA,UAAIA,KAAK,CAAClR,MAAN,GAAe,CAAnB,EAAsB,OAAO,KAAP,CAFO,CAG7B;AACA;AACA;AACA;;AACA,aAAO,iGAAiGmR,IAAjG,CACLD,KADK,CAAP;AAGD;;;gCAEkBpR,M,EAAQ;AACzB,UAAMsR,OAAO,GAAG;AACd,aAAK,IADS;AAEd,cAAM,gCAFQ;AAGd,cAAM,kBAHQ;AAId,cAAM,gBAJQ;AAKd,cAAM,+BALQ;AAMd,cAAM,+BANQ;AAOd,cAAM,2BAPQ;AAQd,cAAM,mBARQ;AASd,aAAK,0BATS;AAUd,aAAK,yBAVS;AAWd,eAAO,iBAXO;AAYd,eAAO,kBAZO;AAad,aAAK,wBAbS;AAcd,YAAI;AAdU,OAAhB;AAgBA,aAAOA,OAAO,CAACtR,MAAD,CAAd;AACD;;;;;;;;;;;ACtSH,iD;;;;;;;;;;;;;;;;;;;;ACAA;;AAEA,IAAMuR,iBAAiB,GAAG,CAA1B,C,CAA6B;AAE7B;AACA;;AACA,IAAMC,OAAO,GAAGC,qBAAQC,aAAR,CAAsB;AACpCC,MAAI,EAAE,cAAA7M,KAAK;AAAA,WAAI8F,kBAAkB,CAAC9F,KAAD,CAAtB;AAAA,GADyB;AAEpC8M,OAAK,EAAE,eAAA9M,KAAK;AAAA,WAAIyF,kBAAkB,CAACzF,KAAD,CAAtB;AAAA;AAFwB,CAAtB,CAAhB;;IAKamK,Y;;;;;;;;;8BACMwB,I,EAAM;AACrB,aAAOe,OAAO,CAAC/U,GAAR,CAAYgU,IAAZ,CAAP;AACD;;;8BAEgBA,I,EAAM3L,K,EAAuC;AAAA,UAAhC+M,UAAgC,uEAAnBN,iBAAmB;AAC5DM,gBAAU,KAAK,CAAf,GACIL,OAAO,CAAC1P,GAAR,CAAY2O,IAAZ,EAAkB3L,KAAlB,CADJ,GAEI0M,OAAO,CAAC1P,GAAR,CAAY2O,IAAZ,EAAkB3L,KAAlB,EAAyB;AAAEgN,eAAO,EAAED;AAAX,OAAzB,CAFJ;AAGD;;;iCAEmBpB,I,EAAM;AACxBe,aAAO,CAAChM,MAAR,CAAeiL,IAAf;AACD;;;;;;;;;;;ACxBH,iD;;;;;;;;;;;;;;ACAA;;AACA;;AASA;;AAUA;;AACA;;AAKA,IAAMsB,cAAc,GAAG,SAAjBA,cAAiB,CAAA9G,gBAAgB,EAAI;AACzC,SAAOA,gBAAgB,CAACmE,WAAjB,IAAgCnE,gBAAgB,CAACwF,IAAjD,IAAyD,WAAhE;AACD,CAFD;;AAIA,IAAMuB,SAAS,GAAG,SAAZA,SAAY,CAAA/G,gBAAgB,EAAI;AACpC;AACA;AACA;AACA;AACA;AACA;AAEA,MAAMgH,eAAe,GAAG,SAAlBA,eAAkB,CAAA7Y,KAAK,EAAI;AAC/B,WAAO;AACLyI,UAAI,EAAE,2BAAWzI,KAAX,CADD;AAEL8Y,iBAAW,EAAE,kCAAkB9Y,KAAlB,CAFR;AAGL+Y,gBAAU,EAAE,sCAAsB/Y,KAAtB,CAHP;AAILgZ,qBAAe,EAAE,sCAAsBhZ,KAAtB,CAJZ;AAKLmI,2BAAqB,EAAE,4CAA4BnI,KAA5B,CALlB;AAMLiZ,oBAAc,EAAE,qCAAqBjZ,KAArB,CANX;AAOLuI,aAAO,EAAE,sCAAsBvI,KAAtB,CAPJ;AAQLkZ,gBAAU,EAAE,mCAAmBlZ,KAAnB,CARP;AASLmZ,iBAAW,EAAE,gCAAkBnZ,KAAlB,CATR;AAULiO,iBAAW,EAAE,wCAA0BjO,KAA1B;AAVR,KAAP;AAYD,GAbD;;AAeA,MAAMoZ,kBAAkB,GAAG;AACzBpK,aAAS,EAATA,kBADyB;AAEzBI,cAAU,EAAVA,mBAFyB;AAGzBC,mBAAe,EAAfA,wBAHyB;AAIzBE,kBAAc,EAAdA,uBAJyB;AAKzBC,kBAAc,EAAdA,uBALyB;AAMzBI,2BAAuB,EAAvBA,gCANyB;AAOzByJ,mBAAe,EAAEvJ;AAPQ,GAA3B;AAUA,MAAMwJ,kBAAkB,GAAG,yBACzBT,eADyB,EAEzBO,kBAFyB,EAGzB,gBAAKvH,gBAAL,CAHyB,CAA3B;AAKAyH,oBAAkB,CAACtD,WAAnB,aAAoC2C,cAAc,CAAC9G,gBAAD,CAAlD;AAEA,SAAOyH,kBAAP;AACD,CAzCD;;eA2CeV,S;;;;;;;;;;;;;;;ACzER,IAAMW,eAAe,GAAG,SAAlBA,eAAkB,CAAAvZ,KAAK,EAAI;AACtC,SAAOA,KAAK,CAACC,KAAN,CAAY,CAAC,SAAD,EAAY,WAAZ,CAAZ,CAAP;AACD,CAFM;;;;AAGA,IAAMuZ,iBAAiB,GAAG,SAApBA,iBAAoB,CAAAxZ,KAAK,EAAI;AACxC,SAAOA,KAAK,CAACC,KAAN,CAAY,CAAC,SAAD,EAAY,SAAZ,CAAZ,CAAP;AACD,CAFM;;;;AAIA,IAAMwZ,mBAAmB,GAAG,SAAtBA,mBAAsB,CAAAzZ,KAAK,EAAI;AAC1C,SAAOA,KAAK,CAACC,KAAN,CAAY,CAAC,SAAD,EAAY,wBAAZ,CAAZ,CAAP;AACD,CAFM;;;;;;;;;;;;;;;;ACPA,IAAMyZ,iBAAiB,GAAG,SAApBA,iBAAoB,CAAA1Z,KAAK,EAAI;AACxC,SAAOA,KAAK,CAACC,KAAN,CAAY,CAAC,YAAD,EAAe,SAAf,CAAZ,CAAP;AACD,CAFM;;;;AAIA,IAAM0Z,oBAAoB,GAAG,SAAvBA,oBAAuB,CAAA3Z,KAAK,EAAI;AAC3C,SAAOA,KAAK,CAACC,KAAN,CAAY,CAAC,YAAD,EAAe,MAAf,CAAZ,CAAP;AACD,CAFM;;;;AAIA,IAAM2Z,uBAAuB,GAAG,SAA1BA,uBAA0B,CAAA5Z,KAAK,EAAI;AAC9C,SAAOA,KAAK,CAACC,KAAN,CAAY,CAAC,YAAD,EAAe,aAAf,CAAZ,CAAP;AACD,CAFM;;;;;;;;;;;;;;;;;;;;ACRP;;AACA;;AACA;;AACA;;AACA;;AACA;;AAEA;;AAQA;;AACA;;AAEA;;AACA;;AACA;;AAEA,IAAM4Z,cAAc,GAAG,SAAjBA,cAAiB,CAAA3M,IAAI,EAAI;AAC7B,MAAIA,IAAI,KAAK,GAAb,EAAkB;AAChB,QAAM4M,QAAQ,GAAG5M,IAAI,CAACA,IAAI,CAACpG,MAAL,GAAc,CAAf,CAArB;;AACA,QAAIgT,QAAQ,IAAI,GAAhB,EAAqB;AACnB,aAAO5M,IAAI,CAAC6M,SAAL,CAAe,CAAf,EAAkB7M,IAAI,CAACpG,MAAL,GAAc,CAAhC,CAAP;AACD;AACF;;AACD,SAAOoG,IAAP;AACD,CARD;;AAUA,IAAM8M,WAAW,GAAG,SAAdA,WAAc,OAWd;AAAA,MAVJtH,SAUI,QAVJA,SAUI;AAAA,MATJxJ,SASI,QATJA,SASI;AAAA,MARJ+Q,aAQI,QARJA,aAQI;AAAA,MAPJzZ,KAOI,QAPJA,KAOI;AAAA,MANJ0Y,UAMI,QANJA,UAMI;AAAA,MALJgB,UAKI,QALJA,UAKI;AAAA,MAJJC,iBAII,QAJJA,iBAII;AAAA,MAHJ3H,iBAGI,QAHJA,iBAGI;AAAA,MAFJG,MAEI,QAFJA,MAEI;AAAA,MADJF,UACI,QADJA,UACI;AACJ,MAAMhJ,QAAQ,GAAG,kCAAjB,CADI,CAGJ;;AACA,MAAM2Q,kBAAkB,GAAG,SAArBA,kBAAqB;AAAA,WACzB,oCAAYzH,MAAM,CAAC0H,YAAnB,EAAiC5Q,QAAQ,CAACmO,QAA1C,CADyB;AAAA,GAA3B;;AAEA,MAAM0C,aAAa,GAAG,SAAhBA,aAAgB;AAAA,WAAMF,kBAAkB,GAAGtT,MAArB,GAA8B,CAApC;AAAA,GAAtB;;AAEA,MAAMyT,WAAW,GAAGV,cAAc,CAACpQ,QAAQ,CAACmO,QAAV,CAAlC;AAEA,MAAMxJ,WAAW,GAAGkM,aAAa,MAAMF,kBAAkB,GAAG,CAAH,CAAzD;AAEA,MAAMI,OAAO,GAAG,wBAAY,YAAM;AAChC,QAAIC,UAAU,GAAG,IAAjB;;AACA,QAAIrM,WAAW,IAAIA,WAAW,CAACC,KAA3B,IAAoCD,WAAW,CAACC,KAAZ,CAAkBqM,OAA1D,EAAmE;AACjED,gBAAU,GAAGrM,WAAW,CAACI,KAAZ,CAAkBtB,IAAlB,CACVY,KADU,CACJ,GADI,EAEVxI,MAFU,CAEH,UAAAqV,CAAC;AAAA,eAAI,CAACA,CAAC,CAACC,UAAF,CAAa,GAAb,CAAL;AAAA,OAFE,EAGVC,IAHU,CAGL,GAHK,CAAb;AAID;;AAEDrI,qBAAiB,CACfiI,UAAU,IAAIF,WADC,EAEf9Q,QAFe,EAGf2E,WAHe,EAIfqE,UAJe,EAKfC,SALe,EAMfC,MANe,CAAjB,CATgC,CAiBhC;AACD,GAlBe,EAkBb,CACDH,iBADC,EAED;AACAC,YAHC,EAIDhJ,QAJC,EAKDkJ,MALC,EAMD;AACA4H,aAPC,CAlBa,CAAhB;AA4BA,MAAI,OAAOpR,MAAP,IAAiB,WAArB,EAAkCqR,OAAO;AAEzC,wBAAU,YAAM;AACdA,WAAO;AACR,GAFD,EAEG,CAAC/Q,QAAD,EAAW+Q,OAAX,CAFH,EA1CI,CA8CJ;;AACA,MAAI/Q,QAAQ,CAACmO,QAAT,CAAkB9Q,MAAlB,GAA2ByT,WAAW,CAACzT,MAA3C,EAAmD;AACjD,WAAO,gCAAC,wBAAD;AAAU,QAAE,EAAEyT;AAAd,MAAP;AACD,GAjDG,CAkDJ;;;AACA,MAAID,aAAa,CAACC,WAAD,CAAjB,EAAgC;AAC9B,WAAO,qCAAa5H,MAAM,CAAC0H,YAApB,EAAkC;AACvCnR,eAAS,EAATA,SADuC;AAEvC+Q,mBAAa,EAAbA,aAFuC;AAGvCzZ,WAAK,EAALA,KAHuC;AAIvC0Y,gBAAU,EAAVA;AAJuC,KAAlC,CAAP;AAMD,GA1DG,CA4DJ;;;AACA,MAAIe,aAAJ,EAAmB;AACjB,QAAMa,gBAAgB,GAAGnI,MAAM,CAACoI,mBAAP,CAA2BC,IAA3B,CACvB,UAAAC,IAAI;AAAA,aAAIA,IAAI,CAACC,aAAL,IAAsBjB,aAA1B;AAAA,KADmB,CAAzB;;AAIA,QAAIa,gBAAJ,EAAsB;AACpB,aACE,gCAAC,gBAAD,CAAkB,SAAlB;AACE,iBAAS,EAAE5R,SADb;AAEE,qBAAa,EAAE+Q,aAFjB;AAGE,aAAK,EAAEzZ,KAHT;AAIE,kBAAU,EAAE0Y;AAJd,QADF;AAQD;AACF;;AAED,MAAMiC,iBAAiB,GAAGhB,iBAAiB,GAAGA,iBAAH,GAAuBiB,oBAAlE;;AACA,MAAIlB,UAAJ,EAAgB;AACd,WACE,gCAAC,cAAD;AAAQ,UAAI,EAAE;AAAd,OACE,gCAAC,iBAAD,OADF,CADF;AAKD;;AAED,SAAO,IAAP;AACD,CAnGD;;AAqGAF,WAAW,CAACqB,SAAZ,GAAwB;AACtB1I,QAAM,EAAE2I,sBAAUC,QAAV,CAAmBD,sBAAUE,KAA7B,EAAoCF,sBAAUE,KAA9C,CADc;AAEtB/I,YAAU,EAAE6I,sBAAUxR,MAFA;AAGtB4I,WAAS,EAAE4I,sBAAUG,MAHC;AAItBvS,WAAS,EAAEoS,sBAAUG,MAJC;AAKtBxB,eAAa,EAAEqB,sBAAUG,MALH;AAMtBC,SAAO,EAAEJ,sBAAUxR,MANG;AAOtBtJ,OAAK,EAAE8a,sBAAUxR,MAPK;AAQtBoP,YAAU,EAAEoC,sBAAUK,IARA;AAStBzB,YAAU,EAAEoB,sBAAUK,IATA;AAUtBxB,mBAAiB,EAAEmB,sBAAUM,IAVP;AAWtBpJ,mBAAiB,EAAE8I,sBAAUM;AAXP,CAAxB;;AAcA,IAAM/C,eAAe,GAAG,SAAlBA,eAAkB,CAAA7Y,KAAK,EAAI;AAC/B,SAAO;AACL0S,aAAS,EAAE,gCAAkB1S,KAAlB,CADN;AAELkJ,aAAS,EAAE,mCAAqBlJ,KAArB,CAFN;AAGLQ,SAAK,EAAE,+BAAiBR,KAAjB,CAHF;AAILia,iBAAa,EAAE,4CAA8Bja,KAA9B,CAJV;AAKLka,cAAU,EAAE,+BAAiBla,KAAjB,CALP;AAMLkZ,cAAU,EAAE,mCAAmBlZ,KAAnB,CANP;AAOL6b,aAAS,EAAE,iCAAmB7b,KAAnB;AAPN,GAAP;AASD,CAVD;;AAYA,IAAMoZ,kBAAkB,GAAG;AACzB5G,mBAAiB,EAAjBA;AADyB,CAA3B;;eAIe,yBAAIsJ,MAAJ,EACb,yBACEjD,eADF,EAEEO,kBAFF,EAGE,gBAAKY,WAAL,CAHF,CADa,C;;;;;;;;;ACnKf,iD;;;;;;ACAA,iD;;;;;;ACAA,iD;;;;;;;;;;;;;;ACAA;;AACA;;AAEO,IAAM+B,UAAU,GAAG,SAAbA,UAAa,CAACC,SAAD,EAAYC,OAAZ;AAAA,SACxB,qBAAO3G,oBAAP,EAAoB;AAAE0G,aAAS,EAATA,SAAF;AAAaC,WAAO,EAAPA;AAAb,GAApB,CADwB;AAAA,CAAnB;;;;AAGA,IAAMC,gBAAgB,GAAG,SAAnBA,gBAAmB,CAAAC,MAAM;AAAA,SACpC,qBAAO5G,2BAAP,EAA2B;AAAE4G,UAAM,EAANA;AAAF,GAA3B,CADoC;AAAA,CAA/B;;;;;;;;;;;;;;;;;;ACNP;;AACA;;AACA;;AAEA,IAAMC,OAAO,GAAG,SAAVA,OAAU,CAAAC,KAAK,EAAI;AACvB,SAAO,gCAAC,uBAAD,EAAiBA,KAAjB,CAAP;AACD,CAFD;;eAI2BD,O;;;;;;;ACR3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;;;;;;ACrBA,iD;;;;;;;;;;;;;;;;ACAA;;AACA,IAAMhB,QAAQ,GAAG,SAAXA,QAAW;AAAA,SACf,kEACE,gDACE,iEADF,CADF,CADe;AAAA,CAAjB;;eAOeA,Q;;;;;;;;;;;;;;;;;ACRf;;AACA;;AACA;;AAEO,IAAMkB,MAAM,GAAG,SAATA,MAAS,OAAwB;AAAA,MAArBC,IAAqB,QAArBA,IAAqB;AAAA,MAAf5O,QAAe,QAAfA,QAAe;AAC5C,SACE,gCAAC,qBAAD;AACE,UAAM,EAAE,uBAAuB;AAAA,UAApB6O,aAAoB,SAApBA,aAAoB;AAC7B,UAAIA,aAAJ,EAAmBA,aAAa,CAACL,MAAd,GAAuBI,IAAvB;AACnB,aAAO5O,QAAP;AACD;AAJH,IADF;AAQD,CATM;;;AAWP2O,MAAM,CAACjB,SAAP,GAAmB;AACjBkB,MAAI,EAAEjB,sBAAUmB,MAAV,CAAiBC,UADN;AAEjB/O,UAAQ,EAAE2N,sBAAUqB;AAFH,CAAnB,C;;;;;;ACfA,iD;;;;;;;ACAA,iD;;;;;;;;;;;;;;ACAA;;AAEA;AACA,IAAMC,eAAe,GACnB,OAAOzT,MAAP,KAAkB,WAAlB,GAAgC0T,6BAAhC,GAAuDC,4BADzD;;AAGO,IAAMjI,OAAO,GAAG,SAAVA,OAAU;AAAA,MAAClP,OAAD,uEAAW,EAAX;AAAA,SAAkBiX,eAAe,CAACjX,OAAD,CAAjC;AAAA,CAAhB;;;AACA,IAAMoX,cAAc,GAAGH,eAAe,EAAtC;;;;;;;ACPP,iD;;;;;;;;;;;;;ACAA,IAAMI,OAAO,GAAGhN,OAAhB;AAAyB;;AACzB,IAAMiN,KAAK,GAAGD,OAAO,CAACC,KAAR,CAAc3S,WAAd,EAAd;AACA,IAAM4S,SAAS,GAAGnO,UAAlB;AAA8B;;AAC9B,IAAMoO,QAAQ,GAAGC,QAAjB;AAA2B;AAE3B;;AACA,IAAMC,WAAW,GAAG,SAAdA,WAAc,CAAC3T,QAAD,EAAWmB,KAAX,EAAqB;AACvC;AACA,MAAInB,QAAQ,IAAI,WAAhB,EAA6B;AAC3B,WAAQmB,KAAK,IAAIA,KAAK,CAAC8P,CAAhB,IAAsBwC,QAAQ,CAAC,CAAD,CAAR,CAAYzV,EAAzC;AACD,GAJsC,CAMvC;;;AACA,MAAIgC,QAAQ,IAAIwT,SAAhB,EAA2B;AACzB,WAAOC,QAAQ,CAAC,CAAD,CAAR,CAAYzV,EAAnB;AACD;;AAED,MAAIqB,OAAO,GAAG,SAAd,CAXuC,CAavC;AACA;;AACA,MAAM4R,CAAC,GAAGwC,QAAQ,CAAC,CAAD,CAAlB,CAfuC,CAiBvC;;AACA,MAAIzT,QAAQ,CAAC4T,QAAT,CAAkB3C,CAAC,CAACuC,SAApB,CAAJ,EAAoCnU,OAAO,GAAG4R,CAAC,CAACjT,EAAZ,CAlBG,CAoBvC;;AACA,MAAIiT,CAAC,CAACjT,EAAF,CAAKkT,UAAL,CAAgB,SAAhB,CAAJ,EAAgC;AAC9B;AACA;AACA;AACA,QACElR,QAAQ,CAAC4T,QAAT,gBAA0BL,KAA1B,8BACAvT,QAAQ,CAAC4T,QAAT,gBAA0BL,KAA1B,sBADA,IAEAvT,QAAQ,CAAC4T,QAAT,mBAA6BL,KAA7B,0BAFA,IAGAvT,QAAQ,CAAC4T,QAAT,mBAA6BL,KAA7B,sBAJF,EAMElU,OAAO,GAAG4R,CAAC,CAACjT,EAAZ;AACH,GAXD,MAWO;AACL;AACA,QACEgC,QAAQ,CAAC4T,QAAT,WAAqB3C,CAAC,CAACjT,EAAF,CAAK4C,WAAL,EAArB,cAA2C2S,KAA3C,8BACAvT,QAAQ,CAAC4T,QAAT,WAAqB3C,CAAC,CAACjT,EAAF,CAAK4C,WAAL,EAArB,cAA2C2S,KAA3C,sBAFF,EAIElU,OAAO,GAAG4R,CAAC,CAACjT,EAAZ;AACH,GAvCsC,CAwCvC;;;AACA,SAAOqB,OAAO,KAAK,SAAZ,GAAwB4R,CAAC,CAACjT,EAA1B,GAA+BqB,OAAtC;AACD,CA1CD;;eA4CesU,W;;;;;;;;;;;;;;;;;;;;;AClDf;;AACA;;AACA;;AACA;;AAGA;;AACA;;AACA;;AACA;;AACA;;;;;;eAEe,kBAACE,eAAD,EAAkBC,YAAlB,EAAgC3I,OAAhC,EAA4C;AACzD,MAAM4I,eAAe,GAAG,CAACC,sBAAD,CAAxB;;AAEA,MAAIC,uBAAuB,GAAG,iCAAAC,CAAC;AAAA,WAAIA,CAAJ;AAAA,GAA/B;;AAEA,MAAI,OAAOzU,MAAP,IAAiB,WAArB,EAAkC;AAChCwU,2BAAuB,GAAGxU,MAAM,CAAC0U,4BAAP,GACtB1U,MAAM,CAAC0U,4BAAP,EADsB,GAEtB,UAAAD,CAAC;AAAA,aAAIA,CAAJ;AAAA,KAFL;AAGD;;AAED,MAAME,cAAc,GAAG,4BAAvB;AACA,MAAMC,UAAU,GAAG,oBACjBC,qCACKP,eADL,SAEEK,cAFF,EAGE,kCAAiBjJ,OAAjB,CAHF,GADiB,EAMjB8I,uBANiB,CAAnB;;AASA,MAAIM,QAAQ;AACVC,cAAU,EAAEC,sBADF;AAEVC,WAAO,EAAEC,mBAFC;AAGV5V,QAAI,EAAE6V,cAHI;AAIVC,WAAO,EAAEC;AAJC,KAKPjB,eALO,CAAZ;;AAQA,MAAMkB,gBAAgB,GAAG,qCAAgBR,QAAhB,CAAzB;;AAEA,MAAMS,KAAK,GAAG,eAAAlB,YAAY,EAAI;AAC5B,QAAMkB,KAAK,GAAG,wBAAYD,gBAAZ,EAA8BjB,YAA9B,EAA4CO,UAA5C,CAAd;AACAW,SAAK,CAACC,OAAN,GAAgBb,cAAc,CAACc,GAA/B;;AACAF,SAAK,CAACG,KAAN,GAAc;AAAA,aAAMH,KAAK,CAACI,QAAN,CAAeC,cAAf,CAAN;AAAA,KAAd;;AACA,WAAOL,KAAP;AACD,GALD;;AAOA,SAAOA,KAAK,CAAClB,YAAD,CAAZ;AACD,C;;;;;;;;ACnDD,iD;;;;;;ACAA,iD;;;;;;ACAA,iD;;;;;;ACAA,iD;;;;;;;;;;;;;;;;;;ACAA;;AACA;;AAWA;;;;;;AAEA,IAAIA,YAAY,GAAG,oBAAI;AACrBrE,aAAW,EAAE,GADQ;AAErB6F,aAAW,EAAE,EAFQ;AAGrBC,gBAAc,EAAE,SAHK;AAIrB1M,UAAQ,EAAE,KAJW;AAKrB2M,SAAO,EAAE,IALY;AAMrB1e,OAAK,EAAE,IANc;AAOrB2e,cAAY,EAAE,IAAIhf,eAAJ,EAPO;AAQrB8Z,eAAa,EAAE,IARM;AASrBmF,sBAAoB,EAAE,IAAIjf,eAAJ,EATD;AAUrBkf,eAAa,EAAE;AAVM,CAAJ,CAAnB;;eAae,oBAAkC;AAAA,MAAjCrf,KAAiC,uEAAzBwd,YAAyB;AAAA,MAAXvZ,MAAW;;AAC/C,UAAQA,MAAM,CAACC,IAAf;AACE,SAAKzC,sBAAL;AAAoB;AAClB,YAAIwC,MAAM,CAACqb,SAAX,EAAsB;AACpB,cAAIC,WAAW,GAAGtb,MAAM,CAACqb,SAAP,CAAiBvT,GAAjB,CAAqB,UAAAI,IAAI,EAAI;AAC7C,mBAAOA,IAAI,CAACzE,EAAZ;AACD,WAFiB,CAAlB;AAIA,cAAI8X,kBAAkB,GAAGxf,KAAK,CAACqD,GAAN,CAAU,aAAV,CAAzB;;AACA,cAAMoc,cAAc,GAAG9U,eAAI+U,KAAJ,CAAU,CAC/B,oBAAIH,WAAJ,CAD+B,EAE/BC,kBAF+B,CAAV,CAAvB;;AAIA,iBAAOxf,KAAK,CACT0I,GADI,CACA,aADA,EACe+W,cADf,EAEJ/W,GAFI,CAEA,sBAFA,EAEwB,uBAAOzE,MAAM,CAACqb,SAAd,CAFxB,CAAP;AAGD;;AACD,eAAOtf,KAAK,CAAC0I,GAAN,CAAU,sBAAV,EAAkC,uBAAOzE,MAAM,CAACqb,SAAd,CAAlC,CAAP;AACD;;AACD,SAAK/d,kBAAL;AAAgB;AACd,YAAI,CAAC0C,MAAM,CAACzD,KAAZ,EACE,OAAOR,KAAK,CACT0I,GADI,CACA,OADA,EACS,IADT,EAEJA,GAFI,CAEA,cAFA,EAEgB,IAFhB,EAGJA,GAHI,CAGA,WAHA,EAGazE,MAAM,CAAC4X,SAHpB,CAAP;AAIF,YAAMsD,YAAY,GAAG,+CAAoBlb,MAAM,CAACzD,KAA3B,CAArB;AACA,eAAOR,KAAK,CACT0I,GADI,CACA,cADA,EACgB,uBAAOyW,YAAP,CADhB,EAEJzW,GAFI,CAEA,OAFA,EAES,uBAAOzE,MAAM,CAACzD,KAAd,CAFT,EAGJkI,GAHI,CAGA,WAHA,EAGazE,MAAM,CAAC4X,SAHpB,CAAP;AAID;;AACD,SAAKla,qBAAL;AAAmB;AACjB,YAAIsC,MAAM,CAACyD,EAAP,KAAc,EAAlB,EAAsB;AACpB,iBAAO1H,KAAP;AACD;;AACD,eAAOA,KAAK,CAAC0I,GAAN,CAAU,SAAV,EAAqBzE,MAAM,CAACyD,EAA5B,CAAP;AACD;;AACD,SAAK5F,4BAAL;AAA0B;AACxB,YAAIsM,WAAW,GAAG,KAAlB;;AACA,YAAInK,MAAM,CAACmK,WAAX,EAAwB;AACtBA,qBAAW,qBAAQnK,MAAM,CAACmK,WAAf,CAAX;AACD;;AACD,YAAInK,MAAM,CAACiJ,IAAX,EAAiB;AACf,iBAAOlN,KAAK,CACT0I,GADI,CACA,aADA,EACe,uBAAOzE,MAAM,CAACiJ,IAAd,CADf,EAEJxE,GAFI,CAEA,UAFA,EAEY,uBAAOzE,MAAM,CAACwF,QAAd,CAFZ,EAGJf,GAHI,CAIH,aAJG,EAKH,yCACK0F,WADL;AAEEI,iBAAK,oBAAOJ,WAAW,CAACI,KAAnB;AAA0BmR,uBAAS,EAAE;AAArC;AAFP,aALG,EAUJjX,GAVI,CAUA,WAVA,EAUa,OAAOS,MAAP,KAAkB,WAV/B,CAAP;AAWD;;AACD,eAAOnJ,KAAP;AACD;;AACD,SAAK6B,iCAAL;AAA+B;AAC7B,eAAO7B,KAAK,CACT0I,GADI,CACA,UADA,EACY,uBAAOzE,MAAM,CAACsO,QAAd,CADZ,EAEJ7J,GAFI,CAEA,WAFA,EAEa,KAFb,CAAP;AAGD;;AACD,SAAKlH,iBAAL;AAAe;AAAA,YACL2K,IADK,GACIlI,MADJ,CACLkI,IADK;AAEb,YAAI,CAACA,IAAL,EAAW,OAAOnM,KAAP,CAFE,CAGb;;AACA,YAAM4f,WAAW,GAAG,oBAAI,CAACzT,IAAI,CAACzE,EAAN,CAAJ,CAApB;AACA,eAAO1H,KAAK,CACT0I,GADI,CACA,aADA,EACekX,WADf,EAEJlX,GAFI,CAEA,aAFA,EAEe,uBAAOzE,MAAM,CAACkI,IAAd,CAFf,EAGJ0T,QAHI,CAGK,CAAC,aAAD,EAAgB,OAAhB,CAHL,CAAP,CALa,CAQ0B;AACxC;;AACD,SAAK7d,kBAAL;AAAgB;AACd,eAAOhC,KAAK,CAAC0I,GAAN,CAAU,UAAV,EAAsBzE,MAAM,CAACiJ,IAA7B,CAAP;AACD;;AACD,SAAKxL,qBAAL;AAAmB;AACjB;AACA,YAAIoe,wBAAwB,GAAG,IAA/B;AACA,YAAIC,UAAU,GAAG,EAAjB;;AACA,YAAI9b,MAAM,CAAC+b,QAAP,IAAmB/b,MAAM,CAAC+b,QAAP,CAAgBlZ,MAAhB,GAAyB,CAAhD,EAAmD;AACjDgZ,kCAAwB,GAAG7b,MAAM,CAAC+b,QAAP,CAAgB,CAAhB,EAAmBC,QAA9C;AACAF,oBAAU,GAAG9b,MAAM,CAAC+b,QAAP,CAAgBjU,GAAhB,CAAoB,UAAAI,IAAI,EAAI;AACvC,mBAAOA,IAAI,CAACzE,EAAZ;AACD,WAFY,CAAb;AAGD;;AACD,YAAI8X,mBAAkB,GAAGxf,KAAK,CAACqD,GAAN,CAAU,aAAV,CAAzB;;AACA,YAAMoc,eAAc,GAAG9U,eAAI+U,KAAJ,CAAU,CAAC,oBAAIK,UAAJ,CAAD,EAAkBP,mBAAlB,CAAV,CAAvB;;AACA,eAAOxf,KAAK,CACT0I,GADI,CACA,aADA,EACe+W,eADf,EAEJ/W,GAFI,CAEA,qBAFA,EAEuB,uBAAOzE,MAAM,CAAC+b,QAAd,CAFvB,EAGJtX,GAHI,CAGA,2BAHA,EAG6BoX,wBAH7B,CAAP;AAID;;AACD,SAAK/d,2BAAL;AAAyB;AACvB,eAAO/B,KAAK,CACT0I,GADI,CACA,gBADA,EACkBzE,MAAM,CAAC8E,OADzB,EAEJL,GAFI,CAEA,eAFA,EAEiB,EAFjB,EAEqB;AAFrB,SAGJA,GAHI,CAGA,eAHA,EAGiB,uBAAOzE,MAAM,CAAC4O,aAAd,CAHjB,CAAP;AAID;;AACD;AACE,aAAO7S,KAAP;AAlGJ;AAoGD,C;;;;;;;;;;;;;;;;AChID;;AACA;;AAEA,IAAIwd,YAAY,GAAG,oBAAI;AACrBxB,WAAS,EAAE,IADU;AAErBC,SAAO,EAAE,IAFY;AAGrBiE,wBAAsB,EAAE;AAHH,CAAJ,CAAnB;;eAMe,oBAAkC;AAAA,MAAjClgB,KAAiC,uEAAzBwd,YAAyB;AAAA,MAAXvZ,MAAW;;AAC/C,UAAQA,MAAM,CAACC,IAAf;AACE,SAAKqR,2BAAL;AAAyB;AACvB,eAAOvV,KAAK,CAAC0I,GAAN,CAAU,wBAAV,EAAoCzE,MAAM,CAACkY,MAA3C,CAAP;AACD;;AACD,SAAK7G,oBAAL;AAAkB;AAChB,eAAOtV,KAAK,CACT0I,GADI,CACA,WADA,EACazE,MAAM,CAAC+X,SADpB,EAEJtT,GAFI,CAEA,SAFA,EAEWzE,MAAM,CAACgY,OAFlB,CAAP;AAGD;;AACD;AACE,aAAOjc,KAAP;AAVJ;AAYD,C;;;;;;;;;;;;;;;;ACtBD;;AAEA;;AAKA,IAAMwd,YAAY,GAAG,oBAAI;AACvB2C,MAAI,EAAE,IADiB;AAEvBC,aAAW,EAAE,IAAIjgB,eAAJ,CAAS,EAAT,CAFU;AAGvBkgB,SAAO,EAAE,KAHc;AAIvBC,SAAO,EAAE;AAJc,CAAJ,CAArB;;eAOe,oBAAkC;AAAA,MAAjCtgB,KAAiC,uEAAzBwd,YAAyB;AAAA,MAAXvZ,MAAW;;AAC/C,UAAQA,MAAM,CAACC,IAAf;AACE,SAAK+O,yBAAL;AAAoB;AAClB,eAAOjT,KAAK,CAAC0I,GAAN,CAAU,MAAV,EAAkB,uBAAOzE,MAAM,CAAC+I,KAAd,CAAlB,EAAwCtE,GAAxC,CAA4C,SAA5C,EAAuD,IAAvD,CAAP;AACD;;AACD,SAAKwK,+BAAL;AAA0B;AACxB,eAAOlT,KAAK,CAAC0I,GAAN,CAAU,SAAV,EAAqB,IAArB,CAAP;AACD;;AACD;AACE,aAAO1I,KAAP;AARJ;AAUD,C;;;;;;;;;;;;;;;;;;;;ACzBD;;AAEA;;;;;;AAKA;AACA,IAAMugB,gBAAgB,GAAG,SAAnBA,gBAAmB,CAAA1L,OAAO;AAAA,SAAI,UAAA6J,KAAK;AAAA,WAAI,UAAA/S,IAAI;AAAA,aAAI,UAAA1H,MAAM,EAAI;AAC7D,YAAIA,MAAM,CAACC,IAAP,KAAgBjC,4BAApB,EAAyC;AACvC,iBAAO0J,IAAI,CAAC1H,MAAD,CAAX;AACD;;AAH4D,8BAOzDA,MAPyD,CAM3DE,OAN2D;AAAA,YAMhD6M,MANgD,mBAMhDA,MANgD;AAAA,YAMxCwP,IANwC,mBAMxCA,IANwC;AAQ7D3L,eAAO,CAAC7D,MAAD,CAAP,OAAA6D,OAAO,sCAAY2L,IAAZ,EAAP;AACD,OATgD;AAAA,KAAR;AAAA,GAAT;AAAA,CAAhC;;eAWeD,gB;;;;;;;;;;;;;;;;;;;;;AClBf;;AACA;;AACA;;AACA;;AACA;;AALA;AAOe,oBAA4B;AAAA,MAAnBE,YAAmB,uEAAJ,EAAI;AACzC;AAAA;AAAA,iCAAO,SAAUC,QAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AACCC,sBADD,iDACgBC,qBADhB,uCACiCC,2BADjC,uCACqDrN,YADrD;AAAA;AAEL,qBAAM,mBAAK,6BAAiB,EAAjB,CAAL,6CAA8BmN,QAA9B,uCAA2CF,YAA3C,GAAN;;AAFK;AAAA;AAAA;AAAA;AAAA;AAAA,SAAUC,QAAV;AAAA,KAAP;AAAA;AAID,C;;;;;;;;;;;;;;;;;;;;;;ACXD;;AACA;;AACA;;AAWA;;AACA;;AACA;;AAKA;;AACA;;AACA;;;;;;;;6BAWUI,Y;;;6BAUAC,Y;;;6BAoMAhO,a;;;6BA6BAiO,K;;AApPH,IAAMJ,YAAY,GAAG,CAC1B,wBAAU9e,4BAAV,EAA+Bif,YAA/B,CAD0B,EAE1B,wBAAU/e,kBAAV,EAAqB8e,YAArB,CAF0B,CAArB;AAKP;;;;;;;AAIA,SAAUA,YAAV,CAAuB7c,MAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AACE,iBAAM,kBAAI;AACRC,gBAAI,EAAEjC,4BADE;AAERkC,mBAAO,EAAE;AACP6M,oBAAM,EAAE,MADD;AAEPwP,kBAAI,EAAE,CAACvc,MAAM,CAACiJ,IAAR,EAAcjJ,MAAM,CAACjE,KAArB;AAFC;AAFD,WAAJ,CAAN;;AADF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAUA,SAAU+gB,YAAV,CAAuB9c,MAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AACMzD,eADN,GACc,IADd;AAAA;AAGYiS,oBAHZ,GAGmCxO,MAHnC,CAGYwO,UAHZ,EAGwBE,MAHxB,GAGmC1O,MAHnC,CAGwB0O,MAHxB;;AAAA,gBAKQF,UAAU,IAAIA,UAAU,CAACwO,WALjC;AAAA;AAAA;AAAA;;AAAA;AAMgB,iBAAMxO,UAAU,CAACwO,WAAX,CAAuBhd,MAAvB,CAAN;;AANhB;AAMMid,iBANN;;AAAA;AAQI;AACA;AACA;AACMC,sBAXV,GAYM,CAACD,OAAD,KACCA,OAAO,IAAIA,OAAO,CAACE,gBAAR,KAA6B,IAAxC,GACG,KADH,GAEIF,OAAO,IAAIA,OAAO,CAACE,gBAApB,IAAyC,IAH7C,CAZN;AAiBUC,wBAjBV,GAiB4BH,OAAO,IAAIA,OAAO,CAACG,cAApB,IAAuC,CAjBlE;AAkBUC,8BAlBV,GAmBM3O,MAAM,IACNA,MAAM,CAACoI,mBADP,IAEA,CAAC,CAACpI,MAAM,CAACoI,mBAAP,CAA2BC,IAA3B,CAAgC,UAAAuG,EAAE;AAAA,mBAAIA,EAAE,CAACC,MAAH,IAAaD,EAAE,CAACzW,SAApB;AAAA,WAAlC,CArBR;AAAA;AAuBkB,iBAAM,sBAAN;;AAvBlB;AAuBU9K,eAvBV;AAwBUyhB,oBAxBV,GAwBuB,gCAAiBzhB,KAAjB,CAxBvB;;AAAA,gBA0BOkhB,OAAO,IAAIA,OAAO,CAACQ,aAApB,IACCzd,MAAM,CAACmK,WAAP,IAAsB,CAACnK,MAAM,CAACmK,WAAP,CAAmBI,KAAnB,CAAyBmT,SADjD,IAECF,UAAU,IAAIxd,MAAM,CAACyO,SAAP,KAAqBzO,MAAM,CAACiJ,IA5BjD;AAAA;AAAA;AAAA;;AAAA,eAkCUuU,UAlCV;AAAA;AAAA;AAAA;;AAmCQjhB,eAAK,GAAGihB,UAAU,CAAC7P,IAAX,EAAR;AAnCR;AAoCQ,iBAAM,kBAAI;AACR1N,gBAAI,EAAE3C,kBADE;AAERf,iBAAK,EAALA,KAFQ;AAGRqb,qBAAS,EAAE;AAHH,WAAJ,CAAN;;AApCR;AAAA;AAAA;;AAAA;AAAA;AAyCa,iBAAM,mBAAK9I,aAAL,CAAN;;AAzCb;AAAA;AAAA;;AAAA;AA2CYoG,qBA3CZ,GA2C0B,iCAAkBnZ,KAAlB,CA3C1B;AA4CYqL,2BA5CZ,GA4CgC,kCAAoBrL,KAApB,CA5ChC;AA6CY+I,iBA7CZ,GA6CsB,oCAAqB/I,KAArB,CA7CtB;AA+CU4hB,kBA/CV,GA+CqB,IA/CrB,EAgDQtC,SAhDR,GAgDoB,IAhDpB,EAiDQU,QAjDR,GAiDmB,IAjDnB,EAmDM;;AACA,cAAI,OAAO7W,MAAP,KAAkB,WAAtB,EAAmC;AACjCA,kBAAM,CAAC0Y,MAAP,CAAc;AACZC,iBAAG,EAAE;AADO,aAAd;AAGD;;AAEGC,0BA1DV,GA0D6B5I,WAAW,CAACrL,KAAZ,CAAkB,GAAlB,EAAuBhH,MAAvB,GAAgC,CA1D7D;AA2DM,cAAIqS,WAAW,KAAK,GAApB,EAAyB4I,gBAAgB,GAAG,CAAnB,CA3D/B,CA6DM;;AA7DN,gBA8DU5I,WAAW,KAAK,GA9D1B;AAAA;AAAA;AAAA;;AAAA;AA+DmB,iBAAMpL,mCAAaiU,WAAb,CACf;AACEC,iBAAK,EAAE,CADT;AAEEC,uBAAW,EAAE,GAFf;AAGEb,0BAAc,EAAdA,cAHF;AAIEjX,oBAAQ,EAAE;AAJZ,WADe,EAOfrB,OAPe,CAAN;;AA/DnB;AA+DQ6Y,kBA/DR;AAAA;AAAA;;AAAA;AAAA,gBA0EYzI,WAAW,IAAIA,WAAW,CAACyB,UAAZ,CAAuB,WAAvB,CA1E3B;AAAA;AAAA;AAAA;;AA2EcuH,mBA3Ed,GA2E0BhJ,WAAW,CAACrL,KAAZ,CAAkB,GAAlB,CA3E1B;AA4EcsU,mBA5Ed,GA4E0BD,SAAS,CAAC,CAAD,CA5EnC;;AAAA,gBA6EcA,SAAS,CAACrb,MAAV,IAAoB,CA7ElC;AAAA;AAAA;AAAA;;AAAA;AAkF+B,iBAAM0E,kCACtB6W,SADsB,CACZhX,iBADY,EACOtC,OADP,EAEtBoC,OAFsB,CAEd9H,GAFc,CAEV;AAAEqE,cAAE,EAAE0a,SAAN;AAAiBtX,qBAAS,EAAE;AAA5B,WAFU,CAAN;;AAlF/B;AAkFgBwX,sBAlFhB;;AAAA,eAqFgBA,YArFhB;AAAA;AAAA;AAAA;;AAAA;AAsFc,iBAAM,mBAAKvP,aAAL,EAAoBuP,YAApB,CAAN;;AAtFd;AAAA;AAAA;;AAAA;AAAA;AAwFc,iBAAM,mBAAKtB,KAAL,CAAN;;AAxFd;AAAA;AAAA;;AAAA;AAAA;AA6FqB,iBAAMjT,mCAAawU,OAAb,CACf;AACEN,iBAAK,EACHd,YAAY,KAAK,IAAjB,IAAyBA,YAAY,CAACxT,QAAb,KAA0B,IAAnD,GACI,CADJ,GAEKwT,YAAY,IAAIA,YAAY,CAACxT,QAA9B,IAA2C,CAJnD;AAKET,gBAAI,EAAEiM,WALR;AAME+I,uBAAW,EAAEZ,oBAAoB,GAC7B,CAAC,mBAAD,EAAsB,QAAtB,CAD6B,GAE7B,GARN;AASED,0BAAc,EAAEC,oBAAoB,GAAG,CAAH,GAAOD;AAT7C,WADe,EAYftY,OAZe,CAAN;;AA7FrB;AA6FU6Y,kBA7FV;;AAAA,gBA4GYN,oBAAoB,IACpBM,QADA,IAEAA,QAAQ,CAACphB,KAFT,IAGAohB,QAAQ,CAACphB,KAAT,CAAeqE,GAHf,IAIA+c,QAAQ,CAACphB,KAAT,CAAeqE,GAAf,CAAmB6C,EAhH/B;AAAA;AAAA;AAAA;;AAkHkB8a,qBAlHlB,GAmHc7P,MAAM,IACNA,MAAM,CAACoI,mBADP,IAEApI,MAAM,CAACoI,mBAAP,CAA2BC,IAA3B,CACE,UAAAuG,EAAE;AAAA,mBAAIA,EAAE,CAACrG,aAAH,KAAqB0G,QAAQ,CAACphB,KAAT,CAAeqE,GAAf,CAAmBoV,aAA5C;AAAA,WADJ,CArHd;AAwHkBpP,eAxHlB,GAwH0B,iCACZ+W,QAAQ,CAACphB,KAAT,CAAeqE,GAAf,CAAmB6C,EADP,EAEZ8a,WAAW,IAAIA,WAAW,CAAChB,MAFf,EAGZnW,iBAHY,CAxH1B;AAAA;AA6H4B,iBAAM0C,mCAAa3C,MAAb,CACpBP,KADoB,EAEpB2X,WAAW,IAAI,OAAOA,WAAW,CAAC1X,SAAnB,KAAiC,WAAhD,GACI0X,WAAW,CAAC1X,SADhB,GAEI,CAJgB,EAKpB/B,OALoB,CAAN;;AA7H5B;AA6HkB5E,iBA7HlB;;AAoIY,cAAIA,OAAO,IAAIA,OAAO,CAACse,KAAnB,IAA4Bte,OAAO,CAACse,KAAR,CAAc3b,MAAd,GAAuB,CAAvD,EAA0D;AACxD8a,oBAAQ,CAACphB,KAAT,GAAiB2D,OAAO,CAACse,KAAR,CAAc,CAAd,CAAjB;AACD;;AAtIb;AAAA,gBA2IUb,QAAQ,IACRA,QAAQ,CAACla,EADT,KAECyZ,YAAY,KAAK,IAAjB,IAAyBA,YAAY,CAAC7B,SAFvC,CA3IV;AAAA;AAAA;AAAA;;AAAA;AA+IsB,iBAAMvR,mCAAaZ,YAAb,CAA0ByU,QAAQ,CAACla,EAAnC,EAAuCqB,OAAvC,CAAN;;AA/ItB;AA+IUuW,mBA/IV;;AAAA,gBAkJYyC,gBAAgB,GAAG,CAAnB,KACCZ,YAAY,KAAK,IAAjB,IAAyBA,YAAY,CAACnB,QADvC,CAlJZ;AAAA;AAAA;AAAA;;AAAA;AAqJuB,iBAAMjS,mCAAaV,WAAb,CACf;AACE3F,cAAE,EAAEka,QAAQ,CAACla,EADf;AAEEwa,uBAAW,EAAE,CAAC,mBAAD,EAAsB,KAAtB;AAFf,WADe,EAKfnZ,OALe,CAAN;;AArJvB;AAqJYiX,kBArJZ;;AAAA;AAAA,gBAiKQ4B,QAAQ,IACRA,QAAQ,CAACphB,KADT,IAEAohB,QAAQ,CAACphB,KAAT,CAAeqE,GAFf,IAGA+c,QAAQ,CAACphB,KAAT,CAAeqE,GAAf,CAAmB6C,EApK3B;AAAA;AAAA;AAAA;;AAsKQlH,eAAK,GAAGohB,QAAQ,CAACphB,KAAjB;AAtKR;AAuKQ,iBAAM,mBAAKuS,aAAL,EAAoBvS,KAApB,EAA2BohB,QAA3B,EAAqCtC,SAArC,EAAgDU,QAAhD,CAAN;;AAvKR;AAAA;AAAA;;AAAA;AAAA;AAyKQ,iBAAM,mBAAKgB,KAAL,CAAN;;AAzKR;AAAA,gBA4KQvO,UAAU,IAAIA,UAAU,CAACiQ,aA5KjC;AAAA;AAAA;AAAA;;AAAA;AA6KM,iBAAMjQ,UAAU,CAACiQ,aAAX,mBAA8Bze,MAA9B;AAAsCzD,iBAAK,EAALA;AAAtC,aAAN;;AA7KN;AAAA,gBAiLM,CAAC,oCAAkBR,KAAlB,CAAD,KACCmhB,YAAY,KAAK,IAAjB,IAAyBA,YAAY,CAACwB,IADvC,CAjLN;AAAA;AAAA;AAAA;;AAAA;AAqLM,iBAAM,kBAAI;AACRze,gBAAI,EAAE8O,yBADE;AAER4P,qBAAS,EACPzB,YAAY,KAAK,IAAjB,IACA,CAACA,YAAY,CAACwB,IADd,IAEAxB,YAAY,CAACwB,IAAb,KAAsB,IAFtB,GAGI,CAHJ,GAIIxB,YAAY,CAACwB;AAPX,WAAJ,CAAN;;AArLN;AAAA;AAAA;;AAAA;AAAA;AAAA;AA+LIE,aAAG,CAACxc,KAAJ,OAAAwc,GAAG,EAAU,CAAC,2BAAD,gBAAiC,aAAEC,KAAnC,CAAV,CAAH;AA/LJ;AAgMI,iBAAM,mBAAK9B,KAAL,CAAN;;AAhMJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAoMA,SAAUjO,aAAV,CAAwBvS,KAAxB,EAA+B2L,IAA/B,EAAqCmT,SAArC,EAAgDU,QAAhD;AAAA;AAAA;AAAA;AAAA;AAAA;AACE,iBAAM,kBAAI,CACR,kBAAI;AACF9b,gBAAI,EAAErC,iCADJ;AAEF0Q,oBAAQ,EAAE,EAAE/R,KAAK,IAAIA,KAAK,CAACqE,GAAN,CAAU6C,EAArB;AAFR,WAAJ,CADQ,EAKR,kBAAI;AACFxD,gBAAI,EAAE1C,iBADJ;AAEF2K,gBAAI,EAAJA;AAFE,WAAJ,CALQ,EASR,kBAAI;AACFjI,gBAAI,EAAE3C,kBADJ;AAEFf,iBAAK,EAAEA;AAFL,WAAJ,CATQ,EAaR,kBAAI;AACF0D,gBAAI,EAAEvC,qBADJ;AAEF+F,cAAE,EAAGlH,KAAK,IAAIA,KAAK,CAACqE,GAAN,CAAU6C,EAApB,IAA2B;AAF7B,WAAJ,CAbQ,EAiBR,kBAAI;AACFxD,gBAAI,EAAEzC,sBADJ;AAEF6d,qBAAS,EAATA;AAFE,WAAJ,CAjBQ,EAqBR,kBAAI;AACFpb,gBAAI,EAAExC,qBADJ;AAEFse,oBAAQ,EAARA;AAFE,WAAJ,CArBQ,CAAJ,CAAN;;AADF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AA6BA,SAAUgB,KAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AACE,iBAAM,kBAAI;AACR9c,gBAAI,EAAErC,iCADE;AAER0Q,oBAAQ,EAAE;AAFF,WAAJ,CAAN;;AADF;AAAA;AAKE,iBAAM,kBAAI;AACRrO,gBAAI,EAAEvC,qBADE;AAER+F,cAAE,EAAE;AAFI,WAAJ,CAAN;;AALF;AAAA;AASE,iBAAM,kBAAI;AACRxD,gBAAI,EAAE3C,kBADE;AAERf,iBAAK,EAAE;AAFC,WAAJ,CAAN;;AATF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,C;;;;;;AC7QA,iD;;;;;;;;;;;;;;;;;;;;ACCA;;AACA;;AAFA;AAIO,IAAMuiB,kBAAkB,GAAG,SAArBA,kBAAqB,CAChCrb,EADgC,EAI7B;AAAA,MAFH8Z,MAEG,uEAFM,EAEN;AAAA,MADHjW,aACG,uEADa,WACb;AACH,MAAMV,KAAK,+BAAOmY,2BAAP,gDACF,kCAAgB,QAAhB,EAA0Btb,EAA1B,CADE,uCACgC,qCAAmB6D,aAAnB,CADhC,GAAX;AAGAV,OAAK,CAAC2W,MAAN,GAAeA,MAAf;AACA,SAAO3W,KAAP;AACD,CAVM;;;;;;;;ACJP,iD;;;;;;;;;;;;;;;;;;ACAA;;AACA;;AACA;;AAKO,IAAMoY,eAAe,GAAG,SAAlBA,eAAkB,CAC7BC,KAD6B,EAE7BxX,KAF6B,EAK1B;AAAA,MAFHyX,QAEG,uEAFQ,SAER;AAAA,MADHC,MACG,uEADM,IACN;AACH,MAAI,CAACF,KAAD,IAAU,CAACxX,KAAf,EAAsB,OAAO,EAAP;AACtB,MAAI2X,KAAK,CAACC,OAAN,CAAc5X,KAAd,CAAJ,EAA0B,OAAO6X,WAAW,CAACL,KAAD,EAAQxX,KAAR,EAAeyX,QAAf,CAAlB,CAA1B,KAEE,OAAO,CAACC,MAAD,GACH,CAACI,yBAAGL,QAAH,EAAaD,KAAb,EAAoBxX,KAApB,CAAD,CADG,GAEH,CAAC8X,yBAAGL,QAAH,EAAaD,KAAb,EAAoBxX,KAApB,EAA2B0X,MAA3B,CAAkCA,MAAlC,CAAD,CAFJ;AAGH,CAZM;;;;AAcA,IAAMK,uBAAuB,GAAG,SAA1BA,uBAA0B,CAACC,cAAD,EAAiBC,gBAAjB,EAAsC;AAC3E,MAAMC,WAAW,GAAG,EAApB;AACA,MAAI,CAACF,cAAD,IAAmB,CAACC,gBAAxB,EAA0C,OAAOC,WAAP;;AAE1C,MAAIF,cAAc,IAAIA,cAAc,CAAC5c,MAAf,GAAwB,CAA9C,EAAiD;AAC/C8c,eAAW,CAACziB,IAAZ,OAAAyiB,WAAW,sCACNC,oBAAoB,CAACH,cAAD,EAAiBI,oBAAYtjB,KAA7B,CADd,EAAX;AAGD;;AAED,MAAImjB,gBAAgB,IAAIA,gBAAgB,CAAC7c,MAAjB,GAA0B,CAAlD,EAAqD;AACnD8c,eAAW,CAACziB,IAAZ,OAAAyiB,WAAW,sCACNC,oBAAoB,CAACF,gBAAD,EAAmBG,oBAAYC,OAA/B,CADd,EAAX;AAGD;;AAED,MAAIH,WAAW,CAAC9c,MAAZ,GAAqB,CAAzB,EAA4B,OAAO,CAAC0c,yBAAGQ,EAAH,iCAASJ,WAAT,CAAD,CAAP;AAE5B,SAAOA,WAAP;AACD,CAnBM;;;;AAqBA,IAAMK,iBAAiB,GAAG,SAApBA,iBAAoB,CAAAC,OAAO,EAAI;AAC1C,MAAI,CAACA,OAAL,EAAc,OAAO,EAAP;AACd,MAAMN,WAAW,GAAG,EAApB;AAEAM,SAAO,CAACnY,GAAR,CAAY,UAAAoY,KAAK,EAAI;AACnBP,eAAW,CAACziB,IAAZ,OAAAyiB,WAAW,sCAASX,eAAe,CAACkB,KAAK,CAAC7b,GAAP,EAAY6b,KAAK,CAACzY,KAAlB,EAAyB,UAAzB,CAAxB,EAAX;AACD,GAFD;AAIA,SAAOkY,WAAP;AACD,CATM;;;;AAWA,IAAMC,oBAAoB,GAAG,SAAvBA,oBAAuB,CAClCH,cADkC,EAG/B;AAAA,MADHrZ,UACG,uEADUyZ,oBAAYtjB,KACtB;;AACH,MAAIkjB,cAAc,IAAIA,cAAc,CAAC5c,MAAf,GAAwB,CAA9C,EAAiD;AAC/C;;;;AAIA,QAAMsd,kBAAkB,GAAGV,cAAc,CAACpe,MAAf,CAAsB,UAAA+e,CAAC;AAAA,aAAI,CAACA,CAAC,CAACzJ,UAAF,CAAa,GAAb,CAAL;AAAA,KAAvB,CAA3B;AACA,QAAM0J,iBAAiB,GAAGZ,cAAc,CACrCpe,MADuB,CAChB,UAAA+e,CAAC;AAAA,aAAIA,CAAC,CAACzJ,UAAF,CAAa,GAAb,CAAJ;AAAA,KADe,EAEvB7O,GAFuB,CAEnB,UAAArE,EAAE;AAAA,aAAIA,EAAE,CAACqS,SAAH,CAAa,CAAb,CAAJ;AAAA,KAFiB,CAA1B;;AAIA,QAAMwK,OAAO,GAAGf,yBAAGgB,GAAH,EAAhB;;AAEA,QAAMC,cAAc,GAAGxB,eAAe,CAACyB,eAAO7f,GAAP,CAAWwF,UAAZ,EAAwBA,UAAxB,CAAtC;AAEA,QAAMsa,QAAQ,GAAG1B,eAAe,CAC9ByB,eAAO7f,GAAP,CAAWoV,aADmB,EAE9BmK,kBAF8B,CAAhC;AAKA,QAAMQ,OAAO,GAAG,CACdpB,yBAAGqB,GAAH,qEAAU5B,eAAe,CAACyB,eAAO7f,GAAP,CAAWoV,aAAZ,EAA2BqK,iBAA3B,CAAzB,EADc,CAAhB;AAIAC,WAAO,CAACO,GAAR,OAAAP,OAAO,sCAAQE,cAAR,EAAP;AACA,QAAIL,kBAAkB,CAACtd,MAAnB,GAA4B,CAAhC,EAAmCyd,OAAO,CAACO,GAAR,OAAAP,OAAO,sCAAQI,QAAR,EAAP;AACnC,QAAIL,iBAAiB,CAACxd,MAAlB,GAA2B,CAA/B,EAAkCyd,OAAO,CAACO,GAAR,OAAAP,OAAO,EAAQK,OAAR,CAAP;AAElC,WAAO,CAACL,OAAD,CAAP;AACD;;AACD,SAAO,EAAP;AACD,CAlCM;;;;AAoCA,IAAMQ,kBAAkB,GAAG,SAArBA,kBAAqB,CAAAxZ,aAAa,EAAI;AACjD,SAAO,CAACiY,yBAAGwB,OAAH,CAAWN,eAAO7f,GAAP,CAAW0G,aAAtB,EAAqCA,aAArC,CAAD,CAAP;AACD,CAFM;;;;AAIA,IAAM0Z,wBAAwB,GAAG,SAA3BA,wBAA2B,CAAA1Z,aAAa,EAAI;AACvD,uDACKwZ,kBAAkB,CAACxZ,aAAD,CADvB,uCAEK2Z,0BAA0B,EAF/B;AAID,CALM;;;;AAMA,IAAMA,0BAA0B,GAAG,SAA7BA,0BAA6B;AAAA,SAAM,CAC9C1B,yBAAGQ,EAAH,CACER,yBAAGgB,GAAH,CACEhB,yBAAG2B,MAAH,CAAUT,eAAO7f,GAAP,CAAWugB,eAArB,EAAsC,IAAtC,CADF,EAEE5B,yBAAGwB,OAAH,CAAWN,eAAO7f,GAAP,CAAWugB,eAAtB,EAAuC,IAAvC,CAFF,CADF,EAKE5B,yBAAG2B,MAAH,CAAUT,eAAO7f,GAAP,CAAWugB,eAArB,EAAsC,KAAtC,CALF,CAD8C,CAAN;AAAA,CAAnC;;;;AAUA,IAAMC,iBAAiB,GAAG,SAApBA,iBAAoB,CAAAC,OAAO,EAAI;AAC1C,MAAIC,UAAU,GAAGC,6BAAjB;;AACA,MAAIF,OAAO,IAAIA,OAAO,CAACxe,MAAR,GAAiB,CAAhC,EAAmC;AACjCwe,WAAO,CAACvZ,GAAR,CACE,UAAA0Z,EAAE;AAAA,aACCF,UAAU,GAAGE,EAAE,CAAC7K,UAAH,CAAc,GAAd,IACV2K,UAAU,CAACG,IAAX,CAAgBD,EAAE,CAAC1L,SAAH,CAAa,CAAb,CAAhB,CADU,GAEVwL,UAAU,CAACI,GAAX,CAAeF,EAAf,CAHJ;AAAA,KADJ;AAMD;;AACD,SAAOF,UAAP;AACD,CAXM;;;;AAaP,IAAMhC,WAAW,GAAG,SAAdA,WAAc,CAACL,KAAD,EAAQje,GAAR;AAAA,MAAake,QAAb,uEAAwB,SAAxB;AAAA,SAClBle,GAAG,CAAC6B,MAAJ,KAAe,CAAf,GACI,EADJ,GAEI7B,GAAG,CAAC6B,MAAJ,KAAe,CAAf,GACA,CAAC0c,yBAAGL,QAAH,EAAaD,KAAb,EAAoBje,GAAG,CAAC,CAAD,CAAvB,CAAD,CADA,GAEA,CAACue,gEAAMN,KAAN,6CAAgBje,GAAhB,GAAD,CALc;AAAA,CAApB;;AAOO,IAAM2gB,sBAAsB,GAAG,SAAzBA,sBAAyB,CAAAC,KAAK,EAAI;AAC7C,MAAI,CAACA,KAAD,IAAU,CAACxC,KAAK,CAACC,OAAN,CAAcuC,KAAd,CAAf,EAAqC,OAAO,EAAP,CADQ,CAG7C;AACA;;AACA,SAAOA,KAAK,CAAC9Z,GAAN,CAAU,UAAA+Z,MAAM,EAAI;AACzB,QAAIP,UAAJ;AACAvb,UAAM,CAACC,IAAP,CAAY6b,MAAZ,EAAoB/Z,GAApB,CAAwB,UAACzD,GAAD,EAAMyd,GAAN,EAAc;AACpC,UAAIA,GAAG,KAAK,CAAZ,EAAe;AACb,YAAM5C,QAAQ,GAAG7a,GAAjB;AACA,YAAMoD,KAAK,GAAGoa,MAAM,CAACxd,GAAD,CAApB;AACAid,kBAAU,GAAG/B,yBAAGL,QAAH,EAAa2C,MAAM,CAAC5C,KAApB,EAA2BxX,KAA3B,EAAkCoa,MAAM,CAAC1C,MAAzC,CAAb;AACD;AACF,KAND;AAOA,WAAOmC,UAAP;AACD,GAVM,CAAP;AAWD,CAhBM;;;;AAkBA,IAAMS,eAAe,GAAG,SAAlBA,eAAkB,CAACC,UAAD,EAAaC,oBAAb,EAAsC;AACnE,MAAID,UAAU,IAAIC,oBAAd,IAAsCA,oBAAoB,CAACpf,MAArB,GAA8B,CAAxE,EAA2E;AACzE;AACA,QAAMqf,aAAa,GAAG,gCAAqBF,UAArB,CAAtB,CAFyE,CAIzE;;AACA,QAAIG,kBAAkB,GAAGH,UAAzB;AACAE,iBAAa,CAACE,OAAd,CACE,UAAAC,EAAE;AAAA,aACCF,kBAAkB,GAAGA,kBAAkB,CACrCG,OADmB,CACXD,EADW,EACP,EADO,EAEnBC,OAFmB,CAEX,IAFW,EAEL,EAFK,EAGnBC,IAHmB,EADtB;AAAA,KADJ,EANyE,CAczE;;AACA,QAAMC,SAAS,GAAG,EAAlB,CAfyE,CAiBzE;;AACA,QAAMC,UAAU,GAAG,SAAbA,UAAa,CAAC9I,CAAD,EAAI+I,IAAJ;AAAA,aACjB1D,eAAe,CACbrF,CAAC,CAACgJ,OADW,EAEb,iCAAsBD,IAAtB,CAFa,EAGb,UAHa,EAIb/I,CAAC,CAACwF,MAJW,CADE;AAAA,KAAnB;;AAOA,QAAMyD,UAAU,GAAG,SAAbA,UAAa,CAACjJ,CAAD,EAAI+I,IAAJ;AAAA,aACjB1D,eAAe,CACbrF,CAAC,CAACgJ,OADW,EAEb,iCAAsBD,IAAtB,CAFa,EAGb,UAHa,EAIb/I,CAAC,CAACwF,MAJW,CADE;AAAA,KAAnB,CAzByE,CAiCzE;;;AACA8C,wBAAoB,CAACG,OAArB,CAA6B,UAAAzI,CAAC,EAAI;AAChC;AACA,UAAMkJ,cAAc,GAAG,EAAvB,CAFgC,CAIhC;;AACA,UAAIV,kBAAJ,EAAwB;AACtB,YACE,CAAC1B,eAAOqC,QAAR,EAAkBrC,eAAO7f,GAAP,CAAWmiB,QAA7B,EAAuCtC,eAAO7f,GAAP,CAAWR,GAAlD,EAAuDiZ,QAAvD,CACEM,CAAC,CAACgJ,OADJ,CADF,EAIE;AACAE,wBAAc,CAAC3lB,IAAf,OAAA2lB,cAAc,sCAASJ,UAAU,CAAC9I,CAAD,EAAIwI,kBAAJ,CAAnB,EAAd;AACD,SAND,MAMO;AACL,cAAI,CAAC1B,eAAOuC,UAAR,EAAoB3J,QAApB,CAA6BM,CAAC,CAACgJ,OAA/B,CAAJ,EAA6C;AAC3CE,0BAAc,CAAC3lB,IAAf,CACEqiB,yBAAGQ,EAAH,qEACK0C,UAAU,CAAC9I,CAAD,EAAIwI,kBAAJ,CADf,6CAEKS,UAAU,CAACjJ,CAAD,EAAIwI,kBAAJ,CAFf,GADF;AAMD,WAPD,MAOO;AACLU,0BAAc,CAAC3lB,IAAf,OAAA2lB,cAAc,sCAASD,UAAU,CAACjJ,CAAD,EAAIwI,kBAAJ,CAAnB,EAAd;AACD;AACF;AACF,OAxB+B,CA0BhC;;;AACAD,mBAAa,CAACE,OAAd,CAAsB,UAAAC,EAAE;AAAA,eAAIQ,cAAc,CAAC3lB,IAAf,OAAA2lB,cAAc,sCAASJ,UAAU,CAAC9I,CAAD,EAAI0I,EAAJ,CAAnB,EAAlB;AAAA,OAAxB,EA3BgC,CA6BhC;AACA;AACA;;AACA,UAAIQ,cAAc,CAAChgB,MAAf,GAAwB,CAA5B,EAA+B;AAC7B2f,iBAAS,CAACtlB,IAAV,CAAeqiB,yBAAGgB,GAAH,iCAAUsC,cAAV,CAAf;AACD,OAFD,MAEO;AACLL,iBAAS,CAACtlB,IAAV,OAAAslB,SAAS,EAASK,cAAT,CAAT;AACD;AACF,KArCD,EAlCyE,CAyEzE;;AACA,WAAO,CAACtD,yBAAGQ,EAAH,GAAQkD,QAAR,CAAiBT,SAAjB,CAAD,CAAP;AACD,GA3ED,MA2EO,IAAIR,UAAJ,EAAgB;AACrB,WAAO,CAACzC,yBAAG2D,QAAH,CAAYzC,eAAO0C,QAAnB,EAA6BnB,UAA7B,CAAD,CAAP;AACD,GAFM,MAEA;AACL,WAAO,EAAP;AACD;AACF,CAjFM;;;;;;;;;;;;;;;ACnJA,IAAMnC,WAAW,GAAG;AACzBtjB,OAAK,EAAE,OADkB;AAEzBujB,SAAO,EAAE;AAFgB,CAApB;;AAKP,IAAMlf,GAAG,GAAG;AACVoV,eAAa,EAAE,mBADL;AAEV5P,YAAU,EAAE,gBAFF;AAGV2c,UAAQ,EAAE,yBAHA;AAIVtf,IAAE,EAAE,QAJM;AAKV0d,iBAAe,EAAE,8BALP;AAMViC,MAAI,EAAE,UANI;AAOVhjB,KAAG,EAAE,SAPK;AAQVkH,eAAa,EAAE;AARL,CAAZ;AAWO,IAAMmZ,MAAM,GAAG;AACpBuC,YAAU,EAAE,YADQ;AAEpBK,kBAAgB,EAAE,kBAFE;AAGpBP,UAAQ,EAAE,UAHU;AAIpBliB,KAAG,EAAHA,GAJoB;AAKpBoV,eAAa,EAAE,mBALK;AAMpBmN,UAAQ,EAAE;AANU,CAAf;;AASA,IAAMG,QAAQ,GAAG;AACtBC,SAAO,EAAE;AADa,CAAjB;;AAIA,IAAMC,aAAa,GAAG;AAC3BC,WAAS,EAAE,WADgB;AAE3BC,QAAM,EAAE;AAFmB,CAAtB;;AAKA,IAAMC,YAAY,GAAG;AAC1BC,aAAW,EAAE;AADa,CAArB;;AAIA,IAAMC,cAAc,GAAG,EAAvB;;AAEA,IAAMC,qBAAqB,GAAG;AACnCvF,aAAW,EAAE,aADsB;AAEnCU,OAAK,EAAE;AAF4B,CAA9B;;;;;;;;;;;;;;;;;;;;;;ACxCP;;AACA;;AACA;;AAEO,SAAS8E,qBAAT,CAA+BC,CAA/B,EAAkC;AACvC,MAAIC,YAAY,GAAG,CAAC,GAAD,EAAM,GAAN,CAAnB;AACA,MAAIC,YAAY,GAAG,CACjB,GADiB,EAEjB,GAFiB,EAGjB,GAHiB,EAIjB,GAJiB,EAKjB,GALiB,EAMjB,GANiB,EAOjB,GAPiB,EAQjB,GARiB,EASjB,GATiB,EAUjB,GAViB,EAWjB,GAXiB,EAYjB,GAZiB,EAajB,GAbiB,EAcjB,GAdiB,EAejB,GAfiB,EAgBjB,GAhBiB,EAiBjB,GAjBiB,EAkBjB,GAlBiB,EAmBjB,IAnBiB,EAoBjB,GApBiB,CAAnB;AAuBA,MAAIC,YAAY,GAAG,IAAIC,MAAJ,CAAWH,YAAY,CAACnc,GAAb,CAAiB,UAAAsY,CAAC;AAAA,WAAI,OAAOA,CAAX;AAAA,GAAlB,EAAgCxJ,IAAhC,CAAqC,GAArC,CAAX,EAAsD,GAAtD,CAAnB;AACA,MAAIyN,YAAY,GAAG,IAAID,MAAJ,CAAWF,YAAY,CAACpc,GAAb,CAAiB,UAAAsY,CAAC;AAAA,WAAI,OAAOA,CAAX;AAAA,GAAlB,EAAgCxJ,IAAhC,CAAqC,GAArC,CAAX,EAAsD,GAAtD,CAAnB;AAEAoN,GAAC,GAAGA,CAAC,CAAC1B,OAAF,CAAU6B,YAAV,EAAwB,EAAxB,CAAJ;AACAH,GAAC,GAAGA,CAAC,CAAC1B,OAAF,CAAU+B,YAAV,EAAwB,EAAxB,CAAJ,CA7BuC,CA6BN;;AACjC,SAAOL,CAAP;AACD;;AAEM,IAAMM,WAAW;AAAA;AAAA;AAAA;AAAA;AAAA,+BAAG,iBAAO1d,KAAP,EAAcC,SAAd,EAAyB5B,SAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AACrBsf,oBADqB,GACV,CADU;AAGnBC,iBAHmB,GAGX,uBAHW;AAAA;AAAA,mBAIH1a,mCAAa3C,MAAb,CAAoBP,KAApB,EAA2BC,SAA3B,EAAsC5B,SAAtC,CAJG;;AAAA;AAInB/E,mBAJmB;AAKnBukB,eALmB,GAKb,uBALa;AAOzBF,oBAAQ,GAAGE,GAAG,GAAGD,KAAjB;AAPyB,6CASlB;AAAED,sBAAQ,EAARA,QAAF;AAAYrkB,qBAAO,EAAPA;AAAZ,aATkB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAH;;AAAA,kBAAXokB,WAAW;AAAA;AAAA;AAAA,GAAjB;;;;AAYA,IAAMI,oBAAoB,GAAG,SAAvBA,oBAAuB,CAAA1C,UAAU,EAAI;AAChD,MAAM2C,OAAO,GAAG,IAAIP,MAAJ,CACd,2EADc,CAAhB;AAIA,SAAO,CAACpC,UAAU,CAAC5X,KAAX,CAAiBua,OAAjB,KAA6B,EAA9B,EAAkC7c,GAAlC,CAAsC,UAAAsC,KAAK;AAAA,WAChDA,KAAK,CAACkY,OAAN,CAAc,IAAd,EAAoB,EAApB,CADgD;AAAA,GAA3C,CAAP;AAGD,CARM;;;;AAUA,IAAMsC,aAAa;AAAA;AAAA;AAAA;AAAA;AAAA,+BAAG,kBAAOC,SAAP,EAAkB5E,OAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AACvB7f,eADuB,GACjB,0BAASykB,SAAS,CAACzlB,GAAV,CAAc,KAAd,CAAT,EAA+B6gB,OAA/B,CADiB;;AAAA,gBAEtB7f,GAFsB;AAAA;AAAA;AAAA;;AAAA,8CAEV,IAFU;;AAAA;AAG3B,gBAAI,OAAO8E,MAAP,IAAiB,WAAjB,IAAgC9E,GAAG,CAACuW,UAAJ,CAAe,GAAf,CAApC,EACEvW,GAAG,kCAA2BA,GAA3B,CAAH;AAJyB;AAAA,mBAMJuB,KAAK,CAACvB,GAAD,CAND;;AAAA;AAMrByB,oBANqB;AAAA;AAAA,mBAOdA,QAAQ,CAACK,IAAT,EAPc;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAH;;AAAA,kBAAb0iB,aAAa;AAAA;AAAA;AAAA,GAAnB;;;;;;;;;;;;;;;;AC3DA,IAAME,GAAG,GAAG,SAANA,GAAM,GAAM;AACvB,MAAI,OAAO5f,MAAP,IAAiB,WAArB,EAAkC;AAChC,WAAO6f,IAAI,CAACD,GAAL,EAAP;AACD;;AACD,SAAO5f,MAAM,CAAC8f,WAAP,CAAmBF,GAAnB,EAAP;AACD,CALM;;;;;;;;;;;;;;;;;;;;;ACAP;;AAEA;;AACA;;AAKA;;AACA;;AACA;;;;6BAIiBG,kB;;AAFV,IAAMrI,eAAe,GAAG,CAAC,wBAAU7N,yBAAV,EAAyBkW,kBAAzB,CAAD,CAAxB;;;AAEA,SAAUA,kBAAV,CAA6BjlB,MAA7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACS,iBAAM,sBAAN;;AADT;AACCjE,eADD;AAAA;;AAAA,cAGE,oCAAkBA,KAAlB,CAHF;AAAA;AAAA;AAAA;;AAAA;AAIgC,iBAAM,qBAAOyZ,4BAAP,CAAN;;AAJhC;AAIK0P,kCAJL;AAAA;AAKe,iBAAM,qBAAOroB,6BAAP,CAAN;;AALf;AAKKiI,iBALL;AAAA;AAMa,iBAAMyC,kCACjB6W,SADiB,CACP8G,wBADO,EACmBpgB,OADnB,EAEjBiE,KAFiB,CAEXC,OAFW,CAEH;AACbgV,iBAAK,EAAEhe,MAAM,CAAC2e,SAAP,IAAoB,CADd;AAEbV,uBAAW,EAAE;AAFA,WAFG,CAAN;;AANb;AAMKlV,eANL;;AAAA,eAYGA,KAZH;AAAA;AAAA;AAAA;;AAAA;AAaC,iBAAM,kBAAI;AAAE9I,gBAAI,EAAE+O,yBAAR;AAAuBjG,iBAAK,EAALA;AAAvB,WAAJ,CAAN;;AAbD;AAAA;AAAA;;AAAA;AAAA;AAeC,iBAAM,kBAAI;AAAE9I,gBAAI,EAAEgP;AAAR,WAAJ,CAAN;;AAfD;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAmBH,iBAAM,kBAAI;AAAEhP,gBAAI,EAAEgP,+BAAR;AAA6B7M,iBAAK,EAAE,YAAGqG,QAAH;AAApC,WAAJ,CAAN;;AAnBG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,C;;;;;;;;;ACdP,IAAM0c,cAAc,GAAGC,mBAAO,CAAC,GAAR,WAAvB;;AAEAC,OAAO,CAACC,GAAR,GAAcH,cAAc,CAACG,GAA7B;AACAD,OAAO,CAACE,SAAR,GAAoBJ,cAAc,CAACK,QAAnC;AACAH,OAAO,CAACb,KAAR,GAAgBW,cAAc,CAACX,KAA/B;;AAEA,IAAMiB,QAAQ,GAAGL,mBAAO,CAAC,GAAR,WAAjB;;AAEAC,OAAO,CAACI,QAAR,GAAmBA,QAAnB,C;;;;;;;;;;;;;;;;;;;;;;ACRA;;AACA;;AACA;;AAEA;;AACA;;AACA;;AAEA;;AADA;AAGA,IAAMH,GAAG,GAAG,0BAAZ;;AAEA,IAAMd,KAAK,GAAG,SAARA,KAAQ,CAACiB,QAAD,EAAW1gB,MAAX,EAAmB2gB,cAAnB,EAAsC;AAClDJ,KAAG,CAACK,OAAJ,CAAY,cAAZ,EADkD,CAGlD;;AACA,+CAA4B5gB,MAA5B,EAJkD,CAMlD;;AACA2gB,gBAAc,CAACJ,GAAD,CAAd;AACA,kCAAwBA,GAAxB,EAA6BvgB,MAAM,CAAC6gB,iBAApC;AACA,0BAAgBN,GAAhB,EAAqBG,QAArB,EAA+B1gB,MAA/B;AAEAugB,KAAG,CAACO,GAAJ,CAAQ,SAAR,EAAmBC,8BAAe,aAAf,EAA8B;AAAEC,UAAM,EAAE;AAAV,GAA9B,CAAnB;AAEAT,KAAG,CAACU,EAAJ,CAAO,OAAP;AAAA;AAAA;AAAA;AAAA,+BAAgB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAER,2BAFQ;;AAAA;AAIdC,sCAASC,UAAT,GAAsBtkB,IAAtB,CAA2B,YAAM;AAC/B,kBAAIukB,MAAM,GAAGb,GAAG,CAACc,MAAJ,CAAW,IAAX,EAAiB,YAAM;AAClCC,uBAAO,CAACC,IAAR;AACAxkB,0BAAU,CAAC,YAAW;AACpBwjB,qBAAG,CAACiB,IAAJ,CAAS,aAAT;AACD,iBAFS,EAEP,GAFO,CAAV;AAGD,eALY,CAAb;AAMAjB,iBAAG,CAACU,EAAJ,CAAO,MAAP,EAAe,YAAM;AACnBG,sBAAM,CAACvL,KAAP,CAAa,YAAW;AACtByL,yBAAO,CAACC,IAAR,CAAa,YAAb;AACD,iBAFD;AAGD,eAJD;AAKD,aAZD;;AAJc;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAhB;AAkBD,CA/BD;;eAiCe;AAAEhB,KAAG,EAAHA,GAAF;AAAOE,UAAQ,EAARA,wBAAP;AAAiBhB,OAAK,EAALA;AAAjB,C;;;;;;;AC7Cf,iD;;;;;;;;;;;;;ACAA,IAAMzL,OAAO,GAAGhN,OAAhB;AAAyB;;AACzB,IAAMmN,QAAQ,GAAGC,QAAjB;AAA2B;;AAE3B,IAAMqN,2BAA2B,GAAG,SAA9BA,2BAA8B,CAAAzhB,MAAM,EAAI;AAC5C;AACAshB,SAAO,CAACzH,GAAR;AACAyH,SAAO,CAACzH,GAAR,0BAGErW,IAAI,CAACC,SAAL,CAAeuQ,OAAf,EAAwB,IAAxB,EAA8B,CAA9B,CAHF;AAKAsN,SAAO,CAACzH,GAAR;AACAyH,SAAO,CAACzH,GAAR,2BAGErW,IAAI,CAACC,SAAL,CAAe0Q,QAAf,EAAyB,IAAzB,EAA+B,CAA/B,CAHF;AAKAmN,SAAO,CAACzH,GAAR;AACAyH,SAAO,CAACzH,GAAR,CACE,uBADF,EAEErW,IAAI,CAACC,SAAL,CAAezD,MAAM,CAAC6gB,iBAAtB,EAAyC,IAAzC,EAA+C,CAA/C,CAFF;AAIAS,SAAO,CAACzH,GAAR;AAEA;AACD,CAtBD;;eAwBe4H,2B;;;;;;;;;;;;;;;;;;;;;AC3Bf;;AACA;;AAEA,IAAMzN,OAAO,GAAGhN,OAAhB;AAAyB;;AACzB,IAAM0a,SAAS,GAAGzhB,mBAAlB;AAAuC;;AAEvC,IAAM0hB,QAAQ;AAAA;AAAA;AAAA;AAAA;AAAA,+BAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AACTC,6BADS,GACW,KADX;;AAGTC,kCAHS,GAGgB,SAAzBA,sBAAyB,GAAM;AACnC,kBAAI,CAACD,iBAAL,EAAwB;AACtBE,oCAAQhG,GAAR,YAAgB9H,OAAO,CAACC,KAAxB,2BAAqDD,OAAO,CAAC+N,WAA7D;;AAEA,oBAAIL,SAAS,CAACM,UAAd,EACEF,oBAAQhG,GAAR,CAAY4F,SAAS,CAACrhB,OAAtB,EAA+BqhB,SAAS,CAACM,UAAzC;AACH;AACF,aAVc,EAYf;AACA;;;AAbe;AAAA,mBAcT,2BAAUhO,OAAV,EAAmB6N,sBAAnB,CAdS;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAH;;AAAA,kBAARF,QAAQ;AAAA;AAAA;AAAA,GAAd;;eAiBeA,Q;;;;;;;ACvBf,iD;;;;;;;;;;;;;;;;;;;;ACAA,IAAMM,SAAS;AAAA;AAAA;AAAA;AAAA;AAAA,+BAAG,iBAAOlgB,GAAP,EAAY8f,sBAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAGSjlB,KAAK,CAAC,mCAAD,EAAsC;AAChEoL,oBAAM,EAAE,KADwD;AAEhEC,qBAAO,EAAE;AACP,gCAAgB;AADT;AAFuD,aAAtC,CAHd;;AAAA;AAGRnL,oBAHQ;AAAA;AAAA,mBAUOA,QAAQ,CAACK,IAAT,EAVP;;AAAA;AAUR+kB,kBAVQ;AAWdZ,mBAAO,CAACzH,GAAR,gCAAoCrW,IAAI,CAACC,SAAL,CAAeye,MAAf,CAApC;;AACA,gBAAIA,MAAM,CAAC7Z,EAAP,CAAUuJ,UAAV,CAAqB,WAArB,CAAJ,EAAuC;AACrC0P,qBAAO,CAACzH,GAAR,oCAC8B9X,GAAG,CAACkS,KADlC,iBAC8ClS,GAAG,CAACggB,WADlD;AAGAF,oCAAsB;AACvB,aALD,MAKO;AACLP,qBAAO,CAACzH,GAAR;AACD;;AAnBa;AAAA;;AAAA;AAAA;AAAA;AAqBdyH,mBAAO,CAACzH,GAAR;AAGAgI,kCAAsB;;AAxBR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAH;;AAAA,kBAATI,SAAS;AAAA;AAAA;AAAA,GAAf;;eA8BeA,S;;;;;;;;;;;;;;;;;AC9Bf;;AAEA,IAAMjO,OAAO,GAAGhN,OAAhB;AAAyB;;AAClB,IAAMyZ,QAAQ,GAAGD,sBAAU2B,iBAAV,EAAjB;;;;AAEP,IAAMC,cAAc,GAAG,SAAjBA,cAAiB,CAAC7B,GAAD,EAAMM,iBAAN,EAA4B;AACjDwB,kBAAgB,CAAC5B,QAAD,EAAWF,GAAX,CAAhB;AAEAA,KAAG,CAAC+B,GAAJ,CAAQzB,iBAAR,EAA2B,UAAC0B,GAAD,EAAMC,GAAN,EAAc;AACvC,QAAMC,MAAM,GAAGzO,OAAO,CAAC0O,GAAvB;AAEAjC,YAAQ,CAACkC,GAAT,CAAaJ,GAAb,EAAkBC,GAAlB,EAAuB;AAAEC,YAAM,EAANA,MAAF;AAAUG,kBAAY,EAAE;AAAxB,KAAvB;AACAnC,YAAQ,CAACQ,EAAT,CAAY,OAAZ,EAAqB,UAAA4B,CAAC,EAAI;AACxB;AACAvB,aAAO,CAACzH,GAAR,6BACuB0I,GAAG,CAACre,IAD3B,uBAC4Cqe,GAAG,CAAC7hB,QADhD,0BACwEmiB,CADxE;AAGA;AACD,KAND;AAOD,GAXD;AAYD,CAfD;;AAiBA,IAAMR,gBAAgB,GAAG,SAAnBA,gBAAmB,CAAC5B,QAAD,EAAWF,GAAX,EAAmB;AAC1C;AACAA,KAAG,CAAC+B,GAAJ,CAAQ,CAAC,iBAAD,EAAoB,cAApB,CAAR,EAA6C,UAACC,GAAD,EAAMC,GAAN,EAAc;AACzD;AACA,QAAMC,MAAM,GAAGzO,OAAO,CAAC/M,GAAvB;AACAqa,WAAO,CAACzH,GAAR,mCAAuC7F,OAAO,CAACC,KAA/C;AACAwM,YAAQ,CAACkC,GAAT,CAAaJ,GAAb,EAAkBC,GAAlB,EAAuB;AACrBC,YAAM,EAANA,MADqB;AAErBG,kBAAY,EAAE;AAFO,KAAvB;AAIAnC,YAAQ,CAACQ,EAAT,CAAY,OAAZ,EAAqB,UAAA4B,CAAC,EAAI;AACxB;AACAvB,aAAO,CAACzH,GAAR,6BACuB0I,GAAG,CAACre,IAD3B,uBAC4Cqe,GAAG,CAAC7hB,QADhD,0BACwEmiB,CADxE;AAGA;AACD,KAND;AAOD,GAfD;AAgBD,CAlBD;;eAoBeT,c;;;;;;;AC1Cf,iD;;;;;;;;;;;;;;;;;;;;ACAA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AAEA;;AAEA;;AACA;;AAEA;;AACA;;AAEA;;AACA;;AAEA;;AAQA;;AACA;;AAEA,IAAMU,kBAAkB,GAAG,SAArBA,kBAAqB,CAAC9rB,KAAD,EAAQ8F,QAAR,EAAkBimB,WAAlB,EAA+BlkB,MAA/B,EAA0C;AACnE,MAAI7H,KAAJ,EAAW;AACT;AACA,QAAI;AACFsqB,aAAO,CAACzH,GAAR,CAAY,qBAAZ;AACA,UAAI1D,YAAY,GAAG,kCAAmBnf,KAAnB,CAAnB;AACAmf,kBAAY,GAAGkE,KAAK,CAAC9O,IAAN,CAAW4K,YAAY,IAAI,EAA3B,CAAf;AACAmL,aAAO,CAACzH,GAAR,+BAAmC1D,YAAY,CAACrY,MAAhD;AAEA,UAAI8Y,WAAW,GAAG,iCAAkB5f,KAAlB,EAAyB4R,IAAzB,EAAlB;AACA,UAAIyN,aAAa,GAAG,mCAAoBrf,KAApB,CAApB;AACA,UAAIgsB,eAAe,GAAGpM,WAAW,CAAC7T,GAAZ,CAAgB,UAAAkgB,OAAO,EAAI;AAC/C,yBAAU5M,aAAV,cAA2B4M,OAA3B;AACD,OAFqB,CAAtB;AAGA,UAAMC,UAAU,iDAAO/M,YAAP,uCAAwB6M,eAAxB,EAAhB;AACA,UAAMG,gBAAgB,GAAG,4BAASD,UAAT,CAAzB;AAEApmB,cAAQ,CAACsmB,MAAT,CACE,eADF,aAEML,WAAW,CAAC1U,IAFlB,kBAE8B8U,gBAAgB,CAACtR,IAAjB,CAAsB,GAAtB,CAF9B;AAIAyP,aAAO,CAACzH,GAAR,2BAA+BsJ,gBAAgB,CAACtR,IAAjB,CAAsB,GAAtB,CAA/B;AACAyP,aAAO,CAACzH,GAAR,2BAA+BqJ,UAAU,CAACrR,IAAX,CAAgB,GAAhB,CAA/B;AAEAwR,qCAA+B,CAACrsB,KAAD,EAAQ8F,QAAR,EAAkB+B,MAAlB,CAA/B;AAEA/B,cAAQ,CAACwmB,SAAT,CAAmB,mBAAnB,EAAwC,cAAxC;AACD,KAxBD,CAwBE,OAAOT,CAAP,EAAU;AACVvB,aAAO,CAACzH,GAAR,CAAY,sBAAZ,EAAoCgJ,CAAC,CAACjX,OAAtC,EADU,CAEV;AACD;AACF;AACF,CAhCD;;AAkCA,IAAMyX,+BAA+B,GAAG,SAAlCA,+BAAkC,CAACrsB,KAAD,EAAQ8F,QAAR,EAAkC;AAAA,MAAhB+B,MAAgB,uEAAP,EAAO;;AACxE,MAAI7H,KAAJ,EAAW;AACT,QAAI;AACF,UAAMusB,UAAU,GAAG,gCAAiBvsB,KAAjB,CAAnB;AACA,UAAM+I,OAAO,GAAG,oCAAqB/I,KAArB,CAAhB;AAFE,UAGMwsB,YAHN,GAGsC3kB,MAHtC,CAGM2kB,YAHN;AAAA,UAGoB3Z,aAHpB,GAGsChL,MAHtC,CAGoBgL,aAHpB,EAIF;;AACA,UAAI4Z,SAAS,GAAGpJ,KAAK,CAAC9O,IAAN,CAAYiY,YAAY,IAAIA,YAAY,CAACzjB,OAAD,CAA7B,IAA2C,EAAtD,CAAhB;;AACA,UACEwjB,UAAU,IACVA,UAAU,CAACtsB,KAAX,CAAiB,CAAC,gBAAD,EAAmB,iBAAnB,CAAjB,CADA,IAEA4S,aAFA,IAGAA,aAAa,CAAC9J,OAAD,CAJf,EAKE;AACA0jB,iBAAS,iDAAOA,SAAP,uCAAqB5Z,aAAa,CAAC9J,OAAD,CAAlC,EAAT;AACD;;AACDjD,cAAQ,CAACsmB,MAAT,CAAgB,2BAAhB,EAA6CK,SAAS,CAAC5R,IAAV,CAAe,GAAf,CAA7C;AACD,KAfD,CAeE,OAAOgR,CAAP,EAAU;AACVvB,aAAO,CAACzH,GAAR,CAAY,oCAAZ;AACAyH,aAAO,CAACzH,GAAR,CAAYgJ,CAAZ;AACD;AACF;AACF,CAtBD;;AAwBA,IAAMa,YAAY,GAAG,SAAfA,YAAe,CAAAxf,IAAI;AAAA,SAAIyf,eAAGD,YAAH,CAAgBxf,IAAhB,EAAsB,MAAtB,CAAJ;AAAA,CAAzB;;AAEA,IAAM0f,cAAc,GAAG,SAAjBA,cAAiB,OAAuBC,KAAvB,EAAiC;AAAA,MAA9BC,KAA8B,QAA9BA,KAA8B;AAAA,MAAvBC,SAAuB,QAAvBA,SAAuB;AACtD,MAAMC,MAAM,GAAG,EAAf;;AACA,MAAI;AACFA,UAAM,CAACF,KAAP,GAAetgB,IAAI,CAAC0B,KAAL,CACbwe,YAAY,CAACI,KAAK,CAACvG,OAAN,CAAc,SAAd,EAAyBsG,KAAK,cAAOA,KAAP,IAAiB,EAA/C,CAAD,CADC,CAAf;AAGD,GAJD,CAIE,gBAAM,CACN;AACD;;AACD,MAAI;AACFG,UAAM,CAACD,SAAP,GAAmB;AACjBE,kBAAY,EAAEP,YAAY,CACxBK,SAAS,CAACG,IAAV,CAAe3G,OAAf,CAAuB,SAAvB,EAAkCsG,KAAK,cAAOA,KAAP,IAAiB,EAAxD,CADwB,CADT;AAIjBM,wBAAkB,EAAET,YAAY,CAC9BK,SAAS,UAAT,CAAiBxG,OAAjB,CAAyB,SAAzB,EAAoCsG,KAAK,cAAOA,KAAP,IAAiB,EAA1D,CAD8B,CAJf;AAOjBO,0BAAoB,EAAEV,YAAY,CAChCK,SAAS,CAACM,QAAV,CAAmB9G,OAAnB,CAA2B,SAA3B,EAAsCsG,KAAK,cAAOA,KAAP,IAAiB,EAA5D,CADgC;AAPjB,KAAnB;AAWD,GAZD,CAYE,iBAAM,CACN;AACD;;AACD,SAAOG,MAAP;AACD,CAzBD;;AA2BA,IAAMM,MAAM,GAAG,SAATA,MAAS,CAAC/D,GAAD,EAAMG,QAAN,EAAgB1gB,MAAhB,EAA2B;AAAA,MAEtC2J,MAFsC,GAapC3J,MAboC,CAEtC2J,MAFsC;AAAA,MAGtC4a,YAHsC,GAapCvkB,MAboC,CAGtCukB,YAHsC;AAAA,MAItCC,SAJsC,GAapCxkB,MAboC,CAItCwkB,SAJsC;AAAA,MAKtC/a,UALsC,GAapCzJ,MAboC,CAKtCyJ,UALsC;AAAA,MAMtCsZ,WANsC,GAapC/iB,MAboC,CAMtC+iB,WANsC;AAAA,MAOtC0B,WAPsC,GAapCzkB,MAboC,CAOtCykB,WAPsC;AAAA,MAQtCC,mBARsC,GAapC1kB,MAboC,CAQtC0kB,mBARsC;AAAA,MAStCC,YATsC,GAapC3kB,MAboC,CAStC2kB,YATsC;AAAA,MAUtC9a,aAVsC,GAapC7J,MAboC,CAUtC6J,aAVsC;AAAA,MAWtC2Z,YAXsC,GAapCxjB,MAboC,CAWtCwjB,YAXsC;AAAA,MAYtCoB,eAZsC,GAapC5kB,MAboC,CAYtC4kB,eAZsC;AAexC,MAAMC,OAAO,GAAG;AACd,eAASjB,cAAc,CAAC5jB,MAAD,CADT;AAEd8kB,UAAM,EAAElB,cAAc,CAAC5jB,MAAD,EAAS,QAAT,CAFR;AAGd+kB,UAAM,EAAEnB,cAAc,CAAC5jB,MAAD,EAAS,QAAT;AAHR,GAAhB;AAKA,MAAI,CAAC6kB,OAAO,WAAR,IAAoBA,OAAO,WAAP,KAAoB,EAA5C,EACEA,OAAO,WAAP,GAAkBA,OAAO,CAACC,MAAR,IAAkBD,OAAO,CAACE,MAA5C;AAEF,MAAMC,WAAW,GAAGxhB,IAAI,CAAC0B,KAAL,CAAWye,eAAGD,YAAH,CAAgBe,WAAhB,EAA6B,MAA7B,CAAX,CAApB;AAEAlE,KAAG,CAAClmB,GAAJ,CAAQ,IAAR,EAAc,UAACkJ,OAAD,EAAUzG,QAAV,EAAoB6F,IAApB,EAA6B;AACzC,QAAIY,OAAO,CAAC0hB,WAAR,CAAoBrT,UAApB,CAA+B,UAA/B,CAAJ,EAAgD,OAAOjP,IAAI,EAAX;AADP,QAEjCjG,GAFiC,GAEzB6G,OAFyB,CAEjC7G,GAFiC,EAIzC;;AACA,QAAIwoB,YAAY,GAAG,EAAnB;AAEA,QAAMC,mBAAmB,GAAG5hB,OAAO,CAAC1B,KAAR,CAAcujB,OAAd,GACxB7hB,OAAO,CAAC1B,KAAR,CAAcujB,OAAd,CAAsB9jB,WAAtB,EADwB,GAExB,OAFJ,CAPyC,CAWzC;;AACA,QAAM+jB,WAAW,GAAGV,YAAY,CAACrQ,QAAb,CAAsB/Q,OAAO,CAACW,IAA9B,CAApB;AAEA,QAAMohB,wBAAwB,GAAG/hB,OAAO,CAAC1B,KAAR,CAAc0jB,KAAd,GAC7BhiB,OAAO,CAAC1B,KAAR,CAAc0jB,KAAd,CAAoBjkB,WAApB,EAD6B,GAE7B,OAFJ;AAIA,QAAMkkB,oBAAoB,GAAGjiB,OAAO,CAAC1B,KAAR,CAAcwiB,QAAd,GACzB9gB,OAAO,CAAC1B,KAAR,CAAcwiB,QAAd,CAAuB/iB,WAAvB,EADyB,GAEzB,OAFJ;AAIA,QAAMmkB,kBAAkB,GAAGliB,OAAO,CAAC1B,KAAR,aACvB0B,OAAO,CAAC1B,KAAR,WAAqBP,WAArB,EADuB,GAEvB,OAFJ;AAIA,QAAI+jB,WAAW,IAAIF,mBAAmB,KAAK,MAA3C,EACED,YAAY,CAACQ,OAAb,GAAuBC,qBAAcD,OAArC;AACF,QAAIJ,wBAAwB,KAAK,MAAjC,EACEJ,YAAY,CAACU,KAAb,GAAqBD,qBAAcC,KAAnC;AACF,QAAIJ,oBAAoB,KAAK,MAA7B,EACEN,YAAY,CAACW,QAAb,GAAwBF,qBAAcE,QAAtC;AACF,QAAIJ,kBAAkB,KAAK,MAA3B,EACEP,YAAY,CAACY,MAAb,GAAsBH,qBAAcG,MAApC;AAEF,QAAMC,OAAO,GAAG,EAAhB;AACA,QAAI5S,MAAM,GAAG,GAAb,CApCyC,CAsCzC;;AACA,QAAMuC,KAAK,GAAG,uBACZ6O,YADY,EAEZ,uBAAO,EAAP,CAFY,EAGZ,sBAAQ;AAAEyB,oBAAc,EAAE,CAACtpB,GAAD;AAAlB,KAAR,CAHY,CAAd,CAvCyC,CA4CzC;AAEA;;AACA,QAAMupB,yBAAyB,GAAG,4DAChC1iB,OAAO,CAAC7C,QADwB,CAAlC;AAIAgV,SAAK,CAACI,QAAN,CACE,+BAAiBvS,OAAO,CAAC1B,KAAR,CAAcU,aAAd,IAA+B0jB,yBAAhD,CADF;AAGAvQ,SAAK,CAACI,QAAN,CAAe,yBAAWkP,WAAW,CAAChS,SAAvB,EAAkCgS,WAAW,CAAC/R,OAA9C,CAAf;AAEA,QAAMlT,OAAO,GAAG,6BAAYwD,OAAO,CAAC7C,QAApB,EAA8B6C,OAAO,CAAC1B,KAAtC,CAAhB;AAEA,QAAMhD,MAAM,GAAGgL,aAAa,IAAIA,aAAa,CAAC9J,OAAD,CAA7C;AACA2V,SAAK,CAACI,QAAN,CAAe,gCAAkB/V,OAAlB,EAA2BlB,MAA3B,CAAf;AAEA,QAAMqnB,OAAO,GAAG,EAAhB;;AAEA,QAAMC,GAAG,GACP,gCAAC,yBAAD,CAAU,OAAV;AAAkB,YAAM,EAAE,gBAAAC,UAAU;AAAA,eAAIF,OAAO,CAAC/tB,IAAR,CAAaiuB,UAAb,CAAJ;AAAA;AAApC,OACE,gCAAC,oBAAD;AAAe,WAAK,EAAE1Q;AAAtB,OACE,gCAAC,4BAAD;AAAc,aAAO,EAAEqQ,OAAvB;AAAgC,cAAQ,EAAErpB;AAA1C,OACE,gCAAC,QAAD;AAAU,YAAM,EAAEiN,MAAlB;AAA0B,gBAAU,EAAEF;AAAtC,MADF,CADF,CADF,CADF;AAUA;;;AACA6X,WAAO,CAACzH,GAAR,uBACiBtW,OAAO,CAACW,IADzB,wBAC2CX,OAAO,CAAC7C,QADnD,6BAC8EulB,yBAD9E;AAGA;;AAEA,QAAMlC,SAAS,GAAGc,OAAO,WAAP,CAAgBd,SAAhB,IAA6Bc,OAAO,CAACC,MAAR,CAAef,SAA9D;AACA,QAAMD,KAAK,GACTe,OAAO,CAACE,MAAR,CAAejB,KAAf,IAAwBe,OAAO,CAACC,MAAR,CAAehB,KAAvC,GACI,6BACE9iB,MAAM,CAACmB,OAAP,CAAe0iB,OAAO,CAACE,MAAR,CAAejB,KAA9B,EAAqC/gB,GAArC,CAAyC;AAAA;AAAA,UAAEsjB,GAAF;AAAA,UAAOC,KAAP;;AAAA,aAAkB,CACzDD,GADyD,EAEzDxB,OAAO,CAACC,MAAR,CAAehB,KAAf,CAAqBuC,GAArB,kDACQC,KADR,uCACkBzB,OAAO,CAACC,MAAR,CAAehB,KAAf,CAAqBuC,GAArB,CADlB,KAEIC,KAJqD,CAAlB;AAAA,KAAzC,CADF,CADJ,GASIzB,OAAO,WAAP,CAAgBf,KAVtB;AAhFyC,QA6FvCG,YA7FuC,GAgGrCF,SAhGqC,CA6FvCE,YA7FuC;AAAA,QA8FvCG,oBA9FuC,GAgGrCL,SAhGqC,CA8FvCK,oBA9FuC;AAAA,QA+FvCD,kBA/FuC,GAgGrCJ,SAhGqC,CA+FvCI,kBA/FuC,EAkGzC;;AACA,QAAIe,YAAY,CAACQ,OAAjB,EAA0B;AACxB;AACA,kCAAeS,GAAf;AAEA,UAAMI,aAAa,8CAAnB;AACA,UAAMC,cAAc,GAAG,yBAAW1C,KAAX,EAAkBoC,OAAlB,CAAvB;AACA,UAAMO,oBAAoB,GAAGD,cAAc,CACxCzjB,GAD0B,CACtB,UAAAihB,MAAM,EAAI;AACb,YAAIA,MAAM,CAAC0C,UAAP,CAAkBpS,QAAlB,CAA2B,UAA3B,CAAJ,EACE,OAAOoQ,mBAAmB,2CACQV,MAAM,CAAC0C,UADf,oBAEtB,IAFJ;AAGF,gDAAgC1C,MAAM,CAAC0C,UAAvC;AACD,OAP0B,EAQ1BpqB,MAR0B,CAQnB,UAAAsY,CAAC;AAAA,eAAIA,CAAJ;AAAA,OARkB,EAS1B/C,IAT0B,CASrB,EATqB,CAA7B;AAUA,UAAM8U,mBAAmB,GAAG1C,YAAY,CACrC1G,OADyB,CACjB,WADiB,EACJ,EADI,EAEzBA,OAFyB,CAEjB,2BAFiB,EAEY,EAFZ,EAGzBA,OAHyB,CAGjB,kBAHiB,EAGG,EAHH,EAIzBA,OAJyB,CAIjB,SAJiB,EAIN,EAJM,EAKzBA,OALyB,CAKjB,qBALiB,EAKMkJ,oBALN,EAMzBlJ,OANyB,CAMjB,gBANiB,EAMCgJ,aAND,CAA5B;AAOAzpB,cAAQ,CAACwmB,SAAT,CAAmB,mBAAnB,EAAwC,cAAxC;AACAxmB,cAAQ,CAACqW,MAAT,CAAgBA,MAAhB,EAAwByT,IAAxB,CAA6BD,mBAA7B;AACD,KA5HwC,CA8HzC;;;AACA,QAAI,CAACzB,YAAY,CAACQ,OAAlB,EAA2B;AACzBhQ,WAAK,CACFC,OADH,CACW,uBAAS6O,SAAT,CADX,EAEGqC,SAFH,GAGGhqB,IAHH,CAGQ,YAAM;AACV,YAAMiqB,KAAK,GAAG,IAAIC,kCAAJ,EAAd;AAEA,YAAM7C,IAAI,GAAG,4BAAe4C,KAAK,CAACE,aAAN,CAAoBb,GAApB,CAAf,CAAb;;AAEA,YAAMc,MAAM,GAAGC,wBAAOC,YAAP,EAAf;;AACAD,gCAAOE,MAAP;;AACA,YAAIC,KAAK,GAAGJ,MAAM,CAACI,KAAP,CAAa3jB,QAAb,EAAZ;AACA,YAAM4jB,QAAQ,GAAGL,MAAM,CAACM,IAAP,CAAY7jB,QAAZ,EAAjB;;AAEA,YAAIqiB,OAAO,CAAC5S,MAAR,KAAmB,GAAvB,EAA4B;AAC1BA,gBAAM,GAAG,GAAT;AACAkU,eAAK,GAAG,mCAAR;AACD;;AAED,YAAItB,OAAO,CAACrpB,GAAZ,EAAiB;AACf,iBAAOI,QAAQ,CAAC8N,QAAT,CAAkB,GAAlB,EAAuBmb,OAAO,CAACrpB,GAA/B,CAAP;AACD;;AAED,YAAM8qB,UAAU,GAAG9R,KAAK,CAAC+R,QAAN,EAAnB;AAEA,YAAMC,SAAS,GAAGZ,KAAK,CAACa,YAAN,EAAlB;AAEA,YAAM9C,OAAO,GAAG,yBAAWf,KAAX,EAAkBoC,OAAlB,CAAhB;AAEA,YAAM0B,aAAa,GAAG/C,OAAO,CAC1B9hB,GADmB,CACf,UAAAihB,MAAM,EAAI;AACb,cAAIA,MAAM,CAAC0C,UAAP,CAAkBpS,QAAlB,CAA2B,UAA3B,CAAJ,EACE,OAAOoQ,mBAAmB,2CACQV,MAAM,CAAC0C,UADf,oBAEtB,IAFJ;AAGF,kDAAgC1C,MAAM,CAAC0C,UAAvC;AACD,SAPmB,EAQnBpqB,MARmB,CAQZ,UAAAsY,CAAC;AAAA,iBAAIA,CAAJ;AAAA,SARW,EASnB/C,IATmB,CASd,EATc,CAAtB;AAWA,YAAIgW,mBAAmB,GAAG,EAA1B;;AACA,YAAI9B,OAAO,CAAC5S,MAAR,KAAmB,GAAvB,EAA4B;AAC1B,cAAI+R,YAAY,CAACU,KAAjB,EAAwB;AACtBiC,+BAAmB,GAAG,qCAAUL,UAAV,CAAtB;AACA1E,8BAAkB,CAAC0E,UAAD,EAAa1qB,QAAb,EAAuBimB,WAAvB,EAAoC;AACpDlZ,2BAAa,EAAbA,aADoD;AAEpD2Z,0BAAY,EAAZA;AAFoD,aAApC,CAAlB;AAIA1mB,oBAAQ,CAACqW,MAAT,CAAgBA,MAAhB,EAAwBhW,IAAxB,CAA6B0qB,mBAA7B;AACA,mBAAO,IAAP;AACD;;AACD,cAAI,CAACjD,eAAL,EAAsB;AACpBiD,+BAAmB,GAAG,qCAAUL,UAAV,CAAtB;AACAK,+BAAmB,yCAAkCA,mBAAlC,cAAnB;AACD;AACF;;AACD,YAAI9B,OAAO,CAAC5S,MAAR,KAAmB,GAAvB,EAA4B;AAC1B+R,sBAAY,CAACY,MAAb,GAAsBH,qBAAcG,MAApC;AACD,SAtDS,CAwDV;;;AACA,YAAIgC,YAAY,GAAG,EAAnB,CAzDU,CA2DV;;AACA,YAAI5C,YAAY,CAACW,QAAb,IAAyBX,YAAY,CAACY,MAA1C,EAAkD;AAChDhD,4BAAkB,CAAC0E,UAAD,EAAa1qB,QAAb,EAAuBimB,WAAvB,EAAoC;AACpDlZ,yBAAa,EAAbA,aADoD;AAEpD2Z,wBAAY,EAAZA;AAFoD,WAApC,CAAlB;AAIAsE,sBAAY,GAAG,iCAAgBJ,SAAhB,IAA6BxD,IAA5C;AACD,SAlES,CAoEV;;;AACA,YAAIgB,YAAY,CAACW,QAAb,IAAyB,CAACX,YAAY,CAACY,MAA3C,EAAmD;AACjDgC,sBAAY,GAAG1D,oBAAoB,CAChC7G,OADY,CACJ,WADI,EACS8J,KADT,EAEZ9J,OAFY,CAEJ,2BAFI,EAEyB+J,QAFzB,EAGZ/J,OAHY,CAGJ,kBAHI,EAGgB,iCAAgBmK,SAAhB,CAHhB,EAIZnK,OAJY,CAIJ,SAJI,EAIO2G,IAJP,EAKZ3G,OALY,CAKJ,qBALI,EAKmBqK,aALnB,EAMZrK,OANY,CAMJ,gBANI,EAMcsK,mBANd,CAAf;AAOD,SA7ES,CA+EV;;;AACA,YAAI,CAAC3C,YAAY,CAACW,QAAd,IAA0BX,YAAY,CAACY,MAA3C,EAAmD;AACjDgC,sBAAY,GAAG3D,kBAAkB,CAC9B5G,OADY,CACJ,WADI,EACS8J,KADT,EAEZ9J,OAFY,CAEJ,2BAFI,EAEyB+J,QAFzB,EAGZ/J,OAHY,CAGJ,kBAHI,EAGgB,iCAAgBmK,SAAhB,CAHhB,EAIZnK,OAJY,CAIJ,SAJI,EAIO2G,IAJP,EAKZ3G,OALY,CAKJ,qBALI,EAKmB,EALnB,CAAf;AAMD,SAvFS,CAyFV;;;AACA,YAAI,CAAC2H,YAAY,CAACW,QAAd,IAA0B,CAACX,YAAY,CAACY,MAA5C,EAAoD;AAClDgC,sBAAY,GAAG7D,YAAY,CACxB1G,OADY,CACJ,WADI,EACS8J,KADT,EAEZ9J,OAFY,CAEJ,2BAFI,EAEyB+J,QAFzB,EAGZ/J,OAHY,CAGJ,kBAHI,EAGgBmK,SAHhB,EAIZnK,OAJY,CAIJ,SAJI,EAIO2G,IAJP,EAKZ3G,OALY,CAKJ,qBALI,EAKmBqK,aALnB,EAMZrK,OANY,CAMJ,gBANI,EAMcsK,mBANd,CAAf;AAOD;;AACD/E,0BAAkB,CAAC0E,UAAD,EAAa1qB,QAAb,EAAuBimB,WAAvB,EAAoC;AACpDlZ,uBAAa,EAAbA,aADoD;AAEpD2Z,sBAAY,EAAZA;AAFoD,SAApC,CAAlB;;AAIA,YAAI;AACF1mB,kBAAQ,CAACqW,MAAT,CAAgBA,MAAhB,EAAwByT,IAAxB,CAA6BkB,YAA7B;AACD,SAFD,CAEE,OAAOC,GAAP,EAAY;AACZ;AACAzG,iBAAO,CAACzH,GAAR,CAAYkO,GAAG,CAACnc,OAAhB;AACD;AACF,OAhHH,WAiHS,UAAAmc,GAAG,EAAI;AACZ;AACA;;AACA;AACAzG,eAAO,CAACzH,GAAR,CAAYkO,GAAZ;AACA;;AACAjrB,gBAAQ,CACLqW,MADH,CACU,GADV,EAEGyT,IAFH,iCAG6BmB,GAAG,CAACjO,KAHjC,oBAGgDtW,IAAI,CAACC,SAAL,CAAeskB,GAAf,CAHhD;AAKD,OA5HH;AA6HA,kCAAe5B,GAAf;AAEAzQ,WAAK,CAACG,KAAN;AACD;AACF,GAjQD;AAkQD,CA3RD;;eA6ReyO,M;;;;;;;ACxZf,+B;;;;;;ACAA,iD;;;;;;ACAA,iD;;;;;;ACAA,iD;;;;;;ACAA,iD;;;;;;ACAA,iD;;;;;;ACAA,iD;;;;;;ACAA,iD;;;;;;;;;;;;;ACAO,IAAMqB,aAAa,GAAG;AAC3BD,SAAO,EAAE,SADkB;AAE3BI,QAAM,EAAE,QAFmB;AAG3BD,UAAQ,EAAE,UAHiB;AAI3BD,OAAK,EAAE;AAJoB,CAAtB;;;;;;;;;;;;;;;ACAA,IAAMoC,QAAQ,GAAG,SAAXA,QAAW,CAAA/mB,IAAI,EAAI;AAC9B,MAAMgnB,MAAM,GAAG5H,mBAAO,CAAC,EAAD,CAAtB;;AACA,MAAM6H,UAAU,GAAG,EAAnB;AACAjnB,MAAI,CAACoc,OAAL,CAAa,UAAA8K,QAAQ,EAAI;AACvB,QAAMC,WAAW,GAAGC,MAAM,CAAC9c,IAAP,CAAY4c,QAAQ,CAAC7mB,WAAT,EAAZ,EAAoC,OAApC,CAApB;AAEA,QAAMgnB,MAAM,GAAGL,MAAM,CAACM,GAAP,CAAWH,WAAX,EAAwB,GAAxB,EAA6B1kB,QAA7B,CAAsC,EAAtC,CAAf;AACA,QAAM8kB,WAAW,GAAGF,MAAM,CACvBjjB,KADiB,CACX,iBADW,EAEjBojB,OAFiB,GAGjB5W,IAHiB,CAGZ,EAHY,CAApB;AAKA,QAAM6W,YAAY,GAAGL,MAAM,CAAC9c,IAAP,CAAYid,WAAZ,EAAyB,KAAzB,CAArB;AAEAN,cAAU,CAAC/vB,IAAX,CAAgBuwB,YAAY,CAAChlB,QAAb,CAAsB,QAAtB,EAAgCqN,SAAhC,CAA0C,CAA1C,EAA6C,CAA7C,CAAhB;AACD,GAZD;AAaA,SAAOmX,UAAP;AACD,CAjBM;;;;;;;;ACAP,iD","file":"zengenti-isomorphic-base.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"@babel/runtime/helpers/interopRequireDefault\"), require(\"@babel/runtime/regenerator\"), require(\"immutable\"), require(\"@babel/runtime/helpers/defineProperty\"), require(\"react\"), require(\"@babel/runtime/helpers/asyncToGenerator\"), require(\"@babel/runtime/helpers/interopRequireWildcard\"), require(\"@babel/runtime/helpers/classCallCheck\"), require(\"@babel/runtime/helpers/createClass\"), require(\"query-string\"), require(\"react-redux\"), require(\"@babel/runtime/helpers/toConsumableArray\"), require(\"@redux-saga/core/effects\"), require(\"react-router-dom\"), require(\"react-hot-loader\"), require(\"prop-types\"), require(\"js-cookie\"), require(\"@babel/runtime/helpers/slicedToArray\"), require(\"@babel/runtime/helpers/typeof\"), require(\"contensis-delivery-api\"), require(\"react-router-config\"), require(\"react-loadable\"), require(\"isomorphic-fetch\"), require(\"history\"), require(\"redux\"), require(\"redux-immutable\"), require(\"redux-thunk\"), require(\"redux-saga\"), require(\"loglevel\"), require(\"@babel/runtime/helpers/construct\"), require(\"express\"), require(\"evil-dns\"), require(\"http-proxy\"), require(\"react-dom/server\"), require(\"react-loadable/webpack\"), require(\"styled-components\"), require(\"react-helmet\"), require(\"serialize-javascript\"), require(\"minify-css-string\"), require(\"fromentries\"), require(\"xxhashjs\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"@babel/runtime/helpers/interopRequireDefault\", \"@babel/runtime/regenerator\", \"immutable\", \"@babel/runtime/helpers/defineProperty\", \"react\", \"@babel/runtime/helpers/asyncToGenerator\", \"@babel/runtime/helpers/interopRequireWildcard\", \"@babel/runtime/helpers/classCallCheck\", \"@babel/runtime/helpers/createClass\", \"query-string\", \"react-redux\", \"@babel/runtime/helpers/toConsumableArray\", \"@redux-saga/core/effects\", \"react-router-dom\", \"react-hot-loader\", \"prop-types\", \"js-cookie\", \"@babel/runtime/helpers/slicedToArray\", \"@babel/runtime/helpers/typeof\", \"contensis-delivery-api\", \"react-router-config\", \"react-loadable\", \"isomorphic-fetch\", \"history\", \"redux\", \"redux-immutable\", \"redux-thunk\", \"redux-saga\", \"loglevel\", \"@babel/runtime/helpers/construct\", \"express\", \"evil-dns\", \"http-proxy\", \"react-dom/server\", \"react-loadable/webpack\", \"styled-components\", \"react-helmet\", \"serialize-javascript\", \"minify-css-string\", \"fromentries\", \"xxhashjs\"], factory);\n\telse {\n\t\tvar a = typeof exports === 'object' ? factory(require(\"@babel/runtime/helpers/interopRequireDefault\"), require(\"@babel/runtime/regenerator\"), require(\"immutable\"), require(\"@babel/runtime/helpers/defineProperty\"), require(\"react\"), require(\"@babel/runtime/helpers/asyncToGenerator\"), require(\"@babel/runtime/helpers/interopRequireWildcard\"), require(\"@babel/runtime/helpers/classCallCheck\"), require(\"@babel/runtime/helpers/createClass\"), require(\"query-string\"), require(\"react-redux\"), require(\"@babel/runtime/helpers/toConsumableArray\"), require(\"@redux-saga/core/effects\"), require(\"react-router-dom\"), require(\"react-hot-loader\"), require(\"prop-types\"), require(\"js-cookie\"), require(\"@babel/runtime/helpers/slicedToArray\"), require(\"@babel/runtime/helpers/typeof\"), require(\"contensis-delivery-api\"), require(\"react-router-config\"), require(\"react-loadable\"), require(\"isomorphic-fetch\"), require(\"history\"), require(\"redux\"), require(\"redux-immutable\"), require(\"redux-thunk\"), require(\"redux-saga\"), require(\"loglevel\"), require(\"@babel/runtime/helpers/construct\"), require(\"express\"), require(\"evil-dns\"), require(\"http-proxy\"), require(\"react-dom/server\"), require(\"react-loadable/webpack\"), require(\"styled-components\"), require(\"react-helmet\"), require(\"serialize-javascript\"), require(\"minify-css-string\"), require(\"fromentries\"), require(\"xxhashjs\")) : factory(root[\"@babel/runtime/helpers/interopRequireDefault\"], root[\"@babel/runtime/regenerator\"], root[\"immutable\"], root[\"@babel/runtime/helpers/defineProperty\"], root[\"react\"], root[\"@babel/runtime/helpers/asyncToGenerator\"], root[\"@babel/runtime/helpers/interopRequireWildcard\"], root[\"@babel/runtime/helpers/classCallCheck\"], root[\"@babel/runtime/helpers/createClass\"], root[\"query-string\"], root[\"react-redux\"], root[\"@babel/runtime/helpers/toConsumableArray\"], root[\"@redux-saga/core/effects\"], root[\"react-router-dom\"], root[\"react-hot-loader\"], root[\"prop-types\"], root[\"js-cookie\"], root[\"@babel/runtime/helpers/slicedToArray\"], root[\"@babel/runtime/helpers/typeof\"], root[\"contensis-delivery-api\"], root[\"react-router-config\"], root[\"react-loadable\"], root[\"isomorphic-fetch\"], root[\"history\"], root[\"redux\"], root[\"redux-immutable\"], root[\"redux-thunk\"], root[\"redux-saga\"], root[\"loglevel\"], root[\"@babel/runtime/helpers/construct\"], root[\"express\"], root[\"evil-dns\"], root[\"http-proxy\"], root[\"react-dom/server\"], root[\"react-loadable/webpack\"], root[\"styled-components\"], root[\"react-helmet\"], root[\"serialize-javascript\"], root[\"minify-css-string\"], root[\"fromentries\"], root[\"xxhashjs\"]);\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(global, function(__WEBPACK_EXTERNAL_MODULE__0__, __WEBPACK_EXTERNAL_MODULE__1__, __WEBPACK_EXTERNAL_MODULE__2__, __WEBPACK_EXTERNAL_MODULE__3__, __WEBPACK_EXTERNAL_MODULE__4__, __WEBPACK_EXTERNAL_MODULE__5__, __WEBPACK_EXTERNAL_MODULE__7__, __WEBPACK_EXTERNAL_MODULE__11__, __WEBPACK_EXTERNAL_MODULE__12__, __WEBPACK_EXTERNAL_MODULE__15__, __WEBPACK_EXTERNAL_MODULE__17__, __WEBPACK_EXTERNAL_MODULE__20__, __WEBPACK_EXTERNAL_MODULE__23__, __WEBPACK_EXTERNAL_MODULE__26__, __WEBPACK_EXTERNAL_MODULE__30__, __WEBPACK_EXTERNAL_MODULE__33__, __WEBPACK_EXTERNAL_MODULE__35__, __WEBPACK_EXTERNAL_MODULE__40__, __WEBPACK_EXTERNAL_MODULE__41__, __WEBPACK_EXTERNAL_MODULE__42__, __WEBPACK_EXTERNAL_MODULE__46__, __WEBPACK_EXTERNAL_MODULE__49__, __WEBPACK_EXTERNAL_MODULE__51__, __WEBPACK_EXTERNAL_MODULE__53__, __WEBPACK_EXTERNAL_MODULE__56__, __WEBPACK_EXTERNAL_MODULE__57__, __WEBPACK_EXTERNAL_MODULE__58__, __WEBPACK_EXTERNAL_MODULE__59__, __WEBPACK_EXTERNAL_MODULE__66__, __WEBPACK_EXTERNAL_MODULE__68__, __WEBPACK_EXTERNAL_MODULE__76__, __WEBPACK_EXTERNAL_MODULE__79__, __WEBPACK_EXTERNAL_MODULE__82__, __WEBPACK_EXTERNAL_MODULE__85__, __WEBPACK_EXTERNAL_MODULE__86__, __WEBPACK_EXTERNAL_MODULE__87__, __WEBPACK_EXTERNAL_MODULE__88__, __WEBPACK_EXTERNAL_MODULE__89__, __WEBPACK_EXTERNAL_MODULE__90__, __WEBPACK_EXTERNAL_MODULE__91__, __WEBPACK_EXTERNAL_MODULE__94__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 74);\n","module.exports = __WEBPACK_EXTERNAL_MODULE__0__;","module.exports = __WEBPACK_EXTERNAL_MODULE__1__;","module.exports = __WEBPACK_EXTERNAL_MODULE__2__;","module.exports = __WEBPACK_EXTERNAL_MODULE__3__;","module.exports = __WEBPACK_EXTERNAL_MODULE__4__;","module.exports = __WEBPACK_EXTERNAL_MODULE__5__;","import { List, Map } from 'immutable';\r\nimport { queryParams } from '~/core/util/navigation';\r\n\r\nexport const selectRouteEntry = state => {\r\n  return state.getIn(['routing', 'entry'], Map({}));\r\n};\r\nexport const selectNodeDepends = state => {\r\n  return state.getIn(['routing', 'nodeDepends'], new List([]));\r\n};\r\nexport const selectCurrentTreeID = state => {\r\n  return state.getIn(['routing', 'currentTreeId']);\r\n};\r\nexport const selectEntryDepends = state => {\r\n  return state.getIn(['routing', 'entryDepends']);\r\n};\r\nexport const selectRouteEntryEntryId = state => {\r\n  return state.getIn(['routing', 'entry', 'sys', 'id'], null);\r\n};\r\nexport const selectRouteEntryContentTypeId = state => {\r\n  const entry = selectRouteEntry(state);\r\n  return entry && entry.getIn(['sys', 'contentTypeId'], null);\r\n};\r\nexport const selectRouteEntrySlug = state => {\r\n  return state.getIn(['routing', 'entry', 'sys', 'slug'], null);\r\n};\r\nexport const selectRouteEntryID = state => {\r\n  return state.getIn(['routing', 'entryID']);\r\n};\r\nexport const selectCurrentPath = state => {\r\n  return state.getIn(['routing', 'currentPath']);\r\n};\r\nexport const selectCurrentSearch = state => {\r\n  return state.getIn(['routing', 'location', 'search']);\r\n};\r\nexport const selectQueryStringAsObject = state =>\r\n  queryParams(selectCurrentSearch(state));\r\nexport const selectCurrentProject = state => {\r\n  return state.getIn(['routing', 'currentProject']);\r\n};\r\nexport const selectIsNotFound = state => {\r\n  return state.getIn(['routing', 'notFound']);\r\n};\r\nexport const selectCurrentAncestors = state => {\r\n  return state.getIn(['routing', 'currentNodeAncestors'], new List());\r\n};\r\nexport const selectCurrentNode = state => {\r\n  return state.getIn(['routing', 'currentNode']);\r\n};\r\nexport const selectBreadcrumb = state => {\r\n  return (selectCurrentAncestors(state) || new List()).push(\r\n    selectCurrentNode(state)\r\n  );\r\n};\r\nexport const selectRouteLoading = state => {\r\n  return state.getIn(['routing', 'isLoading']);\r\n};\r\n","module.exports = __WEBPACK_EXTERNAL_MODULE__7__;","const ROUTING_PREFIX = '@ROUTING/';\r\nexport const GET_ENTRY = `${ROUTING_PREFIX}_GET_ENTRY`;\r\nexport const SET_ENTRY = `${ROUTING_PREFIX}_SET_ENTRY`;\r\nexport const SET_NODE = `${ROUTING_PREFIX}_SET_NODE`;\r\nexport const SET_ANCESTORS = `${ROUTING_PREFIX}_SET_ANCESTORS`;\r\nexport const SET_SIBLINGS = `${ROUTING_PREFIX}_SET_SIBLINGS`;\r\nexport const SET_ENTRY_ID = `${ROUTING_PREFIX}_SET_ENTRY_ID`;\r\nexport const SET_ENTRY_RELATED_ARTICLES = `${ROUTING_PREFIX}_SET_ENTRY_RELATED_ARTICLES`;\r\n\r\nexport const SET_NAVIGATION_NOT_FOUND = `${ROUTING_PREFIX}_SET_NOT_FOUND`;\r\nexport const SET_NAVIGATION_PATH = `${ROUTING_PREFIX}_SET_NAVIGATION_PATH`;\r\n\r\nexport const SET_TARGET_PROJECT = `${ROUTING_PREFIX}_SET_TARGET_PROJECT`;\r\n\r\nexport const SET_ROUTE = `${ROUTING_PREFIX}_SET_ROUTE`;\r\nexport const CALL_HISTORY_METHOD = `${ROUTING_PREFIX}_CALL_HISTORY_METHOD`;\r\n","const ACTION_PREFIX = '@USER/';\r\nexport const UPDATE_USER = `${ACTION_PREFIX}UPDATE_USER`;\r\nexport const LOGIN_USER = `${ACTION_PREFIX}LOGIN_USER`;\r\nexport const LOGIN_SUCCESSFUL = `${ACTION_PREFIX}LOGIN_SUCCESSFUL`;\r\nexport const LOGIN_FAILED = `${ACTION_PREFIX}LOGIN_FAILED`;\r\nexport const LOGOUT_USER = `${ACTION_PREFIX}LOGOUT_USER`;\r\nexport const TOGGLE_LOGIN_MODE = `${ACTION_PREFIX}TOGGLE_LOGIN_MODE`;\r\nexport const CREATE_USER_ACCOUNT = `${ACTION_PREFIX}CREATE_USER_ACCOUNT`;\r\nexport const VALIDATE_USER = `${ACTION_PREFIX}VALIDATE_USER`;\r\nexport const VALIDATE_USER_SUCCESS = `${ACTION_PREFIX}VALIDATE_USER_SUCCESS`;\r\nexport const VALIDATE_USER_FAILED = `${ACTION_PREFIX}VALIDATE_USER_FAILED`;\r\nexport const FORGOT_USER_PASSWORD = `${ACTION_PREFIX}FORGOT_USER_PASSWORD`;\r\nexport const FORGOT_USER_PASSWORD_COMPLETE = `${ACTION_PREFIX}FORGOT_USER_PASSWORD_COMPLETE`;\r\nexport const CHANGE_USER_PASSWORD = `${ACTION_PREFIX}CHANGE_USER_PASSWORD`;\r\nexport const CHANGE_USER_PASSWORD_FAILED = `${ACTION_PREFIX}CHANGE_USER_PASSWORD_FAILED`;\r\nexport const CHANGE_USER_PASSWORD_COMPLETE = `${ACTION_PREFIX}CHANGE_USER_PASSWORD_COMPLETE`;\r\nexport const SET_RECAPTCHA_KEY = `${ACTION_PREFIX}SET_RECAPTCHA_KEY`;\r\nexport const SET_RECAPTCHA_RESPONSE = `${ACTION_PREFIX}SET_RECAPTCHA_RESPONSE`;\r\n","export const selectUser = state => {\r\n  return state.get('user');\r\n};\r\nexport const selectUsername = state => {\r\n  return state.getIn(['user', 'username']);\r\n};\r\nexport const selectUserLoggedIn = state => {\r\n  return state.getIn(['user', 'loggedIn']);\r\n};\r\nexport const selectUserGroups = state => {\r\n  return state.getIn(['user', 'groups']);\r\n};\r\nexport const selectUserMessage = state => {\r\n  return state.getIn(['user', 'logonResult']);\r\n};\r\nexport const selectLoginScreenMode = state => {\r\n  return state.getIn(['user', 'loginScreenMode']);\r\n};\r\nexport const selectPasswordMessage = state => {\r\n  return state.getIn(['user', 'passwordResetMessage']);\r\n};\r\nexport const selectChangePasswordMessage = state => {\r\n  return state.getIn(['user', 'changePasswordMessage']);\r\n};\r\nexport const selectCaptchaSiteKey = state => {\r\n  return state.getIn(['user', 'recaptcha', 'key']);\r\n};\r\nexport const selectCaptchaData = state => {\r\n  return state.getIn(['user', 'recaptcha', 'response']);\r\n};\r\nexport const selectCaptchaResponse = state => {\r\n  return state.getIn(['user', 'recaptcha', 'response', 'isHuman']);\r\n};\r\nexport const selectCaptchaToken = state => {\r\n  return state.getIn(['user', 'recaptcha', 'response', 'token']);\r\n};\r\n","module.exports = __WEBPACK_EXTERNAL_MODULE__11__;","module.exports = __WEBPACK_EXTERNAL_MODULE__12__;","export function action(type, payload = {}) {\r\n  return { type, ...payload };\r\n}\r\n\r\nexport const getWebPImageUri = uri => {\r\n  let formatedUri = uri;\r\n  if (uri.indexOf('.gif') == -1) {\r\n    if (uri.indexOf('f=') == -1 && uri.indexOf('format=') == -1) {\r\n      if (uri.indexOf('?') > -1) {\r\n        formatedUri = `${uri}&f=webp`;\r\n      } else {\r\n        formatedUri = `${uri}?f=webp`;\r\n      }\r\n    }\r\n    if (\r\n      formatedUri.indexOf('q=') == -1 &&\r\n      formatedUri.indexOf('quality=') == -1\r\n    ) {\r\n      if (formatedUri.indexOf('?') > -1) {\r\n        formatedUri = `${formatedUri}&q=70`;\r\n      } else {\r\n        formatedUri = `${formatedUri}?q=70`;\r\n      }\r\n    }\r\n  }\r\n  return formatedUri;\r\n};\r\n\r\nexport const resizeImage = (image, height, width) => {\r\n  if (image.asset && image.asset.sys && image.asset.sys.uri) {\r\n    image.asset.sys.uri = resizeImageUri(image.asset.sys.uri, height, width);\r\n  }\r\n};\r\nexport const resizeImageUri = (uri, height, width) => {\r\n  let formatedUri = uri;\r\n  let paramDelimeter = '?';\r\n  if (uri.indexOf('?') > -1) {\r\n    paramDelimeter = '&';\r\n  }\r\n  if (width) {\r\n    if (\r\n      formatedUri.indexOf('w=') == -1 &&\r\n      formatedUri.indexOf('width=') == -1\r\n    ) {\r\n      formatedUri = `${formatedUri}${paramDelimeter}w=${width}`;\r\n      paramDelimeter = '&';\r\n    }\r\n  }\r\n  if (height) {\r\n    if (\r\n      formatedUri.indexOf('h=') == -1 &&\r\n      formatedUri.indexOf('height=') == -1\r\n    ) {\r\n      formatedUri = `${formatedUri}${paramDelimeter}h=${height}`;\r\n    }\r\n  }\r\n\r\n  return formatedUri;\r\n};\r\n\r\nexport function flattenArray(arr) {\r\n  // flatten arrays inside the supplied array and\r\n  // remove duplicates from the result\r\n  return arr\r\n    .reduce((acc, val) => acc.concat(val), [])\r\n    .filter((elem, pos, arr) => arr.indexOf(elem) == pos);\r\n}\r\n\r\nexport async function api(url, options) {\r\n  return fetch(url, options)\r\n    .then(async response => {\r\n      setTimeout(() => null, 0);\r\n      if (!response.ok) {\r\n        throw new Error(response.statusText);\r\n      }\r\n      return response.json().then(data => data);\r\n    })\r\n    .catch(error => {\r\n      //console.log(error);\r\n      throw error;\r\n    });\r\n}\r\n\r\nexport function dynamicSort(property) {\r\n  var sortOrder = 1;\r\n  if (property[0] === '-') {\r\n    sortOrder = -1;\r\n    property = property.substr(1);\r\n  }\r\n  return function(a, b) {\r\n    /* next line works with strings and numbers,\r\n     * and you may want to customize it to your needs\r\n     */\r\n    var result =\r\n      a[property] < b[property] ? -1 : a[property] > b[property] ? 1 : 0;\r\n    return result * sortOrder;\r\n  };\r\n}\r\n\r\nexport const randomString = length => {\r\n  let text = '';\r\n  const possible =\r\n    'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\r\n  for (var i = 0; i < length; i++) {\r\n    text += possible.charAt(Math.floor(Math.random() * possible.length));\r\n  }\r\n  return text;\r\n};\r\n","import { List, Map, fromJS } from 'immutable';\r\nimport {\r\n  UPDATE_USER,\r\n  TOGGLE_LOGIN_MODE,\r\n  SET_RECAPTCHA_KEY,\r\n  SET_RECAPTCHA_RESPONSE,\r\n} from './types';\r\n\r\nexport const initialUserState = Map({\r\n  loggedIn: false,\r\n  failedLogin: null,\r\n  username: null,\r\n  id: null,\r\n  securityToken: null,\r\n  logonResult: null,\r\n  groups: new List([]),\r\n  emailAddress: null,\r\n  fullName: null,\r\n  loginScreenMode: 'login',\r\n  passwordReset: false,\r\n  passwordResetMessage: null,\r\n  changePasswordMessage: null,\r\n  recaptcha: new Map({\r\n    key: null,\r\n    response: new Map({ isHuman: false, token: null }),\r\n  }),\r\n});\r\n\r\nexport default (state = initialUserState, action) => {\r\n  switch (action.type) {\r\n    case UPDATE_USER: {\r\n      const { user } = action;\r\n      return state\r\n        .set(\r\n          'loggedIn',\r\n          typeof user.loggedIn !== 'undefined'\r\n            ? user.loggedIn\r\n            : state.get('loggedIn')\r\n        )\r\n        .set(\r\n          'failedLogin',\r\n          typeof user.failedLogin !== 'undefined'\r\n            ? user.failedLogin\r\n            : state.get('failedLogin')\r\n        )\r\n        .set('username', user.username || state.get('username'))\r\n        .set('id', user.id || state.get('id'))\r\n        .set('securityToken', user.securityToken || state.get('securityToken'))\r\n        .set('logonResult', user.logonResult || state.get('logonResult'))\r\n        .set('groups', fromJS(user.groups) || state.get('groups'))\r\n        .set('emailAddress', user.emailAddress || state.get('emailAddress'))\r\n        .set('fullName', user.fullName || state.get('fullName'))\r\n        .set(\r\n          'passwordReset',\r\n          typeof user.passwordReset !== 'undefined'\r\n            ? user.passwordReset\r\n            : state.get('passwordReset')\r\n        )\r\n        .set(\r\n          'passwordResetMessage',\r\n          user.passwordResetMessage || state.get('passwordResetMessage')\r\n        )\r\n        .set(\r\n          'changePasswordMessage',\r\n          user.changePasswordMessage || state.get('changePasswordMessage')\r\n        );\r\n    }\r\n    case TOGGLE_LOGIN_MODE: {\r\n      const newMode = action.loginMode;\r\n      return state.set('loginScreenMode', newMode);\r\n    }\r\n    case SET_RECAPTCHA_KEY: {\r\n      return state.setIn(['recaptcha', 'key'], action.key);\r\n    }\r\n    case SET_RECAPTCHA_RESPONSE: {\r\n      return state\r\n        .setIn(['recaptcha', 'response', 'isHuman'], action.isHuman)\r\n        .setIn(['recaptcha', 'response', 'token'], action.token);\r\n    }\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","module.exports = __WEBPACK_EXTERNAL_MODULE__15__;","import * as actions from './redux/actions';\r\nimport * as selectors from './redux/selectors';\r\nimport * as types from './redux/types';\r\nexport { actions, selectors, types };\r\n\r\nexport { default as reducer } from './redux/reducers';\r\nexport { userSagas as sagas } from './redux/sagas';\r\n\r\nexport { default as withLogin } from './components/withLogin';\r\n","module.exports = __WEBPACK_EXTERNAL_MODULE__17__;","import { Client } from 'contensis-delivery-api';\r\n\r\nconst getClientConfig = project => {\r\n  let config = DELIVERY_API_CONFIG; /* global DELIVERY_API_CONFIG */\r\n  if (project) {\r\n    config.projectId = project;\r\n  }\r\n\r\n  if (\r\n    typeof window != 'undefined' &&\r\n    PROXY_DELIVERY_API /* global PROXY_DELIVERY_API */\r\n  ) {\r\n    // ensure a relative url is used to bypass the need for CORS (separate OPTIONS calls)\r\n    config.rootUrl = '';\r\n    config.responseHandler = {\r\n      404: () => null,\r\n    };\r\n  }\r\n  return config;\r\n};\r\n\r\nexport * from 'contensis-delivery-api';\r\n\r\n// This should only be executed on the client as it relies on the window.\r\nexport const GetClientSideDeliveryApiStatus = () => {\r\n  if (typeof window != 'undefined') {\r\n    const currentHostname = window.location.hostname;\r\n    return GetDeliveryApiStatusFromHostname(currentHostname);\r\n  }\r\n  return null;\r\n};\r\n\r\nexport const GetDeliveryApiStatusFromHostname = currentHostname => {\r\n  if (currentHostname.indexOf('localhost') > -1) return 'latest';\r\n\r\n  if (currentHostname.endsWith('contensis.cloud')) {\r\n    if (currentHostname.indexOf('preview.') > -1) {\r\n      return 'latest';\r\n    } else {\r\n      return 'published';\r\n    }\r\n  }\r\n\r\n  if (currentHostname.endsWith('cloud.contensis.com')) {\r\n    if (currentHostname.indexOf('preview-') > -1) {\r\n      return 'latest';\r\n    } else {\r\n      return 'published';\r\n    }\r\n  }\r\n\r\n  return 'published';\r\n};\r\n\r\nexport const GetResponseGuids = object => {\r\n  let Ids = [];\r\n  Object.keys(object).some(function(k) {\r\n    if (k === 'sys') {\r\n      //Should always have an ID, but lets check...\r\n      if (object[k].id && object[k].language) {\r\n        // We can exclude assets here i think... ?\r\n        if (object[k].dataFormat) {\r\n          if (object[k].dataFormat !== 'asset') {\r\n            Ids.push(`${object[k].id}_${object[k].language.toLowerCase()}`);\r\n          }\r\n        } else {\r\n          // If we don't have a dataformat add it anyhow, for safety\r\n          Ids.push(`${object[k].id}_${object[k].language.toLowerCase()}`);\r\n        }\r\n      }\r\n      return false;\r\n    }\r\n    if (object[k] && typeof object[k] === 'object') {\r\n      let subIds = GetResponseGuids(object[k]);\r\n      if (subIds.length > 0) {\r\n        Ids.push(...subIds);\r\n      }\r\n      return false;\r\n    }\r\n  });\r\n  return Ids;\r\n};\r\n\r\nexport const GetAllResponseGuids = object => {\r\n  if (!object) return [];\r\n  let returnItems = GetResponseGuids(object);\r\n  let unique = new Set(returnItems);\r\n  return unique;\r\n};\r\nclass DeliveryApi {\r\n  search(query, linkDepth, project, env) {\r\n    const client = Client.create(getClientConfig(project, env));\r\n    return client.entries.search(\r\n      query,\r\n      typeof linkDepth !== 'undefined' ? linkDepth : 1\r\n    );\r\n  }\r\n\r\n  getClient(deliveryApiStatus = 'published', project, env) {\r\n    const baseConfig = getClientConfig(project, env);\r\n    baseConfig.versionStatus = deliveryApiStatus;\r\n    return Client.create(baseConfig);\r\n  }\r\n  getEntry(id, linkDepth = 0, deliveryApiStatus = 'published', project, env) {\r\n    const baseConfig = getClientConfig(project, env);\r\n    baseConfig.versionStatus = deliveryApiStatus;\r\n    const client = Client.create(baseConfig);\r\n    // return client.entries.get(id, linkDepth);\r\n    return client.entries.get({ id, linkDepth });\r\n  }\r\n}\r\n\r\nexport const deliveryApi = new DeliveryApi();\r\n\r\nclass CacheNode {\r\n  constructor(key, value) {\r\n    this.key = key;\r\n    this.value = value;\r\n    this.next = null;\r\n    this.prev = null;\r\n  }\r\n}\r\n\r\nclass LruCache {\r\n  constructor(limit = 100) {\r\n    this.map = {};\r\n    this.head = null;\r\n    this.tail = null;\r\n    this.limit = limit || 100;\r\n    this.size = 0;\r\n  }\r\n\r\n  get(key) {\r\n    if (this.map[key]) {\r\n      let value = this.map[key].value;\r\n      let node = new CacheNode(key, value);\r\n      this.remove(key);\r\n      this.setHead(node);\r\n      return value;\r\n    }\r\n  }\r\n\r\n  set(key, value) {\r\n    let node = new CacheNode(key, value);\r\n    if (this.map[key]) {\r\n      this.remove(key);\r\n    } else {\r\n      if (this.size >= this.limit) {\r\n        delete this.map[this.tail.key];\r\n        this.size--;\r\n        this.tail = this.tail.prev;\r\n        this.tail.next = null;\r\n      }\r\n    }\r\n    this.setHead(node);\r\n  }\r\n\r\n  setHead(node) {\r\n    node.next = this.head;\r\n    node.prev = null;\r\n    if (this.head) {\r\n      this.head.prev = node;\r\n    }\r\n    this.head = node;\r\n    if (!this.tail) {\r\n      this.tail = node;\r\n    }\r\n    this.size++;\r\n    this.map[node.key] = node;\r\n  }\r\n\r\n  remove(key) {\r\n    let node = this.map[key];\r\n    if (node.prev) {\r\n      node.prev.next = node.next;\r\n    } else {\r\n      this.head = node.next;\r\n    }\r\n    if (node.next) {\r\n      node.next.prev = node.prev;\r\n    } else {\r\n      this.tail = node.prev;\r\n    }\r\n    delete this.map[key];\r\n    this.size--;\r\n  }\r\n}\r\n\r\nclass CachedSearch {\r\n  cache = new LruCache();\r\n  taxonomyLookup = {};\r\n\r\n  search(query, linkDepth, project, env) {\r\n    const client = Client.create(getClientConfig(project, env));\r\n    return this.request(\r\n      project + JSON.stringify(query) + linkDepth.toString(),\r\n      () => client.entries.search(query, linkDepth)\r\n    );\r\n  }\r\n\r\n  get(id, linkDepth, versionStatus, project, env) {\r\n    const client = Client.create(getClientConfig(project, env));\r\n    client.clientConfig.versionStatus = versionStatus;\r\n    return this.request(id, () => client.entries.get({ id, linkDepth }));\r\n  }\r\n\r\n  getContentType(id, project, env) {\r\n    const client = Client.create(getClientConfig(project, env));\r\n    return this.request(`[CONTENT TYPE] ${id} ${project}`, () =>\r\n      client.contentTypes.get(id)\r\n    );\r\n  }\r\n\r\n  getTaxonomyNode(key, project, env) {\r\n    const client = Client.create(getClientConfig(project, env));\r\n    return this.request(`[TAXONOMY NODE] ${key}`, () =>\r\n      client.taxonomy\r\n        .resolveChildren(key)\r\n        .then(node => this.extendTaxonomyNode(node))\r\n    );\r\n  }\r\n\r\n  getRootNode(options, project, env) {\r\n    const client = Client.create(getClientConfig(project, env));\r\n    return this.request(`${project} / ${JSON.stringify(options)}`, () =>\r\n      client.nodes.getRoot(options)\r\n    );\r\n  }\r\n\r\n  getNode(options, project, env) {\r\n    const client = Client.create(getClientConfig(project, env));\r\n    return this.request(\r\n      `${project} ${(options && options.path) || options} ${JSON.stringify(\r\n        options\r\n      )}`,\r\n      () => client.nodes.get(options)\r\n    );\r\n  }\r\n\r\n  getAncestors(options, project, env) {\r\n    const client = Client.create(getClientConfig(project, env));\r\n    return this.request(\r\n      `${project} [A] ${(options && options.id) || options} ${JSON.stringify(\r\n        options\r\n      )}`,\r\n      () => client.nodes.getAncestors(options)\r\n    );\r\n  }\r\n\r\n  getChildren(options, project, env) {\r\n    const client = Client.create(getClientConfig(project, env));\r\n    return this.request(\r\n      `${project} [C] ${(options && options.id) || options} ${JSON.stringify(\r\n        options\r\n      )}`,\r\n      () => client.nodes.getChildren(options)\r\n    );\r\n  }\r\n\r\n  getSiblings(options, project, env) {\r\n    const client = Client.create(getClientConfig(project, env));\r\n    return this.request(\r\n      `${project} [S] ${(options && options.id) || options} ${JSON.stringify(\r\n        options\r\n      )}`,\r\n      () => client.nodes.getSiblings(options)\r\n    );\r\n  }\r\n\r\n  request(key, execute) {\r\n    if (!this.cache.get(key) || typeof window == 'undefined') {\r\n      let promise = execute();\r\n      this.cache.set(key, promise);\r\n      promise.catch(() => {\r\n        this.cache.remove(key);\r\n      });\r\n    }\r\n    return this.cache.get(key);\r\n  }\r\n\r\n  extendTaxonomyNode(node) {\r\n    let id = this.getTaxonomyId(node);\r\n    this.taxonomyLookup[id] = node.key;\r\n    return {\r\n      ...node,\r\n      id,\r\n      children: node.children\r\n        ? node.children.map(n => this.extendTaxonomyNode(n))\r\n        : null,\r\n    };\r\n  }\r\n\r\n  getTaxonomyId(node) {\r\n    if (node.key) {\r\n      let parts = node.key.split('/');\r\n      return parts[parts.length - 1];\r\n    }\r\n    return '';\r\n  }\r\n\r\n  getTaxonomyKey(id) {\r\n    return this.taxonomyLookup[id];\r\n  }\r\n}\r\n\r\nexport const cachedSearch = new CachedSearch();\r\n","export * from '@redux-saga/core/effects';\n","module.exports = __WEBPACK_EXTERNAL_MODULE__20__;","import queryString from 'query-string';\r\n\r\nexport function queryParams(search) {\r\n  return queryString.parse(\r\n    typeof window != 'undefined' ? window.location.search : search\r\n  );\r\n}\r\nexport const routeParams = staticRoute =>\r\n  staticRoute && staticRoute.match ? staticRoute.match.params : {};\r\n\r\nexport const buildUrl = (route, params) => {\r\n  const qs = queryString.stringify(params);\r\n  const path = qs ? `${route}?${qs}` : route;\r\n  return path;\r\n};\r\n\r\nexport const clientHostname = () =>\r\n  `${window.location.protocol}//${window.location.hostname}:${window.location.port}`;\r\n\r\nexport const addHostname =\r\n  typeof window == 'undefined' || window.location.host == 'localhost:3000'\r\n    ? `https://${PUBLIC_URI /* global PUBLIC_URI */}`\r\n    : clientHostname();\r\n","import { action } from '~/core/util/helpers';\r\nimport {\r\n  CHANGE_USER_PASSWORD,\r\n  CREATE_USER_ACCOUNT,\r\n  FORGOT_USER_PASSWORD,\r\n  LOGIN_USER,\r\n  LOGOUT_USER,\r\n  TOGGLE_LOGIN_MODE,\r\n  SET_RECAPTCHA_KEY,\r\n  SET_RECAPTCHA_RESPONSE,\r\n  VALIDATE_USER,\r\n} from './types';\r\n\r\nexport const loginUser = (username, password) =>\r\n  action(LOGIN_USER, { username, password });\r\nexport const validateUser = cookies => action(VALIDATE_USER, { cookies });\r\nexport const logoutUser = () => action(LOGOUT_USER);\r\n\r\nexport const toggleLoginMode = loginMode =>\r\n  action(TOGGLE_LOGIN_MODE, { loginMode });\r\nexport const createUserAccount = () => action(CREATE_USER_ACCOUNT);\r\nexport const forgotPassword = username =>\r\n  action(FORGOT_USER_PASSWORD, { username });\r\nexport const changePassword = (oldPassword, newPassword, newPasswordConfirm) =>\r\n  action(CHANGE_USER_PASSWORD, {\r\n    oldPassword,\r\n    newPassword,\r\n    newPasswordConfirm,\r\n  });\r\nexport const changePasswordWithToken = (\r\n  token,\r\n  newPassword,\r\n  newPasswordConfirm\r\n) => action(CHANGE_USER_PASSWORD, { token, newPassword, newPasswordConfirm });\r\nexport const setRecaptchaKey = key => action(SET_RECAPTCHA_KEY, { key });\r\nexport const setRecaptchaResponse = (isHuman, token) =>\r\n  action(SET_RECAPTCHA_RESPONSE, { isHuman, token });\r\n","module.exports = __WEBPACK_EXTERNAL_MODULE__23__;","const CMS_URL = SERVERS.cms; /* global SERVERS */\r\n\r\nconst config = {\r\n  REGISTER_USER_URI: 'Security/RegisterUser',\r\n  LOGON_USER_URI: 'REST/Contensis/Security/AuthenticateApplication',\r\n  VALIDATE_USER_URI: 'REST/Contensis/Security/IsAuthenticated',\r\n  USER_INFO_URI: 'REST/Contensis/Security/GetUserInfo',\r\n  FORGOT_PASSWORD_URI: 'Security/ResetPasswordEmail',\r\n  CHANGE_PASSWORD_URI: 'Security/ChangePassword',\r\n  CHANGE_PASSWORD_TOKEN_URI: 'Security/ChangePasswordWithToken',\r\n  AUTH_CAPTCHA_URI: 'Security/AuthenticateCaptcha',\r\n  LOGIN_URL: '/business-government/partner',\r\n};\r\n\r\nconst REGISTER_USER_URL = `${CMS_URL}/${config.REGISTER_USER_URI}`;\r\nconst LOGON_USER_URL = `${CMS_URL}/${config.LOGON_USER_URI}`;\r\nconst VALIDATE_USER_URL = `${CMS_URL}/${config.VALIDATE_USER_URI}`;\r\nconst USER_INFO_URL = `${CMS_URL}/${config.USER_INFO_URI}`;\r\nconst FORGOT_PASSWORD_URI = `/${config.FORGOT_PASSWORD_URI}`;\r\nconst CHANGE_PASSWORD_URI = `/${config.CHANGE_PASSWORD_URI}`;\r\nconst AUTH_CAPTCHA_URI = `/${config.AUTH_CAPTCHA_URI}`;\r\nconst CHANGE_PASSWORD_TOKEN_URI = `/${config.CHANGE_PASSWORD_TOKEN_URI}`;\r\n\r\nconst BASE_OPTIONS = {\r\n  method: 'GET',\r\n  headers: { 'Content-Type': 'application/json' },\r\n};\r\n\r\nexport class SecurityApi {\r\n  static async AuthoriseRecaptcha(token) {\r\n    const url = `${AUTH_CAPTCHA_URI}?captchaToken=${encodeURIComponent(token)}`;\r\n    const options = {\r\n      headers: { 'Content-Type': 'application/json' },\r\n      method: 'POST',\r\n    };\r\n    return await SecurityApi.get(url, options);\r\n  }\r\n\r\n  static async LogonUser(username, password) {\r\n    const body = {\r\n      username,\r\n      password,\r\n      ip: '127.0.0.1',\r\n      applicationName: 'DesktopTool',\r\n    };\r\n    const options = {\r\n      ...BASE_OPTIONS,\r\n      method: 'POST',\r\n      body: JSON.stringify(body),\r\n    };\r\n    return await SecurityApi.get(LOGON_USER_URL, options);\r\n  }\r\n\r\n  static async ValidateUser(securityToken) {\r\n    const url = `${VALIDATE_USER_URL}?token=${encodeURIComponent(\r\n      securityToken\r\n    )}`;\r\n    const bodyToken = encodeURIComponent(\r\n      decodeURIComponent(decodeURIComponent(securityToken))\r\n    );\r\n    const options = {\r\n      ...BASE_OPTIONS,\r\n      method: 'POST',\r\n      body: JSON.stringify({ securityToken: bodyToken }),\r\n    };\r\n    return await SecurityApi.get(url, options);\r\n  }\r\n\r\n  static async GetUserInfo(securityToken) {\r\n    const options = {\r\n      ...BASE_OPTIONS,\r\n      headers: {\r\n        ['Content-Type']: 'text/plain',\r\n        ContensisCMSUserName: securityToken,\r\n      },\r\n    };\r\n    return await SecurityApi.get(USER_INFO_URL, options);\r\n  }\r\n\r\n  static async RegisterUser(email, password) {\r\n    const body = { email, password };\r\n    const options = {\r\n      ...BASE_OPTIONS,\r\n      method: 'POST',\r\n      body: JSON.stringify(body),\r\n    };\r\n    return await SecurityApi.get(REGISTER_USER_URL, options);\r\n  }\r\n\r\n  static async ChangePassword(\r\n    username,\r\n    oldPassword,\r\n    newPassword,\r\n    newPasswordConfirm\r\n  ) {\r\n    const url = `${CHANGE_PASSWORD_URI}?username=${encodeURIComponent(\r\n      username\r\n    )}&oldPassword=${encodeURIComponent(\r\n      oldPassword\r\n    )}&newPassword=${encodeURIComponent(\r\n      newPassword\r\n    )}&newPasswordConfirm=${encodeURIComponent(newPasswordConfirm)}`;\r\n    const options = {\r\n      headers: { 'Content-Type': 'application/json' },\r\n      method: 'POST',\r\n    };\r\n    return await SecurityApi.get(url, options);\r\n  }\r\n\r\n  static async ChangePasswordWithToken(token, newPassword, newPasswordConfirm) {\r\n    const url = `${CHANGE_PASSWORD_TOKEN_URI}?token=${token}&newPassword=${encodeURIComponent(\r\n      newPassword\r\n    )}&confirmPassword=${encodeURIComponent(newPasswordConfirm)}`;\r\n    const options = {\r\n      headers: { 'Content-Type': 'application/json' },\r\n      method: 'POST',\r\n    };\r\n    return await SecurityApi.get(url, options);\r\n  }\r\n\r\n  static async ForgotPassword(username, currentUrl) {\r\n    const url = `${FORGOT_PASSWORD_URI}?username=${encodeURIComponent(\r\n      username\r\n    )}&currentUrl=${encodeURIComponent(currentUrl)}`;\r\n    const options = {\r\n      headers: { 'Content-Type': 'application/json' },\r\n      method: 'POST',\r\n    };\r\n    return await SecurityApi.get(url, options);\r\n  }\r\n\r\n  static async get(url, options = BASE_OPTIONS) {\r\n    try {\r\n      const responseBody = await api(url, options);\r\n      if (responseBody) return responseBody;\r\n      return false;\r\n    } catch (error) {\r\n      return false;\r\n    }\r\n  }\r\n}\r\n\r\nasync function api(url, options) {\r\n  return fetch(url, options)\r\n    .then(async response => {\r\n      setTimeout(() => null, 0);\r\n      if (!response.ok) {\r\n        throw new Error(response.statusText);\r\n      }\r\n      return response.json().then(data => data);\r\n    })\r\n    .catch(error => {\r\n      //console.log(error);\r\n      throw error;\r\n    });\r\n}\r\n","import React from 'react';\r\nimport { Iterable } from 'immutable';\r\n\r\nexport const toJS = WrappedComponent => wrappedComponentProps => {\r\n  const KEY = 0;\r\n  const VALUE = 1;\r\n\r\n  const propsJS = Object.entries(wrappedComponentProps).reduce(\r\n    (newProps, wrappedComponentProp) => {\r\n      newProps[wrappedComponentProp[KEY]] = Iterable.isIterable(\r\n        wrappedComponentProp[VALUE]\r\n      )\r\n        ? wrappedComponentProp[VALUE].toJS()\r\n        : wrappedComponentProp[VALUE];\r\n      return newProps;\r\n    },\r\n    {}\r\n  );\r\n\r\n  return <WrappedComponent {...propsJS} />;\r\n};\r\n","module.exports = __WEBPACK_EXTERNAL_MODULE__26__;","import { action } from '~/core/util/helpers';\r\nimport {\r\n  SET_ENTRY,\r\n  SET_NAVIGATION_NOT_FOUND,\r\n  SET_NAVIGATION_PATH,\r\n  SET_TARGET_PROJECT,\r\n  SET_ROUTE,\r\n} from '~/core/redux/types/routing';\r\n\r\nexport const setNotFound = notFound =>\r\n  action(SET_NAVIGATION_NOT_FOUND, { notFound });\r\nexport const setNavigationPath = (\r\n  path,\r\n  location,\r\n  staticRoute,\r\n  withEvents,\r\n  statePath,\r\n  routes\r\n) =>\r\n  action(SET_NAVIGATION_PATH, {\r\n    path,\r\n    location,\r\n    staticRoute,\r\n    withEvents,\r\n    statePath,\r\n    routes,\r\n  });\r\nexport const setCurrentProject = (project, allowedGroups) =>\r\n  action(SET_TARGET_PROJECT, { project, allowedGroups });\r\nexport const setRoute = (path, state) => action(SET_ROUTE, { path, state });\r\nexport const setRouteEntry = entry => action(SET_ENTRY, { entry });\r\n","const ACTION_PREFIX = '@NAVIGATION/';\r\nexport const GET_NODE_TREE = `${ACTION_PREFIX}_GET_NODE_TREE`;\r\nexport const SET_NODE_TREE = `${ACTION_PREFIX}_SET_NODE_TREE`;\r\nexport const GET_NODE_TREE_ERROR = `${ACTION_PREFIX}_GET_NODE_TREE_ERROR`;\r\n","import { takeEvery, select, put, fork, call } from 'redux-saga/effects';\r\nimport queryString from 'query-string';\r\nimport {\r\n  LOGIN_USER,\r\n  LOGIN_SUCCESSFUL,\r\n  LOGIN_FAILED,\r\n  LOGOUT_USER,\r\n  CREATE_USER_ACCOUNT,\r\n  VALIDATE_USER,\r\n  VALIDATE_USER_SUCCESS,\r\n  VALIDATE_USER_FAILED,\r\n  UPDATE_USER,\r\n  FORGOT_USER_PASSWORD,\r\n  CHANGE_USER_PASSWORD,\r\n} from './types';\r\nimport { initialUserState } from './reducers';\r\nimport { SET_ROUTE } from '~/core/redux/types/routing';\r\nimport { selectCurrentSearch } from '~/core/redux/selectors/routing';\r\nimport { selectUser } from './selectors';\r\nimport { LoginHelper } from '../util/LoginHelper.class';\r\nimport { SecurityApi } from '../util/SecurityApi.class';\r\n\r\nexport const userSagas = [\r\n  takeEvery(LOGIN_USER, loginUserSaga),\r\n  takeEvery(LOGOUT_USER, logoutUserSaga),\r\n\r\n  takeEvery(VALIDATE_USER, validateUserSaga),\r\n\r\n  takeEvery(CREATE_USER_ACCOUNT, createUserAccountSaga),\r\n  takeEvery(FORGOT_USER_PASSWORD, forgotPassword),\r\n  takeEvery(CHANGE_USER_PASSWORD, changePassword),\r\n];\r\n\r\nfunction* loginUserSaga(action) {\r\n  const getGroups = true;\r\n\r\n  const { username, password } = action;\r\n  if (username && password) {\r\n    const user = yield LoginHelper.LoginUser(username, password, getGroups);\r\n\r\n    yield call(updateUserSaga, {\r\n      type: user.failedLogin ? LOGIN_FAILED : LOGIN_SUCCESSFUL,\r\n      user,\r\n      redirect: !user.failedLogin,\r\n    });\r\n  } else {\r\n    yield LoginHelper.ClientRedirectToLogin();\r\n  }\r\n}\r\n\r\nfunction* logoutUserSaga() {\r\n  const user = LoginHelper.LogoutUser();\r\n  yield fork(updateUserSaga, { user });\r\n  const state = yield select();\r\n\r\n  yield LoginHelper.ClientRedirectToHome(state.getIn(['router', 'location']));\r\n}\r\n\r\nexport function* validateUserSaga(action) {\r\n  const getGroups = true;\r\n\r\n  const state = yield select();\r\n  const currentQs = queryString.parse(\r\n    state.getIn(['router', 'location', 'search'])\r\n  );\r\n\r\n  const qsToken = currentQs.securityToken || currentQs.securitytoken;\r\n\r\n  if (qsToken) {\r\n    LoginHelper.SetLoginCookies({ securityToken: qsToken });\r\n  }\r\n\r\n  const cookies = !qsToken\r\n    ? action.cookies\r\n    : {\r\n        ContensisCMSUserName: encodeURIComponent(qsToken),\r\n        ...action.cookies,\r\n      };\r\n  const user = yield LoginHelper.ValidateUser(getGroups, cookies);\r\n\r\n  const type =\r\n    user && user.loggedIn ? VALIDATE_USER_SUCCESS : VALIDATE_USER_FAILED;\r\n\r\n  yield call(updateUserSaga, {\r\n    type,\r\n    user: user && !user.loggedIn ? initialUserState : user,\r\n  });\r\n}\r\n\r\nfunction* updateUserSaga(action) {\r\n  const userState = yield select(selectUser);\r\n  yield put({\r\n    type: UPDATE_USER,\r\n    from: action.type,\r\n    user: { ...userState.toJS(), ...action.user },\r\n  });\r\n  if (action.redirect) {\r\n    const currentSearch = yield select(selectCurrentSearch);\r\n    const qs = queryString.parse(currentSearch);\r\n    const redirectUri = qs.redirect_uri;\r\n    if (redirectUri) {\r\n      yield put({ type: SET_ROUTE, path: redirectUri });\r\n    }\r\n  }\r\n}\r\n\r\nfunction* forgotPassword(action) {\r\n  const message = yield LoginHelper.ForgotPassword(action.username);\r\n  yield put({\r\n    type: UPDATE_USER,\r\n    user: {\r\n      passwordReset: true,\r\n      passwordResetMessage: message,\r\n    },\r\n    history,\r\n  });\r\n}\r\n\r\nfunction* changePassword(action) {\r\n  const state = yield select();\r\n  const userState = yield state.get('user');\r\n  let message = '';\r\n  if (action.token) {\r\n    message = yield LoginHelper.ChangePasswordWithToken(\r\n      action.token,\r\n      action.newPassword,\r\n      action.newPasswordConfirm\r\n    );\r\n  } else {\r\n    message = yield LoginHelper.ChangePassword(\r\n      userState.username,\r\n      action.oldPassword,\r\n      action.newPassword,\r\n      action.newPasswordConfirm\r\n    );\r\n  }\r\n  yield put({\r\n    type: UPDATE_USER,\r\n    user: {\r\n      logonResult: message,\r\n    },\r\n    history,\r\n  });\r\n}\r\n\r\nfunction* createUserAccountSaga() {\r\n  const userState = yield select(selectUser);\r\n  if (userState.username && userState.password) {\r\n    // Call RegisterUser API\r\n    const registerResponse = yield SecurityApi.RegisterUser(\r\n      userState.username,\r\n      userState.password\r\n    );\r\n\r\n    if (registerResponse) {\r\n      const { securityToken, registrationResult, id } = registerResponse;\r\n\r\n      if (securityToken) {\r\n        const user = {\r\n          ...userState,\r\n          id,\r\n          securityToken,\r\n          password: null,\r\n          loggedIn: true,\r\n          verifiedEmail: false,\r\n          failedLogin: false,\r\n          failedToCreateAccount: false,\r\n          registrationResult,\r\n        };\r\n        yield put({ type: UPDATE_USER, user });\r\n      } else {\r\n        const user = {\r\n          ...userState,\r\n          securityToken: null,\r\n          loggedIn: false,\r\n          verifiedEmail: false,\r\n          failedLogin: true,\r\n          failedToCreateAccount: true,\r\n          registrationResult,\r\n        };\r\n        yield put({ type: UPDATE_USER, user });\r\n      }\r\n    } else {\r\n      yield put({\r\n        type: UPDATE_USER,\r\n        user: { ...userState, registrationResult: 'ServiceFault' },\r\n      });\r\n    }\r\n  }\r\n}\r\n","module.exports = __WEBPACK_EXTERNAL_MODULE__30__;","const VERSION_PREFIX = '@VERSION/';\r\nexport const SET_VERSION = `${VERSION_PREFIX}SET_VERSION`;\r\nexport const SET_VERSION_STATUS = `${VERSION_PREFIX}SET_VERSION_STATUS`;\r\n","// import { ajax } from 'jquery';\r\n// import queryString from 'query-string';\r\n\r\nimport { CookieHelper } from './CookieHelper.class';\r\nimport { SecurityApi } from './SecurityApi.class';\r\n\r\nimport { initialUserState } from '../redux/reducers';\r\n// import { randomString } from '~/core/util/helpers';\r\n// import userManager from './oidc/userManager';\r\n\r\nconst LOGIN_COOKIE = 'ContensisCMSUserName';\r\nconst LAST_USERNAME_COOKIE = 'ContensisLastUserName';\r\nconst DISPLAY_NAME_COOKIE = 'ContensisDisplayName';\r\nconst USER_LANGUAGE_COOKIE = 'User_LanguageID';\r\nconst AVATAR_COOKIE = 'ContensisAvatar';\r\n\r\n// const contensis = CONTENSIS; /* global CONTENSIS */\r\n\r\nexport class LoginHelper {\r\n  static GetLoginCookie() {\r\n    return CookieHelper.GetCookie(LOGIN_COOKIE);\r\n  }\r\n\r\n  static SetLoginCookies(user) {\r\n    if (user.securityToken)\r\n      CookieHelper.SetCookie(LOGIN_COOKIE, user.securityToken);\r\n    if (user.username) {\r\n      CookieHelper.SetCookie(LAST_USERNAME_COOKIE, user.username);\r\n      CookieHelper.SetCookie(DISPLAY_NAME_COOKIE, user.username);\r\n    }\r\n  }\r\n\r\n  static GetCachedCredentials() {\r\n    return {\r\n      securityToken: CookieHelper.GetCookie(LOGIN_COOKIE),\r\n      username: CookieHelper.GetCookie(LAST_USERNAME_COOKIE),\r\n      displayName: CookieHelper.GetCookie(DISPLAY_NAME_COOKIE),\r\n      languageId: CookieHelper.GetCookie(USER_LANGUAGE_COOKIE),\r\n      avatar: CookieHelper.GetCookie(AVATAR_COOKIE),\r\n    };\r\n  }\r\n\r\n  static GetCachedCredentialsSSR(cookies) {\r\n    return {\r\n      securityToken: cookies[LOGIN_COOKIE],\r\n      username: cookies[LAST_USERNAME_COOKIE],\r\n      displayName: cookies[DISPLAY_NAME_COOKIE],\r\n      languageId: cookies[USER_LANGUAGE_COOKIE],\r\n      avatar: cookies[AVATAR_COOKIE],\r\n    };\r\n  }\r\n\r\n  static ClearCachedCredentials() {\r\n    CookieHelper.DeleteCookie(LOGIN_COOKIE);\r\n    CookieHelper.DeleteCookie(LAST_USERNAME_COOKIE);\r\n    CookieHelper.DeleteCookie(DISPLAY_NAME_COOKIE);\r\n    CookieHelper.DeleteCookie(USER_LANGUAGE_COOKIE);\r\n    CookieHelper.DeleteCookie(AVATAR_COOKIE);\r\n  }\r\n\r\n  static async ValidateUser(groups = false, cookies = null) {\r\n    const cached = cookies\r\n      ? this.GetCachedCredentialsSSR(cookies)\r\n      : this.GetCachedCredentials();\r\n\r\n    if (cached.securityToken) {\r\n      const response = await SecurityApi.ValidateUser(cached.securityToken);\r\n\r\n      if (!response) return false;\r\n\r\n      // Convert result to a User object\r\n      const user = {\r\n        username: cached.username,\r\n        securityToken: encodeURIComponent(response.SecurityToken),\r\n        logonResult: response.LogonResult,\r\n        id: response.UserID,\r\n        loginScreenMode: 'login',\r\n      };\r\n\r\n      if (user.logonResult !== 0) {\r\n        // Clear the cookie cache so we don't need to validate again\r\n        LoginHelper.ClearCachedCredentials();\r\n      } else {\r\n        // Set logged in flag\r\n        user.loggedIn = true;\r\n\r\n        if (groups) {\r\n          const userWithGroups = await this.GetGroups(user);\r\n          return userWithGroups;\r\n        }\r\n      }\r\n\r\n      return user;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  static async LoginUser(username, password, groups = false) {\r\n    if (username && password) {\r\n      // Call LogonUser API\r\n      const loginResponse = await SecurityApi.LogonUser(username, password);\r\n      if (loginResponse) {\r\n        // Extract the elements we need from the response\r\n        const { SecurityToken, LogonResult, UserID } = loginResponse;\r\n        const failedLogin = !!LogonResult; // 0 is successful\r\n\r\n        // Map response to new user object\r\n        const user = {\r\n          username,\r\n          failedLogin,\r\n          loggedIn: !!SecurityToken && !failedLogin,\r\n          securityToken: SecurityToken,\r\n          id: UserID,\r\n          logonResult: this.CheckResult(LogonResult),\r\n        };\r\n\r\n        if (!user.failedLogin && !!user.securityToken) {\r\n          this.SetLoginCookies(user);\r\n\r\n          if (groups) {\r\n            const userWithGroups = await this.GetGroups(user);\r\n            return userWithGroups;\r\n          }\r\n        }\r\n\r\n        return user;\r\n      } else {\r\n        // Create user object to show login failed due to service fault\r\n        return {\r\n          securityToken: null,\r\n          loggedIn: false,\r\n          failedLogin: true,\r\n          logonResult: 'Service Fault',\r\n        };\r\n      }\r\n    }\r\n  }\r\n\r\n  static async GetGroups(user) {\r\n    if (!user.securityToken) {\r\n      return user;\r\n    }\r\n\r\n    const userInfoResponse = await SecurityApi.GetUserInfo(user.securityToken);\r\n    if (userInfoResponse) {\r\n      const response = JSON.parse(userInfoResponse);\r\n\r\n      if (response.Error || !response.GroupCollection) {\r\n        user.errorMessage = `Problem fetching user info: ${response.Error}`;\r\n      } else {\r\n        user.groups = response.GroupCollection.map(group => ({\r\n          name: group.GroupName,\r\n          id: group.GroupId,\r\n        }));\r\n        user.fullName = response.Fullname;\r\n        user.emailAddress = response.Email;\r\n      }\r\n    }\r\n    return user;\r\n  }\r\n\r\n  static LogoutUser() {\r\n    this.ClearCachedCredentials();\r\n    return initialUserState.toJS();\r\n  }\r\n\r\n  static ClientRedirectToLogin(uri) {\r\n    if (typeof window != 'undefined') {\r\n      window.location.href = LoginHelper.LoginPageUrl(uri); // LoginHelper.IsWsFedSignin()\r\n      // ? LoginHelper.WsFedLoginPageUrl(window.location)\r\n      // : LoginHelper.LoginPageUrl(uri);\r\n    }\r\n  }\r\n\r\n  static LoginPageUrl(uri) {\r\n    return `${uri || '/login'}?redirect_uri=${window.location.pathname +\r\n      window.location.search}`;\r\n  }\r\n  // static WsFedLoginPageUrl(currentLocation) {\r\n  //   const loginPage = contensis.ADFS_LOGIN_PAGE.replace(\r\n  //     '{redirect_uri}',\r\n  //     encodeURIComponent(currentLocation.toString().split('#')[0])\r\n  //   ).replace('{nonce}', randomString(5));\r\n  //   return `${contensis.URL}${loginPage}`.replace(/([^:]\\/)\\/+/g, '$1');\r\n  // }\r\n\r\n  // static IsWsFedSignin() {\r\n  //   return contensis.WSFED_SIGNIN;\r\n  // }\r\n\r\n  // static WsFedSignin(redirectUri) {\r\n  //   userManager.signinRedirect({\r\n  //     scope: 'openid',\r\n  //     response_type: 'id_token',\r\n  //     redirect_uri: redirectUri || window.location.toString(),\r\n  //   });\r\n  // }\r\n\r\n  // static WsFedLogout() {\r\n  //   ajax(`${contensis.URL}authenticate/logout/`, {\r\n  //     dataType: 'jsonp',\r\n  //     jsonp: false,\r\n  //     async: false,\r\n  //   });\r\n  // }\r\n\r\n  static async ForgotPassword(username) {\r\n    if (username) {\r\n      const currentUrl = window.location.protocol + '//' + window.location.host;\r\n      const passwordResponse = await SecurityApi.ForgotPassword(\r\n        username,\r\n        currentUrl\r\n      );\r\n      if (passwordResponse) {\r\n        // Extract the elements we need from the response\r\n        return passwordResponse;\r\n      }\r\n    }\r\n  }\r\n\r\n  static async ChangePassword(\r\n    username,\r\n    oldPassword,\r\n    newPassword,\r\n    newPasswordConfirm\r\n  ) {\r\n    if (newPassword && newPasswordConfirm) {\r\n      if (this.ValidatePassword(newPassword)) {\r\n        const passwordResponse = await SecurityApi.ChangePassword(\r\n          username,\r\n          oldPassword,\r\n          newPassword,\r\n          newPasswordConfirm\r\n        );\r\n        //const passwordResponse = await SecurityApi.ChangePassword(btoa(username), btoa(oldPassword), btoa(newPassword), btoa(newPasswordConfirm));\r\n        if (passwordResponse) {\r\n          // Extract the elements we need from the response\r\n          return passwordResponse;\r\n        }\r\n      } else {\r\n        return 'New password does not meet the requirements: \\r\\n\\r\\n - Must be a minimum of 8 characters long \\r\\n - Must contain at least 1 uppercase character \\r\\n - Must contain at least 1 special character or number';\r\n      }\r\n    }\r\n  }\r\n\r\n  static async ChangePasswordWithToken(token, newPassword, newPasswordConfirm) {\r\n    if (newPassword && newPasswordConfirm) {\r\n      if (this.ValidatePassword(newPassword)) {\r\n        const passwordResponse = await SecurityApi.ChangePasswordWithToken(\r\n          token,\r\n          btoa(newPassword),\r\n          btoa(newPasswordConfirm)\r\n        );\r\n        //const passwordResponse = await SecurityApi.ChangePassword(btoa(username), btoa(oldPassword), btoa(newPassword), btoa(newPasswordConfirm));\r\n        if (passwordResponse) {\r\n          // Extract the elements we need from the response\r\n          return passwordResponse;\r\n        }\r\n      } else {\r\n        return 'New password does not meet the requirements: \\r\\n\\r\\n - Must be a minimum of 8 characters long \\r\\n - Must contain at least 1 uppercase character \\r\\n - Must contain at least 1 special character or number';\r\n      }\r\n    }\r\n  }\r\n\r\n  static ValidatePassword(pword) {\r\n    //Password must be over 8 characters long\r\n    if (pword.length < 8) return false;\r\n    //This only returns true if the following criteria is met:\r\n    //  *8 chars or more\r\n    //  *Must contain at least 1 capital letter\r\n    //  *Must contain at least 1 number or special character\r\n    return /^(?:(?=.*[a-z])(?:(?=.*[A-Z])(?=.*[\\d\\W])|(?=.*\\W)(?=.*\\d))|(?=.*\\W)(?=.*[A-Z])(?=.*\\d)).{8,}$/.test(\r\n      pword\r\n    );\r\n  }\r\n\r\n  static CheckResult(result) {\r\n    const Results = {\r\n      '0': 'OK',\r\n      '-2': 'Incorrect username or password',\r\n      '-3': 'Account disabled',\r\n      '-4': 'Account locked',\r\n      '-5': 'Log on from this PC is denied',\r\n      '-6': 'Log on at this time is denied',\r\n      '-7': 'Account already logged in',\r\n      '-9': 'Unspecified error',\r\n      '2': 'Password change required',\r\n      '3': 'Insufficient privileges',\r\n      '-10': 'Account expired',\r\n      '-11': 'Maintenance mode',\r\n      '4': 'Security token expired',\r\n      '': 'An error has occured',\r\n    };\r\n    return Results[result];\r\n  }\r\n}\r\n","module.exports = __WEBPACK_EXTERNAL_MODULE__33__;","import Cookies from 'js-cookie';\r\n\r\nconst COOKIE_VALID_DAYS = 1; // 0 = Session cookie\r\n\r\n// Override the default js-cookie conversion / encoding\r\n// methods so the written values work with Contensis sites\r\nconst _cookie = Cookies.withConverter({\r\n  read: value => decodeURIComponent(value),\r\n  write: value => encodeURIComponent(value),\r\n});\r\n\r\nexport class CookieHelper {\r\n  static GetCookie(name) {\r\n    return _cookie.get(name);\r\n  }\r\n\r\n  static SetCookie(name, value, maxAgeDays = COOKIE_VALID_DAYS) {\r\n    maxAgeDays === 0\r\n      ? _cookie.set(name, value)\r\n      : _cookie.set(name, value, { expires: maxAgeDays });\r\n  }\r\n\r\n  static DeleteCookie(name) {\r\n    _cookie.remove(name);\r\n  }\r\n}\r\n","module.exports = __WEBPACK_EXTERNAL_MODULE__35__;","import { connect } from 'react-redux';\r\nimport {\r\n  loginUser,\r\n  logoutUser,\r\n  toggleLoginMode,\r\n  forgotPassword,\r\n  changePassword,\r\n  changePasswordWithToken,\r\n  setRecaptchaResponse,\r\n} from '../redux/actions';\r\nimport {\r\n  selectUser,\r\n  selectUserMessage,\r\n  selectLoginScreenMode,\r\n  selectPasswordMessage,\r\n  selectChangePasswordMessage,\r\n  selectCaptchaSiteKey,\r\n  selectCaptchaResponse,\r\n  selectUserLoggedIn,\r\n} from '../redux/selectors';\r\nimport { toJS } from '~/core/util/ToJs';\r\nimport {\r\n  selectCurrentPath,\r\n  selectQueryStringAsObject,\r\n} from '~/core/redux/selectors/routing';\r\n\r\nconst getDisplayName = WrappedComponent => {\r\n  return WrappedComponent.displayName || WrappedComponent.name || 'Component';\r\n};\r\n\r\nconst withLogin = WrappedComponent => {\r\n  // Returns a redux-connected component with the following props:\r\n  // this.propTypes = {\r\n  //   loginUser: PropTypes.func,\r\n  //   logoutUser: PropTypes.func,\r\n  //   user: PropTypes.object,\r\n  // };\r\n\r\n  const mapStateToProps = state => {\r\n    return {\r\n      user: selectUser(state),\r\n      userMessage: selectUserMessage(state),\r\n      screenMode: selectLoginScreenMode(state),\r\n      passwordMessage: selectPasswordMessage(state),\r\n      changePasswordMessage: selectChangePasswordMessage(state),\r\n      captchaSiteKey: selectCaptchaSiteKey(state),\r\n      isHuman: selectCaptchaResponse(state),\r\n      isLoggedIn: selectUserLoggedIn(state),\r\n      currentPath: selectCurrentPath(state),\r\n      queryString: selectQueryStringAsObject(state),\r\n    };\r\n  };\r\n\r\n  const mapDispatchToProps = {\r\n    loginUser,\r\n    logoutUser,\r\n    toggleLoginMode,\r\n    forgotPassword,\r\n    changePassword,\r\n    changePasswordWithToken,\r\n    captchaResponse: setRecaptchaResponse,\r\n  };\r\n\r\n  const ConnectedComponent = connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n  )(toJS(WrappedComponent));\r\n\r\n  ConnectedComponent.displayName = `${getDisplayName(WrappedComponent)}`;\r\n\r\n  return ConnectedComponent;\r\n};\r\n\r\nexport default withLogin;\r\n","export const selectCommitRef = state => {\r\n  return state.getIn(['version', 'commitRef']);\r\n};\r\nexport const selectBuildNumber = state => {\r\n  return state.getIn(['version', 'buildNo']);\r\n};\r\n\r\nexport const selectVersionStatus = state => {\r\n  return state.getIn(['version', 'contensisVersionStatus']);\r\n};\r\n","export const hasNavigationTree = state => {\r\n  return state.getIn(['navigation', 'isReady']);\r\n};\r\n\r\nexport const selectNavigationRoot = state => {\r\n  return state.getIn(['navigation', 'root']);\r\n};\r\n\r\nexport const selectNavigationDepends = state => {\r\n  return state.getIn(['navigation', 'treeDepends']);\r\n};\r\n","import React, { useEffect, useCallback } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { connect } from 'react-redux';\r\nimport { hot } from 'react-hot-loader';\r\nimport { Redirect, useLocation } from 'react-router-dom';\r\nimport { renderRoutes, matchRoutes } from 'react-router-config';\r\n\r\nimport {\r\n  selectRouteEntry,\r\n  selectRouteEntryContentTypeId,\r\n  selectRouteLoading,\r\n  selectIsNotFound,\r\n  selectCurrentProject,\r\n  selectCurrentPath,\r\n} from '~/core/redux/selectors/routing';\r\nimport { setNavigationPath } from '~/core/redux/actions/routing';\r\nimport NotFound from '~/pages/NotFound';\r\n\r\nimport { Status } from './Status';\r\nimport { toJS } from '../util/ToJs';\r\nimport { selectUserLoggedIn } from '~/features/login/redux/selectors';\r\n\r\nconst getTrimmedPath = path => {\r\n  if (path !== '/') {\r\n    const lastChar = path[path.length - 1];\r\n    if (lastChar == '/') {\r\n      return path.substring(0, path.length - 1);\r\n    }\r\n  }\r\n  return path;\r\n};\r\n\r\nconst RouteLoader = ({\r\n  statePath,\r\n  projectId,\r\n  contentTypeId,\r\n  entry,\r\n  isLoggedIn,\r\n  isNotFound,\r\n  notFoundComponent,\r\n  setNavigationPath,\r\n  routes,\r\n  withEvents,\r\n}) => {\r\n  const location = useLocation();\r\n\r\n  // Match any Static Routes a developer has defined\r\n  const matchedStaticRoute = () =>\r\n    matchRoutes(routes.StaticRoutes, location.pathname);\r\n  const isStaticRoute = () => matchedStaticRoute().length > 0;\r\n\r\n  const trimmedPath = getTrimmedPath(location.pathname);\r\n\r\n  const staticRoute = isStaticRoute() && matchedStaticRoute()[0];\r\n\r\n  const setPath = useCallback(() => {\r\n    let serverPath = null;\r\n    if (staticRoute && staticRoute.match && staticRoute.match.isExact) {\r\n      serverPath = staticRoute.route.path\r\n        .split('/')\r\n        .filter(p => !p.startsWith(':'))\r\n        .join('/');\r\n    }\r\n\r\n    setNavigationPath(\r\n      serverPath || trimmedPath,\r\n      location,\r\n      staticRoute,\r\n      withEvents,\r\n      statePath,\r\n      routes\r\n    );\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [\r\n    setNavigationPath,\r\n    // staticRoute,\r\n    withEvents,\r\n    location,\r\n    routes,\r\n    // statePath,\r\n    trimmedPath,\r\n  ]);\r\n\r\n  if (typeof window == 'undefined') setPath();\r\n\r\n  useEffect(() => {\r\n    setPath();\r\n  }, [location, setPath]);\r\n\r\n  // Need to redirect when url endswith a /\r\n  if (location.pathname.length > trimmedPath.length) {\r\n    return <Redirect to={trimmedPath} />;\r\n  }\r\n  // Render any Static Routes a developer has defined\r\n  if (isStaticRoute(trimmedPath)) {\r\n    return renderRoutes(routes.StaticRoutes, {\r\n      projectId,\r\n      contentTypeId,\r\n      entry,\r\n      isLoggedIn,\r\n    });\r\n  }\r\n\r\n  // Match any Defined Content Type Mappings\r\n  if (contentTypeId) {\r\n    const MatchedComponent = routes.ContentTypeMappings.find(\r\n      item => item.contentTypeID == contentTypeId\r\n    );\r\n\r\n    if (MatchedComponent) {\r\n      return (\r\n        <MatchedComponent.component\r\n          projectId={projectId}\r\n          contentTypeId={contentTypeId}\r\n          entry={entry}\r\n          isLoggedIn={isLoggedIn}\r\n        />\r\n      );\r\n    }\r\n  }\r\n\r\n  const NotFoundComponent = notFoundComponent ? notFoundComponent : NotFound;\r\n  if (isNotFound) {\r\n    return (\r\n      <Status code={404}>\r\n        <NotFoundComponent />\r\n      </Status>\r\n    );\r\n  }\r\n\r\n  return null;\r\n};\r\n\r\nRouteLoader.propTypes = {\r\n  routes: PropTypes.objectOf(PropTypes.array, PropTypes.array),\r\n  withEvents: PropTypes.object,\r\n  statePath: PropTypes.string,\r\n  projectId: PropTypes.string,\r\n  contentTypeId: PropTypes.string,\r\n  loading: PropTypes.object,\r\n  entry: PropTypes.object,\r\n  isLoggedIn: PropTypes.bool,\r\n  isNotFound: PropTypes.bool,\r\n  notFoundComponent: PropTypes.func,\r\n  setNavigationPath: PropTypes.func,\r\n};\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    statePath: selectCurrentPath(state),\r\n    projectId: selectCurrentProject(state),\r\n    entry: selectRouteEntry(state),\r\n    contentTypeId: selectRouteEntryContentTypeId(state),\r\n    isNotFound: selectIsNotFound(state),\r\n    isLoggedIn: selectUserLoggedIn(state),\r\n    isLoading: selectRouteLoading(state),\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = {\r\n  setNavigationPath,\r\n};\r\n\r\nexport default hot(module)(\r\n  connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n  )(toJS(RouteLoader))\r\n);\r\n","module.exports = __WEBPACK_EXTERNAL_MODULE__40__;","module.exports = __WEBPACK_EXTERNAL_MODULE__41__;","module.exports = __WEBPACK_EXTERNAL_MODULE__42__;","import { action } from '~/core/util/helpers';\r\nimport { SET_VERSION, SET_VERSION_STATUS } from '~/core/redux/types/version';\r\n\r\nexport const setVersion = (commitRef, buildNo) =>\r\n  action(SET_VERSION, { commitRef, buildNo });\r\n\r\nexport const setVersionStatus = status =>\r\n  action(SET_VERSION_STATUS, { status });\r\n","import React from 'react';\r\nimport { hot } from 'react-hot-loader';\r\nimport RouteLoader from '~/core/routes/RouteLoader';\r\n\r\nconst AppRoot = props => {\r\n  return <RouteLoader {...props} />;\r\n};\r\n\r\nexport default hot(module)(AppRoot);\r\n","module.exports = function(module) {\n\tif (!module.webpackPolyfill) {\n\t\tmodule.deprecate = function() {};\n\t\tmodule.paths = [];\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n","module.exports = __WEBPACK_EXTERNAL_MODULE__46__;","import React from 'react';\r\nconst NotFound = () => (\r\n  <>\r\n    <header>\r\n      <h1>404 Page Not Found</h1>\r\n    </header>\r\n  </>\r\n);\r\nexport default NotFound;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { Route } from 'react-router-dom';\r\n\r\nexport const Status = ({ code, children }) => {\r\n  return (\r\n    <Route\r\n      render={({ staticContext }) => {\r\n        if (staticContext) staticContext.status = code;\r\n        return children;\r\n      }}\r\n    />\r\n  );\r\n};\r\n\r\nStatus.propTypes = {\r\n  code: PropTypes.number.isRequired,\r\n  children: PropTypes.element,\r\n};\r\n","module.exports = __WEBPACK_EXTERNAL_MODULE__49__;","module.exports = __WEBPACK_EXTERNAL_MODULE__51__;","import { createBrowserHistory, createMemoryHistory } from 'history';\r\n\r\n// Create a history depending on the environment\r\nconst selectedHistory =\r\n  typeof window !== 'undefined' ? createBrowserHistory : createMemoryHistory;\r\n\r\nexport const history = (options = {}) => selectedHistory(options);\r\nexport const browserHistory = selectedHistory();\r\n","module.exports = __WEBPACK_EXTERNAL_MODULE__53__;","const servers = SERVERS; /* global SERVERS */\r\nconst alias = servers.alias.toLowerCase();\r\nconst publicUri = PUBLIC_URI; /* global PUBLIC_URI */\r\nconst projects = PROJECTS; /* global PROJECTS */\r\n\r\n// return a projectId via the request hostname\r\nconst pickProject = (hostname, query) => {\r\n  // if localhost we can only infer via a querystring, and take your word for it\r\n  if (hostname == 'localhost') {\r\n    return (query && query.p) || projects[0].id;\r\n  }\r\n\r\n  // if hostname is the actual public uri we can return the first project from the list\r\n  if (hostname == publicUri) {\r\n    return projects[0].id;\r\n  }\r\n\r\n  let project = 'unknown';\r\n\r\n  // // go through all the defined projects\r\n  // Object.entries(projects).map(([, p]) => {\r\n  const p = projects[0];\r\n\r\n  // check if we're accessing via the project's public uri\r\n  if (hostname.includes(p.publicUri)) project = p.id;\r\n\r\n  // the url structure is different for website (we don't prefix)\r\n  if (p.id.startsWith('website')) {\r\n    // check for internal and external hostnames\r\n    // we check live and preview distinctly so our rule does not clash with\r\n    // hostnames that use a project prefix\r\n    if (\r\n      hostname.includes(`live-${alias}.cloud.contensis.com`) ||\r\n      hostname.includes(`live.${alias}.contensis.cloud`) ||\r\n      hostname.includes(`preview-${alias}.cloud.contensis.com`) ||\r\n      hostname.includes(`preview.${alias}.contensis.cloud`)\r\n    )\r\n      project = p.id;\r\n  } else {\r\n    // check for internal and external hostnames, prefixed with the projectId\r\n    if (\r\n      hostname.includes(`${p.id.toLowerCase()}-${alias}.cloud.contensis.com`) ||\r\n      hostname.includes(`${p.id.toLowerCase()}.${alias}.contensis.cloud`)\r\n    )\r\n      project = p.id;\r\n  }\r\n  // });\r\n  return project === 'unknown' ? p.id : project;\r\n};\r\n\r\nexport default pickProject;\r\n","import { compose, createStore, applyMiddleware } from 'redux';\r\nimport { combineReducers } from 'redux-immutable';\r\nimport thunk from 'redux-thunk';\r\nimport createSagaMiddleware, { END } from 'redux-saga';\r\n\r\n// Core reducers\r\nimport RoutingReducer from './reducers/routing';\r\nimport { reducer as UserReducer } from '~/features/login';\r\nimport VersionReducer from './reducers/version';\r\nimport NavigationReducer from './reducers/navigation';\r\nimport routerMiddleware from './routerMiddleware';\r\n\r\nexport default (featureReducers, initialState, history) => {\r\n  const thunkMiddleware = [thunk];\r\n\r\n  let reduxDevToolsMiddleware = f => f;\r\n\r\n  if (typeof window != 'undefined') {\r\n    reduxDevToolsMiddleware = window.__REDUX_DEVTOOLS_EXTENSION__\r\n      ? window.__REDUX_DEVTOOLS_EXTENSION__()\r\n      : f => f;\r\n  }\r\n\r\n  const sagaMiddleware = createSagaMiddleware();\r\n  const middleware = compose(\r\n    applyMiddleware(\r\n      ...thunkMiddleware,\r\n      sagaMiddleware,\r\n      routerMiddleware(history)\r\n    ),\r\n    reduxDevToolsMiddleware\r\n  );\r\n\r\n  let reducers = {\r\n    navigation: NavigationReducer,\r\n    routing: RoutingReducer,\r\n    user: UserReducer,\r\n    version: VersionReducer,\r\n    ...featureReducers,\r\n  };\r\n\r\n  const combinedReducers = combineReducers(reducers);\r\n\r\n  const store = initialState => {\r\n    const store = createStore(combinedReducers, initialState, middleware);\r\n    store.runSaga = sagaMiddleware.run;\r\n    store.close = () => store.dispatch(END);\r\n    return store;\r\n  };\r\n\r\n  return store(initialState);\r\n};\r\n","module.exports = __WEBPACK_EXTERNAL_MODULE__56__;","module.exports = __WEBPACK_EXTERNAL_MODULE__57__;","module.exports = __WEBPACK_EXTERNAL_MODULE__58__;","module.exports = __WEBPACK_EXTERNAL_MODULE__59__;","import { Map, fromJS, List, Set } from 'immutable';\r\nimport {\r\n  SET_ENTRY_ID,\r\n  SET_ENTRY,\r\n  SET_NAVIGATION_PATH,\r\n  SET_NAVIGATION_NOT_FOUND,\r\n  SET_NODE,\r\n  SET_ANCESTORS,\r\n  SET_TARGET_PROJECT,\r\n  SET_ROUTE,\r\n  SET_SIBLINGS,\r\n} from '~/core/redux/types/routing';\r\nimport { GetAllResponseGuids } from '~/core/util/ContensisDeliveryApi';\r\n\r\nlet initialState = Map({\r\n  currentPath: '/',\r\n  currentNode: [],\r\n  currentProject: 'unknown',\r\n  notFound: false,\r\n  entryID: null,\r\n  entry: null,\r\n  entryDepends: new List(),\r\n  contentTypeId: null,\r\n  currentNodeAncestors: new List(),\r\n  currentTreeId: null,\r\n});\r\n\r\nexport default (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case SET_ANCESTORS: {\r\n      if (action.ancestors) {\r\n        let ancestorIDs = action.ancestors.map(node => {\r\n          return node.id;\r\n        });\r\n\r\n        let currentNodeDepends = state.get('nodeDepends');\r\n        const allNodeDepends = Set.union([\r\n          Set(ancestorIDs),\r\n          currentNodeDepends,\r\n        ]);\r\n        return state\r\n          .set('nodeDepends', allNodeDepends)\r\n          .set('currentNodeAncestors', fromJS(action.ancestors));\r\n      }\r\n      return state.set('currentNodeAncestors', fromJS(action.ancestors));\r\n    }\r\n    case SET_ENTRY: {\r\n      if (!action.entry)\r\n        return state\r\n          .set('entry', null)\r\n          .set('entryDepends', null)\r\n          .set('isLoading', action.isLoading);\r\n      const entryDepends = GetAllResponseGuids(action.entry);\r\n      return state\r\n        .set('entryDepends', fromJS(entryDepends))\r\n        .set('entry', fromJS(action.entry))\r\n        .set('isLoading', action.isLoading);\r\n    }\r\n    case SET_ENTRY_ID: {\r\n      if (action.id === '') {\r\n        return state;\r\n      }\r\n      return state.set('entryID', action.id);\r\n    }\r\n    case SET_NAVIGATION_PATH: {\r\n      let staticRoute = false;\r\n      if (action.staticRoute) {\r\n        staticRoute = { ...action.staticRoute };\r\n      }\r\n      if (action.path) {\r\n        return state\r\n          .set('currentPath', fromJS(action.path))\r\n          .set('location', fromJS(action.location))\r\n          .set(\r\n            'staticRoute',\r\n            fromJS({\r\n              ...staticRoute,\r\n              route: { ...staticRoute.route, component: null },\r\n            })\r\n          )\r\n          .set('isLoading', typeof window !== 'undefined');\r\n      }\r\n      return state;\r\n    }\r\n    case SET_NAVIGATION_NOT_FOUND: {\r\n      return state\r\n        .set('notFound', fromJS(action.notFound))\r\n        .set('isLoading', false);\r\n    }\r\n    case SET_NODE: {\r\n      const { node } = action;\r\n      if (!node) return state;\r\n      // On Set Node, we reset all dependants.\r\n      const nodeDepends = Set([node.id]);\r\n      return state\r\n        .set('nodeDepends', nodeDepends)\r\n        .set('currentNode', fromJS(action.node))\r\n        .removeIn(['currentNode', 'entry']); // We have the entry stored elsewhere, so lets not keep it twice.\r\n    }\r\n    case SET_ROUTE: {\r\n      return state.set('nextPath', action.path);\r\n    }\r\n    case SET_SIBLINGS: {\r\n      // Can be null in some cases like the homepage.\r\n      let currentNodeSiblingParent = null;\r\n      let siblingIDs = [];\r\n      if (action.siblings && action.siblings.length > 0) {\r\n        currentNodeSiblingParent = action.siblings[0].parentId;\r\n        siblingIDs = action.siblings.map(node => {\r\n          return node.id;\r\n        });\r\n      }\r\n      let currentNodeDepends = state.get('nodeDepends');\r\n      const allNodeDepends = Set.union([Set(siblingIDs), currentNodeDepends]);\r\n      return state\r\n        .set('nodeDepends', allNodeDepends)\r\n        .set('currentNodeSiblings', fromJS(action.siblings))\r\n        .set('currentNodeSiblingsParent', currentNodeSiblingParent);\r\n    }\r\n    case SET_TARGET_PROJECT: {\r\n      return state\r\n        .set('currentProject', action.project)\r\n        .set('currentTreeId', '') //getTreeID(action.project))\r\n        .set('allowedGroups', fromJS(action.allowedGroups));\r\n    }\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import { Map } from 'immutable';\r\nimport { SET_VERSION, SET_VERSION_STATUS } from '~/core/redux/types/version';\r\n\r\nlet initialState = Map({\r\n  commitRef: null,\r\n  buildNo: null,\r\n  contensisVersionStatus: 'published',\r\n});\r\n\r\nexport default (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case SET_VERSION_STATUS: {\r\n      return state.set('contensisVersionStatus', action.status);\r\n    }\r\n    case SET_VERSION: {\r\n      return state\r\n        .set('commitRef', action.commitRef)\r\n        .set('buildNo', action.buildNo);\r\n    }\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import { Map, fromJS, List } from 'immutable';\r\n\r\nimport {\r\n  SET_NODE_TREE,\r\n  GET_NODE_TREE_ERROR,\r\n} from '~/core/redux/types/navigation';\r\n\r\nconst initialState = Map({\r\n  root: null,\r\n  treeDepends: new List([]),\r\n  isError: false,\r\n  isReady: false,\r\n});\r\n\r\nexport default (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case SET_NODE_TREE: {\r\n      return state.set('root', fromJS(action.nodes)).set('isReady', true);\r\n    }\r\n    case GET_NODE_TREE_ERROR: {\r\n      return state.set('isError', true);\r\n    }\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import { CALL_HISTORY_METHOD } from '~/core/redux/types/routing';\r\n\r\n/**\r\n * This middleware captures CALL_HISTORY_METHOD actions to redirect to the\r\n * provided history object. This will prevent these actions from reaching your\r\n * reducer or any middleware that comes after this one.\r\n */\r\n/* eslint-disable no-unused-vars */\r\nconst routerMiddleware = history => store => next => action => {\r\n  if (action.type !== CALL_HISTORY_METHOD) {\r\n    return next(action);\r\n  }\r\n\r\n  const {\r\n    payload: { method, args },\r\n  } = action;\r\n  history[method](...args);\r\n};\r\n\r\nexport default routerMiddleware;\r\n","// index.js\r\nimport { all } from 'redux-saga/effects';\r\nimport { routingSagas } from './routing';\r\nimport { sagas as userSagas } from '~/features/login';\r\nimport { navigationSagas } from './navigation';\r\nimport { validateUserSaga } from '~/features/login/redux/sagas';\r\n\r\nexport default function(featureSagas = []) {\r\n  return function* rootSaga() {\r\n    const subSagas = [...routingSagas, ...navigationSagas, ...userSagas];\r\n    yield all([validateUserSaga({}), ...subSagas, ...featureSagas]);\r\n  };\r\n}\r\n","// load-entries.js\r\nimport * as log from 'loglevel';\r\nimport { takeEvery, put, select, call, all } from 'redux-saga/effects';\r\nimport {\r\n  SET_ENTRY_ID,\r\n  SET_ENTRY,\r\n  SET_NAVIGATION_NOT_FOUND,\r\n  SET_NODE,\r\n  SET_ANCESTORS,\r\n  SET_NAVIGATION_PATH,\r\n  SET_ROUTE,\r\n  CALL_HISTORY_METHOD,\r\n  SET_SIBLINGS,\r\n} from '~/core/redux/types/routing';\r\nimport { cachedSearch, deliveryApi } from '~/core/util/ContensisDeliveryApi';\r\nimport { selectVersionStatus } from '~/core/redux/selectors/version';\r\nimport {\r\n  selectCurrentPath,\r\n  selectCurrentProject,\r\n  selectRouteEntry,\r\n} from '~/core/redux/selectors/routing';\r\nimport { GET_NODE_TREE } from '../types/navigation';\r\nimport { hasNavigationTree } from '../selectors/navigation';\r\nimport { routeEntryByFields } from './queries';\r\n\r\nexport const routingSagas = [\r\n  takeEvery(SET_NAVIGATION_PATH, getRouteSaga),\r\n  takeEvery(SET_ROUTE, setRouteSaga),\r\n];\r\n\r\n/**\r\n * To navigate / push a specific route via redux middleware\r\n * @param {path, state} action\r\n */\r\nfunction* setRouteSaga(action) {\r\n  yield put({\r\n    type: CALL_HISTORY_METHOD,\r\n    payload: {\r\n      method: 'push',\r\n      args: [action.path, action.state],\r\n    },\r\n  });\r\n}\r\n\r\nfunction* getRouteSaga(action) {\r\n  let entry = null;\r\n  try {\r\n    const { withEvents, routes } = action;\r\n    let appsays;\r\n    if (withEvents && withEvents.onRouteLoad) {\r\n      appsays = yield withEvents.onRouteLoad(action);\r\n    }\r\n    // if appsays customNavigation: true, we will set doNavigation to false\r\n    // if appsays customNavigation: { ... }, we will set doNavigation to the customNavigation object and check for child elements\r\n    // if appsays nothing we will set doNavigation to true and continue to do navigation calls\r\n    const doNavigation =\r\n      !appsays ||\r\n      (appsays && appsays.customNavigation === true\r\n        ? false\r\n        : (appsays && appsays.customNavigation) || true);\r\n\r\n    const entryLinkDepth = (appsays && appsays.entryLinkDepth) || 3;\r\n    const setContentTypeLimits =\r\n      routes &&\r\n      routes.ContentTypeMappings &&\r\n      !!routes.ContentTypeMappings.find(ct => ct.fields || ct.linkDepth);\r\n\r\n    const state = yield select();\r\n    const routeEntry = selectRouteEntry(state);\r\n    if (\r\n      (appsays && appsays.customRouting) ||\r\n      (action.staticRoute && !action.staticRoute.route.fetchNode) ||\r\n      (routeEntry && action.statePath === action.path)\r\n    ) {\r\n      // To prevent erroneous 404s and wasted network calls, this covers\r\n      // - appsays customRouting and does SET_ENTRY etc. via the consuming app\r\n      // - all staticRoutes (where custom 'route.fetchNode' attribute is falsey)\r\n      // - standard Contensis SiteView Routing where we already have that entry in state\r\n      if (routeEntry) {\r\n        entry = routeEntry.toJS();\r\n        yield put({\r\n          type: SET_ENTRY,\r\n          entry,\r\n          isLoading: false,\r\n        });\r\n      } else yield call(setRouteEntry);\r\n    } else {\r\n      const currentPath = selectCurrentPath(state);\r\n      const deliveryApiStatus = selectVersionStatus(state);\r\n      const project = selectCurrentProject(state);\r\n\r\n      let pathNode = null,\r\n        ancestors = null,\r\n        siblings = null;\r\n\r\n      // Scroll into View\r\n      if (typeof window !== 'undefined') {\r\n        window.scroll({\r\n          top: 0,\r\n        });\r\n      }\r\n\r\n      let currentPathDepth = currentPath.split('/').length - 1;\r\n      if (currentPath === '/') currentPathDepth = 0;\r\n\r\n      // Handle homepage\r\n      if (currentPath === '/') {\r\n        pathNode = yield cachedSearch.getRootNode(\r\n          {\r\n            depth: 0,\r\n            entryFields: '*',\r\n            entryLinkDepth,\r\n            language: 'en-GB',\r\n          },\r\n          project\r\n        );\r\n      } else {\r\n        // Handle preview routes\r\n        if (currentPath && currentPath.startsWith('/preview/')) {\r\n          let splitPath = currentPath.split('/');\r\n          let entryGuid = splitPath[2];\r\n          if (splitPath.length == 3) {\r\n            // According to product dev we cannot use Node API\r\n            // for previewing entries as it gives a response of []\r\n            // -- apparently it is not correct to request latest content\r\n            // with Node API\r\n            let previewEntry = yield deliveryApi\r\n              .getClient(deliveryApiStatus, project)\r\n              .entries.get({ id: entryGuid, linkDepth: 3 });\r\n            if (previewEntry) {\r\n              yield call(setRouteEntry, previewEntry);\r\n            } else {\r\n              yield call(do404);\r\n            }\r\n          }\r\n        } else {\r\n          // Handle all other routes\r\n          pathNode = yield cachedSearch.getNode(\r\n            {\r\n              depth:\r\n                doNavigation === true || doNavigation.children === true\r\n                  ? 3\r\n                  : (doNavigation && doNavigation.children) || 0,\r\n              path: currentPath,\r\n              entryFields: setContentTypeLimits\r\n                ? ['sys.contentTypeId', 'sys.id']\r\n                : '*',\r\n              entryLinkDepth: setContentTypeLimits ? 0 : entryLinkDepth,\r\n            },\r\n            project\r\n          );\r\n          if (\r\n            setContentTypeLimits &&\r\n            pathNode &&\r\n            pathNode.entry &&\r\n            pathNode.entry.sys &&\r\n            pathNode.entry.sys.id\r\n          ) {\r\n            const contentType =\r\n              routes &&\r\n              routes.ContentTypeMappings &&\r\n              routes.ContentTypeMappings.find(\r\n                ct => ct.contentTypeID === pathNode.entry.sys.contentTypeId\r\n              );\r\n            const query = routeEntryByFields(\r\n              pathNode.entry.sys.id,\r\n              contentType && contentType.fields,\r\n              deliveryApiStatus\r\n            );\r\n            const payload = yield cachedSearch.search(\r\n              query,\r\n              contentType && typeof contentType.linkDepth !== 'undefined'\r\n                ? contentType.linkDepth\r\n                : 3,\r\n              project\r\n            );\r\n            if (payload && payload.items && payload.items.length > 0) {\r\n              pathNode.entry = payload.items[0];\r\n            }\r\n          }\r\n        }\r\n\r\n        if (\r\n          pathNode &&\r\n          pathNode.id &&\r\n          (doNavigation === true || doNavigation.ancestors)\r\n        ) {\r\n          ancestors = yield cachedSearch.getAncestors(pathNode.id, project);\r\n          // No menu shows the  siblings at this level, so no need to load them.\r\n          if (\r\n            currentPathDepth > 1 &&\r\n            (doNavigation === true || doNavigation.siblings)\r\n          ) {\r\n            siblings = yield cachedSearch.getSiblings(\r\n              {\r\n                id: pathNode.id,\r\n                entryFields: ['sys.contentTypeId', 'url'],\r\n              },\r\n              project\r\n            );\r\n          }\r\n        }\r\n      }\r\n\r\n      if (\r\n        pathNode &&\r\n        pathNode.entry &&\r\n        pathNode.entry.sys &&\r\n        pathNode.entry.sys.id\r\n      ) {\r\n        entry = pathNode.entry;\r\n        yield call(setRouteEntry, entry, pathNode, ancestors, siblings);\r\n      } else {\r\n        yield call(do404);\r\n      }\r\n    }\r\n    if (withEvents && withEvents.onRouteLoaded) {\r\n      yield withEvents.onRouteLoaded({ ...action, entry });\r\n    }\r\n\r\n    if (\r\n      !hasNavigationTree(state) &&\r\n      (doNavigation === true || doNavigation.tree)\r\n    )\r\n      // Load navigation clientside only, a put() should help that work\r\n      yield put({\r\n        type: GET_NODE_TREE,\r\n        treeDepth:\r\n          doNavigation === true ||\r\n          !doNavigation.tree ||\r\n          doNavigation.tree === true\r\n            ? 2\r\n            : doNavigation.tree,\r\n      });\r\n  } catch (e) {\r\n    log.error(...['Error running route saga:', e, e.stack]);\r\n    yield call(do404);\r\n  }\r\n}\r\n\r\nfunction* setRouteEntry(entry, node, ancestors, siblings) {\r\n  yield all([\r\n    put({\r\n      type: SET_NAVIGATION_NOT_FOUND,\r\n      notFound: !(entry && entry.sys.id),\r\n    }),\r\n    put({\r\n      type: SET_NODE,\r\n      node,\r\n    }),\r\n    put({\r\n      type: SET_ENTRY,\r\n      entry: entry,\r\n    }),\r\n    put({\r\n      type: SET_ENTRY_ID,\r\n      id: (entry && entry.sys.id) || null,\r\n    }),\r\n    put({\r\n      type: SET_ANCESTORS,\r\n      ancestors,\r\n    }),\r\n    put({\r\n      type: SET_SIBLINGS,\r\n      siblings,\r\n    }),\r\n  ]);\r\n}\r\n\r\nfunction* do404() {\r\n  yield put({\r\n    type: SET_NAVIGATION_NOT_FOUND,\r\n    notFound: true,\r\n  });\r\n  yield put({\r\n    type: SET_ENTRY_ID,\r\n    id: null,\r\n  });\r\n  yield put({\r\n    type: SET_ENTRY,\r\n    entry: null,\r\n  });\r\n}\r\n","module.exports = __WEBPACK_EXTERNAL_MODULE__66__;","// eslint-disable-next-line import/named\r\nimport { Query } from '~/core/util/ContensisDeliveryApi';\r\nimport { fieldExpression, defaultExpressions } from '~/core/search/expressions';\r\n\r\nexport const routeEntryByFields = (\r\n  id,\r\n  fields = [],\r\n  versionStatus = 'published'\r\n) => {\r\n  const query = new Query(\r\n    ...[...fieldExpression('sys.id', id), ...defaultExpressions(versionStatus)]\r\n  );\r\n  query.fields = fields;\r\n  return query;\r\n};\r\n","module.exports = __WEBPACK_EXTERNAL_MODULE__68__;","import { Op, OrderBy } from 'contensis-delivery-api';\r\nimport { Fields, DataFormats } from '~/core/schema';\r\nimport {\r\n  fixFreeTextForElastic,\r\n  extractQuotedPhrases,\r\n} from '~/core/search/util';\r\n\r\nexport const fieldExpression = (\r\n  field,\r\n  value,\r\n  operator = 'equalTo',\r\n  weight = null\r\n) => {\r\n  if (!field || !value) return [];\r\n  if (Array.isArray(value)) return equalToOrIn(field, value, operator);\r\n  else\r\n    return !weight\r\n      ? [Op[operator](field, value)]\r\n      : [Op[operator](field, value).weight(weight)];\r\n};\r\n\r\nexport const contentTypeIdExpression = (contentTypeIds, webpageTemplates) => {\r\n  const expressions = [];\r\n  if (!contentTypeIds && !webpageTemplates) return expressions;\r\n\r\n  if (contentTypeIds && contentTypeIds.length > 0) {\r\n    expressions.push(\r\n      ...dataFormatExpression(contentTypeIds, DataFormats.entry)\r\n    );\r\n  }\r\n\r\n  if (webpageTemplates && webpageTemplates.length > 0) {\r\n    expressions.push(\r\n      ...dataFormatExpression(webpageTemplates, DataFormats.webpage)\r\n    );\r\n  }\r\n\r\n  if (expressions.length > 1) return [Op.or(...expressions)];\r\n\r\n  return expressions;\r\n};\r\n\r\nexport const filterExpressions = filters => {\r\n  if (!filters) return [];\r\n  const expressions = [];\r\n\r\n  filters.map(param => {\r\n    expressions.push(...fieldExpression(param.key, param.value, 'contains'));\r\n  });\r\n\r\n  return expressions;\r\n};\r\n\r\nexport const dataFormatExpression = (\r\n  contentTypeIds,\r\n  dataFormat = DataFormats.entry\r\n) => {\r\n  if (contentTypeIds && contentTypeIds.length > 0) {\r\n    /**\r\n     * We have an array of contentTypeIds some may be prefixed with a \"!\"\r\n     * to indicate this is a \"not\" expression\r\n     */\r\n    const withContentTypeIds = contentTypeIds.filter(c => !c.startsWith('!'));\r\n    const notContentTypeIds = contentTypeIds\r\n      .filter(c => c.startsWith('!'))\r\n      .map(id => id.substring(1));\r\n\r\n    const andExpr = Op.and();\r\n\r\n    const dataFormatExpr = fieldExpression(Fields.sys.dataFormat, dataFormat);\r\n\r\n    const withExpr = fieldExpression(\r\n      Fields.sys.contentTypeId,\r\n      withContentTypeIds\r\n    );\r\n\r\n    const notExpr = [\r\n      Op.not(...fieldExpression(Fields.sys.contentTypeId, notContentTypeIds)),\r\n    ];\r\n\r\n    andExpr.add(...dataFormatExpr);\r\n    if (withContentTypeIds.length > 0) andExpr.add(...withExpr);\r\n    if (notContentTypeIds.length > 0) andExpr.add(...notExpr);\r\n\r\n    return [andExpr];\r\n  }\r\n  return [];\r\n};\r\n\r\nexport const defaultExpressions = versionStatus => {\r\n  return [Op.equalTo(Fields.sys.versionStatus, versionStatus)];\r\n};\r\n\r\nexport const defaultSearchExpressions = versionStatus => {\r\n  return [\r\n    ...defaultExpressions(versionStatus),\r\n    ...includeInSearchExpressions(),\r\n  ];\r\n};\r\nexport const includeInSearchExpressions = () => [\r\n  Op.or(\r\n    Op.and(\r\n      Op.exists(Fields.sys.includeInSearch, true),\r\n      Op.equalTo(Fields.sys.includeInSearch, true)\r\n    ),\r\n    Op.exists(Fields.sys.includeInSearch, false)\r\n  ),\r\n];\r\n\r\nexport const orderByExpression = orderBy => {\r\n  let expression = OrderBy;\r\n  if (orderBy && orderBy.length > 0) {\r\n    orderBy.map(\r\n      ob =>\r\n        (expression = ob.startsWith('-')\r\n          ? expression.desc(ob.substring(1))\r\n          : expression.asc(ob))\r\n    );\r\n  }\r\n  return expression;\r\n};\r\n\r\nconst equalToOrIn = (field, arr, operator = 'equalTo') =>\r\n  arr.length === 0\r\n    ? []\r\n    : arr.length === 1\r\n    ? [Op[operator](field, arr[0])]\r\n    : [Op.in(field, ...arr)];\r\n\r\nexport const customWhereExpressions = where => {\r\n  if (!where || !Array.isArray(where)) return [];\r\n\r\n  // Accept HTTP style objects and map them to\r\n  // their equivalent JS client \"Op\" expressions\r\n  return where.map(clause => {\r\n    let expression;\r\n    Object.keys(clause).map((key, idx) => {\r\n      if (idx === 1) {\r\n        const operator = key;\r\n        const value = clause[key];\r\n        expression = Op[operator](clause.field, value, clause.weight);\r\n      }\r\n    });\r\n    return expression;\r\n  });\r\n};\r\n\r\nexport const termExpressions = (searchTerm, weightedSearchFields) => {\r\n  if (searchTerm && weightedSearchFields && weightedSearchFields.length > 0) {\r\n    // Extract any phrases in quotes to array\r\n    const quotedPhrases = extractQuotedPhrases(searchTerm);\r\n\r\n    // Modify the search term to remove any quoted phrases to leave any remaining terms\r\n    let modifiedSearchTerm = searchTerm;\r\n    quotedPhrases.forEach(\r\n      qp =>\r\n        (modifiedSearchTerm = modifiedSearchTerm\r\n          .replace(qp, '')\r\n          .replace('\"\"', '')\r\n          .trim())\r\n    );\r\n\r\n    // Push to the operators array to include in the query\r\n    const operators = [];\r\n\r\n    // Helper functions to generate Op expressions\r\n    const containsOp = (f, term) =>\r\n      fieldExpression(\r\n        f.fieldId,\r\n        fixFreeTextForElastic(term),\r\n        'contains',\r\n        f.weight\r\n      );\r\n    const freeTextOp = (f, term) =>\r\n      fieldExpression(\r\n        f.fieldId,\r\n        fixFreeTextForElastic(term),\r\n        'freeText',\r\n        f.weight\r\n      );\r\n\r\n    // For each weighted search field\r\n    weightedSearchFields.forEach(f => {\r\n      // Push to field operators\r\n      const fieldOperators = [];\r\n\r\n      // Add operator expressions for modified search term\r\n      if (modifiedSearchTerm) {\r\n        if (\r\n          [Fields.keywords, Fields.sys.filename, Fields.sys.uri].includes(\r\n            f.fieldId\r\n          )\r\n        ) {\r\n          fieldOperators.push(...containsOp(f, modifiedSearchTerm));\r\n        } else {\r\n          if ([Fields.entryTitle].includes(f.fieldId)) {\r\n            fieldOperators.push(\r\n              Op.or(\r\n                ...containsOp(f, modifiedSearchTerm),\r\n                ...freeTextOp(f, modifiedSearchTerm)\r\n              )\r\n            );\r\n          } else {\r\n            fieldOperators.push(...freeTextOp(f, modifiedSearchTerm));\r\n          }\r\n        }\r\n      }\r\n\r\n      // Add operator expressions for any quoted phrases\r\n      quotedPhrases.forEach(qp => fieldOperators.push(...containsOp(f, qp)));\r\n\r\n      // If we are using multiple operators for a field we will\r\n      // wrap each field inside an And operator so we will match\r\n      // all terms/phrases rather than any terms/phrases\r\n      if (fieldOperators.length > 1) {\r\n        operators.push(Op.and(...fieldOperators));\r\n      } else {\r\n        operators.push(...fieldOperators);\r\n      }\r\n    });\r\n\r\n    // Wrap operators in an Or operator\r\n    return [Op.or().addRange(operators)];\r\n  } else if (searchTerm) {\r\n    return [Op.contains(Fields.wildcard, searchTerm)];\r\n  } else {\r\n    return [];\r\n  }\r\n};\r\n","export const DataFormats = {\r\n  entry: 'entry',\r\n  webpage: 'webpage',\r\n};\r\n\r\nconst sys = {\r\n  contentTypeId: 'sys.contentTypeId',\r\n  dataFormat: 'sys.dataFormat',\r\n  filename: 'sys.properties.filename',\r\n  id: 'sys.id',\r\n  includeInSearch: 'sys.metadata.includeInSearch',\r\n  slug: 'sys.slug',\r\n  uri: 'sys.uri',\r\n  versionStatus: 'sys.versionStatus',\r\n};\r\n\r\nexport const Fields = {\r\n  entryTitle: 'entryTitle',\r\n  entryDescription: 'entryDescription',\r\n  keywords: 'keywords',\r\n  sys,\r\n  contentTypeId: 'sys.contentTypeId',\r\n  wildcard: '*',\r\n};\r\n\r\nexport const Projects = {\r\n  website: 'website',\r\n};\r\n\r\nexport const VersionStatus = {\r\n  published: 'published',\r\n  latest: 'latest',\r\n};\r\n\r\nexport const ContentTypes = {\r\n  contentPage: 'contentPage',\r\n};\r\n\r\nexport const WebpageFormats = {};\r\n\r\nexport const FilterExpressionTypes = {\r\n  contentType: 'contentType',\r\n  field: 'field',\r\n};\r\n","import { now } from '~/core/util/performance';\r\nimport { cachedSearch } from '~/core/util/ContensisDeliveryApi';\r\nimport { buildUrl } from '~/core/util/navigation';\r\n\r\nexport function fixFreeTextForElastic(s) {\r\n  let illegalChars = ['>', '<'];\r\n  let encodedChars = [\r\n    '+',\r\n    '-',\r\n    '=',\r\n    '&',\r\n    '|',\r\n    '!',\r\n    '(',\r\n    ')',\r\n    '{',\r\n    '}',\r\n    '[',\r\n    ']',\r\n    '^',\r\n    '\"',\r\n    '~',\r\n    '*',\r\n    '?',\r\n    ':',\r\n    '\\\\',\r\n    '/',\r\n  ];\r\n\r\n  let illegalRegEx = new RegExp(illegalChars.map(c => '\\\\' + c).join('|'), 'g');\r\n  let encodedRegEx = new RegExp(encodedChars.map(c => '\\\\' + c).join('|'), 'g');\r\n\r\n  s = s.replace(illegalRegEx, '');\r\n  s = s.replace(encodedRegEx, ''); // (m) => '\\\\\\\\' + m);\r\n  return s;\r\n}\r\n\r\nexport const timedSearch = async (query, linkDepth, projectId) => {\r\n  let duration = 0;\r\n\r\n  const start = now();\r\n  const payload = await cachedSearch.search(query, linkDepth, projectId);\r\n  const end = now();\r\n\r\n  duration = end - start;\r\n\r\n  return { duration, payload };\r\n};\r\n\r\nexport const extractQuotedPhrases = searchTerm => {\r\n  const pattern = new RegExp(\r\n    /(?=[\"'])(?:\"[^\"\\\\]*(?:\\\\[\\s\\S][^\"\\\\]*)*\"|'[^'\\\\]*(?:\\\\[\\s\\S][^'\\\\]*)*')/gm\r\n  );\r\n\r\n  return (searchTerm.match(pattern) || []).map(match =>\r\n    match.replace(/\"/g, '')\r\n  );\r\n};\r\n\r\nexport const callCustomApi = async (customApi, filters) => {\r\n  let uri = buildUrl(customApi.get('uri'), filters);\r\n  if (!uri) return null;\r\n  if (typeof window == 'undefined' && uri.startsWith('/'))\r\n    uri = `http://localhost:3001${uri}`;\r\n\r\n  const response = await fetch(uri);\r\n  return await response.json();\r\n};\r\n","export const now = () => {\r\n  if (typeof window == 'undefined') {\r\n    return Date.now();\r\n  }\r\n  return window.performance.now();\r\n};\r\n","import { takeEvery, put, select } from 'redux-saga/effects';\r\n\r\nimport { deliveryApi } from '~/core/util/ContensisDeliveryApi';\r\nimport {\r\n  GET_NODE_TREE,\r\n  SET_NODE_TREE,\r\n  GET_NODE_TREE_ERROR,\r\n} from '~/core/redux/types/navigation';\r\nimport { hasNavigationTree } from '~/core/redux/selectors/navigation';\r\nimport { selectVersionStatus } from '../selectors/version';\r\nimport { selectCurrentProject } from '../selectors/routing';\r\n\r\nexport const navigationSagas = [takeEvery(GET_NODE_TREE, ensureNodeTreeSaga)];\r\n\r\nexport function* ensureNodeTreeSaga(action) {\r\n  const state = yield select();\r\n  try {\r\n    if (!hasNavigationTree(state)) {\r\n      const deliveryApiVersionStatus = yield select(selectVersionStatus);\r\n      const project = yield select(selectCurrentProject);\r\n      const nodes = yield deliveryApi\r\n        .getClient(deliveryApiVersionStatus, project)\r\n        .nodes.getRoot({\r\n          depth: action.treeDepth || 2,\r\n          entryFields: 'entryTitle, metaInformation, sys.contentTypeId',\r\n        });\r\n      if (nodes) {\r\n        yield put({ type: SET_NODE_TREE, nodes });\r\n      } else {\r\n        yield put({ type: GET_NODE_TREE_ERROR });\r\n      }\r\n    }\r\n  } catch (ex) {\r\n    yield put({ type: GET_NODE_TREE_ERROR, error: ex.toString() });\r\n  }\r\n}\r\n","const internalServer = require('../server/internalServer').default;\r\n\r\nexports.app = internalServer.app;\r\nexports.httpProxy = internalServer.apiProxy;\r\nexports.start = internalServer.start;\r\n\r\nconst ReactApp = require('~/App').default;\r\n\r\nexports.ReactApp = ReactApp;\r\n","import 'isomorphic-fetch';\r\nimport express from 'express';\r\nimport Loadable from 'react-loadable';\r\n\r\nimport DisplayStartupConfiguration from './util/displayStartupConfiguration';\r\nimport ConfigureLocalDNS from './core/localDns';\r\nimport ConfigureReverseProxies, { apiProxy } from './core/reverseProxies';\r\n// import ServerFeatures from './features/configure';\r\nimport ConfigureWebApp from './core/webApp';\r\n\r\nconst app = express();\r\n\r\nconst start = (ReactApp, config, ServerFeatures) => {\r\n  app.disable('x-powered-by');\r\n\r\n  // Output some information about the used build/startup configuration\r\n  DisplayStartupConfiguration(config);\r\n\r\n  // Set-up local proxy for images from cms, to save doing rewrites and extra code\r\n  ServerFeatures(app);\r\n  ConfigureReverseProxies(app, config.reverseProxyPaths);\r\n  ConfigureWebApp(app, ReactApp, config);\r\n\r\n  app.use('/static', express.static('dist/static', { maxage: '31557600h' }));\r\n\r\n  app.on('ready', async () => {\r\n    // Configure DNS to make life easier\r\n    await ConfigureLocalDNS();\r\n\r\n    Loadable.preloadAll().then(() => {\r\n      var server = app.listen(3001, () => {\r\n        console.info(`HTTP server is listening @ port 3001`);\r\n        setTimeout(function() {\r\n          app.emit('app_started');\r\n        }, 500);\r\n      });\r\n      app.on('stop', () => {\r\n        server.close(function() {\r\n          console.info('GoodBye :(');\r\n        });\r\n      });\r\n    });\r\n  });\r\n};\r\n\r\nexport default { app, apiProxy, start };\r\n","module.exports = __WEBPACK_EXTERNAL_MODULE__76__;","const servers = SERVERS; /* global SERVERS */\r\nconst projects = PROJECTS; /* global PROJECTS */\r\n\r\nconst DisplayStartupConfiguration = config => {\r\n  /* eslint-disable no-console */\r\n  console.log();\r\n  console.log(\r\n    `Configured servers:\r\n`,\r\n    JSON.stringify(servers, null, 2)\r\n  );\r\n  console.log();\r\n  console.log(\r\n    `Configured projects:\r\n`,\r\n    JSON.stringify(projects, null, 2)\r\n  );\r\n  console.log();\r\n  console.log(\r\n    'Reverse proxy paths: ',\r\n    JSON.stringify(config.reverseProxyPaths, null, 2)\r\n  );\r\n  console.log();\r\n\r\n  /* eslint-enable no-console */\r\n};\r\n\r\nexport default DisplayStartupConfiguration;\r\n","import evilDns from 'evil-dns';\r\nimport fetchMyIp from '../util/fetchMyIp';\r\n\r\nconst servers = SERVERS; /* global SERVERS */\r\nconst apiConfig = DELIVERY_API_CONFIG; /* global DELIVERY_API_CONFIG */\r\n\r\nconst localDns = async () => {\r\n  const disableDnsChanges = false;\r\n\r\n  const configureLocalEndpoint = () => {\r\n    if (!disableDnsChanges) {\r\n      evilDns.add(`*${servers.alias}.cloud.contensis.com`, servers.internalVip);\r\n\r\n      if (apiConfig.internalIp)\r\n        evilDns.add(apiConfig.rootUrl, apiConfig.internalIp);\r\n    }\r\n  };\r\n\r\n  // Break api.ipify to test\r\n  // evilDns.add('api.ipify.org', '8.8.8.8');\r\n  await fetchMyIp(servers, configureLocalEndpoint);\r\n};\r\n\r\nexport default localDns;\r\n","module.exports = __WEBPACK_EXTERNAL_MODULE__79__;","const fetchMyIp = async (env, configureLocalEndpoint) => {\r\n  /* eslint-disable no-console */\r\n  try {\r\n    const response = await fetch('https://api.ipify.org?format=json', {\r\n      method: 'GET',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n    });\r\n\r\n    const ipJson = await response.json();\r\n    console.log(`Current public ip -> ${JSON.stringify(ipJson)}`);\r\n    if (ipJson.ip.startsWith('185.18.13')) {\r\n      console.log(\r\n        `Using local endpoint for ${env.alias} -> ${env.internalVip}`\r\n      );\r\n      configureLocalEndpoint();\r\n    } else {\r\n      console.log(`Outside Zengenti network, use real DNS.`);\r\n    }\r\n  } catch (error) {\r\n    console.log(\r\n      `Could not work out where I am so defaulting to local DNS, as I am probably running as a container this is what matters most. Not developers at home or tests :( Sorry. error: ${error}`\r\n    );\r\n    configureLocalEndpoint();\r\n  }\r\n\r\n  /* eslint-enable no-console */\r\n};\r\n\r\nexport default fetchMyIp;\r\n","import httpProxy from 'http-proxy';\r\n\r\nconst servers = SERVERS; /* global SERVERS */\r\nexport const apiProxy = httpProxy.createProxyServer();\r\n\r\nconst reverseProxies = (app, reverseProxyPaths) => {\r\n  deliveryApiProxy(apiProxy, app);\r\n\r\n  app.all(reverseProxyPaths, (req, res) => {\r\n    const target = servers.iis;\r\n\r\n    apiProxy.web(req, res, { target, changeOrigin: true });\r\n    apiProxy.on('error', e => {\r\n      /* eslint-disable no-console */\r\n      console.log(\r\n        `Proxy Request for ${req.path} HostName:${req.hostname} failed with ${e}`\r\n      );\r\n      /* eslint-enable no-console */\r\n    });\r\n  });\r\n};\r\n\r\nconst deliveryApiProxy = (apiProxy, app) => {\r\n  // This is just here to stop cors requests on localhost. In Production this is mapped using varnish.\r\n  app.all(['/api/delivery/*', '/api/image/*'], (req, res) => {\r\n    /* eslint-disable no-console */\r\n    const target = servers.cms;\r\n    console.log(`Proxying api request to ${servers.alias}`);\r\n    apiProxy.web(req, res, {\r\n      target,\r\n      changeOrigin: true,\r\n    });\r\n    apiProxy.on('error', e => {\r\n      /* eslint-disable no-console */\r\n      console.log(\r\n        `Proxy request for ${req.path} HostName:${req.hostname} failed with ${e}`\r\n      );\r\n      /* eslint-enable no-console */\r\n    });\r\n  });\r\n};\r\n\r\nexport default reverseProxies;\r\n","module.exports = __WEBPACK_EXTERNAL_MODULE__82__;","import fs from 'fs';\r\nimport React from 'react';\r\nimport { StaticRouter } from 'react-router-dom';\r\nimport { Provider as ReduxProvider } from 'react-redux';\r\nimport Loadable from 'react-loadable';\r\nimport { renderToString } from 'react-dom/server';\r\nimport { getBundles } from 'react-loadable/webpack';\r\nimport { ServerStyleSheet } from 'styled-components';\r\nimport Helmet from 'react-helmet';\r\nimport serialize from 'serialize-javascript';\r\nimport minifyCssString from 'minify-css-string';\r\nimport { fromJS } from 'immutable';\r\nimport fromEntries from 'fromentries';\r\n\r\nimport { history } from '~/core/redux/history';\r\n\r\nimport { AccessMethods } from '../util/types';\r\nimport { hashKeys } from '../util/cacheHashing';\r\n\r\nimport pickProject from '~/core/util/pickProject';\r\nimport { GetDeliveryApiStatusFromHostname } from '~/core/util/ContensisDeliveryApi';\r\n\r\nimport { setCurrentProject } from '~/core/redux/actions/routing';\r\nimport { setVersion, setVersionStatus } from '~/core/redux/actions/version';\r\n\r\nimport {\r\n  selectCurrentProject,\r\n  selectCurrentTreeID,\r\n  selectEntryDepends,\r\n  selectNodeDepends,\r\n  selectRouteEntry,\r\n} from '~/core/redux/selectors/routing';\r\n\r\nimport createStore from '~/core/redux/store';\r\nimport rootSaga from '~/core/redux/sagas/index.js';\r\n\r\nconst addStandardHeaders = (state, response, packagejson, groups) => {\r\n  if (state) {\r\n    /* eslint-disable no-console */\r\n    try {\r\n      console.log('About to add header');\r\n      let entryDepends = selectEntryDepends(state);\r\n      entryDepends = Array.from(entryDepends || {});\r\n      console.log(`entryDepends count: ${entryDepends.length}`);\r\n\r\n      let nodeDepends = selectNodeDepends(state).toJS();\r\n      let currentTreeId = selectCurrentTreeID(state);\r\n      let nodeDependsKeys = nodeDepends.map(nodeKey => {\r\n        return `${currentTreeId}_${nodeKey}`;\r\n      });\r\n      const allDepends = [...entryDepends, ...nodeDependsKeys];\r\n      const allDependsHashed = hashKeys(allDepends);\r\n\r\n      response.header(\r\n        'surrogate-key',\r\n        ` ${packagejson.name}-app ${allDependsHashed.join(' ')}`\r\n      );\r\n      console.log(`depends hashed: ${allDependsHashed.join(' ')}`);\r\n      console.log(`depends hashed: ${allDepends.join(' ')}`);\r\n\r\n      addVarnishAuthenticationHeaders(state, response, groups);\r\n\r\n      response.setHeader('Surrogate-Control', 'max-age=3600');\r\n    } catch (e) {\r\n      console.log('Error Adding headers', e.message);\r\n      // console.log(e);\r\n    }\r\n  }\r\n};\r\n\r\nconst addVarnishAuthenticationHeaders = (state, response, groups = {}) => {\r\n  if (state) {\r\n    try {\r\n      const stateEntry = selectRouteEntry(state);\r\n      const project = selectCurrentProject(state);\r\n      const { globalGroups, allowedGroups } = groups;\r\n      // console.log(globalGroups, allowedGroups);\r\n      let allGroups = Array.from((globalGroups && globalGroups[project]) || {});\r\n      if (\r\n        stateEntry &&\r\n        stateEntry.getIn(['authentication', 'isLoginRequired']) &&\r\n        allowedGroups &&\r\n        allowedGroups[project]\r\n      ) {\r\n        allGroups = [...allGroups, ...allowedGroups[project]];\r\n      }\r\n      response.header('x-contensis-viewer-groups', allGroups.join('|'));\r\n    } catch (e) {\r\n      console.log('Error adding authentication header');\r\n      console.log(e);\r\n    }\r\n  }\r\n};\r\n\r\nconst readFileSync = path => fs.readFileSync(path, 'utf8');\r\n\r\nconst loadBundleData = ({ stats, templates }, build) => {\r\n  const bundle = {};\r\n  try {\r\n    bundle.stats = JSON.parse(\r\n      readFileSync(stats.replace('/target', build ? `/${build}` : ''))\r\n    );\r\n  } catch {\r\n    //console.log(ex);\r\n  }\r\n  try {\r\n    bundle.templates = {\r\n      templateHTML: readFileSync(\r\n        templates.html.replace('/target', build ? `/${build}` : '')\r\n      ),\r\n      templateHTMLStatic: readFileSync(\r\n        templates.static.replace('/target', build ? `/${build}` : '')\r\n      ),\r\n      templateHTMLFragment: readFileSync(\r\n        templates.fragment.replace('/target', build ? `/${build}` : '')\r\n      ),\r\n    };\r\n  } catch {\r\n    //console.log(ex);\r\n  }\r\n  return bundle;\r\n};\r\n\r\nconst webApp = (app, ReactApp, config) => {\r\n  const {\r\n    routes,\r\n    withReducers,\r\n    withSagas,\r\n    withEvents,\r\n    packagejson,\r\n    versionData,\r\n    differentialBundles,\r\n    dynamicPaths,\r\n    allowedGroups,\r\n    globalGroups,\r\n    disableSsrRedux,\r\n  } = config;\r\n\r\n  const bundles = {\r\n    default: loadBundleData(config),\r\n    legacy: loadBundleData(config, 'legacy'),\r\n    modern: loadBundleData(config, 'modern'),\r\n  };\r\n  if (!bundles.default || bundles.default === {})\r\n    bundles.default = bundles.legacy || bundles.modern;\r\n\r\n  const versionInfo = JSON.parse(fs.readFileSync(versionData, 'utf8'));\r\n\r\n  app.get('/*', (request, response, next) => {\r\n    if (request.originalUrl.startsWith('/static/')) return next();\r\n    const { url } = request;\r\n\r\n    // Determine functional params and set access methods\r\n    let accessMethod = {};\r\n\r\n    const isDynamicNormalised = request.query.dynamic\r\n      ? request.query.dynamic.toLowerCase()\r\n      : 'false';\r\n\r\n    // Hack for certain pages to avoid SSR\r\n    const onlyDynamic = dynamicPaths.includes(request.path);\r\n\r\n    const isReduxRequestNormalised = request.query.redux\r\n      ? request.query.redux.toLowerCase()\r\n      : 'false';\r\n\r\n    const isFragmentNormalised = request.query.fragment\r\n      ? request.query.fragment.toLowerCase()\r\n      : 'false';\r\n\r\n    const isStaticNormalised = request.query.static\r\n      ? request.query.static.toLowerCase()\r\n      : 'false';\r\n\r\n    if (onlyDynamic || isDynamicNormalised === 'true')\r\n      accessMethod.DYNAMIC = AccessMethods.DYNAMIC;\r\n    if (isReduxRequestNormalised === 'true')\r\n      accessMethod.REDUX = AccessMethods.REDUX;\r\n    if (isFragmentNormalised === 'true')\r\n      accessMethod.FRAGMENT = AccessMethods.FRAGMENT;\r\n    if (isStaticNormalised === 'true')\r\n      accessMethod.STATIC = AccessMethods.STATIC;\r\n\r\n    const context = {};\r\n    let status = 200;\r\n\r\n    // Create a store (with a memory history) from our current url\r\n    const store = createStore(\r\n      withReducers,\r\n      fromJS({}),\r\n      history({ initialEntries: [url] })\r\n    );\r\n    //const store = createStore(withReducers);\r\n\r\n    // dispatch any global and non-saga related actions before calling our JSX\r\n    const versionStatusFromHostname = GetDeliveryApiStatusFromHostname(\r\n      request.hostname\r\n    );\r\n\r\n    store.dispatch(\r\n      setVersionStatus(request.query.versionStatus || versionStatusFromHostname)\r\n    );\r\n    store.dispatch(setVersion(versionInfo.commitRef, versionInfo.buildNo));\r\n\r\n    const project = pickProject(request.hostname, request.query);\r\n\r\n    const groups = allowedGroups && allowedGroups[project];\r\n    store.dispatch(setCurrentProject(project, groups));\r\n\r\n    const modules = [];\r\n\r\n    const jsx = (\r\n      <Loadable.Capture report={moduleName => modules.push(moduleName)}>\r\n        <ReduxProvider store={store}>\r\n          <StaticRouter context={context} location={url}>\r\n            <ReactApp routes={routes} withEvents={withEvents} />\r\n          </StaticRouter>\r\n        </ReduxProvider>\r\n      </Loadable.Capture>\r\n    );\r\n\r\n    /* eslint-disable no-console */\r\n    console.log(\r\n      `Request for ${request.path} hostname: ${request.hostname} versionStatus: ${versionStatusFromHostname}`\r\n    );\r\n    /* eslint-enable no-console */\r\n\r\n    const templates = bundles.default.templates || bundles.legacy.templates;\r\n    const stats =\r\n      bundles.modern.stats && bundles.legacy.stats\r\n        ? fromEntries(\r\n            Object.entries(bundles.modern.stats).map(([lib, paths]) => [\r\n              lib,\r\n              bundles.legacy.stats[lib]\r\n                ? [...paths, ...bundles.legacy.stats[lib]]\r\n                : paths,\r\n            ])\r\n          )\r\n        : bundles.default.stats;\r\n\r\n    const {\r\n      templateHTML,\r\n      templateHTMLFragment,\r\n      templateHTMLStatic,\r\n    } = templates;\r\n\r\n    // Serve a blank HTML page with client scripts to load the app in the browser\r\n    if (accessMethod.DYNAMIC) {\r\n      // Dynamic doesn't need sagas\r\n      renderToString(jsx);\r\n\r\n      const isDynamicHint = `<script>window.isDynamic = true;</script>`;\r\n      const dynamicBundles = getBundles(stats, modules);\r\n      const dynamicBundleScripts = dynamicBundles\r\n        .map(bundle => {\r\n          if (bundle.publicPath.includes('/modern/'))\r\n            return differentialBundles\r\n              ? `<script type=\"module\" src=\"${bundle.publicPath}\"></script>`\r\n              : null;\r\n          return `<script nomodule src=\"${bundle.publicPath}\"></script>`;\r\n        })\r\n        .filter(f => f)\r\n        .join('');\r\n      const responseHtmlDynamic = templateHTML\r\n        .replace('{{TITLE}}', '')\r\n        .replace('{{SEO_CRITICAL_METADATA}}', '')\r\n        .replace('{{CRITICAL_CSS}}', '')\r\n        .replace('{{APP}}', '')\r\n        .replace('{{LOADABLE_CHUNKS}}', dynamicBundleScripts)\r\n        .replace('{{REDUX_DATA}}', isDynamicHint);\r\n      response.setHeader('Surrogate-Control', 'max-age=3600');\r\n      response.status(status).send(responseHtmlDynamic);\r\n    }\r\n\r\n    // Render the JSX server side and send response as per access method options\r\n    if (!accessMethod.DYNAMIC) {\r\n      store\r\n        .runSaga(rootSaga(withSagas))\r\n        .toPromise()\r\n        .then(() => {\r\n          const sheet = new ServerStyleSheet();\r\n\r\n          const html = renderToString(sheet.collectStyles(jsx));\r\n\r\n          const helmet = Helmet.renderStatic();\r\n          Helmet.rewind();\r\n          let title = helmet.title.toString();\r\n          const metadata = helmet.meta.toString();\r\n\r\n          if (context.status === 404) {\r\n            status = 404;\r\n            title = '<title>404 page not found</title>';\r\n          }\r\n\r\n          if (context.url) {\r\n            return response.redirect(302, context.url);\r\n          }\r\n\r\n          const reduxState = store.getState();\r\n\r\n          const styleTags = sheet.getStyleTags();\r\n\r\n          const bundles = getBundles(stats, modules);\r\n\r\n          const bundleScripts = bundles\r\n            .map(bundle => {\r\n              if (bundle.publicPath.includes('/modern/'))\r\n                return differentialBundles\r\n                  ? `<script type=\"module\" src=\"${bundle.publicPath}\"></script>`\r\n                  : null;\r\n              return `<script nomodule src=\"${bundle.publicPath}\"></script>`;\r\n            })\r\n            .filter(f => f)\r\n            .join('');\r\n\r\n          let serialisedReduxData = '';\r\n          if (context.status !== 404) {\r\n            if (accessMethod.REDUX) {\r\n              serialisedReduxData = serialize(reduxState);\r\n              addStandardHeaders(reduxState, response, packagejson, {\r\n                allowedGroups,\r\n                globalGroups,\r\n              });\r\n              response.status(status).json(serialisedReduxData);\r\n              return true;\r\n            }\r\n            if (!disableSsrRedux) {\r\n              serialisedReduxData = serialize(reduxState);\r\n              serialisedReduxData = `<script>window.REDUX_DATA = ${serialisedReduxData}</script>`;\r\n            }\r\n          }\r\n          if (context.status === 404) {\r\n            accessMethod.STATIC = AccessMethods.STATIC;\r\n          }\r\n\r\n          // Responses\r\n          let responseHTML = '';\r\n\r\n          // Static page served as a fragment\r\n          if (accessMethod.FRAGMENT && accessMethod.STATIC) {\r\n            addStandardHeaders(reduxState, response, packagejson, {\r\n              allowedGroups,\r\n              globalGroups,\r\n            });\r\n            responseHTML = minifyCssString(styleTags) + html;\r\n          }\r\n\r\n          // Page fragment served with client scripts and redux data that hydrate the app client side\r\n          if (accessMethod.FRAGMENT && !accessMethod.STATIC) {\r\n            responseHTML = templateHTMLFragment\r\n              .replace('{{TITLE}}', title)\r\n              .replace('{{SEO_CRITICAL_METADATA}}', metadata)\r\n              .replace('{{CRITICAL_CSS}}', minifyCssString(styleTags))\r\n              .replace('{{APP}}', html)\r\n              .replace('{{LOADABLE_CHUNKS}}', bundleScripts)\r\n              .replace('{{REDUX_DATA}}', serialisedReduxData);\r\n          }\r\n\r\n          // Full HTML page served statically\r\n          if (!accessMethod.FRAGMENT && accessMethod.STATIC) {\r\n            responseHTML = templateHTMLStatic\r\n              .replace('{{TITLE}}', title)\r\n              .replace('{{SEO_CRITICAL_METADATA}}', metadata)\r\n              .replace('{{CRITICAL_CSS}}', minifyCssString(styleTags))\r\n              .replace('{{APP}}', html)\r\n              .replace('{{LOADABLE_CHUNKS}}', '');\r\n          }\r\n\r\n          // Full HTML page served with client scripts and redux data that hydrate the app client side\r\n          if (!accessMethod.FRAGMENT && !accessMethod.STATIC) {\r\n            responseHTML = templateHTML\r\n              .replace('{{TITLE}}', title)\r\n              .replace('{{SEO_CRITICAL_METADATA}}', metadata)\r\n              .replace('{{CRITICAL_CSS}}', styleTags)\r\n              .replace('{{APP}}', html)\r\n              .replace('{{LOADABLE_CHUNKS}}', bundleScripts)\r\n              .replace('{{REDUX_DATA}}', serialisedReduxData);\r\n          }\r\n          addStandardHeaders(reduxState, response, packagejson, {\r\n            allowedGroups,\r\n            globalGroups,\r\n          });\r\n          try {\r\n            response.status(status).send(responseHTML);\r\n          } catch (err) {\r\n            // eslint-disable-next-line no-console\r\n            console.log(err.message);\r\n          }\r\n        })\r\n        .catch(err => {\r\n          // Handle any error that occurred in any of the previous\r\n          // promises in the chain.\r\n          /* eslint-disable no-console */\r\n          console.log(err);\r\n          /* eslint-enable no-console */\r\n          response\r\n            .status(500)\r\n            .send(\r\n              `Error occurred: <br />${err.stack} <br />${JSON.stringify(err)}`\r\n            );\r\n        });\r\n      renderToString(jsx);\r\n\r\n      store.close();\r\n    }\r\n  });\r\n};\r\n\r\nexport default webApp;\r\n","module.exports = require(\"fs\");","module.exports = __WEBPACK_EXTERNAL_MODULE__85__;","module.exports = __WEBPACK_EXTERNAL_MODULE__86__;","module.exports = __WEBPACK_EXTERNAL_MODULE__87__;","module.exports = __WEBPACK_EXTERNAL_MODULE__88__;","module.exports = __WEBPACK_EXTERNAL_MODULE__89__;","module.exports = __WEBPACK_EXTERNAL_MODULE__90__;","module.exports = __WEBPACK_EXTERNAL_MODULE__91__;","export const AccessMethods = {\r\n  DYNAMIC: 'dynamic',\r\n  STATIC: 'static',\r\n  FRAGMENT: 'fragment',\r\n  REDUX: 'redux',\r\n};\r\n","export const hashKeys = keys => {\r\n  const XXHash = require('xxhashjs');\r\n  const returnKeys = [];\r\n  keys.forEach(cacheKey => {\r\n    const inputBuffer = Buffer.from(cacheKey.toLowerCase(), 'utf-8');\r\n\r\n    const hashed = XXHash.h32(inputBuffer, 0x0).toString(16);\r\n    const reversedhex = hashed\r\n      .match(/[a-fA-F0-9]{2}/g)\r\n      .reverse()\r\n      .join('');\r\n\r\n    const outputBuffer = Buffer.from(reversedhex, 'hex');\r\n\r\n    returnKeys.push(outputBuffer.toString('base64').substring(0, 6));\r\n  });\r\n  return returnKeys;\r\n};\r\n","module.exports = __WEBPACK_EXTERNAL_MODULE__94__;"],"sourceRoot":""}
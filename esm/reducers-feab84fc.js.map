{"version":3,"file":"reducers-feab84fc.js","sources":["../src/util/fromJSOrdered.js","../src/user/redux/types.js","../src/user/redux/reducers.js"],"sourcesContent":["import { Seq } from 'immutable';\n\nconst fromJSOrdered = js => {\n  return typeof js !== 'object' || js === null\n    ? js\n    : Array.isArray(js)\n    ? Seq(js).map(fromJSOrdered).toList()\n    : Seq(js).map(fromJSOrdered).toOrderedMap();\n};\n\nexport default fromJSOrdered;\n","const ACTION_PREFIX = '@USER/';\nexport const VALIDATE_USER = `${ACTION_PREFIX}VALIDATE_USER`;\nexport const SET_AUTHENTICATION_STATE = `${ACTION_PREFIX}SET_AUTHENTICATION_STATE`;\nexport const LOGIN_USER = `${ACTION_PREFIX}LOGIN_USER`;\nexport const LOGIN_SUCCESSFUL = `${ACTION_PREFIX}LOGIN_SUCCESSFUL`;\nexport const LOGIN_FAILED = `${ACTION_PREFIX}LOGIN_FAILED`;\nexport const LOGOUT_USER = `${ACTION_PREFIX}LOGOUT_USER`;\nexport const REGISTER_USER = `${ACTION_PREFIX}REGISTER_USER`;\nexport const REGISTER_USER_SUCCESS = `${ACTION_PREFIX}REGISTER_USER_SUCCESS`;\nexport const REGISTER_USER_FAILED = `${ACTION_PREFIX}REGISTER_USER_FAILED`;\n\nexport const REQUEST_USER_PASSWORD_RESET = `${ACTION_PREFIX}REQUEST_USER_PASSWORD_RESET`;\nexport const RESET_USER_PASSWORD = `${ACTION_PREFIX}RESET_USER_PASSWORD`;\nexport const REQUEST_USER_PASSWORD_RESET_SENDING = `${ACTION_PREFIX}REQUEST_USER_PASSWORD_RESET_SENDING`;\nexport const REQUEST_USER_PASSWORD_RESET_SUCCESS = `${ACTION_PREFIX}REQUEST_USER_PASSWORD_RESET_SUCCESS`;\nexport const REQUEST_USER_PASSWORD_RESET_ERROR = `${ACTION_PREFIX}REQUEST_USER_PASSWORD_RESET_ERROR`;\nexport const RESET_USER_PASSWORD_SENDING = `${ACTION_PREFIX}RESET_USER_PASSWORD_SENDING`;\nexport const RESET_USER_PASSWORD_SUCCESS = `${ACTION_PREFIX}RESET_USER_PASSWORD_SUCCESS`;\nexport const RESET_USER_PASSWORD_ERROR = `${ACTION_PREFIX}RESET_USER_PASSWORD_ERROR`;\n\nexport const CHANGE_USER_PASSWORD = `${ACTION_PREFIX}CHANGE_USER_PASSWORD`;\nexport const CHANGE_USER_PASSWORD_SENDING = `${ACTION_PREFIX}CHANGE_USER_PASSWORD_SENDING`;\nexport const CHANGE_USER_PASSWORD_SUCCESS = `${ACTION_PREFIX}CHANGE_USER_PASSWORD_SUCCESS`;\nexport const CHANGE_USER_PASSWORD_ERROR = `${ACTION_PREFIX}CHANGE_USER_PASSWORD_ERROR`;\n","import { List, Map } from 'immutable';\nimport fromJSOrdered from '~/util/fromJSOrdered';\nimport {\n  REGISTER_USER,\n  REGISTER_USER_FAILED,\n  REGISTER_USER_SUCCESS,\n  SET_AUTHENTICATION_STATE,\n  LOGIN_USER,\n  LOGOUT_USER,\n  REQUEST_USER_PASSWORD_RESET_SENDING,\n  REQUEST_USER_PASSWORD_RESET_SUCCESS,\n  REQUEST_USER_PASSWORD_RESET_ERROR,\n  RESET_USER_PASSWORD_SENDING,\n  RESET_USER_PASSWORD_SUCCESS,\n  RESET_USER_PASSWORD_ERROR,\n  CHANGE_USER_PASSWORD_SENDING,\n  CHANGE_USER_PASSWORD_SUCCESS,\n  CHANGE_USER_PASSWORD_ERROR,\n} from './types';\n\nconst defaultAuthenticationState = Map({\n  authenticated: false,\n  authenticationError: false,\n  authenticationErrorMessage: null,\n  clientCredentials: null,\n  error: false,\n  errorMessage: null,\n  loading: false,\n});\n\nconst defaultPasswordResetRequestValues = {\n  isSending: false,\n  sent: false,\n  error: null,\n};\n\nconst defaultResetPasswordValues = {\n  isSending: false,\n  sent: false,\n  error: null,\n};\n\nconst defaultChangePasswordValues = {\n  isSending: false,\n  sent: false,\n  error: null,\n};\n\nexport const initialUserState = Map({\n  authenticationState: defaultAuthenticationState,\n  passwordResetRequest: defaultPasswordResetRequestValues,\n  resetPassword: defaultResetPasswordValues,\n  changePassword: defaultChangePasswordValues,\n  groups: new List([]),\n});\n\nexport default (state = initialUserState, action) => {\n  switch (action.type) {\n    case LOGIN_USER:\n    case LOGOUT_USER:\n    case SET_AUTHENTICATION_STATE: {\n      if (!action.authenticationState) {\n        action.authenticationState = defaultAuthenticationState.toJS();\n      }\n\n      const loading = action.type === LOGIN_USER;\n\n      const {\n        authenticationState: {\n          error = false,\n          errorMessage = null,\n          authenticated,\n          authenticationError = false,\n          authenticationErrorMessage = null,\n          clientCredentials = null,\n        },\n        user,\n      } = action;\n\n      if (user) {\n        user.name = `${user.firstName} ${user.lastName}`;\n        user.isZengentiStaff = user.email.includes('@zengenti.com');\n      }\n\n      const nextState = {\n        ...initialUserState.toJS(),\n        ...(user || state.toJS()),\n        authenticationState: {\n          authenticated:\n            authenticated ||\n            state.getIn(['authenticationState', 'authenticated']),\n          authenticationError,\n          authenticationErrorMessage,\n          clientCredentials,\n          error,\n          errorMessage,\n          loading,\n        },\n      };\n      return fromJSOrdered(nextState);\n    }\n    // REGISTER_USER is the trigger to set the user.registration initial state\n    // and will set user.registration.loading to true\n    // REGISTER_USER_FAILED will unset user.registration.loading and will set\n    // the value in user.registration.error\n    // REGISTER_USER_SUCCESS will unset user.registration.loading and will\n    // set user.registration to the created user from the api response\n    case REGISTER_USER:\n    case REGISTER_USER_FAILED:\n    case REGISTER_USER_SUCCESS: {\n      const { error, user } = action;\n\n      // Set registration object from the supplied action.user\n      // so we can call these values back later\n      const nextState = state.set(\n        'registration',\n        user ? fromJSOrdered(user) : state.get('registration', Map())\n      );\n\n      // Set registration flags so the UI can track the status\n      return nextState\n        .setIn(\n          ['registration', 'success'],\n          action.type === REGISTER_USER_SUCCESS\n        )\n        .setIn(['registration', 'error'], error || false)\n        .setIn(['registration', 'loading'], action.type === REGISTER_USER);\n    }\n    case REQUEST_USER_PASSWORD_RESET_SENDING:\n      return state.setIn(['passwordResetRequest', 'isSending'], true);\n    case REQUEST_USER_PASSWORD_RESET_SUCCESS:\n      return state\n        .setIn(['passwordResetRequest', 'isSending'], false)\n        .setIn(['passwordResetRequest', 'sent'], true);\n    case REQUEST_USER_PASSWORD_RESET_ERROR:\n      return state\n        .setIn(['passwordResetRequest', 'isSending'], false)\n        .setIn(['passwordResetRequest', 'error'], action.error);\n    case RESET_USER_PASSWORD_SENDING:\n      return state.setIn(['resetPassword', 'isSending'], true);\n    case RESET_USER_PASSWORD_SUCCESS:\n      return state\n        .setIn(['resetPassword', 'isSending'], false)\n        .setIn(['resetPassword', 'sent'], true);\n    case RESET_USER_PASSWORD_ERROR:\n      return state\n        .setIn(['resetPassword', 'isSending'], false)\n        .setIn(['resetPassword', 'error'], action.error);\n    case CHANGE_USER_PASSWORD_SENDING:\n      return state.setIn(['changePassword', 'isSending'], true);\n    case CHANGE_USER_PASSWORD_SUCCESS:\n      return state\n        .setIn(['changePassword', 'isSending'], false)\n        .setIn(['changePassword', 'sent'], true);\n    case CHANGE_USER_PASSWORD_ERROR:\n      return state\n        .setIn(['changePassword', 'isSending'], false)\n        .setIn(['changePassword', 'error'], action.error);\n    default:\n      return state;\n  }\n};\n"],"names":["fromJSOrdered","js","Array","isArray","Seq","map","toList","toOrderedMap","ACTION_PREFIX","VALIDATE_USER","SET_AUTHENTICATION_STATE","LOGIN_USER","LOGIN_SUCCESSFUL","LOGIN_FAILED","LOGOUT_USER","REGISTER_USER","REGISTER_USER_SUCCESS","REGISTER_USER_FAILED","REQUEST_USER_PASSWORD_RESET","RESET_USER_PASSWORD","REQUEST_USER_PASSWORD_RESET_SENDING","REQUEST_USER_PASSWORD_RESET_SUCCESS","REQUEST_USER_PASSWORD_RESET_ERROR","RESET_USER_PASSWORD_SENDING","RESET_USER_PASSWORD_SUCCESS","RESET_USER_PASSWORD_ERROR","CHANGE_USER_PASSWORD","CHANGE_USER_PASSWORD_SENDING","CHANGE_USER_PASSWORD_SUCCESS","CHANGE_USER_PASSWORD_ERROR","defaultAuthenticationState","Map","authenticated","authenticationError","authenticationErrorMessage","clientCredentials","error","errorMessage","loading","defaultPasswordResetRequestValues","isSending","sent","defaultResetPasswordValues","defaultChangePasswordValues","initialUserState","authenticationState","passwordResetRequest","resetPassword","changePassword","groups","List","state","action","type","toJS","user","name","firstName","lastName","isZengentiStaff","email","includes","nextState","getIn","set","get","setIn"],"mappings":"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"}
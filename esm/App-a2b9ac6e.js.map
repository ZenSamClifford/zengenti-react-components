{"version":3,"file":"App-a2b9ac6e.js","sources":["../src/redux/store/history.js","../src/util/ContensisDeliveryApi.js","../src/redux/sagas/navigation.js","../src/util/schema.ts","../src/routing/util/expressions.ts","../src/routing/util/queries.ts","../src/routing/redux/sagas.js","../src/user/redux/sagas/register.js","../src/user/util/userHelper.js","../src/user/redux/sagas/resetPassword.js","../src/user/redux/sagas/index.js","../src/redux/sagas/index.js","../src/util/pickProject.js","../src/app/App.tsx"],"sourcesContent":["import { createBrowserHistory, createMemoryHistory } from 'history';\r\n\r\n// Create a history depending on the environment\r\nconst selectedHistory =\r\n  typeof window !== 'undefined' ? createBrowserHistory : createMemoryHistory;\r\n\r\nexport const history = (options = {}) => selectedHistory(options);\r\nexport const browserHistory = selectedHistory();\r\n","import { Client } from 'contensis-delivery-api';\r\nimport { setSurrogateKeys } from '../routing/redux/actions';\r\nimport { reduxStore } from '~/redux/store/store';\r\n\r\nconst storeSurrogateKeys = response => {\r\n  const keys = response.headers.get\r\n    ? response.headers.get('surrogate-key')\r\n    : response.headers.map['surrogate-key'];\r\n  if (keys) reduxStore.dispatch(setSurrogateKeys(keys));\r\n};\r\n\r\nconst getClientConfig = project => {\r\n  let config = DELIVERY_API_CONFIG; /* global DELIVERY_API_CONFIG */\r\n  config.responseHandler = {};\r\n\r\n  if (project) {\r\n    config.projectId = project;\r\n  }\r\n\r\n  // // we only want the surrogate key header in a server context\r\n  if (typeof window === 'undefined') {\r\n    config.defaultHeaders = {\r\n      'x-require-surrogate-key': true,\r\n    };\r\n    config.responseHandler[200] = storeSurrogateKeys;\r\n  }\r\n\r\n  if (\r\n    typeof window !== 'undefined' &&\r\n    PROXY_DELIVERY_API /* global PROXY_DELIVERY_API */\r\n  ) {\r\n    // ensure a relative url is used to bypass the need for CORS (separate OPTIONS calls)\r\n    config.rootUrl = '';\r\n    config.responseHandler[404] = () => null;\r\n  }\r\n  return config;\r\n};\r\n\r\nexport * from 'contensis-delivery-api';\r\n\r\nclass DeliveryApi {\r\n  getClientSideVersionStatus = () => {\r\n    if (typeof window != 'undefined') {\r\n      const currentHostname = window.location.hostname;\r\n      return this.getVersionStatusFromHostname(currentHostname);\r\n    }\r\n    return null;\r\n  };\r\n  getVersionStatusFromHostname = currentHostname => {\r\n    if (currentHostname.indexOf('localhost') > -1) return 'latest';\r\n\r\n    if (currentHostname.endsWith('contensis.cloud')) {\r\n      if (currentHostname.indexOf('preview.') > -1) {\r\n        return 'latest';\r\n      } else {\r\n        return 'published';\r\n      }\r\n    }\r\n\r\n    if (currentHostname.endsWith('cloud.contensis.com')) {\r\n      if (currentHostname.indexOf('preview-') > -1) {\r\n        return 'latest';\r\n      } else {\r\n        return 'published';\r\n      }\r\n    }\r\n\r\n    return 'published';\r\n  };\r\n  search = (query, linkDepth, project, env) => {\r\n    const client = Client.create(getClientConfig(project, env));\r\n    return client.entries.search(\r\n      query,\r\n      typeof linkDepth !== 'undefined' ? linkDepth : 1\r\n    );\r\n  };\r\n  getClient = (deliveryApiStatus = 'published', project, env) => {\r\n    const baseConfig = getClientConfig(project, env);\r\n    baseConfig.versionStatus = deliveryApiStatus;\r\n    return Client.create(baseConfig);\r\n  };\r\n  getEntry = (\r\n    id,\r\n    linkDepth = 0,\r\n    deliveryApiStatus = 'published',\r\n    project,\r\n    env\r\n  ) => {\r\n    const baseConfig = getClientConfig(project, env);\r\n    baseConfig.versionStatus = deliveryApiStatus;\r\n    const client = Client.create(baseConfig);\r\n    // return client.entries.get(id, linkDepth);\r\n    return client.entries.get({ id, linkDepth });\r\n  };\r\n}\r\n\r\nexport const deliveryApi = new DeliveryApi();\r\n\r\nclass CacheNode {\r\n  constructor(key, value) {\r\n    this.key = key;\r\n    this.value = value;\r\n    this.next = null;\r\n    this.prev = null;\r\n  }\r\n}\r\n\r\nclass LruCache {\r\n  constructor(limit = 100) {\r\n    this.map = {};\r\n    this.head = null;\r\n    this.tail = null;\r\n    this.limit = limit || 100;\r\n    this.size = 0;\r\n  }\r\n\r\n  get(key) {\r\n    if (this.map[key]) {\r\n      let value = this.map[key].value;\r\n      let node = new CacheNode(key, value);\r\n      this.remove(key);\r\n      this.setHead(node);\r\n      return value;\r\n    }\r\n  }\r\n\r\n  set(key, value) {\r\n    let node = new CacheNode(key, value);\r\n    if (this.map[key]) {\r\n      this.remove(key);\r\n    } else {\r\n      if (this.size >= this.limit) {\r\n        delete this.map[this.tail.key];\r\n        this.size--;\r\n        this.tail = this.tail.prev;\r\n        this.tail.next = null;\r\n      }\r\n    }\r\n    this.setHead(node);\r\n  }\r\n\r\n  setHead(node) {\r\n    node.next = this.head;\r\n    node.prev = null;\r\n    if (this.head) {\r\n      this.head.prev = node;\r\n    }\r\n    this.head = node;\r\n    if (!this.tail) {\r\n      this.tail = node;\r\n    }\r\n    this.size++;\r\n    this.map[node.key] = node;\r\n  }\r\n\r\n  remove(key) {\r\n    let node = this.map[key];\r\n    if (node.prev) {\r\n      node.prev.next = node.next;\r\n    } else {\r\n      this.head = node.next;\r\n    }\r\n    if (node.next) {\r\n      node.next.prev = node.prev;\r\n    } else {\r\n      this.tail = node.prev;\r\n    }\r\n    delete this.map[key];\r\n    this.size--;\r\n  }\r\n}\r\n\r\nclass CachedSearch {\r\n  cache = new LruCache();\r\n  taxonomyLookup = {};\r\n\r\n  search(query, linkDepth, project, env) {\r\n    const client = Client.create(getClientConfig(project, env));\r\n    return this.request(\r\n      project + JSON.stringify(query) + linkDepth.toString(),\r\n      () => client.entries.search(query, linkDepth)\r\n    );\r\n  }\r\n\r\n  get(id, linkDepth, versionStatus, project, env) {\r\n    const client = Client.create(getClientConfig(project, env));\r\n    client.clientConfig.versionStatus = versionStatus;\r\n    return this.request(id, () => client.entries.get({ id, linkDepth }));\r\n  }\r\n\r\n  getContentType(id, project, env) {\r\n    const client = Client.create(getClientConfig(project, env));\r\n    return this.request(`[CONTENT TYPE] ${id} ${project}`, () =>\r\n      client.contentTypes.get(id)\r\n    );\r\n  }\r\n\r\n  getTaxonomyNode(key, project, env) {\r\n    const client = Client.create(getClientConfig(project, env));\r\n    return this.request(`[TAXONOMY NODE] ${key}`, () =>\r\n      client.taxonomy\r\n        .resolveChildren(key)\r\n        .then(node => this.extendTaxonomyNode(node))\r\n    );\r\n  }\r\n\r\n  getRootNode(options, project, env) {\r\n    const client = Client.create(getClientConfig(project, env));\r\n    return this.request(`${project} / ${JSON.stringify(options)}`, () =>\r\n      client.nodes.getRoot(options)\r\n    );\r\n  }\r\n\r\n  getNode(options, project, env) {\r\n    const client = Client.create(getClientConfig(project, env));\r\n    return this.request(\r\n      `${project} ${(options && options.path) || options} ${JSON.stringify(\r\n        options\r\n      )}`,\r\n      () => client.nodes.get(options)\r\n    );\r\n  }\r\n\r\n  getAncestors(options, project, env) {\r\n    const client = Client.create(getClientConfig(project, env));\r\n    return this.request(\r\n      `${project} [A] ${(options && options.id) || options} ${JSON.stringify(\r\n        options\r\n      )}`,\r\n      () => client.nodes.getAncestors(options)\r\n    );\r\n  }\r\n\r\n  getChildren(options, project, env) {\r\n    const client = Client.create(getClientConfig(project, env));\r\n    return this.request(\r\n      `${project} [C] ${(options && options.id) || options} ${JSON.stringify(\r\n        options\r\n      )}`,\r\n      () => client.nodes.getChildren(options)\r\n    );\r\n  }\r\n\r\n  getSiblings(options, project, env) {\r\n    const client = Client.create(getClientConfig(project, env));\r\n    return this.request(\r\n      `${project} [S] ${(options && options.id) || options} ${JSON.stringify(\r\n        options\r\n      )}`,\r\n      () => client.nodes.getSiblings(options)\r\n    );\r\n  }\r\n\r\n  request(key, execute) {\r\n    if (!this.cache.get(key) || typeof window == 'undefined') {\r\n      let promise = execute();\r\n      this.cache.set(key, promise);\r\n      promise.catch(() => {\r\n        this.cache.remove(key);\r\n      });\r\n    }\r\n    return this.cache.get(key);\r\n  }\r\n\r\n  extendTaxonomyNode(node) {\r\n    let id = this.getTaxonomyId(node);\r\n    this.taxonomyLookup[id] = node.key;\r\n    return {\r\n      ...node,\r\n      id,\r\n      children: node.children\r\n        ? node.children.map(n => this.extendTaxonomyNode(n))\r\n        : null,\r\n    };\r\n  }\r\n\r\n  getTaxonomyId(node) {\r\n    if (node.key) {\r\n      let parts = node.key.split('/');\r\n      return parts[parts.length - 1];\r\n    }\r\n    return '';\r\n  }\r\n\r\n  getTaxonomyKey(id) {\r\n    return this.taxonomyLookup[id];\r\n  }\r\n}\r\n\r\nexport const cachedSearch = new CachedSearch();\r\n","import { takeEvery, put, select } from 'redux-saga/effects';\r\n\r\nimport { deliveryApi } from '~/util/ContensisDeliveryApi';\r\nimport {\r\n  GET_NODE_TREE,\r\n  SET_NODE_TREE,\r\n  GET_NODE_TREE_ERROR,\r\n} from '~/redux/types/navigation';\r\nimport { hasNavigationTree } from '~/redux/selectors/navigation';\r\nimport { selectVersionStatus } from '~/redux/selectors/version';\r\nimport { selectCurrentProject } from '~/routing/redux/selectors';\r\n\r\nexport const navigationSagas = [takeEvery(GET_NODE_TREE, ensureNodeTreeSaga)];\r\n\r\nexport function* ensureNodeTreeSaga(action) {\r\n  const state = yield select();\r\n  try {\r\n    if (!hasNavigationTree(state)) {\r\n      const deliveryApiVersionStatus = yield select(selectVersionStatus);\r\n      const project = yield select(selectCurrentProject);\r\n      const nodes = yield deliveryApi\r\n        .getClient(deliveryApiVersionStatus, project)\r\n        .nodes.getRoot({\r\n          depth: action.treeDepth || 0,\r\n        });\r\n      if (nodes) {\r\n        yield put({ type: SET_NODE_TREE, nodes });\r\n      } else {\r\n        yield put({ type: GET_NODE_TREE_ERROR });\r\n      }\r\n    }\r\n  } catch (ex) {\r\n    yield put({ type: GET_NODE_TREE_ERROR, error: ex.toString() });\r\n  }\r\n}\r\n","export const DataFormats = {\r\n  entry: 'entry',\r\n  webpage: 'webpage',\r\n};\r\n\r\nconst sys = {\r\n  contentTypeId: 'sys.contentTypeId',\r\n  dataFormat: 'sys.dataFormat',\r\n  filename: 'sys.properties.filename',\r\n  id: 'sys.id',\r\n  includeInSearch: 'sys.metadata.includeInSearch',\r\n  slug: 'sys.slug',\r\n  uri: 'sys.uri',\r\n  versionStatus: 'sys.versionStatus',\r\n};\r\n\r\nexport const Fields = {\r\n  entryTitle: 'entryTitle',\r\n  entryDescription: 'entryDescription',\r\n  keywords: 'keywords',\r\n  sys,\r\n  contentTypeId: 'sys.contentTypeId',\r\n  wildcard: '*',\r\n};\r\n\r\nexport const VersionStatus = {\r\n  published: 'published',\r\n  latest: 'latest',\r\n};\r\n","import { Op } from 'contensis-delivery-api';\r\nimport { Fields } from '~/util/schema';\r\n\r\nexport const fieldExpression = (\r\n  field,\r\n  value,\r\n  operator = 'equalTo',\r\n  weight = null\r\n) => {\r\n  if (!field || !value) return [];\r\n  if (Array.isArray(value)) return equalToOrIn(field, value, operator);\r\n  else\r\n    return !weight\r\n      ? [Op[operator](field, value)]\r\n      : [Op[operator](field, value).weight(weight)];\r\n};\r\n\r\nexport const defaultExpressions = versionStatus => {\r\n  return [Op.equalTo(Fields.sys.versionStatus, versionStatus)];\r\n};\r\n\r\nconst equalToOrIn = (field, arr, operator = 'equalTo') =>\r\n  arr.length === 0\r\n    ? []\r\n    : arr.length === 1\r\n    ? [Op[operator](field, arr[0])]\r\n    : [Op.in(field, ...arr)];\r\n","import { Query } from '~/util/ContensisDeliveryApi';\r\nimport { fieldExpression, defaultExpressions } from './expressions';\r\n\r\nexport const routeEntryByFieldsQuery = (\r\n  id: string,\r\n  language = 'en-GB',\r\n  fields: string[] = [],\r\n  versionStatus = 'published'\r\n) => {\r\n  const query = new Query(\r\n    ...[\r\n      ...fieldExpression('sys.id', id),\r\n      ...fieldExpression('sys.language', language),\r\n      ...defaultExpressions(versionStatus),\r\n    ]\r\n  );\r\n  query.fields = fields;\r\n  return query;\r\n};\r\n","import * as log from 'loglevel';\r\nimport { takeEvery, put, select, call, all } from 'redux-saga/effects';\r\n\r\nimport {\r\n  SET_ENTRY,\r\n  SET_ANCESTORS,\r\n  SET_NAVIGATION_PATH,\r\n  SET_ROUTE,\r\n  SET_SIBLINGS,\r\n  UPDATE_LOADING_STATE,\r\n} from './types';\r\nimport { GET_NODE_TREE } from '~/redux/types/navigation';\r\nimport {\r\n  selectCurrentAncestors,\r\n  selectCurrentNode,\r\n  selectCurrentProject,\r\n  selectMappedEntry,\r\n  selectRouteEntry,\r\n  selectRouteEntryEntryId,\r\n  selectRouteEntryLanguage,\r\n} from './selectors';\r\nimport { hasNavigationTree } from '~/redux/selectors/navigation';\r\nimport { selectVersionStatus } from '~/redux/selectors/version';\r\nimport { ensureNodeTreeSaga } from '~/redux/sagas/navigation';\r\nimport { handleRequiresLoginSaga } from '~/user/redux/sagas/login';\r\n\r\nimport { findContentTypeMapping } from '../util/find-contenttype-mapping';\r\nimport { routeEntryByFieldsQuery } from '../util/queries';\r\nimport { cachedSearch, deliveryApi } from '~/util/ContensisDeliveryApi';\r\nimport { injectRedux as reduxInjector } from '~/redux/store/injectors';\r\n\r\nexport const routingSagas = [\r\n  takeEvery(SET_NAVIGATION_PATH, getRouteSaga),\r\n  takeEvery(SET_ROUTE, setRouteSaga),\r\n];\r\n\r\n/**\r\n * To navigate / push a specific route via redux middleware\r\n * @param {path, state} action\r\n */\r\nfunction* setRouteSaga(action) {\r\n  yield put({\r\n    type: 'CALL_HISTORY_METHOD',\r\n    payload: {\r\n      method: 'push',\r\n      args: [action.path, action.state],\r\n    },\r\n  });\r\n}\r\n\r\nfunction* getRouteSaga(action) {\r\n  let entry = null;\r\n  try {\r\n    const {\r\n      withEvents,\r\n      routes: { ContentTypeMappings = {} } = {},\r\n      staticRoute,\r\n    } = action;\r\n\r\n    // Inject redux { key, reducer, saga } provided by staticRoute\r\n    if (staticRoute && staticRoute.route.injectRedux)\r\n      yield call(reduxInjectorSaga, staticRoute.route.injectRedux);\r\n\r\n    // Variables we will pass to setRouteEntry\r\n    let pathNode = null,\r\n      ancestors = null,\r\n      siblings = null;\r\n\r\n    // These variables are the return values from\r\n    // calls to withEvents.onRouteLoad and onRouteLoaded\r\n    let appsays,\r\n      requireLogin = false;\r\n\r\n    if (withEvents && withEvents.onRouteLoad) {\r\n      appsays = yield withEvents.onRouteLoad(action);\r\n    }\r\n    // if appsays customNavigation: true, we will set doNavigation to false\r\n    // if appsays customNavigation: { ... }, we will set doNavigation to the customNavigation object and check for child elements\r\n    // if appsays nothing we will set doNavigation to true and continue to do navigation calls\r\n    const doNavigation =\r\n      !appsays ||\r\n      (appsays && appsays.customNavigation === true\r\n        ? false\r\n        : (appsays && appsays.customNavigation) || true);\r\n\r\n    const entryLinkDepth = (appsays && appsays.entryLinkDepth) || 3;\r\n    const setContentTypeLimits = !!ContentTypeMappings.find(\r\n      ct => ct.fields || ct.linkDepth || ct.nodeOptions\r\n    );\r\n\r\n    const state = yield select();\r\n    const routeEntry = selectRouteEntry(state, 'js');\r\n    const routeNode = selectCurrentNode(state, 'js');\r\n    const currentPath = action.path; //selectCurrentPath(state);\r\n    const deliveryApiStatus = selectVersionStatus(state);\r\n    const project = selectCurrentProject(state);\r\n    const isHome = currentPath === '/';\r\n    const isPreview = currentPath && currentPath.startsWith('/preview/');\r\n    const defaultLang = (appsays && appsays.defaultLang) || 'en-GB';\r\n\r\n    if (\r\n      !isPreview &&\r\n      ((appsays && appsays.customRouting) ||\r\n        (staticRoute && !staticRoute.route.fetchNode) ||\r\n        (routeEntry &&\r\n          action.statePath === action.path &&\r\n          (appsays && appsays.refetchNode) !== true))\r\n    ) {\r\n      // To prevent erroneous 404s and wasted network calls, this covers\r\n      // - appsays customRouting and does SET_ENTRY etc. via the consuming app\r\n      // - all staticRoutes (where custom 'route.fetchNode' attribute is falsey)\r\n      // - standard Contensis SiteView Routing where we already have that entry in state\r\n      if (\r\n        routeEntry &&\r\n        (!staticRoute || (staticRoute.route && staticRoute.route.fetchNode))\r\n      ) {\r\n        pathNode = { ...routeNode, entry: null };\r\n        pathNode.entry = entry = routeEntry;\r\n        //Do nothing, the entry is allready the right one.\r\n        // yield put({\r\n        //   type: SET_ENTRY,\r\n        //   entry,\r\n        //   node: routeNode,\r\n        //   isLoading: false,\r\n        // });\r\n        yield put({\r\n          type: UPDATE_LOADING_STATE,\r\n          isLoading: false,\r\n        });\r\n      } else\r\n        yield call(\r\n          setRouteEntry,\r\n          routeEntry,\r\n          yield select(selectCurrentNode),\r\n          yield select(selectCurrentAncestors)\r\n        );\r\n    } else {\r\n      // Handle homepage\r\n      if (isHome) {\r\n        pathNode = yield cachedSearch.getRootNode(\r\n          {\r\n            depth: 0,\r\n            entryFields: '*',\r\n            entryLinkDepth,\r\n            language: defaultLang,\r\n            versionStatus: deliveryApiStatus,\r\n          },\r\n          project\r\n        );\r\n        ({ entry } = pathNode || {});\r\n      } else {\r\n        // Handle preview routes\r\n        if (isPreview) {\r\n          let splitPath = currentPath.split('/');\r\n          let entryGuid = splitPath[2];\r\n          let language = defaultLang;\r\n          if (splitPath.length >= 3) {\r\n            //set lang key if available in the path, else use default lang\r\n            //assumes preview url on content type is: http://preview.ALIAS.contensis.cloud/preview/{GUID}/{LANG}\r\n            if (splitPath.length == 4) language = splitPath[3];\r\n            // According to product dev we cannot use Node API\r\n            // for previewing entries as it gives a response of []\r\n            // -- apparently it is not correct to request latest content\r\n            // with Node API\r\n\r\n            let previewEntry = yield deliveryApi\r\n              .getClient(deliveryApiStatus, project)\r\n              .entries.get({\r\n                id: entryGuid,\r\n                language,\r\n                linkDepth: entryLinkDepth,\r\n              });\r\n            if (previewEntry) {\r\n              pathNode = { entry: previewEntry };\r\n              ({ entry } = pathNode || {});\r\n            }\r\n          }\r\n        } else {\r\n          // Handle all other routes\r\n          const childrenDepth =\r\n            doNavigation === true || doNavigation.children === true\r\n              ? 1\r\n              : (doNavigation && doNavigation.children) || 0;\r\n          pathNode = yield cachedSearch.getNode(\r\n            {\r\n              depth: childrenDepth,\r\n              path: currentPath,\r\n              entryFields: setContentTypeLimits\r\n                ? ['sys.contentTypeId', 'sys.id']\r\n                : '*',\r\n              entryLinkDepth: setContentTypeLimits ? 0 : entryLinkDepth,\r\n              language: defaultLang,\r\n              versionStatus: deliveryApiStatus,\r\n            },\r\n            project\r\n          );\r\n          ({ entry } = pathNode || {});\r\n\r\n          if (\r\n            setContentTypeLimits &&\r\n            pathNode &&\r\n            pathNode.entry &&\r\n            pathNode.entry.sys &&\r\n            pathNode.entry.sys.id\r\n          ) {\r\n            // Get fields[] and linkDepth from ContentTypeMapping to get the entry data\r\n            // at a specified depth with specified fields\r\n            const {\r\n              fields,\r\n              linkDepth,\r\n              nodeOptions = {},\r\n            } = findContentTypeMapping(\r\n              ContentTypeMappings,\r\n              pathNode.entry.sys.contentTypeId\r\n            ) || {};\r\n            const query = routeEntryByFieldsQuery(\r\n              pathNode.entry.sys.id,\r\n              pathNode.entry.sys.language,\r\n              fields,\r\n              deliveryApiStatus\r\n            );\r\n            const payload = yield cachedSearch.search(\r\n              query,\r\n              linkDepth || entryLinkDepth || 0,\r\n              project\r\n            );\r\n            if (payload && payload.items && payload.items.length > 0) {\r\n              pathNode.entry = entry = payload.items[0];\r\n            }\r\n\r\n            if (childrenDepth > 0 || nodeOptions.children) {\r\n              const childrenOptions = nodeOptions.children || {};\r\n              // We need to make a separate call for child nodes if the first node query has been\r\n              // limited by linkDepth or fields[]\r\n              const childNodes = yield cachedSearch.getChildren({\r\n                id: pathNode.id,\r\n                entryFields: childrenOptions.fields || fields || '*',\r\n                entryLinkDepth:\r\n                  childrenOptions.linkDepth || linkDepth || entryLinkDepth || 0,\r\n                language: defaultLang,\r\n                versionStatus: deliveryApiStatus,\r\n              });\r\n              if (childNodes) {\r\n                pathNode.children = childNodes;\r\n              }\r\n            }\r\n          }\r\n        }\r\n\r\n        if (pathNode && pathNode.id) {\r\n          if (doNavigation === true || doNavigation.ancestors) {\r\n            try {\r\n              ancestors = yield cachedSearch.getAncestors(\r\n                {\r\n                  id: pathNode.id,\r\n                  language: defaultLang,\r\n                  versionStatus: deliveryApiStatus,\r\n                },\r\n                project\r\n              );\r\n            } catch (ex) {\r\n              log.info('Problem fetching ancestors', ex);\r\n            }\r\n          }\r\n\r\n          if (doNavigation === true || doNavigation.siblings) {\r\n            try {\r\n              siblings = yield cachedSearch.getSiblings(\r\n                {\r\n                  id: pathNode.id,\r\n                  language: defaultLang,\r\n                  versionStatus: deliveryApiStatus,\r\n                },\r\n                project\r\n              );\r\n            } catch (ex) {\r\n              log.info('Problem fetching siblings', ex);\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    const contentTypeMapping =\r\n      findContentTypeMapping(\r\n        ContentTypeMappings,\r\n        pathNode?.entry?.sys?.contentTypeId\r\n      ) || {};\r\n\r\n    // Inject redux { key, reducer, saga } provided by ContentTypeMapping\r\n    if (contentTypeMapping.injectRedux)\r\n      yield call(reduxInjectorSaga, contentTypeMapping.injectRedux);\r\n\r\n    if (withEvents && withEvents.onRouteLoaded) {\r\n      // Check if the app has provided a requireLogin boolean flag or groups array\r\n      // in addition to checking if requireLogin is set in the route definition\r\n      ({ requireLogin } =\r\n        (yield withEvents.onRouteLoaded({ ...action, entry })) || {});\r\n    }\r\n\r\n    if (requireLogin !== false) {\r\n      // Do not call the login feature saga if requireLogin is false\r\n      yield call(handleRequiresLoginSaga, {\r\n        ...action,\r\n        entry,\r\n        requireLogin,\r\n      });\r\n    }\r\n\r\n    if (\r\n      pathNode &&\r\n      pathNode.entry &&\r\n      pathNode.entry.sys &&\r\n      pathNode.entry.sys.id\r\n    ) {\r\n      entry = pathNode.entry;\r\n      const { entryMapper } = contentTypeMapping;\r\n\r\n      yield call(\r\n        setRouteEntry,\r\n        entry,\r\n        pathNode,\r\n        ancestors,\r\n        siblings,\r\n        entryMapper,\r\n        false,\r\n        appsays && appsays.refetchNode\r\n      );\r\n    } else {\r\n      if (staticRoute)\r\n        yield call(setRouteEntry, null, pathNode, ancestors, siblings);\r\n      else yield call(do404);\r\n    }\r\n    if (!appsays || !appsays.preventScrollTop) {\r\n      // Scroll into View\r\n      if (typeof window !== 'undefined') {\r\n        window.scroll({\r\n          top: 0,\r\n        });\r\n      }\r\n    }\r\n\r\n    if (\r\n      !hasNavigationTree(state) &&\r\n      (doNavigation === true || doNavigation.tree)\r\n    )\r\n      if (typeof window !== 'undefined') {\r\n        yield put({\r\n          type: GET_NODE_TREE,\r\n          treeDepth:\r\n            doNavigation === true ||\r\n            !doNavigation.tree ||\r\n            doNavigation.tree === true\r\n              ? 2\r\n              : doNavigation.tree,\r\n        });\r\n      } else {\r\n        yield call(ensureNodeTreeSaga);\r\n      }\r\n  } catch (e) {\r\n    log.error(...['Error running route saga:', e, e.stack]);\r\n    yield call(do500, e);\r\n  }\r\n}\r\n\r\nfunction* setRouteEntry(\r\n  entry,\r\n  node,\r\n  ancestors,\r\n  siblings,\r\n  entryMapper,\r\n  notFound = false,\r\n  remapEntry = false\r\n) {\r\n  const entrySys = (entry && entry.sys) || {};\r\n\r\n  const currentEntryId = yield select(selectRouteEntryEntryId);\r\n  const currentEntryLang = yield select(selectRouteEntryLanguage);\r\n  const mappedEntry =\r\n    currentEntryId === entrySys.id &&\r\n    currentEntryLang === entrySys.language &&\r\n    remapEntry === false\r\n      ? (yield select(selectMappedEntry, 'js')) || {}\r\n      : yield mapRouteEntry(entryMapper, {\r\n          ...node,\r\n          entry,\r\n          ancestors,\r\n          siblings,\r\n        });\r\n\r\n  yield all([\r\n    put({\r\n      type: SET_ENTRY,\r\n      id: entrySys.id,\r\n      entry,\r\n      mappedEntry,\r\n      node,\r\n      notFound,\r\n    }),\r\n    ancestors &&\r\n      put({\r\n        type: SET_ANCESTORS,\r\n        ancestors,\r\n      }),\r\n    siblings &&\r\n      put({\r\n        type: SET_SIBLINGS,\r\n        siblings,\r\n      }),\r\n  ]);\r\n}\r\n\r\nfunction* mapRouteEntry(entryMapper, node) {\r\n  try {\r\n    if (typeof entryMapper === 'function') {\r\n      const state = yield select();\r\n      const mappedEntry = yield call(entryMapper, node, state);\r\n      return mappedEntry;\r\n    }\r\n  } catch (e) {\r\n    log.error(...['Error running entryMapper:', e, e.stack]);\r\n  }\r\n  return;\r\n}\r\n\r\nfunction* do404() {\r\n  yield call(clientReloadHitServer);\r\n  yield put({\r\n    type: SET_ENTRY,\r\n    id: null,\r\n    entry: null,\r\n    notFound: true,\r\n  });\r\n}\r\n\r\nfunction* clientReloadHitServer() {\r\n  const stateEntry = yield select(selectRouteEntry);\r\n\r\n  // If in client and there is a stateEntry.sys field reload the page,\r\n  // on the 2nd load stateEntry.sys should be null at this point,\r\n  // we do not wish to reload again and get stuck in an infinite reloading loop\r\n  if (typeof window !== 'undefined' && (stateEntry?.sys || null)) {\r\n    window.location.reload();\r\n  }\r\n}\r\n\r\nfunction* do500(error) {\r\n  yield put({\r\n    type: SET_ENTRY,\r\n    id: null,\r\n    entry: null,\r\n    notFound: true,\r\n    isError: true,\r\n    error,\r\n    statusCode: error && error.status ? error.status : 500,\r\n  });\r\n}\r\n\r\nfunction* reduxInjectorSaga(injectorFn) {\r\n  if (typeof injectorFn === 'function') {\r\n    const { key, reducer, saga } = yield injectorFn();\r\n    reduxInjector({ key, reducer, saga });\r\n  }\r\n}\r\n","import { to } from 'await-to-js';\r\nimport { put, select, takeEvery } from 'redux-saga/effects';\r\nimport { setRoute } from '~/routing/redux/actions';\r\nimport { selectCurrentSearch } from '~/routing/redux/selectors';\r\nimport { queryParams } from '~/util/navigation';\r\nimport {\r\n  REGISTER_USER,\r\n  REGISTER_USER_SUCCESS,\r\n  REGISTER_USER_FAILED,\r\n} from '../types';\r\n\r\nexport const registerSagas = [\r\n  takeEvery(REGISTER_USER, registerSaga),\r\n  takeEvery(REGISTER_USER_SUCCESS, redirectSaga),\r\n];\r\n\r\nfunction* registerSaga({ user, mappers }) {\r\n  let requestBody = user;\r\n  // Allow use of request mapper to take a user object\r\n  // of any format and return the payload for the api request\r\n  if (mappers && mappers.request && typeof mappers.request === 'function') {\r\n    requestBody = yield mappers.request(user);\r\n  }\r\n\r\n  // Make POST call to register API\r\n  const response = yield fetch('/account/register', {\r\n    method: 'POST',\r\n    headers: {\r\n      Accept: 'application/json',\r\n      'Content-Type': 'application/json',\r\n    },\r\n    body: JSON.stringify(requestBody),\r\n  });\r\n\r\n  if (response.ok) {\r\n    let mappedResponse;\r\n    const [, responseBody] = yield to(response.json());\r\n    if (responseBody) {\r\n      // Allow use of response mapper to convert the successful user object\r\n      // from the api response body into a user object of any format\r\n      if (\r\n        mappers &&\r\n        mappers.response &&\r\n        typeof mappers.response === 'function'\r\n      ) {\r\n        mappedResponse = yield mappers.response(responseBody);\r\n      }\r\n      // Update user object with mappedResponse or responseBody\r\n      yield put({\r\n        type: REGISTER_USER_SUCCESS,\r\n        user: mappedResponse || responseBody,\r\n      });\r\n    } else {\r\n      // OK response but unable to parse the response body\r\n      yield put({\r\n        type: REGISTER_USER_FAILED,\r\n        error: {\r\n          message:\r\n            'Unable to parse the created user from the register service response',\r\n        },\r\n      });\r\n    }\r\n  } else {\r\n    // Not OK responses, these can be due to service availability\r\n    // or status codes echoed from the responses received from\r\n    // management api when registering the user\r\n    const [, errorResponse] = yield to(response.json());\r\n    const error = (errorResponse && errorResponse.error) || errorResponse || {};\r\n    // Get something meaningful from the response if there is no message in the body\r\n    if (!error.message) {\r\n      error.message = `Registration service: ${response.statusText}`;\r\n      error.status = response.status;\r\n    }\r\n    yield put({\r\n      type: REGISTER_USER_FAILED,\r\n      error,\r\n    });\r\n  }\r\n}\r\n\r\nfunction* redirectSaga() {\r\n  // Check if querystring contains a redirect_uri\r\n  const currentQs = queryParams(yield select(selectCurrentSearch));\r\n  const redirectUri = currentQs.redirect_uri || currentQs.redirect;\r\n\r\n  // We must use redux based navigation to preserve the registration state\r\n  if (redirectUri) yield put(setRoute(redirectUri));\r\n}\r\n","const PAP_URL = 'https://pap.zengenti.com';\r\n\r\nconst USER_ENVS_URI = 'my-environments';\r\nconst USER_RESEND_VERIFICATION_URI = 'account/verify/resend';\r\nconst USER_REQUEST_PASSWORD_RESET_URI = 'account/reset';\r\nconst USER_RESET_PASSWORD_URI = 'account/reset/password';\r\n\r\nconst USER_ENVS_URL = `${PAP_URL}/${USER_ENVS_URI}`;\r\n\r\nconst BASE_OPTIONS = {\r\n  method: 'GET',\r\n  headers: { 'Content-Type': 'application/json' },\r\n};\r\n\r\nexport class UserHelper {\r\n  static async GetUsersEnvironments(securityToken) {\r\n    const options = {\r\n      ...BASE_OPTIONS,\r\n      headers: {\r\n        'x-security-token': securityToken,\r\n      },\r\n    };\r\n    return await UserHelper.get(USER_ENVS_URL, options);\r\n  }\r\n  static async ResendUserVerification(userEmail) {\r\n    const options = {\r\n      ...BASE_OPTIONS,\r\n    };\r\n    return await UserHelper.get(\r\n      `/${USER_RESEND_VERIFICATION_URI}?user=${userEmail}`,\r\n      options\r\n    );\r\n  }\r\n  static async RequestPasswordReset(userEmailObject) {\r\n    const options = {\r\n      ...BASE_OPTIONS,\r\n      body: JSON.stringify(userEmailObject),\r\n    };\r\n    options.method = 'POST';\r\n\r\n    return await UserHelper.get(`/${USER_REQUEST_PASSWORD_RESET_URI}`, options);\r\n  }\r\n  static async ResetPassword(resetPasswordObject) {\r\n    const options = {\r\n      ...BASE_OPTIONS,\r\n      body: JSON.stringify(resetPasswordObject),\r\n    };\r\n    options.method = 'POST';\r\n\r\n    return await UserHelper.get(`/${USER_RESET_PASSWORD_URI}`, options);\r\n  }\r\n\r\n  static async get(url, options = BASE_OPTIONS) {\r\n    try {\r\n      const responseBody = await api(url, options);\r\n      return responseBody;\r\n    } catch (err) {\r\n      return { error: { message: err.message } };\r\n    }\r\n  }\r\n}\r\n\r\nasync function api(url, options) {\r\n  return fetch(url, options)\r\n    .then(async response => {\r\n      return response.json().then(data => data);\r\n    })\r\n    .catch(error => {\r\n      throw error;\r\n    });\r\n}\r\n","import { put, takeEvery, select } from 'redux-saga/effects';\r\nimport { to } from 'await-to-js';\r\nimport { getManagementApiClient } from '~/user/util/ContensisManagementApi';\r\nimport { UserHelper } from '~/user/util/userHelper';\r\nimport { selectClientCredentials } from '../selectors';\r\nimport {\r\n  REQUEST_USER_PASSWORD_RESET,\r\n  RESET_USER_PASSWORD,\r\n  REQUEST_USER_PASSWORD_RESET_ERROR,\r\n  REQUEST_USER_PASSWORD_RESET_SENDING,\r\n  REQUEST_USER_PASSWORD_RESET_SUCCESS,\r\n  RESET_USER_PASSWORD_ERROR,\r\n  RESET_USER_PASSWORD_SENDING,\r\n  RESET_USER_PASSWORD_SUCCESS,\r\n  CHANGE_USER_PASSWORD,\r\n  CHANGE_USER_PASSWORD_SENDING,\r\n  CHANGE_USER_PASSWORD_SUCCESS,\r\n  CHANGE_USER_PASSWORD_ERROR,\r\n} from '../types';\r\n\r\nexport const resetPasswordSagas = [\r\n  takeEvery(REQUEST_USER_PASSWORD_RESET, requestPasswordResetSaga),\r\n  takeEvery(RESET_USER_PASSWORD, resetPasswordSaga),\r\n  takeEvery(CHANGE_USER_PASSWORD, changePasswordSaga),\r\n];\r\n\r\nfunction* requestPasswordResetSaga(action) {\r\n  const userEmailObject = action.userEmailObject;\r\n  yield put({\r\n    type: REQUEST_USER_PASSWORD_RESET_SENDING,\r\n  });\r\n  if (userEmailObject && userEmailObject.userEmail) {\r\n    try {\r\n      const passwordResetRequestResponse =\r\n        yield UserHelper.RequestPasswordReset(userEmailObject);\r\n\r\n      if (passwordResetRequestResponse) {\r\n        if (!passwordResetRequestResponse.error) {\r\n          yield put({\r\n            type: REQUEST_USER_PASSWORD_RESET_SUCCESS,\r\n          });\r\n        } else {\r\n          yield put({\r\n            type: REQUEST_USER_PASSWORD_RESET_ERROR,\r\n            error: passwordResetRequestResponse.error.message,\r\n          });\r\n        }\r\n      } else {\r\n        yield put({\r\n          type: REQUEST_USER_PASSWORD_RESET_ERROR,\r\n          error: 'No response from server',\r\n        });\r\n      }\r\n    } catch (error) {\r\n      yield put({\r\n        type: REQUEST_USER_PASSWORD_RESET_ERROR,\r\n        error: error && error.toString(),\r\n      });\r\n    }\r\n  } else {\r\n    yield put({\r\n      type: REQUEST_USER_PASSWORD_RESET_ERROR,\r\n      error: 'Invalid object',\r\n    });\r\n  }\r\n}\r\n\r\nfunction* resetPasswordSaga(action) {\r\n  const resetPasswordObject = action.resetPasswordObject;\r\n\r\n  yield put({\r\n    type: RESET_USER_PASSWORD_SENDING,\r\n  });\r\n  if (resetPasswordObject.token && resetPasswordObject.password) {\r\n    try {\r\n      const resetPasswordResponse = yield UserHelper.ResetPassword(\r\n        resetPasswordObject\r\n      );\r\n\r\n      if (resetPasswordResponse) {\r\n        if (!resetPasswordResponse.error) {\r\n          yield put({\r\n            type: RESET_USER_PASSWORD_SUCCESS,\r\n          });\r\n        } else {\r\n          const error =\r\n            (resetPasswordResponse.error.data &&\r\n              resetPasswordResponse.error.data.length > 0 &&\r\n              resetPasswordResponse.error.data[0].message) ||\r\n            resetPasswordResponse.error.message;\r\n          yield put({\r\n            type: RESET_USER_PASSWORD_ERROR,\r\n            error,\r\n          });\r\n        }\r\n      } else {\r\n        yield put({\r\n          type: RESET_USER_PASSWORD_ERROR,\r\n          error: 'No response from server',\r\n        });\r\n      }\r\n    } catch (error) {\r\n      yield put({\r\n        type: RESET_USER_PASSWORD_ERROR,\r\n        error: error && error.toString(),\r\n      });\r\n    }\r\n  } else {\r\n    yield put({\r\n      type: RESET_USER_PASSWORD_ERROR,\r\n      error: 'Invalid object',\r\n    });\r\n  }\r\n}\r\n\r\n// userId\r\n// existingPassword\r\n// newPassword\r\nfunction* changePasswordSaga(action) {\r\n  if (\r\n    !action ||\r\n    !action.userId ||\r\n    !action.currentPassword ||\r\n    !action.newPassword\r\n  ) {\r\n    yield put({\r\n      type: CHANGE_USER_PASSWORD_ERROR,\r\n      error: 'Invalid action object sent to changePassword saga',\r\n    });\r\n    return;\r\n  }\r\n\r\n  try {\r\n    const changePasswordObject = {\r\n      userId: action.userId,\r\n      existing: action.currentPassword,\r\n      new: action.newPassword,\r\n    };\r\n\r\n    yield put({\r\n      type: CHANGE_USER_PASSWORD_SENDING,\r\n    });\r\n    const clientCredentials = yield select(selectClientCredentials);\r\n    const client = yield getManagementApiClient({ ...clientCredentials });\r\n\r\n    const [err, res] = yield to(\r\n      client.security.users.updatePassword(changePasswordObject)\r\n    );\r\n\r\n    if (err) {\r\n      const error =\r\n        (err?.data?.data?.length > 0 && err.data.data[0].message) ||\r\n        err?.data?.message;\r\n      yield put({\r\n        type: CHANGE_USER_PASSWORD_ERROR,\r\n        error,\r\n      });\r\n      return;\r\n    }\r\n\r\n    // // eslint-disable-next-line no-console\r\n    // console.log(changePasswordObject);\r\n    // // eslint-disable-next-line no-console\r\n    // console.log(userCredentialsObject);\r\n    yield put({\r\n      type: CHANGE_USER_PASSWORD_SUCCESS,\r\n    });\r\n  } catch (error) {\r\n    yield put({\r\n      type: CHANGE_USER_PASSWORD_ERROR,\r\n      error: error && error.toString(),\r\n    });\r\n  }\r\n}\r\n","import { loginSagas } from './login';\r\nimport { registerSagas } from './register';\r\nimport { resetPasswordSagas } from './resetPassword';\r\n\r\nexport const userSagas = [\r\n  ...loginSagas,\r\n  ...registerSagas,\r\n  ...resetPasswordSagas,\r\n];\r\n","// index.js\r\nimport { all } from 'redux-saga/effects';\r\nimport { navigationSagas } from './navigation';\r\nimport { routingSagas } from '~/routing/redux/sagas';\r\nimport { userSagas } from '~/user/redux/sagas';\r\n\r\nexport default function (featureSagas = []) {\r\n  return function* rootSaga() {\r\n    const subSagas = [...routingSagas, ...navigationSagas, ...userSagas];\r\n    yield all([...subSagas, ...featureSagas]);\r\n  };\r\n}\r\n","const servers = SERVERS; /* global SERVERS */\r\nconst alias = servers.alias.toLowerCase();\r\nconst publicUri = PUBLIC_URI; /* global PUBLIC_URI */\r\nconst projects = PROJECTS; /* global PROJECTS */\r\n\r\n// return a projectId via the request hostname\r\nconst pickProject = (hostname, query) => {\r\n  // if localhost we can only infer via a querystring, and take your word for it\r\n  if (hostname == 'localhost') {\r\n    return (query && query.p) || projects[0].id;\r\n  }\r\n\r\n  // if hostname is the actual public uri we can return the first project from the list\r\n  if (hostname == publicUri) {\r\n    return projects[0].id;\r\n  }\r\n\r\n  let project = 'unknown';\r\n\r\n  // // go through all the defined projects\r\n  // Object.entries(projects).map(([, p]) => {\r\n  const p = projects[0];\r\n\r\n  // check if we're accessing via the project's public uri\r\n  if (hostname.includes(p.publicUri)) project = p.id;\r\n\r\n  // the url structure is different for website (we don't prefix)\r\n  if (p.id.startsWith('website')) {\r\n    // check for internal and external hostnames\r\n    // we check live and preview distinctly so our rule does not clash with\r\n    // hostnames that use a project prefix\r\n    if (\r\n      hostname.includes(`live-${alias}.cloud.contensis.com`) ||\r\n      hostname.includes(`live.${alias}.contensis.cloud`) ||\r\n      hostname.includes(`preview-${alias}.cloud.contensis.com`) ||\r\n      hostname.includes(`preview.${alias}.contensis.cloud`)\r\n    )\r\n      project = p.id;\r\n  } else {\r\n    // check for internal and external hostnames, prefixed with the projectId\r\n    if (\r\n      hostname.includes(`${p.id.toLowerCase()}-${alias}.cloud.contensis.com`) ||\r\n      hostname.includes(`${p.id.toLowerCase()}.${alias}.contensis.cloud`)\r\n    )\r\n      project = p.id;\r\n  }\r\n  // });\r\n  return project === 'unknown' ? p.id : project;\r\n};\r\n\r\nexport default pickProject;\r\n","import React from 'react';\r\nimport { hot } from 'react-hot-loader';\r\nimport { AppRootProps } from '../routing/routes';\r\nimport { RouteLoader } from '../routing';\r\n\r\nconst AppRoot = (props: AppRootProps) => {\r\n  return <RouteLoader {...props} />;\r\n};\r\n\r\nexport default hot(module)(AppRoot);\r\n"],"names":["selectedHistory","window","createBrowserHistory","createMemoryHistory","history","options","browserHistory","storeSurrogateKeys","response","keys","headers","get","map","reduxStore","dispatch","setSurrogateKeys","getClientConfig","project","config","DELIVERY_API_CONFIG","responseHandler","projectId","defaultHeaders","PROXY_DELIVERY_API","rootUrl","DeliveryApi","getClientSideVersionStatus","currentHostname","location","hostname","getVersionStatusFromHostname","indexOf","endsWith","search","query","linkDepth","env","client","Client","create","entries","getClient","deliveryApiStatus","baseConfig","versionStatus","getEntry","id","deliveryApi","CacheNode","constructor","key","value","next","prev","LruCache","limit","head","tail","size","node","remove","setHead","set","CachedSearch","cache","taxonomyLookup","request","JSON","stringify","toString","clientConfig","getContentType","contentTypes","getTaxonomyNode","taxonomy","resolveChildren","then","extendTaxonomyNode","getRootNode","nodes","getRoot","getNode","path","getAncestors","getChildren","getSiblings","execute","promise","catch","getTaxonomyId","children","n","parts","split","length","getTaxonomyKey","cachedSearch","navigationSagas","takeEvery","GET_NODE_TREE","ensureNodeTreeSaga","action","state","select","hasNavigationTree","deliveryApiVersionStatus","selectVersionStatus","selectCurrentProject","depth","treeDepth","put","type","SET_NODE_TREE","GET_NODE_TREE_ERROR","ex","error","sys","contentTypeId","dataFormat","filename","includeInSearch","slug","uri","Fields","entryTitle","entryDescription","keywords","wildcard","fieldExpression","field","operator","weight","Array","isArray","equalToOrIn","Op","defaultExpressions","equalTo","arr","in","routeEntryByFieldsQuery","language","fields","Query","routingSagas","SET_NAVIGATION_PATH","getRouteSaga","SET_ROUTE","setRouteSaga","payload","method","args","entry","withEvents","routes","ContentTypeMappings","staticRoute","route","injectRedux","call","reduxInjectorSaga","pathNode","ancestors","siblings","appsays","requireLogin","onRouteLoad","doNavigation","customNavigation","entryLinkDepth","setContentTypeLimits","find","ct","nodeOptions","routeEntry","selectRouteEntry","routeNode","selectCurrentNode","currentPath","isHome","isPreview","startsWith","defaultLang","customRouting","fetchNode","statePath","refetchNode","UPDATE_LOADING_STATE","isLoading","setRouteEntry","selectCurrentAncestors","entryFields","splitPath","entryGuid","previewEntry","childrenDepth","findContentTypeMapping","items","childrenOptions","childNodes","log","contentTypeMapping","onRouteLoaded","handleRequiresLoginSaga","entryMapper","do404","preventScrollTop","scroll","top","tree","e","stack","do500","notFound","remapEntry","entrySys","currentEntryId","selectRouteEntryEntryId","currentEntryLang","selectRouteEntryLanguage","mappedEntry","selectMappedEntry","mapRouteEntry","all","SET_ENTRY","SET_ANCESTORS","SET_SIBLINGS","clientReloadHitServer","stateEntry","reload","isError","statusCode","status","injectorFn","reducer","saga","reduxInjector","registerSagas","REGISTER_USER","registerSaga","REGISTER_USER_SUCCESS","redirectSaga","user","mappers","requestBody","fetch","Accept","body","ok","mappedResponse","responseBody","to","json","REGISTER_USER_FAILED","message","errorResponse","statusText","currentQs","queryParams","selectCurrentSearch","redirectUri","redirect_uri","redirect","setRoute","PAP_URL","USER_ENVS_URI","USER_RESEND_VERIFICATION_URI","USER_REQUEST_PASSWORD_RESET_URI","USER_RESET_PASSWORD_URI","USER_ENVS_URL","BASE_OPTIONS","UserHelper","GetUsersEnvironments","securityToken","ResendUserVerification","userEmail","RequestPasswordReset","userEmailObject","ResetPassword","resetPasswordObject","url","api","err","data","resetPasswordSagas","REQUEST_USER_PASSWORD_RESET","requestPasswordResetSaga","RESET_USER_PASSWORD","resetPasswordSaga","CHANGE_USER_PASSWORD","changePasswordSaga","REQUEST_USER_PASSWORD_RESET_SENDING","passwordResetRequestResponse","REQUEST_USER_PASSWORD_RESET_SUCCESS","REQUEST_USER_PASSWORD_RESET_ERROR","RESET_USER_PASSWORD_SENDING","token","password","resetPasswordResponse","RESET_USER_PASSWORD_SUCCESS","RESET_USER_PASSWORD_ERROR","userId","currentPassword","newPassword","CHANGE_USER_PASSWORD_ERROR","changePasswordObject","existing","new","CHANGE_USER_PASSWORD_SENDING","clientCredentials","selectClientCredentials","getManagementApiClient","res","security","users","updatePassword","CHANGE_USER_PASSWORD_SUCCESS","userSagas","loginSagas","featureSagas","rootSaga","subSagas","servers","SERVERS","alias","toLowerCase","publicUri","PUBLIC_URI","projects","PROJECTS","pickProject","p","includes","AppRoot","props"],"mappings":"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"}
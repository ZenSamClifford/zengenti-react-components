{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap","webpack:///external \"@babel/runtime/helpers/interopRequireDefault\"","webpack:///external \"react\"","webpack:///external \"immutable\"","webpack:///external \"@babel/runtime/regenerator\"","webpack:///./src/app/core/redux/types/routing.js","webpack:///external \"@babel/runtime/helpers/interopRequireWildcard\"","webpack:///./src/app/core/util/ContensisDeliveryApi.js","webpack:///external \"@babel/runtime/helpers/defineProperty\"","webpack:///./src/app/core/redux/selectors/routing.js","webpack:///external \"@babel/runtime/helpers/toConsumableArray\"","webpack:///./src/app/core/util/helpers.js","webpack:///external \"react-router-dom\"","webpack:///./src/app/core/redux/actions/routing.js","webpack:///./src/app/core/redux/types/navigation.js","webpack:///external \"@babel/runtime/helpers/asyncToGenerator\"","webpack:///external \"react-hot-loader\"","webpack:///./src/app/core/redux/types/version.js","webpack:///external \"prop-types\"","webpack:///external \"react-redux\"","webpack:///./node_modules/redux-saga/dist/redux-saga-effects-npm-proxy.esm.js","webpack:///./src/app/core/redux/selectors/version.js","webpack:///./src/app/core/redux/selectors/navigation.js","webpack:///./src/app/core/routes/RouteLoader.js","webpack:///external \"@babel/runtime/helpers/typeof\"","webpack:///external \"contensis-delivery-api\"","webpack:///./src/app/core/redux/actions/version.js","webpack:///external \"@redux-saga/core/effects\"","webpack:///./src/app/App.js","webpack:///(webpack)/buildin/module.js","webpack:///external \"react-router-config\"","webpack:///./src/app/pages/NotFound.js","webpack:///./src/app/core/routes/Status.js","webpack:///./src/app/core/util/ToJs.js","webpack:///external \"react-loadable\"","webpack:///external \"@babel/runtime/helpers/classCallCheck\"","webpack:///external \"query-string\"","webpack:///external \"isomorphic-fetch\"","webpack:///./src/app/core/redux/history.js","webpack:///external \"history\"","webpack:///./src/app/core/util/pickProject.js","webpack:///external \"@babel/runtime/helpers/createClass\"","webpack:///./src/app/core/redux/store.js","webpack:///external \"redux\"","webpack:///external \"redux-immutable\"","webpack:///external \"redux-thunk\"","webpack:///external \"redux-saga\"","webpack:///./src/app/core/redux/reducers/routing.js","webpack:///./src/app/core/redux/reducers/version.js","webpack:///./src/app/core/redux/reducers/navigation.js","webpack:///./src/app/core/redux/routerMiddleware.js","webpack:///./src/app/core/redux/sagas/index.js","webpack:///./src/app/core/redux/sagas/routing.js","webpack:///external \"loglevel\"","webpack:///./src/app/core/redux/sagas/queries.js","webpack:///external \"@babel/runtime/helpers/construct\"","webpack:///./src/app/core/search/expressions.js","webpack:///./src/app/core/schema.js","webpack:///./src/app/core/search/util.js","webpack:///./src/app/core/util/performance.js","webpack:///./src/app/core/util/navigation.js","webpack:///./src/app/core/redux/sagas/navigation.js","webpack:///./src/app/lib-client.js","webpack:///./src/client/client.js","webpack:///external \"react-dom\""],"names":["ROUTING_PREFIX","GET_ENTRY","SET_ENTRY","SET_NODE","SET_ANCESTORS","SET_SIBLINGS","SET_ENTRY_ID","SET_ENTRY_RELATED_ARTICLES","SET_NAVIGATION_NOT_FOUND","SET_NAVIGATION_PATH","SET_ROUTE_LOADING","SET_TARGET_PROJECT","SET_ROUTE","CALL_HISTORY_METHOD","getClientConfig","project","config","DELIVERY_API_CONFIG","projectId","window","PROXY_DELIVERY_API","rootUrl","responseHandler","GetClientSideDeliveryApiStatus","currentHostname","location","hostname","GetDeliveryApiStatusFromHostname","indexOf","endsWith","fixImageUri","object","Object","keys","some","k","sys","id","userTransforms","transformations","uri","version","versionNo","GetResponseGuids","Ids","language","dataFormat","push","toLowerCase","subIds","length","GetAllResponseGuids","returnItems","unique","Set","DeliveryApi","query","linkDepth","env","client","Client","create","entries","search","deliveryApiStatus","baseConfig","versionStatus","get","deliveryApi","CacheNode","key","value","next","prev","LruCache","limit","map","head","tail","size","node","remove","setHead","CachedSearch","request","JSON","stringify","toString","clientConfig","contentTypes","taxonomy","resolveChildren","then","extendTaxonomyNode","execute","cache","promise","set","getTaxonomyId","taxonomyLookup","children","n","parts","split","cachedSearch","selectRouteEntry","state","getIn","selectNodeDepends","List","selectCurrentTreeID","selectEntryDepends","selectRouteEntryEntryId","selectRouteEntryContentTypeId","entry","selectRouteEntrySlug","selectRouteEntryID","selectCurrentPath","selectCurrentSearch","selectCurrentProject","selectIsNotFound","selectCurrentAncestors","selectRouteLoading","action","type","payload","getWebPImageUri","formatedUri","resizeImage","image","height","width","asset","resizeImageUri","paramDelimeter","flattenArray","arr","reduce","acc","val","concat","filter","elem","pos","api","url","options","fetch","response","setTimeout","ok","Error","statusText","json","data","error","dynamicSort","property","sortOrder","substr","a","b","result","randomString","text","possible","i","charAt","Math","floor","random","setNotFound","notFound","setNavigationPath","path","staticRoute","withEvents","statePath","routes","setCurrentProject","allowedGroups","setRoute","setRouteEntry","ACTION_PREFIX","GET_NODE_TREE","SET_NODE_TREE","GET_NODE_TREE_ERROR","VERSION_PREFIX","SET_VERSION","SET_VERSION_STATUS","selectCommitRef","selectBuildNumber","selectVersionStatus","hasNavigationTree","selectNavigationRoot","selectNavigationDepends","getTrimmedPath","lastChar","substring","RouteLoader","contentTypeId","isNotFound","matchedStaticRoute","pathname","StaticRoutes","isStaticRoute","trimmedPath","setPath","serverPath","route","p","startsWith","join","MatchedComponent","ContentTypeMappings","find","item","contentTypeID","propTypes","PropTypes","objectOf","array","string","bool","func","mapStateToProps","mapDispatchToProps","module","setVersion","commitRef","buildNo","setVersionStatus","status","AppRoot","props","NotFound","Status","code","staticContext","number","isRequired","element","toJS","WrappedComponent","wrappedComponentProps","KEY","VALUE","propsJS","newProps","wrappedComponentProp","Iterable","isIterable","selectedHistory","createBrowserHistory","createMemoryHistory","history","browserHistory","servers","SERVERS","alias","publicUri","PUBLIC_URI","projects","PROJECTS","pickProject","includes","featureReducers","initialState","thunkMiddleware","thunk","reduxDevToolsMiddleware","f","__REDUX_DEVTOOLS_EXTENSION__","sagaMiddleware","middleware","applyMiddleware","reducers","navigation","NavigationReducer","routing","RoutingReducer","VersionReducer","combinedReducers","store","runSaga","run","close","dispatch","END","currentPath","currentNode","currentProject","entryID","entryDepends","currentNodeAncestors","ancestors","ancestorIDs","currentNodeDepends","allNodeDepends","union","nodeDepends","loading","currentNodeSiblingParent","siblingIDs","siblings","parentId","contensisVersionStatus","root","treeDepends","isError","isReady","nodes","routerMiddleware","method","args","featureSagas","rootSaga","subSagas","routingSagas","navigationSagas","setRouteSaga","getRouteSaga","do404","onRouteLoad","appsays","doNavigation","customNavigation","routeEntry","customRouting","fetchNode","pathNode","scroll","top","currentPathDepth","getClient","getRoot","depth","entryFields","entryLinkDepth","splitPath","entryGuid","previewEntry","contentType","ct","fields","items","getAncestors","getSiblings","onRouteLoaded","log","stack","routeEntryByFields","Query","fieldExpression","field","operator","weight","Array","isArray","equalToOrIn","Op","contentTypeIdExpression","contentTypeIds","webpageTemplates","expressions","dataFormatExpression","DataFormats","webpage","or","filterExpressions","filters","param","withContentTypeIds","c","notContentTypeIds","andExpr","and","dataFormatExpr","Fields","withExpr","notExpr","not","add","defaultExpressions","equalTo","defaultSearchExpressions","includeInSearchExpressions","exists","includeInSearch","orderByExpression","orderBy","expression","OrderBy","ob","desc","asc","customWhereExpressions","where","clause","idx","termExpressions","searchTerm","weightedSearchFields","quotedPhrases","modifiedSearchTerm","forEach","qp","replace","trim","operators","containsOp","term","fieldId","freeTextOp","fieldOperators","keywords","filename","entryTitle","addRange","contains","wildcard","slug","entryDescription","Projects","website","VersionStatus","published","latest","ContentTypes","contentPage","WebpageFormats","FilterExpressionTypes","fixFreeTextForElastic","s","illegalChars","encodedChars","illegalRegEx","RegExp","encodedRegEx","timedSearch","duration","start","end","extractQuotedPhrases","pattern","match","callCustomApi","customApi","now","Date","performance","queryParams","queryString","parse","routeParams","params","buildUrl","qs","clientHostname","protocol","port","addHostname","host","ensureNodeTreeSaga","deliveryApiVersionStatus","require","ReactApp","ClientApp","documentRoot","document","getElementById","withReducers","withSagas","GetClientJSX","ClientJsx","isProduction","process","HMRRenderer","Component","versionStatusFromHostname","isDynamic","REDUX_DATA","console","ssRedux"],"mappings":"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","file":"client.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"@babel/runtime/helpers/interopRequireDefault\"), require(\"react\"), require(\"immutable\"), require(\"@babel/runtime/regenerator\"), require(\"@babel/runtime/helpers/interopRequireWildcard\"), require(\"@babel/runtime/helpers/defineProperty\"), require(\"@babel/runtime/helpers/toConsumableArray\"), require(\"react-router-dom\"), require(\"@babel/runtime/helpers/asyncToGenerator\"), require(\"react-hot-loader\"), require(\"prop-types\"), require(\"react-redux\"), require(\"@babel/runtime/helpers/typeof\"), require(\"contensis-delivery-api\"), require(\"@redux-saga/core/effects\"), require(\"react-router-config\"), require(\"react-loadable\"), require(\"@babel/runtime/helpers/classCallCheck\"), require(\"query-string\"), require(\"isomorphic-fetch\"), require(\"history\"), require(\"@babel/runtime/helpers/createClass\"), require(\"redux\"), require(\"redux-immutable\"), require(\"redux-thunk\"), require(\"redux-saga\"), require(\"loglevel\"), require(\"@babel/runtime/helpers/construct\"), require(\"react-dom\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"@babel/runtime/helpers/interopRequireDefault\", \"react\", \"immutable\", \"@babel/runtime/regenerator\", \"@babel/runtime/helpers/interopRequireWildcard\", \"@babel/runtime/helpers/defineProperty\", \"@babel/runtime/helpers/toConsumableArray\", \"react-router-dom\", \"@babel/runtime/helpers/asyncToGenerator\", \"react-hot-loader\", \"prop-types\", \"react-redux\", \"@babel/runtime/helpers/typeof\", \"contensis-delivery-api\", \"@redux-saga/core/effects\", \"react-router-config\", \"react-loadable\", \"@babel/runtime/helpers/classCallCheck\", \"query-string\", \"isomorphic-fetch\", \"history\", \"@babel/runtime/helpers/createClass\", \"redux\", \"redux-immutable\", \"redux-thunk\", \"redux-saga\", \"loglevel\", \"@babel/runtime/helpers/construct\", \"react-dom\"], factory);\n\telse {\n\t\tvar a = typeof exports === 'object' ? factory(require(\"@babel/runtime/helpers/interopRequireDefault\"), require(\"react\"), require(\"immutable\"), require(\"@babel/runtime/regenerator\"), require(\"@babel/runtime/helpers/interopRequireWildcard\"), require(\"@babel/runtime/helpers/defineProperty\"), require(\"@babel/runtime/helpers/toConsumableArray\"), require(\"react-router-dom\"), require(\"@babel/runtime/helpers/asyncToGenerator\"), require(\"react-hot-loader\"), require(\"prop-types\"), require(\"react-redux\"), require(\"@babel/runtime/helpers/typeof\"), require(\"contensis-delivery-api\"), require(\"@redux-saga/core/effects\"), require(\"react-router-config\"), require(\"react-loadable\"), require(\"@babel/runtime/helpers/classCallCheck\"), require(\"query-string\"), require(\"isomorphic-fetch\"), require(\"history\"), require(\"@babel/runtime/helpers/createClass\"), require(\"redux\"), require(\"redux-immutable\"), require(\"redux-thunk\"), require(\"redux-saga\"), require(\"loglevel\"), require(\"@babel/runtime/helpers/construct\"), require(\"react-dom\")) : factory(root[\"@babel/runtime/helpers/interopRequireDefault\"], root[\"react\"], root[\"immutable\"], root[\"@babel/runtime/regenerator\"], root[\"@babel/runtime/helpers/interopRequireWildcard\"], root[\"@babel/runtime/helpers/defineProperty\"], root[\"@babel/runtime/helpers/toConsumableArray\"], root[\"react-router-dom\"], root[\"@babel/runtime/helpers/asyncToGenerator\"], root[\"react-hot-loader\"], root[\"prop-types\"], root[\"react-redux\"], root[\"@babel/runtime/helpers/typeof\"], root[\"contensis-delivery-api\"], root[\"@redux-saga/core/effects\"], root[\"react-router-config\"], root[\"react-loadable\"], root[\"@babel/runtime/helpers/classCallCheck\"], root[\"query-string\"], root[\"isomorphic-fetch\"], root[\"history\"], root[\"@babel/runtime/helpers/createClass\"], root[\"redux\"], root[\"redux-immutable\"], root[\"redux-thunk\"], root[\"redux-saga\"], root[\"loglevel\"], root[\"@babel/runtime/helpers/construct\"], root[\"react-dom\"]);\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(global, function(__WEBPACK_EXTERNAL_MODULE__0__, __WEBPACK_EXTERNAL_MODULE__1__, __WEBPACK_EXTERNAL_MODULE__2__, __WEBPACK_EXTERNAL_MODULE__3__, __WEBPACK_EXTERNAL_MODULE__5__, __WEBPACK_EXTERNAL_MODULE__7__, __WEBPACK_EXTERNAL_MODULE__9__, __WEBPACK_EXTERNAL_MODULE__11__, __WEBPACK_EXTERNAL_MODULE__14__, __WEBPACK_EXTERNAL_MODULE__15__, __WEBPACK_EXTERNAL_MODULE__17__, __WEBPACK_EXTERNAL_MODULE__18__, __WEBPACK_EXTERNAL_MODULE__23__, __WEBPACK_EXTERNAL_MODULE__24__, __WEBPACK_EXTERNAL_MODULE__26__, __WEBPACK_EXTERNAL_MODULE__29__, __WEBPACK_EXTERNAL_MODULE__33__, __WEBPACK_EXTERNAL_MODULE__34__, __WEBPACK_EXTERNAL_MODULE__35__, __WEBPACK_EXTERNAL_MODULE__36__, __WEBPACK_EXTERNAL_MODULE__38__, __WEBPACK_EXTERNAL_MODULE__40__, __WEBPACK_EXTERNAL_MODULE__42__, __WEBPACK_EXTERNAL_MODULE__43__, __WEBPACK_EXTERNAL_MODULE__44__, __WEBPACK_EXTERNAL_MODULE__45__, __WEBPACK_EXTERNAL_MODULE__52__, __WEBPACK_EXTERNAL_MODULE__54__, __WEBPACK_EXTERNAL_MODULE__86__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 84);\n","module.exports = __WEBPACK_EXTERNAL_MODULE__0__;","module.exports = __WEBPACK_EXTERNAL_MODULE__1__;","module.exports = __WEBPACK_EXTERNAL_MODULE__2__;","module.exports = __WEBPACK_EXTERNAL_MODULE__3__;","const ROUTING_PREFIX = '@ROUTING/';\r\nexport const GET_ENTRY = `${ROUTING_PREFIX}_GET_ENTRY`;\r\nexport const SET_ENTRY = `${ROUTING_PREFIX}_SET_ENTRY`;\r\nexport const SET_NODE = `${ROUTING_PREFIX}_SET_NODE`;\r\nexport const SET_ANCESTORS = `${ROUTING_PREFIX}_SET_ANCESTORS`;\r\nexport const SET_SIBLINGS = `${ROUTING_PREFIX}_SET_SIBLINGS`;\r\nexport const SET_ENTRY_ID = `${ROUTING_PREFIX}_SET_ENTRY_ID`;\r\nexport const SET_ENTRY_RELATED_ARTICLES = `${ROUTING_PREFIX}_SET_ENTRY_RELATED_ARTICLES`;\r\n\r\nexport const SET_NAVIGATION_NOT_FOUND = `${ROUTING_PREFIX}_SET_NOT_FOUND`;\r\nexport const SET_NAVIGATION_PATH = `${ROUTING_PREFIX}_SET_NAVIGATION_PATH`;\r\nexport const SET_ROUTE_LOADING = `${ROUTING_PREFIX}_SET_ROUTE_LOADING`;\r\n\r\nexport const SET_TARGET_PROJECT = `${ROUTING_PREFIX}_SET_TARGET_PROJECT`;\r\n\r\nexport const SET_ROUTE = `${ROUTING_PREFIX}_SET_ROUTE`;\r\nexport const CALL_HISTORY_METHOD = `${ROUTING_PREFIX}_CALL_HISTORY_METHOD`;\r\n","module.exports = __WEBPACK_EXTERNAL_MODULE__5__;","import { Client } from 'contensis-delivery-api';\r\n\r\nconst getClientConfig = project => {\r\n  let config = DELIVERY_API_CONFIG; /* global DELIVERY_API_CONFIG */\r\n  if (project) {\r\n    config.projectId = project;\r\n  }\r\n\r\n  if (\r\n    typeof window != 'undefined' &&\r\n    PROXY_DELIVERY_API /* global PROXY_DELIVERY_API */\r\n  ) {\r\n    // ensure a relative url is used to bypass the need for CORS (separate OPTIONS calls)\r\n    config.rootUrl = '';\r\n    config.responseHandler = {\r\n      404: () => null,\r\n    };\r\n  }\r\n  return config;\r\n};\r\nexport * from 'contensis-delivery-api';\r\n\r\n// This should only be executed on the client as it relies on the window.\r\nexport const GetClientSideDeliveryApiStatus = () => {\r\n  if (typeof window != 'undefined') {\r\n    const currentHostname = window.location.hostname;\r\n    return GetDeliveryApiStatusFromHostname(currentHostname);\r\n  }\r\n  return null;\r\n};\r\n\r\nexport const GetDeliveryApiStatusFromHostname = currentHostname => {\r\n  if (currentHostname.indexOf('localhost') > -1) return 'latest';\r\n\r\n  if (currentHostname.endsWith('contensis.cloud')) {\r\n    if (currentHostname.indexOf('preview.') > -1) {\r\n      return 'latest';\r\n    } else {\r\n      return 'published';\r\n    }\r\n  }\r\n\r\n  if (currentHostname.endsWith('cloud.contensis.com')) {\r\n    if (currentHostname.indexOf('preview-') > -1) {\r\n      return 'latest';\r\n    } else {\r\n      return 'published';\r\n    }\r\n  }\r\n\r\n  return 'published';\r\n};\r\n\r\nexport const fixImageUri = object => {\r\n  Object.keys(object).some(function(k) {\r\n    if (k === 'asset') {\r\n      //Should always have an ID, but lets check...\r\n      if (object[k].sys && object[k].sys.id) {\r\n        // We can exclude assets here i think... ?\r\n        let userTransforms = object[k].transformations\r\n          ? `&${object[k].transformations}`\r\n          : '';\r\n\r\n        object[k].sys.uri = `/api/image/${\r\n          object[k].sys.id\r\n        }?invalidationKey=${object[k].sys &&\r\n          object[k].sys.version.versionNo}${userTransforms}`;\r\n      }\r\n      return false;\r\n    }\r\n    if (object[k] && typeof object[k] === 'object') {\r\n      fixImageUri(object[k]);\r\n      return false;\r\n    }\r\n  });\r\n};\r\n\r\nexport const GetResponseGuids = object => {\r\n  let Ids = [];\r\n  Object.keys(object).some(function(k) {\r\n    if (k === 'sys') {\r\n      //Should always have an ID, but lets check...\r\n      if (object[k].id && object[k].language) {\r\n        // We can exclude assets here i think... ?\r\n        if (object[k].dataFormat) {\r\n          if (object[k].dataFormat !== 'asset') {\r\n            Ids.push(`${object[k].id}_${object[k].language.toLowerCase()}`);\r\n          }\r\n        } else {\r\n          // If we don't have a dataformat add it anyhow, for safety\r\n          Ids.push(`${object[k].id}_${object[k].language.toLowerCase()}`);\r\n        }\r\n      }\r\n      return false;\r\n    }\r\n    if (object[k] && typeof object[k] === 'object') {\r\n      let subIds = GetResponseGuids(object[k]);\r\n      if (subIds.length > 0) {\r\n        Ids.push(...subIds);\r\n      }\r\n      return false;\r\n    }\r\n  });\r\n  return Ids;\r\n};\r\n\r\nexport const GetAllResponseGuids = object => {\r\n  if (!object) return [];\r\n  let returnItems = GetResponseGuids(object);\r\n  let unique = [...new Set(returnItems)];\r\n  return unique;\r\n};\r\nclass DeliveryApi {\r\n  search(query, linkDepth, project, env) {\r\n    const client = Client.create(getClientConfig(project, env));\r\n    return client.entries.search(query, linkDepth || 1);\r\n  }\r\n\r\n  getClient(deliveryApiStatus = 'published', project, env) {\r\n    const baseConfig = getClientConfig(project, env);\r\n    baseConfig.versionStatus = deliveryApiStatus;\r\n    return Client.create(baseConfig);\r\n  }\r\n  getEntry(id, linkDepth = 1, deliveryApiStatus = 'published', project, env) {\r\n    const baseConfig = getClientConfig(project, env);\r\n    baseConfig.versionStatus = deliveryApiStatus;\r\n    const client = Client.create(baseConfig);\r\n    // return client.entries.get(id, linkDepth);\r\n    return client.entries.get({ id, linkDepth });\r\n  }\r\n}\r\n\r\nexport const deliveryApi = new DeliveryApi();\r\n\r\nclass CacheNode {\r\n  constructor(key, value) {\r\n    this.key = key;\r\n    this.value = value;\r\n    this.next = null;\r\n    this.prev = null;\r\n  }\r\n}\r\n\r\nclass LruCache {\r\n  constructor(limit = 100) {\r\n    this.map = {};\r\n    this.head = null;\r\n    this.tail = null;\r\n    this.limit = limit || 100;\r\n    this.size = 0;\r\n  }\r\n\r\n  get(key) {\r\n    if (this.map[key]) {\r\n      let value = this.map[key].value;\r\n      let node = new CacheNode(key, value);\r\n      this.remove(key);\r\n      this.setHead(node);\r\n      return value;\r\n    }\r\n  }\r\n\r\n  set(key, value) {\r\n    let node = new CacheNode(key, value);\r\n    if (this.map[key]) {\r\n      this.remove(key);\r\n    } else {\r\n      if (this.size >= this.limit) {\r\n        delete this.map[this.tail.key];\r\n        this.size--;\r\n        this.tail = this.tail.prev;\r\n        this.tail.next = null;\r\n      }\r\n    }\r\n    this.setHead(node);\r\n  }\r\n\r\n  setHead(node) {\r\n    node.next = this.head;\r\n    node.prev = null;\r\n    if (this.head) {\r\n      this.head.prev = node;\r\n    }\r\n    this.head = node;\r\n    if (!this.tail) {\r\n      this.tail = node;\r\n    }\r\n    this.size++;\r\n    this.map[node.key] = node;\r\n  }\r\n\r\n  remove(key) {\r\n    let node = this.map[key];\r\n    if (node.prev) {\r\n      node.prev.next = node.next;\r\n    } else {\r\n      this.head = node.next;\r\n    }\r\n    if (node.next) {\r\n      node.next.prev = node.prev;\r\n    } else {\r\n      this.tail = node.prev;\r\n    }\r\n    delete this.map[key];\r\n    this.size--;\r\n  }\r\n}\r\n\r\nclass CachedSearch {\r\n  cache = new LruCache();\r\n  taxonomyLookup = {};\r\n\r\n  search(query, linkDepth, project, env) {\r\n    const client = Client.create(getClientConfig(project, env));\r\n    return this.request(\r\n      project + JSON.stringify(query) + linkDepth.toString(),\r\n      () => client.entries.search(query, linkDepth)\r\n    );\r\n  }\r\n\r\n  get(id, linkDepth, versionStatus, project, env) {\r\n    const client = Client.create(getClientConfig(project, env));\r\n    client.clientConfig.versionStatus = versionStatus;\r\n    return this.request(id, () => client.entries.get({ id, linkDepth }));\r\n  }\r\n\r\n  getContentType(id, project, env) {\r\n    const client = Client.create(getClientConfig(project, env));\r\n    return this.request(`[CONTENT TYPE] ${id} ${project}`, () =>\r\n      client.contentTypes.get(id)\r\n    );\r\n  }\r\n\r\n  getTaxonomyNode(key, project, env) {\r\n    const client = Client.create(getClientConfig(project, env));\r\n    return this.request(`[TAXONOMY NODE] ${key}`, () =>\r\n      client.taxonomy\r\n        .resolveChildren(key)\r\n        .then(node => this.extendTaxonomyNode(node))\r\n    );\r\n  }\r\n\r\n  request(key, execute) {\r\n    if (!this.cache.get(key) || typeof window == 'undefined') {\r\n      let promise = execute();\r\n      this.cache.set(key, promise);\r\n      promise.catch(() => {\r\n        this.cache.remove(key);\r\n      });\r\n    }\r\n    return this.cache.get(key);\r\n  }\r\n\r\n  extendTaxonomyNode(node) {\r\n    let id = this.getTaxonomyId(node);\r\n    this.taxonomyLookup[id] = node.key;\r\n    return {\r\n      ...node,\r\n      id,\r\n      children: node.children\r\n        ? node.children.map(n => this.extendTaxonomyNode(n))\r\n        : null,\r\n    };\r\n  }\r\n\r\n  getTaxonomyId(node) {\r\n    if (node.key) {\r\n      let parts = node.key.split('/');\r\n      return parts[parts.length - 1];\r\n    }\r\n    return '';\r\n  }\r\n\r\n  getTaxonomyKey(id) {\r\n    return this.taxonomyLookup[id];\r\n  }\r\n}\r\n\r\nexport const cachedSearch = new CachedSearch();\r\n","module.exports = __WEBPACK_EXTERNAL_MODULE__7__;","import { List, Map } from 'immutable';\r\n\r\nexport const selectRouteEntry = state => {\r\n  return state.getIn(['routing', 'entry'], Map({}));\r\n};\r\nexport const selectNodeDepends = state => {\r\n  return state.getIn(['routing', 'nodeDepends'], new List([]));\r\n};\r\nexport const selectCurrentTreeID = state => {\r\n  return state.getIn(['routing', 'currentTreeId']);\r\n};\r\nexport const selectEntryDepends = state => {\r\n  return state.getIn(['routing', 'entryDepends']);\r\n};\r\nexport const selectRouteEntryEntryId = state => {\r\n  return state.getIn(['routing', 'entry', 'sys', 'id'], null);\r\n};\r\nexport const selectRouteEntryContentTypeId = state => {\r\n  const entry = selectRouteEntry(state);\r\n  return entry && entry.getIn(['sys', 'contentTypeId'], null);\r\n};\r\nexport const selectRouteEntrySlug = state => {\r\n  return state.getIn(['routing', 'entry', 'sys', 'slug'], null);\r\n};\r\nexport const selectRouteEntryID = state => {\r\n  return state.getIn(['routing', 'entryID']);\r\n};\r\nexport const selectCurrentPath = state => {\r\n  return state.getIn(['routing', 'currentPath']);\r\n};\r\nexport const selectCurrentSearch = state => {\r\n  return state.getIn(['routing', 'location', 'search']);\r\n};\r\nexport const selectCurrentProject = state => {\r\n  return state.getIn(['routing', 'currentProject']);\r\n};\r\nexport const selectIsNotFound = state => {\r\n  return state.getIn(['routing', 'notFound']);\r\n};\r\nexport const selectCurrentAncestors = state => {\r\n  return state.getIn(['routing', 'currentNodeAncestors']);\r\n};\r\nexport const selectRouteLoading = state => {\r\n  return state.getIn(['routing', 'routeLoading']);\r\n};\r\n","module.exports = __WEBPACK_EXTERNAL_MODULE__9__;","export function action(type, payload = {}) {\r\n  return { type, ...payload };\r\n}\r\n\r\nexport const getWebPImageUri = uri => {\r\n  let formatedUri = uri;\r\n  if (uri.indexOf('.gif') == -1) {\r\n    if (uri.indexOf('f=') == -1 && uri.indexOf('format=') == -1) {\r\n      if (uri.indexOf('?') > -1) {\r\n        formatedUri = `${uri}&f=webp`;\r\n      } else {\r\n        formatedUri = `${uri}?f=webp`;\r\n      }\r\n    }\r\n    if (\r\n      formatedUri.indexOf('q=') == -1 &&\r\n      formatedUri.indexOf('quality=') == -1\r\n    ) {\r\n      if (formatedUri.indexOf('?') > -1) {\r\n        formatedUri = `${formatedUri}&q=70`;\r\n      } else {\r\n        formatedUri = `${formatedUri}?q=70`;\r\n      }\r\n    }\r\n  }\r\n  return formatedUri;\r\n};\r\n\r\nexport const resizeImage = (image, height, width) => {\r\n  if (image.asset && image.asset.sys && image.asset.sys.uri) {\r\n    image.asset.sys.uri = resizeImageUri(image.asset.sys.uri, height, width);\r\n  }\r\n};\r\nexport const resizeImageUri = (uri, height, width) => {\r\n  let formatedUri = uri;\r\n  let paramDelimeter = '?';\r\n  if (uri.indexOf('?') > -1) {\r\n    paramDelimeter = '&';\r\n  }\r\n  if (width) {\r\n    if (\r\n      formatedUri.indexOf('w=') == -1 &&\r\n      formatedUri.indexOf('width=') == -1\r\n    ) {\r\n      formatedUri = `${formatedUri}${paramDelimeter}w=${width}`;\r\n      paramDelimeter = '&';\r\n    }\r\n  }\r\n  if (height) {\r\n    if (\r\n      formatedUri.indexOf('h=') == -1 &&\r\n      formatedUri.indexOf('height=') == -1\r\n    ) {\r\n      formatedUri = `${formatedUri}${paramDelimeter}h=${height}`;\r\n    }\r\n  }\r\n\r\n  return formatedUri;\r\n};\r\n\r\nexport function flattenArray(arr) {\r\n  // flatten arrays inside the supplied array and\r\n  // remove duplicates from the result\r\n  return arr\r\n    .reduce((acc, val) => acc.concat(val), [])\r\n    .filter((elem, pos, arr) => arr.indexOf(elem) == pos);\r\n}\r\n\r\nexport async function api(url, options) {\r\n  return fetch(url, options)\r\n    .then(async response => {\r\n      setTimeout(() => null, 0);\r\n      if (!response.ok) {\r\n        throw new Error(response.statusText);\r\n      }\r\n      return response.json().then(data => data);\r\n    })\r\n    .catch(error => {\r\n      //console.log(error);\r\n      throw error;\r\n    });\r\n}\r\n\r\nexport function dynamicSort(property) {\r\n  var sortOrder = 1;\r\n  if (property[0] === '-') {\r\n    sortOrder = -1;\r\n    property = property.substr(1);\r\n  }\r\n  return function(a, b) {\r\n    /* next line works with strings and numbers,\r\n     * and you may want to customize it to your needs\r\n     */\r\n    var result =\r\n      a[property] < b[property] ? -1 : a[property] > b[property] ? 1 : 0;\r\n    return result * sortOrder;\r\n  };\r\n}\r\n\r\nexport const randomString = length => {\r\n  let text = '';\r\n  const possible =\r\n    'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\r\n  for (var i = 0; i < length; i++) {\r\n    text += possible.charAt(Math.floor(Math.random() * possible.length));\r\n  }\r\n  return text;\r\n};\r\n","module.exports = __WEBPACK_EXTERNAL_MODULE__11__;","import { action } from '~/core/util/helpers';\r\nimport {\r\n  SET_ENTRY,\r\n  SET_NAVIGATION_NOT_FOUND,\r\n  SET_NAVIGATION_PATH,\r\n  SET_TARGET_PROJECT,\r\n  SET_ROUTE,\r\n} from '~/core/redux/types/routing';\r\n\r\nexport const setNotFound = notFound =>\r\n  action(SET_NAVIGATION_NOT_FOUND, { notFound });\r\nexport const setNavigationPath = (\r\n  path,\r\n  location,\r\n  staticRoute,\r\n  withEvents,\r\n  statePath,\r\n  routes\r\n) =>\r\n  action(SET_NAVIGATION_PATH, {\r\n    path,\r\n    location,\r\n    staticRoute,\r\n    withEvents,\r\n    statePath,\r\n    routes,\r\n  });\r\nexport const setCurrentProject = (project, allowedGroups) =>\r\n  action(SET_TARGET_PROJECT, { project, allowedGroups });\r\nexport const setRoute = (path, state) => action(SET_ROUTE, { path, state });\r\nexport const setRouteEntry = entry => action(SET_ENTRY, { entry });\r\n","const ACTION_PREFIX = '@NAVIGATION/';\r\nexport const GET_NODE_TREE = `${ACTION_PREFIX}_GET_NODE_TREE`;\r\nexport const SET_NODE_TREE = `${ACTION_PREFIX}_SET_NODE_TREE`;\r\nexport const GET_NODE_TREE_ERROR = `${ACTION_PREFIX}_GET_NODE_TREE_ERROR`;\r\n","module.exports = __WEBPACK_EXTERNAL_MODULE__14__;","module.exports = __WEBPACK_EXTERNAL_MODULE__15__;","const VERSION_PREFIX = '@VERSION/';\r\nexport const SET_VERSION = `${VERSION_PREFIX}SET_VERSION`;\r\nexport const SET_VERSION_STATUS = `${VERSION_PREFIX}SET_VERSION_STATUS`;\r\n","module.exports = __WEBPACK_EXTERNAL_MODULE__17__;","module.exports = __WEBPACK_EXTERNAL_MODULE__18__;","export * from '@redux-saga/core/effects';\n","export const selectCommitRef = state => {\r\n  return state.getIn(['version', 'commitRef']);\r\n};\r\nexport const selectBuildNumber = state => {\r\n  return state.getIn(['version', 'buildNo']);\r\n};\r\n\r\nexport const selectVersionStatus = state => {\r\n  return state.getIn(['version', 'contensisVersionStatus']);\r\n};\r\n","export const hasNavigationTree = state => {\r\n  return state.getIn(['navigation', 'isReady']);\r\n};\r\n\r\nexport const selectNavigationRoot = state => {\r\n  return state.getIn(['navigation', 'root']);\r\n};\r\n\r\nexport const selectNavigationDepends = state => {\r\n  return state.getIn(['navigation', 'treeDepends']);\r\n};\r\n","import React, { useEffect, useCallback } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { connect } from 'react-redux';\r\nimport { hot } from 'react-hot-loader';\r\nimport { Redirect, useLocation } from 'react-router-dom';\r\nimport { renderRoutes, matchRoutes } from 'react-router-config';\r\n\r\nimport {\r\n  selectRouteEntry,\r\n  selectRouteEntryContentTypeId,\r\n  selectIsNotFound,\r\n  selectCurrentProject,\r\n  selectCurrentPath,\r\n} from '~/core/redux/selectors/routing';\r\nimport { setNavigationPath } from '~/core/redux/actions/routing';\r\nimport NotFound from '~/pages/NotFound';\r\n\r\nimport { Status } from './Status';\r\nimport { toJS } from '../util/ToJs';\r\n\r\nconst getTrimmedPath = path => {\r\n  if (path !== '/') {\r\n    const lastChar = path[path.length - 1];\r\n    if (lastChar == '/') {\r\n      return path.substring(0, path.length - 1);\r\n    }\r\n  }\r\n  return path;\r\n};\r\n\r\nconst RouteLoader = ({\r\n  statePath,\r\n  projectId,\r\n  contentTypeId,\r\n  entry,\r\n  isNotFound,\r\n  setNavigationPath,\r\n  routes,\r\n  withEvents,\r\n}) => {\r\n  const location = useLocation();\r\n  // Match any Static Routes a developer has defined\r\n  const matchedStaticRoute = pathname =>\r\n    matchRoutes(\r\n      routes.StaticRoutes,\r\n      typeof window != 'undefined' ? window.location.pathname : pathname\r\n    );\r\n  const isStaticRoute = pathname => matchedStaticRoute(pathname).length > 0;\r\n\r\n  const trimmedPath = getTrimmedPath(location.pathname);\r\n\r\n  const staticRoute =\r\n    isStaticRoute(trimmedPath) && matchedStaticRoute(trimmedPath)[0];\r\n\r\n  const setPath = useCallback(() => {\r\n    let serverPath = null;\r\n    if (staticRoute) {\r\n      serverPath = staticRoute.route.path\r\n        .split('/')\r\n        .filter(p => !p.startsWith(':'))\r\n        .join('/');\r\n    }\r\n\r\n    setNavigationPath(\r\n      serverPath || trimmedPath,\r\n      location,\r\n      staticRoute,\r\n      withEvents,\r\n      statePath,\r\n      routes\r\n    );\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [\r\n    setNavigationPath,\r\n    staticRoute,\r\n    withEvents,\r\n    location,\r\n    routes,\r\n    // statePath,\r\n    trimmedPath,\r\n  ]);\r\n\r\n  if (typeof window == 'undefined') setPath();\r\n\r\n  useEffect(() => {\r\n    setPath();\r\n  }, [location, setPath]);\r\n\r\n  // Render any Static Routes a developer has defined\r\n  if (isStaticRoute(trimmedPath)) {\r\n    return renderRoutes(routes.StaticRoutes, {\r\n      projectId,\r\n      contentTypeId,\r\n      entry,\r\n    });\r\n  }\r\n\r\n  // Need to redirect when url endswith a /\r\n  if (location.pathname.length > trimmedPath.length) {\r\n    return <Redirect to={trimmedPath} />;\r\n  }\r\n  // Match any Defined Content Type Mappings\r\n  if (contentTypeId) {\r\n    const MatchedComponent = routes.ContentTypeMappings.find(\r\n      item => item.contentTypeID == contentTypeId\r\n    );\r\n\r\n    if (MatchedComponent) {\r\n      return (\r\n        <MatchedComponent.component\r\n          projectId={projectId}\r\n          contentTypeId={contentTypeId}\r\n          entry={entry}\r\n        />\r\n      );\r\n    }\r\n  }\r\n\r\n  if (isNotFound) {\r\n    return (\r\n      <Status code={404}>\r\n        <NotFound />\r\n      </Status>\r\n    );\r\n  }\r\n\r\n  return null;\r\n};\r\n\r\nRouteLoader.propTypes = {\r\n  routes: PropTypes.objectOf(PropTypes.array, PropTypes.array),\r\n  withEvents: PropTypes.object,\r\n  statePath: PropTypes.string,\r\n  projectId: PropTypes.string,\r\n  contentTypeId: PropTypes.string,\r\n  entry: PropTypes.object,\r\n  isNotFound: PropTypes.bool,\r\n  setNavigationPath: PropTypes.func,\r\n};\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    statePath: selectCurrentPath(state),\r\n    projectId: selectCurrentProject(state),\r\n    entry: selectRouteEntry(state),\r\n    contentTypeId: selectRouteEntryContentTypeId(state),\r\n    isNotFound: selectIsNotFound(state),\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = {\r\n  setNavigationPath,\r\n};\r\n\r\nexport default hot(module)(\r\n  connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n  )(toJS(RouteLoader))\r\n);\r\n","module.exports = __WEBPACK_EXTERNAL_MODULE__23__;","module.exports = __WEBPACK_EXTERNAL_MODULE__24__;","import { action } from '~/core/util/helpers';\r\nimport { SET_VERSION, SET_VERSION_STATUS } from '~/core/redux/types/version';\r\n\r\nexport const setVersion = (commitRef, buildNo) =>\r\n  action(SET_VERSION, { commitRef, buildNo });\r\n\r\nexport const setVersionStatus = status =>\r\n  action(SET_VERSION_STATUS, { status });\r\n","module.exports = __WEBPACK_EXTERNAL_MODULE__26__;","import React from 'react';\r\nimport { hot } from 'react-hot-loader';\r\nimport RouteLoader from '~/core/routes/RouteLoader';\r\n\r\nconst AppRoot = props => {\r\n  return <RouteLoader {...props} />;\r\n};\r\n\r\nexport default hot(module)(AppRoot);\r\n","module.exports = function(module) {\n\tif (!module.webpackPolyfill) {\n\t\tmodule.deprecate = function() {};\n\t\tmodule.paths = [];\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n","module.exports = __WEBPACK_EXTERNAL_MODULE__29__;","import React from 'react';\r\nconst NotFound = () => (\r\n  <>\r\n    <header>\r\n      <h1>404 Page Not Found</h1>\r\n    </header>\r\n  </>\r\n);\r\nexport default NotFound;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { Route } from 'react-router-dom';\r\n\r\nexport const Status = ({ code, children }) => {\r\n  return (\r\n    <Route\r\n      render={({ staticContext }) => {\r\n        if (staticContext) staticContext.status = code;\r\n        return children;\r\n      }}\r\n    />\r\n  );\r\n};\r\n\r\nStatus.propTypes = {\r\n  code: PropTypes.number.isRequired,\r\n  children: PropTypes.element,\r\n};\r\n","import React from 'react';\r\nimport { Iterable } from 'immutable';\r\n\r\nexport const toJS = WrappedComponent => wrappedComponentProps => {\r\n  const KEY = 0;\r\n  const VALUE = 1;\r\n\r\n  const propsJS = Object.entries(wrappedComponentProps).reduce(\r\n    (newProps, wrappedComponentProp) => {\r\n      newProps[wrappedComponentProp[KEY]] = Iterable.isIterable(\r\n        wrappedComponentProp[VALUE]\r\n      )\r\n        ? wrappedComponentProp[VALUE].toJS()\r\n        : wrappedComponentProp[VALUE];\r\n      return newProps;\r\n    },\r\n    {}\r\n  );\r\n\r\n  return <WrappedComponent {...propsJS} />;\r\n};\r\n","module.exports = __WEBPACK_EXTERNAL_MODULE__33__;","module.exports = __WEBPACK_EXTERNAL_MODULE__34__;","module.exports = __WEBPACK_EXTERNAL_MODULE__35__;","module.exports = __WEBPACK_EXTERNAL_MODULE__36__;","import { createBrowserHistory, createMemoryHistory } from 'history';\r\n\r\n// Create a history depending on the environment\r\nconst selectedHistory =\r\n  typeof window !== 'undefined' ? createBrowserHistory : createMemoryHistory;\r\n\r\nexport const history = (options = {}) => selectedHistory(options);\r\nexport const browserHistory = selectedHistory();\r\n","module.exports = __WEBPACK_EXTERNAL_MODULE__38__;","const servers = SERVERS; /* global SERVERS */\r\nconst alias = servers.alias.toLowerCase();\r\nconst publicUri = PUBLIC_URI; /* global PUBLIC_URI */\r\nconst projects = PROJECTS; /* global PROJECTS */\r\n\r\n// return a projectId via the request hostname\r\nconst pickProject = (hostname, query) => {\r\n  // if localhost we can only infer via a querystring, and take your word for it\r\n  if (hostname == 'localhost') {\r\n    return (query && query.p) || projects[0].id;\r\n  }\r\n\r\n  // if hostname is the actual public uri we can return the first project from the list\r\n  if (hostname == publicUri) {\r\n    return projects[0].id;\r\n  }\r\n\r\n  let project = 'unknown';\r\n\r\n  // // go through all the defined projects\r\n  // Object.entries(projects).map(([, p]) => {\r\n  const p = projects[0];\r\n\r\n  // check if we're accessing via the project's public uri\r\n  if (hostname.includes(p.publicUri)) project = p.id;\r\n\r\n  // the url structure is different for website (we don't prefix)\r\n  if (p.id.startsWith('website')) {\r\n    // check for internal and external hostnames\r\n    // we check live and preview distinctly so our rule does not clash with\r\n    // hostnames that use a project prefix\r\n    if (\r\n      hostname.includes(`live-${alias}.cloud.contensis.com`) ||\r\n      hostname.includes(`live.${alias}.contensis.cloud`) ||\r\n      hostname.includes(`preview-${alias}.cloud.contensis.com`) ||\r\n      hostname.includes(`preview.${alias}.contensis.cloud`)\r\n    )\r\n      project = p.id;\r\n  } else {\r\n    // check for internal and external hostnames, prefixed with the projectId\r\n    if (\r\n      hostname.includes(`${p.id.toLowerCase()}-${alias}.cloud.contensis.com`) ||\r\n      hostname.includes(`${p.id.toLowerCase()}.${alias}.contensis.cloud`)\r\n    )\r\n      project = p.id;\r\n  }\r\n  // });\r\n  return project === 'unknown' ? p.id : project;\r\n};\r\n\r\nexport default pickProject;\r\n","module.exports = __WEBPACK_EXTERNAL_MODULE__40__;","import { compose, createStore, applyMiddleware } from 'redux';\r\nimport { combineReducers } from 'redux-immutable';\r\nimport thunk from 'redux-thunk';\r\nimport createSagaMiddleware, { END } from 'redux-saga';\r\n\r\n// Core reducers\r\nimport RoutingReducer from './reducers/routing';\r\nimport VersionReducer from './reducers/version';\r\nimport NavigationReducer from './reducers/navigation';\r\nimport routerMiddleware from './routerMiddleware';\r\n\r\nexport default (featureReducers, initialState, history) => {\r\n  const thunkMiddleware = [thunk];\r\n\r\n  let reduxDevToolsMiddleware = f => f;\r\n\r\n  if (typeof window != 'undefined') {\r\n    reduxDevToolsMiddleware = window.__REDUX_DEVTOOLS_EXTENSION__\r\n      ? window.__REDUX_DEVTOOLS_EXTENSION__()\r\n      : f => f;\r\n  }\r\n\r\n  const sagaMiddleware = createSagaMiddleware();\r\n  const middleware = compose(\r\n    applyMiddleware(\r\n      ...thunkMiddleware,\r\n      sagaMiddleware,\r\n      routerMiddleware(history)\r\n    ),\r\n    reduxDevToolsMiddleware\r\n  );\r\n\r\n  let reducers = {\r\n    navigation: NavigationReducer,\r\n    routing: RoutingReducer,\r\n    version: VersionReducer,\r\n    ...featureReducers,\r\n  };\r\n\r\n  const combinedReducers = combineReducers(reducers);\r\n\r\n  const store = initialState => {\r\n    const store = createStore(combinedReducers, initialState, middleware);\r\n    store.runSaga = sagaMiddleware.run;\r\n    store.close = () => store.dispatch(END);\r\n    return store;\r\n  };\r\n\r\n  return store(initialState);\r\n};\r\n","module.exports = __WEBPACK_EXTERNAL_MODULE__42__;","module.exports = __WEBPACK_EXTERNAL_MODULE__43__;","module.exports = __WEBPACK_EXTERNAL_MODULE__44__;","module.exports = __WEBPACK_EXTERNAL_MODULE__45__;","import { Map, fromJS, List, Set } from 'immutable';\r\nimport {\r\n  SET_ENTRY_ID,\r\n  SET_ENTRY,\r\n  SET_NAVIGATION_PATH,\r\n  SET_NAVIGATION_NOT_FOUND,\r\n  SET_NODE,\r\n  SET_ANCESTORS,\r\n  SET_ROUTE_LOADING,\r\n  SET_TARGET_PROJECT,\r\n  SET_ROUTE,\r\n  SET_SIBLINGS,\r\n} from '~/core/redux/types/routing';\r\nimport { GetAllResponseGuids } from '~/core/util/ContensisDeliveryApi';\r\n\r\nlet initialState = Map({\r\n  currentPath: '/',\r\n  currentNode: [],\r\n  currentProject: 'unknown',\r\n  notFound: false,\r\n  entryID: null,\r\n  entry: null,\r\n  entryDepends: new List(),\r\n  contentTypeId: null,\r\n  currentNodeAncestors: new List(),\r\n});\r\n\r\nexport default (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case SET_ANCESTORS: {\r\n      if (action.ancestors) {\r\n        let ancestorIDs = action.ancestors.map(node => {\r\n          return node.id;\r\n        });\r\n\r\n        let currentNodeDepends = state.get('nodeDepends');\r\n        const allNodeDepends = Set.union([\r\n          Set(ancestorIDs),\r\n          currentNodeDepends,\r\n        ]);\r\n        return state\r\n          .set('nodeDepends', allNodeDepends)\r\n          .set('currentNodeAncestors', fromJS(action.ancestors));\r\n      }\r\n      return state.set('currentNodeAncestors', fromJS(action.ancestors));\r\n    }\r\n    case SET_ENTRY: {\r\n      const entryDepends = GetAllResponseGuids(action.entry);\r\n      return state\r\n        .set('entryDepends', fromJS(entryDepends))\r\n        .set('entry', fromJS(action.entry));\r\n    }\r\n    case SET_ENTRY_ID: {\r\n      if (action.id === '') {\r\n        return state;\r\n      }\r\n      return state.set('entryID', action.id);\r\n    }\r\n    case SET_NAVIGATION_PATH: {\r\n      if (action.path) {\r\n        return state\r\n          .set('currentPath', fromJS(action.path))\r\n          .set('location', fromJS(action.location))\r\n          .set('staticRoute', fromJS(action.staticRoute));\r\n      }\r\n      return state;\r\n    }\r\n    case SET_NAVIGATION_NOT_FOUND: {\r\n      return state.set('notFound', fromJS(action.notFound));\r\n    }\r\n    case SET_NODE: {\r\n      const { node } = action;\r\n      if (!node) return state;\r\n      // We have the entry stored elsewhere, so lets not keep it twice.\r\n      // On Set Node, we reset all dependants.\r\n      const nodeDepends = Set([node.id]);\r\n      if (node && node.entry) delete node.entry;\r\n      return state\r\n        .set('nodeDepends', nodeDepends)\r\n        .set('currentNode', fromJS(action.node));\r\n    }\r\n    case SET_ROUTE: {\r\n      return state.set('nextPath', action.path);\r\n    }\r\n    case SET_ROUTE_LOADING: {\r\n      return state.set('routeLoading', action.loading);\r\n    }\r\n    case SET_SIBLINGS: {\r\n      // Can be null in some cases like the homepage.\r\n      let currentNodeSiblingParent = null;\r\n      let siblingIDs = [];\r\n      if (action.siblings && action.siblings.length > 0) {\r\n        currentNodeSiblingParent = action.siblings[0].parentId;\r\n        siblingIDs = action.siblings.map(node => {\r\n          return node.id;\r\n        });\r\n      }\r\n      let currentNodeDepends = state.get('nodeDepends');\r\n      const allNodeDepends = Set.union([Set(siblingIDs), currentNodeDepends]);\r\n      return state\r\n        .set('nodeDepends', allNodeDepends)\r\n        .set('currentNodeSiblings', fromJS(action.siblings))\r\n        .set('currentNodeSiblingsParent', currentNodeSiblingParent);\r\n    }\r\n    case SET_TARGET_PROJECT: {\r\n      return state\r\n        .set('currentProject', action.project)\r\n        .set('allowedGroups', fromJS(action.allowedGroups));\r\n    }\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import { Map } from 'immutable';\r\nimport { SET_VERSION, SET_VERSION_STATUS } from '~/core/redux/types/version';\r\n\r\nlet initialState = Map({\r\n  commitRef: null,\r\n  buildNo: null,\r\n  contensisVersionStatus: 'published',\r\n});\r\n\r\nexport default (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case SET_VERSION_STATUS: {\r\n      return state.set('contensisVersionStatus', action.status);\r\n    }\r\n    case SET_VERSION: {\r\n      return state\r\n        .set('commitRef', action.commitRef)\r\n        .set('buildNo', action.buildNo);\r\n    }\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import { Map, fromJS, List } from 'immutable';\r\n\r\nimport {\r\n  SET_NODE_TREE,\r\n  GET_NODE_TREE_ERROR,\r\n} from '~/core/redux/types/navigation';\r\n\r\nconst initialState = Map({\r\n  root: null,\r\n  treeDepends: new List([]),\r\n  isError: false,\r\n  isReady: false,\r\n});\r\n\r\nexport default (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case SET_NODE_TREE: {\r\n      return state.set('root', fromJS(action.nodes)).set('isReady', true);\r\n    }\r\n    case GET_NODE_TREE_ERROR: {\r\n      return state.set('isError', true);\r\n    }\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import { CALL_HISTORY_METHOD } from '~/core/redux/types/routing';\r\n\r\n/**\r\n * This middleware captures CALL_HISTORY_METHOD actions to redirect to the\r\n * provided history object. This will prevent these actions from reaching your\r\n * reducer or any middleware that comes after this one.\r\n */\r\n/* eslint-disable no-unused-vars */\r\nconst routerMiddleware = history => store => next => action => {\r\n  if (action.type !== CALL_HISTORY_METHOD) {\r\n    return next(action);\r\n  }\r\n\r\n  const {\r\n    payload: { method, args },\r\n  } = action;\r\n  history[method](...args);\r\n};\r\n\r\nexport default routerMiddleware;\r\n","// index.js\r\nimport { all } from 'redux-saga/effects';\r\nimport { routingSagas } from './routing';\r\nimport { navigationSagas } from './navigation';\r\nexport default function(featureSagas = []) {\r\n  return function* rootSaga() {\r\n    const subSagas = [...routingSagas, ...navigationSagas];\r\n    yield all([...subSagas, ...featureSagas]);\r\n  };\r\n}\r\n","// load-entries.js\r\nimport * as log from 'loglevel';\r\nimport { takeEvery, put, select, call, all } from 'redux-saga/effects';\r\nimport {\r\n  SET_ENTRY_ID,\r\n  SET_ENTRY,\r\n  SET_NAVIGATION_NOT_FOUND,\r\n  SET_NODE,\r\n  SET_ANCESTORS,\r\n  SET_NAVIGATION_PATH,\r\n  SET_ROUTE,\r\n  CALL_HISTORY_METHOD,\r\n  SET_SIBLINGS,\r\n} from '~/core/redux/types/routing';\r\nimport { deliveryApi } from '~/core/util/ContensisDeliveryApi';\r\nimport { selectVersionStatus } from '~/core/redux/selectors/version';\r\nimport {\r\n  selectCurrentPath,\r\n  selectCurrentProject,\r\n  selectRouteEntry,\r\n} from '~/core/redux/selectors/routing';\r\nimport { GET_NODE_TREE } from '../types/navigation';\r\nimport { hasNavigationTree } from '../selectors/navigation';\r\nimport { routeEntryByFields } from './queries';\r\n\r\nexport const routingSagas = [\r\n  takeEvery(SET_NAVIGATION_PATH, getRouteSaga),\r\n  takeEvery(SET_ROUTE, setRouteSaga),\r\n];\r\n\r\n/**\r\n * To navigate / push a specific route via redux middleware\r\n * @param {path, state} action\r\n */\r\nfunction* setRouteSaga(action) {\r\n  yield put({\r\n    type: CALL_HISTORY_METHOD,\r\n    payload: {\r\n      method: 'push',\r\n      args: [action.path, action.state],\r\n    },\r\n  });\r\n}\r\n\r\nfunction* getRouteSaga(action) {\r\n  let entry = null;\r\n  try {\r\n    const { withEvents, routes } = action;\r\n    let appsays;\r\n    if (withEvents && withEvents.onRouteLoad) {\r\n      appsays = yield withEvents.onRouteLoad(action);\r\n    }\r\n    // if appsays customNavigation: true, we will set doNavigation to false\r\n    // if appsays nothing we will set doNavigation to true and continue to do navigation calls\r\n    const doNavigation = !appsays || (appsays && !appsays.customNavigation);\r\n    const state = yield select();\r\n    const routeEntry = selectRouteEntry(state);\r\n    if (\r\n      (appsays && appsays.customRouting) ||\r\n      (action.staticRoute && !action.staticRoute.route.fetchNode) ||\r\n      (routeEntry && action.statePath === action.path)\r\n    ) {\r\n      // To prevent erroneous 404s and wasted network calls, this covers\r\n      // - appsays customRouting and does SET_ENTRY etc. via the consuming app\r\n      // - all staticRoutes (where custom 'route.fetchNode' attribute is falsey)\r\n      // - standard Contensis SiteView Routing where we already have that entry in state\r\n      if (routeEntry) entry = routeEntry.toJS();\r\n    } else {\r\n      const currentPath = selectCurrentPath(state);\r\n      const deliveryApiStatus = selectVersionStatus(state);\r\n      const project = selectCurrentProject(state);\r\n\r\n      let pathNode = null,\r\n        ancestors = null,\r\n        siblings = null;\r\n\r\n      // Scroll into View\r\n      if (typeof window !== 'undefined') {\r\n        window.scroll({\r\n          top: 0,\r\n        });\r\n      }\r\n\r\n      let currentPathDepth = currentPath.split('/').length - 1;\r\n      if (currentPath === '/') currentPathDepth = 0;\r\n\r\n      // Handle homepage\r\n      if (currentPath === '/') {\r\n        pathNode = yield deliveryApi\r\n          .getClient(deliveryApiStatus, project)\r\n          .nodes.getRoot({\r\n            depth: 0,\r\n            entryFields: '*',\r\n            entryLinkDepth: 4,\r\n            language: 'en-GB',\r\n          });\r\n      } else {\r\n        // Handle preview routes\r\n        if (currentPath && currentPath.startsWith('/preview/')) {\r\n          let splitPath = currentPath.split('/');\r\n          let entryGuid = splitPath[2];\r\n          if (splitPath.length == 3) {\r\n            // According to product dev we cannot use Node API\r\n            // for previewing entries as it gives a response of []\r\n            // -- apparently it is not correct to request latest content\r\n            // with Node API\r\n            let previewEntry = yield deliveryApi\r\n              .getClient(deliveryApiStatus, project)\r\n              .entries.get({ id: entryGuid, linkDepth: 4 });\r\n            if (previewEntry) {\r\n              yield call(setRouteEntry, previewEntry);\r\n            } else {\r\n              yield call(do404);\r\n            }\r\n          }\r\n        } else {\r\n          // Handle all other routes\r\n          pathNode = yield deliveryApi\r\n            .getClient(deliveryApiStatus, project)\r\n            .nodes.get({\r\n              depth: 0,\r\n              path: currentPath,\r\n              entryFields: ['sys.contentTypeId', 'sys.id'],\r\n              entryLinkDepth: 0,\r\n            });\r\n          if (\r\n            pathNode &&\r\n            pathNode.entry &&\r\n            pathNode.entry.sys &&\r\n            pathNode.entry.sys.id\r\n          ) {\r\n            const contentType =\r\n              routes &&\r\n              routes.ContentTypeMappings &&\r\n              routes.ContentTypeMappings.find(\r\n                ct => ct.contentTypeID === pathNode.entry.sys.contentTypeId\r\n              );\r\n            const query = routeEntryByFields(\r\n              pathNode.entry.sys.id,\r\n              contentType && contentType.fields,\r\n              deliveryApiStatus\r\n            );\r\n            const payload = yield deliveryApi.search(\r\n              query,\r\n              (contentType && contentType.linkDepth) || 3,\r\n              project\r\n            );\r\n            if (payload && payload.items && payload.items.length > 0) {\r\n              pathNode.entry = payload.items[0];\r\n            }\r\n          }\r\n        }\r\n\r\n        if (pathNode && pathNode.id && doNavigation) {\r\n          ancestors = yield deliveryApi\r\n            .getClient(deliveryApiStatus, project)\r\n            .nodes.getAncestors(pathNode.id);\r\n          // No menu shows the  siblings at this level, so no need to load them.\r\n          if (currentPathDepth > 1) {\r\n            siblings = yield deliveryApi\r\n              .getClient(deliveryApiStatus, project)\r\n              .nodes.getSiblings({\r\n                id: pathNode.id,\r\n                entryFields: ['sys.contentTypeId', 'url'],\r\n              });\r\n          }\r\n        }\r\n      }\r\n\r\n      if (\r\n        pathNode &&\r\n        pathNode.entry &&\r\n        pathNode.entry.sys &&\r\n        pathNode.entry.sys.id\r\n      ) {\r\n        entry = pathNode.entry;\r\n        yield call(setRouteEntry, entry, pathNode, ancestors, siblings);\r\n      } else {\r\n        yield call(do404);\r\n      }\r\n    }\r\n    if (withEvents && withEvents.onRouteLoaded) {\r\n      yield withEvents.onRouteLoaded({ ...action, entry });\r\n    }\r\n\r\n    if (!hasNavigationTree(state) && doNavigation)\r\n      // Load navigation clientside only, a put() should help that work\r\n      yield put({ type: GET_NODE_TREE });\r\n  } catch (e) {\r\n    log.error(...['Error running route saga:', e, e.stack]);\r\n    yield call(do404);\r\n  }\r\n}\r\n\r\nfunction* setRouteEntry(entry, node, ancestors, siblings) {\r\n  yield all([\r\n    put({\r\n      type: SET_NAVIGATION_NOT_FOUND,\r\n      notFound: false,\r\n    }),\r\n    put({\r\n      type: SET_NODE,\r\n      node,\r\n    }),\r\n    put({\r\n      type: SET_ENTRY,\r\n      entry: entry,\r\n    }),\r\n    put({\r\n      type: SET_ENTRY_ID,\r\n      id: entry.sys.id,\r\n    }),\r\n    put({\r\n      type: SET_ANCESTORS,\r\n      ancestors,\r\n    }),\r\n    put({\r\n      type: SET_SIBLINGS,\r\n      siblings,\r\n    }),\r\n  ]);\r\n}\r\n\r\nfunction* do404() {\r\n  yield put({\r\n    type: SET_NAVIGATION_NOT_FOUND,\r\n    notFound: true,\r\n  });\r\n  yield put({\r\n    type: SET_ENTRY_ID,\r\n    id: null,\r\n  });\r\n}\r\n","module.exports = __WEBPACK_EXTERNAL_MODULE__52__;","// eslint-disable-next-line import/named\r\nimport { Query } from '~/core/util/ContensisDeliveryApi';\r\nimport { fieldExpression, defaultExpressions } from '~/core/search/expressions';\r\n\r\nexport const routeEntryByFields = (\r\n  id,\r\n  fields = [],\r\n  versionStatus = 'published'\r\n) => {\r\n  const query = new Query(\r\n    ...[...fieldExpression('sys.id', id), ...defaultExpressions(versionStatus)]\r\n  );\r\n  query.fields = fields;\r\n  return query;\r\n};\r\n","module.exports = __WEBPACK_EXTERNAL_MODULE__54__;","import { Op, OrderBy } from 'contensis-delivery-api';\r\nimport { Fields, DataFormats } from '~/core/schema';\r\nimport {\r\n  fixFreeTextForElastic,\r\n  extractQuotedPhrases,\r\n} from '~/core/search/util';\r\n\r\nexport const fieldExpression = (\r\n  field,\r\n  value,\r\n  operator = 'equalTo',\r\n  weight = null\r\n) => {\r\n  if (!field || !value) return [];\r\n  if (Array.isArray(value)) return equalToOrIn(field, value, operator);\r\n  else\r\n    return !weight\r\n      ? [Op[operator](field, value)]\r\n      : [Op[operator](field, value).weight(weight)];\r\n};\r\n\r\nexport const contentTypeIdExpression = (contentTypeIds, webpageTemplates) => {\r\n  const expressions = [];\r\n  if (!contentTypeIds && !webpageTemplates) return expressions;\r\n\r\n  if (contentTypeIds && contentTypeIds.length > 0) {\r\n    expressions.push(\r\n      ...dataFormatExpression(contentTypeIds, DataFormats.entry)\r\n    );\r\n  }\r\n\r\n  if (webpageTemplates && webpageTemplates.length > 0) {\r\n    expressions.push(\r\n      ...dataFormatExpression(webpageTemplates, DataFormats.webpage)\r\n    );\r\n  }\r\n\r\n  if (expressions.length > 1) return [Op.or(...expressions)];\r\n\r\n  return expressions;\r\n};\r\n\r\nexport const filterExpressions = filters => {\r\n  if (!filters) return [];\r\n  const expressions = [];\r\n\r\n  filters.map(param => {\r\n    expressions.push(...fieldExpression(param.key, param.value, 'contains'));\r\n  });\r\n\r\n  return expressions;\r\n};\r\n\r\nexport const dataFormatExpression = (\r\n  contentTypeIds,\r\n  dataFormat = DataFormats.entry\r\n) => {\r\n  if (contentTypeIds && contentTypeIds.length > 0) {\r\n    /**\r\n     * We have an array of contentTypeIds some may be prefixed with a \"!\"\r\n     * to indicate this is a \"not\" expression\r\n     */\r\n    const withContentTypeIds = contentTypeIds.filter(c => !c.startsWith('!'));\r\n    const notContentTypeIds = contentTypeIds\r\n      .filter(c => c.startsWith('!'))\r\n      .map(id => id.substring(1));\r\n\r\n    const andExpr = Op.and();\r\n\r\n    const dataFormatExpr = fieldExpression(Fields.sys.dataFormat, dataFormat);\r\n\r\n    const withExpr = fieldExpression(\r\n      Fields.sys.contentTypeId,\r\n      withContentTypeIds\r\n    );\r\n\r\n    const notExpr = [\r\n      Op.not(...fieldExpression(Fields.sys.contentTypeId, notContentTypeIds)),\r\n    ];\r\n\r\n    andExpr.add(...dataFormatExpr);\r\n    if (withContentTypeIds.length > 0) andExpr.add(...withExpr);\r\n    if (notContentTypeIds.length > 0) andExpr.add(...notExpr);\r\n\r\n    return [andExpr];\r\n  }\r\n  return [];\r\n};\r\n\r\nexport const defaultExpressions = versionStatus => {\r\n  return [Op.equalTo(Fields.sys.versionStatus, versionStatus)];\r\n};\r\n\r\nexport const defaultSearchExpressions = versionStatus => {\r\n  return [\r\n    ...defaultExpressions(versionStatus),\r\n    ...includeInSearchExpressions(),\r\n  ];\r\n};\r\nexport const includeInSearchExpressions = () => [\r\n  Op.or(\r\n    Op.and(\r\n      Op.exists(Fields.sys.includeInSearch, true),\r\n      Op.equalTo(Fields.sys.includeInSearch, true)\r\n    ),\r\n    Op.exists(Fields.sys.includeInSearch, false)\r\n  ),\r\n];\r\n\r\nexport const orderByExpression = orderBy => {\r\n  let expression = OrderBy;\r\n  if (orderBy && orderBy.length > 0) {\r\n    orderBy.map(\r\n      ob =>\r\n        (expression = ob.startsWith('-')\r\n          ? expression.desc(ob.substring(1))\r\n          : expression.asc(ob))\r\n    );\r\n  }\r\n  return expression;\r\n};\r\n\r\nconst equalToOrIn = (field, arr, operator = 'equalTo') =>\r\n  arr.length === 0\r\n    ? []\r\n    : arr.length === 1\r\n    ? [Op[operator](field, arr[0])]\r\n    : [Op.in(field, ...arr)];\r\n\r\nexport const customWhereExpressions = where => {\r\n  if (!where || !Array.isArray(where)) return [];\r\n\r\n  // Accept HTTP style objects and map them to\r\n  // their equivalent JS client \"Op\" expressions\r\n  return where.map(clause => {\r\n    let expression;\r\n    Object.keys(clause).map((key, idx) => {\r\n      if (idx === 1) {\r\n        const operator = key;\r\n        const value = clause[key];\r\n        expression = Op[operator](clause.field, value, clause.weight);\r\n      }\r\n    });\r\n    return expression;\r\n  });\r\n};\r\n\r\nexport const termExpressions = (searchTerm, weightedSearchFields) => {\r\n  if (searchTerm && weightedSearchFields && weightedSearchFields.length > 0) {\r\n    // Extract any phrases in quotes to array\r\n    const quotedPhrases = extractQuotedPhrases(searchTerm);\r\n\r\n    // Modify the search term to remove any quoted phrases to leave any remaining terms\r\n    let modifiedSearchTerm = searchTerm;\r\n    quotedPhrases.forEach(\r\n      qp =>\r\n        (modifiedSearchTerm = modifiedSearchTerm\r\n          .replace(qp, '')\r\n          .replace('\"\"', '')\r\n          .trim())\r\n    );\r\n\r\n    // Push to the operators array to include in the query\r\n    const operators = [];\r\n\r\n    // Helper functions to generate Op expressions\r\n    const containsOp = (f, term) =>\r\n      fieldExpression(\r\n        f.fieldId,\r\n        fixFreeTextForElastic(term),\r\n        'contains',\r\n        f.weight\r\n      );\r\n    const freeTextOp = (f, term) =>\r\n      fieldExpression(\r\n        f.fieldId,\r\n        fixFreeTextForElastic(term),\r\n        'freeText',\r\n        f.weight\r\n      );\r\n\r\n    // For each weighted search field\r\n    weightedSearchFields.forEach(f => {\r\n      // Push to field operators\r\n      const fieldOperators = [];\r\n\r\n      // Add operator expressions for modified search term\r\n      if (modifiedSearchTerm) {\r\n        if (\r\n          [Fields.keywords, Fields.sys.filename, Fields.sys.uri].includes(\r\n            f.fieldId\r\n          )\r\n        ) {\r\n          fieldOperators.push(...containsOp(f, modifiedSearchTerm));\r\n        } else {\r\n          if ([Fields.entryTitle].includes(f.fieldId)) {\r\n            fieldOperators.push(\r\n              Op.or(\r\n                ...containsOp(f, modifiedSearchTerm),\r\n                ...freeTextOp(f, modifiedSearchTerm)\r\n              )\r\n            );\r\n          } else {\r\n            fieldOperators.push(...freeTextOp(f, modifiedSearchTerm));\r\n          }\r\n        }\r\n      }\r\n\r\n      // Add operator expressions for any quoted phrases\r\n      quotedPhrases.forEach(qp => fieldOperators.push(...containsOp(f, qp)));\r\n\r\n      // If we are using multiple operators for a field we will\r\n      // wrap each field inside an And operator so we will match\r\n      // all terms/phrases rather than any terms/phrases\r\n      if (fieldOperators.length > 1) {\r\n        operators.push(Op.and(...fieldOperators));\r\n      } else {\r\n        operators.push(...fieldOperators);\r\n      }\r\n    });\r\n\r\n    // Wrap operators in an Or operator\r\n    return [Op.or().addRange(operators)];\r\n  } else if (searchTerm) {\r\n    return [Op.contains(Fields.wildcard, searchTerm)];\r\n  } else {\r\n    return [];\r\n  }\r\n};\r\n","export const DataFormats = {\r\n  entry: 'entry',\r\n  webpage: 'webpage',\r\n};\r\n\r\nconst sys = {\r\n  contentTypeId: 'sys.contentTypeId',\r\n  dataFormat: 'sys.dataFormat',\r\n  filename: 'sys.properties.filename',\r\n  id: 'sys.id',\r\n  includeInSearch: 'sys.metadata.includeInSearch',\r\n  slug: 'sys.slug',\r\n  uri: 'sys.uri',\r\n  versionStatus: 'sys.versionStatus',\r\n};\r\n\r\nexport const Fields = {\r\n  entryTitle: 'entryTitle',\r\n  entryDescription: 'entryDescription',\r\n  keywords: 'keywords',\r\n  sys,\r\n  contentTypeId: 'sys.contentTypeId',\r\n  wildcard: '*',\r\n};\r\n\r\nexport const Projects = {\r\n  website: 'website',\r\n};\r\n\r\nexport const VersionStatus = {\r\n  published: 'published',\r\n  latest: 'latest',\r\n};\r\n\r\nexport const ContentTypes = {\r\n  contentPage: 'contentPage',\r\n};\r\n\r\nexport const WebpageFormats = {};\r\n\r\nexport const FilterExpressionTypes = {\r\n  contentType: 'contentType',\r\n  field: 'field',\r\n};\r\n","import { now } from '~/core/util/performance';\r\nimport { cachedSearch } from '~/core/util/ContensisDeliveryApi';\r\nimport { buildUrl } from '~/core/util/navigation';\r\n\r\nexport function fixFreeTextForElastic(s) {\r\n  let illegalChars = ['>', '<'];\r\n  let encodedChars = [\r\n    '+',\r\n    '-',\r\n    '=',\r\n    '&',\r\n    '|',\r\n    '!',\r\n    '(',\r\n    ')',\r\n    '{',\r\n    '}',\r\n    '[',\r\n    ']',\r\n    '^',\r\n    '\"',\r\n    '~',\r\n    '*',\r\n    '?',\r\n    ':',\r\n    '\\\\',\r\n    '/',\r\n  ];\r\n\r\n  let illegalRegEx = new RegExp(illegalChars.map(c => '\\\\' + c).join('|'), 'g');\r\n  let encodedRegEx = new RegExp(encodedChars.map(c => '\\\\' + c).join('|'), 'g');\r\n\r\n  s = s.replace(illegalRegEx, '');\r\n  s = s.replace(encodedRegEx, ''); // (m) => '\\\\\\\\' + m);\r\n  return s;\r\n}\r\n\r\nexport const timedSearch = async (query, linkDepth, projectId) => {\r\n  let duration = 0;\r\n\r\n  const start = now();\r\n  const payload = await cachedSearch.search(query, linkDepth, projectId);\r\n  const end = now();\r\n\r\n  duration = end - start;\r\n\r\n  return { duration, payload };\r\n};\r\n\r\nexport const extractQuotedPhrases = searchTerm => {\r\n  const pattern = new RegExp(\r\n    /(?=[\"'])(?:\"[^\"\\\\]*(?:\\\\[\\s\\S][^\"\\\\]*)*\"|'[^'\\\\]*(?:\\\\[\\s\\S][^'\\\\]*)*')/gm\r\n  );\r\n\r\n  return (searchTerm.match(pattern) || []).map(match =>\r\n    match.replace(/\"/g, '')\r\n  );\r\n};\r\n\r\nexport const callCustomApi = async (customApi, filters) => {\r\n  let uri = buildUrl(customApi.get('uri'), filters);\r\n  if (!uri) return null;\r\n  if (typeof window == 'undefined' && uri.startsWith('/'))\r\n    uri = `http://localhost:3001${uri}`;\r\n\r\n  const response = await fetch(uri);\r\n  return await response.json();\r\n};\r\n","export const now = () => {\r\n  if (typeof window == 'undefined') {\r\n    return Date.now();\r\n  }\r\n  return window.performance.now();\r\n};\r\n","import queryString from 'query-string';\r\n\r\nexport function queryParams(search) {\r\n  return queryString.parse(\r\n    typeof window != 'undefined' ? window.location.search : search\r\n  );\r\n}\r\nexport const routeParams = staticRoute =>\r\n  staticRoute && staticRoute.match ? staticRoute.match.params : {};\r\n\r\nexport const buildUrl = (route, params) => {\r\n  const qs = queryString.stringify(params);\r\n  const path = qs ? `${route}?${qs}` : route;\r\n  return path;\r\n};\r\n\r\nexport const clientHostname = () =>\r\n  `${window.location.protocol}//${window.location.hostname}:${window.location.port}`;\r\n\r\nexport const addHostname =\r\n  typeof window == 'undefined' || window.location.host == 'localhost:3000'\r\n    ? `https://${PUBLIC_URI /* global PUBLIC_URI */}`\r\n    : clientHostname();\r\n","import { takeEvery, put, select } from 'redux-saga/effects';\r\n\r\nimport { deliveryApi } from '~/core/util/ContensisDeliveryApi';\r\nimport {\r\n  GET_NODE_TREE,\r\n  SET_NODE_TREE,\r\n  GET_NODE_TREE_ERROR,\r\n} from '~/core/redux/types/navigation';\r\nimport { hasNavigationTree } from '~/core/redux/selectors/navigation';\r\nimport { selectVersionStatus } from '../selectors/version';\r\nimport { selectCurrentProject } from '../selectors/routing';\r\n\r\nexport const navigationSagas = [takeEvery(GET_NODE_TREE, ensureNodeTreeSaga)];\r\n\r\nexport function* ensureNodeTreeSaga() {\r\n  const state = yield select();\r\n  try {\r\n    if (!hasNavigationTree(state)) {\r\n      const deliveryApiVersionStatus = yield select(selectVersionStatus);\r\n      const project = yield select(selectCurrentProject);\r\n      const nodes = yield deliveryApi\r\n        .getClient(deliveryApiVersionStatus, project)\r\n        .nodes.getRoot({\r\n          depth: 2,\r\n          entryFields: 'entryTitle, metaInformation, sys.contentTypeId',\r\n        });\r\n      if (nodes) {\r\n        yield put({ type: SET_NODE_TREE, nodes });\r\n      } else {\r\n        yield put({ type: GET_NODE_TREE_ERROR });\r\n      }\r\n    }\r\n  } catch (ex) {\r\n    yield put({ type: GET_NODE_TREE_ERROR, error: ex.toString() });\r\n  }\r\n}\r\n","const client = require('../client/client').default;\r\nexport const ReactApp = require('~/App').default;\r\n\r\nexport default client;\r\n","import 'isomorphic-fetch';\r\nimport React from 'react';\r\nimport { render, hydrate } from 'react-dom';\r\nimport { Router } from 'react-router-dom';\r\nimport { preloadReady } from 'react-loadable';\r\nimport { AppContainer } from 'react-hot-loader';\r\nimport { Provider as ReduxProvider } from 'react-redux';\r\nimport queryString from 'query-string';\r\nimport { fromJS } from 'immutable';\r\n\r\nimport createStore from '~/core/redux/store';\r\nimport rootSaga from '~/core/redux/sagas/index.js';\r\n\r\nimport { setVersionStatus } from '~/core/redux/actions/version';\r\nimport { GetClientSideDeliveryApiStatus } from '~/core/util/ContensisDeliveryApi';\r\nimport { setCurrentProject } from '~/core/redux/actions/routing';\r\nimport pickProject from '~/core/util/pickProject';\r\nimport { browserHistory as history } from '~/core/redux/history';\r\n\r\nclass ClientApp {\r\n  constructor(ReactApp, config) {\r\n    const documentRoot = document.getElementById('root');\r\n\r\n    const { routes, withReducers, withSagas, withEvents } = config;\r\n\r\n    const GetClientJSX = store => {\r\n      const ClientJsx = (\r\n        <AppContainer>\r\n          <ReduxProvider store={store}>\r\n            <Router history={history}>\r\n              <ReactApp routes={routes} withEvents={withEvents} />\r\n            </Router>\r\n          </ReduxProvider>\r\n        </AppContainer>\r\n      );\r\n      return ClientJsx;\r\n    };\r\n\r\n    const isProduction = !(process.env.NODE_ENV != 'production');\r\n\r\n    /**\r\n     * Webpack HMR Setup.\r\n     */\r\n    const HMRRenderer = Component => {\r\n      preloadReady().then(() => {\r\n        isProduction\r\n          ? hydrate(Component, documentRoot)\r\n          : render(Component, documentRoot);\r\n      });\r\n    };\r\n    let store = null;\r\n    const qs = queryString.parse(window.location.search);\r\n\r\n    const versionStatusFromHostname = GetClientSideDeliveryApiStatus();\r\n    if (\r\n      window.isDynamic ||\r\n      window.REDUX_DATA ||\r\n      process.env.NODE_ENV !== 'production'\r\n    ) {\r\n      store = createStore(withReducers, fromJS(window.REDUX_DATA), history);\r\n      store.dispatch(\r\n        setVersionStatus(qs.versionStatus || versionStatusFromHostname)\r\n      );\r\n\r\n      /* eslint-disable no-console */\r\n      console.log('Hydrating from inline Redux');\r\n      /* eslint-enable no-console */\r\n      store.runSaga(rootSaga(withSagas));\r\n      store.dispatch(\r\n        setCurrentProject(pickProject(window.location.hostname, qs))\r\n      );\r\n\r\n      delete window.REDUX_DATA;\r\n      HMRRenderer(GetClientJSX(store));\r\n    } else {\r\n      fetch(`${window.location.pathname}?redux=true`)\r\n        .then(response => response.json())\r\n        .then(data => {\r\n          /* eslint-disable no-console */\r\n          //console.log('Got Data Back');\r\n          // console.log(data);\r\n          /* eslint-enable no-console */\r\n          const ssRedux = JSON.parse(data);\r\n          store = createStore(withReducers, fromJS(ssRedux), history);\r\n          // store.dispatch(setVersionStatus(versionStatusFromHostname));\r\n\r\n          store.runSaga(rootSaga(withSagas));\r\n          store.dispatch(\r\n            setCurrentProject(\r\n              pickProject(\r\n                window.location.hostname,\r\n                queryString.parse(window.location.search)\r\n              )\r\n            )\r\n          );\r\n          // if (typeof window != 'undefined') {\r\n          //   store.dispatch(checkUserLoggedIn());\r\n          // }\r\n          HMRRenderer(GetClientJSX(store));\r\n        });\r\n    }\r\n\r\n    // webpack Hot Module Replacement API\r\n    if (module.hot) {\r\n      module.hot.accept('~/App', () => {\r\n        // if you are using harmony modules ({modules:false})\r\n        HMRRenderer(GetClientJSX(store));\r\n      });\r\n    }\r\n  }\r\n}\r\n\r\nexport default ClientApp;\r\n","module.exports = __WEBPACK_EXTERNAL_MODULE__86__;"],"sourceRoot":""}
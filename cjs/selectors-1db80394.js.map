{"version":3,"file":"selectors-1db80394.js","sources":["../src/redux/util.ts","../src/util/navigation.js","../src/routing/redux/selectors.ts"],"sourcesContent":["export const action = (type: string, payload: any = {}) => ({\r\n  type,\r\n  ...payload,\r\n});\r\n\r\nexport const getJS = <S extends Record<string, unknown>, T extends keyof S>(\r\n  state: S,\r\n  stateKey: T\r\n) => {\r\n  if ('get' in state && typeof state.get === 'function') {\r\n    const result = state.get(stateKey);\r\n    if ('toJS' in result && typeof result.toJS === 'function')\r\n      return result.toJS() as S[T];\r\n    return result as S[T];\r\n  }\r\n  return state[stateKey];\r\n};\r\n","import queryString from 'query-string';\r\n\r\nexport function queryParams(search) {\r\n  return queryString.parse(\r\n    typeof window != 'undefined' ? window.location.search : search\r\n  );\r\n}\r\nexport const routeParams = staticRoute =>\r\n  staticRoute && staticRoute.match ? staticRoute.match.params : {};\r\n\r\nexport const buildUrl = (route, params) => {\r\n  const qs = queryString.stringify(params);\r\n  const path = qs ? `${route}?${qs}` : route;\r\n  return path;\r\n};\r\n\r\nexport const clientHostname = () =>\r\n  `${window.location.protocol}//${window.location.hostname}:${window.location.port}`;\r\n","import { Entry } from 'contensis-delivery-api/lib/models';\r\nimport { AppState } from '~/redux/appstate';\r\nimport { getJS } from '~/redux/util';\r\nimport { queryParams } from '~/util/navigation';\r\n\r\nconst select = (state: AppState) => getJS(state, 'routing');\r\n\r\nexport const selectRouteEntry = (state: AppState) =>\r\n  select(state)?.entry === null ? null : select(state)?.entry || ({} as Entry);\r\n\r\nexport const selectMappedEntry = (state: AppState) =>\r\n  select(state)?.mappedEntry || null;\r\n\r\nexport const selectNodeDepends = (state: AppState) =>\r\n  select(state)?.nodeDepends || [];\r\n\r\nexport const selectCurrentHostname = (state: AppState) =>\r\n  select(state)?.currentHostname;\r\n\r\nexport const selectCurrentTreeID = (state: AppState) =>\r\n  select(state)?.currentHostname;\r\n\r\nexport const selectRouteEntryEntryId = (state: AppState) =>\r\n  select(state)?.entry?.sys?.id || null;\r\n\r\nexport const selectRouteEntryContentTypeId = (state: AppState) => {\r\n  const entry = selectRouteEntry(state);\r\n  return entry?.sys?.contentTypeId || null;\r\n};\r\n\r\nexport const selectRouteEntryLanguage = (state: AppState) => {\r\n  const entry = selectRouteEntry(state);\r\n  return entry?.sys?.language || null;\r\n};\r\n\r\nexport const selectRouteEntrySlug = (state: AppState) => {\r\n  const entry = selectRouteEntry(state);\r\n  return entry?.sys?.slug || null;\r\n};\r\n\r\nexport const selectRouteEntryID = (state: AppState) => select(state)?.entryID;\r\n\r\nexport const selectCurrentPath = (state: AppState) =>\r\n  select(state)?.currentPath;\r\nexport const selectCurrentSearch = (state: AppState) =>\r\n  select(state)?.location?.search;\r\nexport const selectCurrentHash = (state: AppState) =>\r\n  select(state)?.location?.hash;\r\nexport const selectQueryStringAsObject = (state: AppState) =>\r\n  queryParams(selectCurrentSearch(state));\r\nexport const selectCurrentProject = (state: AppState) =>\r\n  select(state)?.currentProject;\r\nexport const selectIsNotFound = (state: AppState) => select(state)?.notFound;\r\nexport const selectCurrentAncestors = (state: AppState) =>\r\n  select(state)?.currentNodeAncestors || [];\r\nexport const selectCurrentSiblings = (state: AppState) =>\r\n  select(state)?.currentNodeSiblings || [];\r\nexport const selectCurrentNode = (state: AppState) =>\r\n  select(state)?.currentNode;\r\nexport const selectCurrentChildren = state =>\r\n  select(state)?.currentNode?.children || [];\r\n\r\nexport const selectBreadcrumb = (state: AppState) => {\r\n  return selectCurrentAncestors(state).push(selectCurrentNode(state));\r\n};\r\nexport const selectRouteErrorMessage = (state: AppState) => {\r\n  const error = select(state)?.error;\r\n  if (error && 'data' in error) {\r\n    return error?.data?.message || error?.statusText;\r\n  }\r\n};\r\nexport const selectRouteIsError = (state: AppState) => select(state)?.isError;\r\nexport const selectRouteLoading = (state: AppState) => select(state)?.isLoading;\r\nexport const selectRouteStatusCode = (state: AppState) =>\r\n  select(state)?.statusCode;\r\n"],"names":["action","type","payload","getJS","state","stateKey","get","result","toJS","queryParams","search","queryString","parse","window","location","select","selectRouteEntry","entry","selectMappedEntry","mappedEntry","selectNodeDepends","nodeDepends","selectCurrentHostname","currentHostname","selectCurrentTreeID","selectRouteEntryEntryId","sys","id","selectRouteEntryContentTypeId","contentTypeId","selectRouteEntryLanguage","language","selectRouteEntrySlug","slug","selectRouteEntryID","entryID","selectCurrentPath","currentPath","selectCurrentSearch","selectCurrentHash","hash","selectQueryStringAsObject","selectCurrentProject","currentProject","selectIsNotFound","notFound","selectCurrentAncestors","currentNodeAncestors","selectCurrentSiblings","currentNodeSiblings","selectCurrentNode","currentNode","selectCurrentChildren","children","selectBreadcrumb","push","selectRouteErrorMessage","error","data","message","statusText","selectRouteIsError","isError","selectRouteLoading","isLoading","selectRouteStatusCode","statusCode"],"mappings":"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"}
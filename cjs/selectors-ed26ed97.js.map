{"version":3,"file":"selectors-ed26ed97.js","sources":["../src/redux/util.ts","../src/util/navigation.js","../src/routing/redux/selectors.ts"],"sourcesContent":["import { jpath } from '~/util/json-mapper';\n\nexport const action = (type: string, payload: any = {}) => ({\n  type,\n  ...payload,\n});\n\nexport const getJS = <S extends Record<string, unknown>, T extends keyof S>(\n  state: S,\n  stateKey: T\n) => {\n  if (\n    'get' in state &&\n    typeof state.get === 'function' &&\n    'toJS' in state &&\n    typeof state.toJS === 'function'\n  ) {\n    return state.get(stateKey) as S[T];\n  }\n  return state[stateKey];\n};\n\nexport const getImmutableOrJS = <\n  S extends Record<string, unknown>,\n  T extends keyof S | any\n>(\n  state: S,\n  stateKey: T | T[],\n  fallbackValue?: any,\n  returnType: 'immutable' | 'js' = globalThis.STATE_TYPE\n) => {\n  // Find a fromJS function from global that is dynamically loaded in createStore\n  // or replace with a stub function for non-immutable gets\n  const fromJS =\n    returnType === 'immutable'\n      ? globalThis.immutable?.fromJSOrdered || globalThis.immutable?.fromJS\n      : v => v;\n\n  if (\n    state &&\n    'get' in state &&\n    typeof state.get === 'function' &&\n    'getIn' in state &&\n    typeof state.getIn === 'function' &&\n    'toJS' in state &&\n    typeof state.toJS === 'function'\n  ) {\n    if (Array.isArray(stateKey))\n      return fromJS(state.getIn(stateKey, fallbackValue));\n    return fromJS(state.get(stateKey, fallbackValue)) as S[T | any];\n  }\n\n  if (Array.isArray(stateKey) && state && typeof state === 'object') {\n    const result = jpath(stateKey.join('.'), state);\n    if (typeof result === 'undefined') return fallbackValue;\n    return result;\n  }\n\n  const result =\n    state && typeof state === 'object' ? state[stateKey as string] : undefined;\n  if (typeof result === 'undefined') return fallbackValue;\n  return result;\n};\n","import queryString from 'query-string';\n\nexport function queryParams(search) {\n  return queryString.parse(\n    typeof window != 'undefined' ? window.location.search : search\n  );\n}\nexport const routeParams = staticRoute =>\n  staticRoute && staticRoute.match ? staticRoute.match.params : {};\n\nexport const buildUrl = (route, params) => {\n  const qs = queryString.stringify(params);\n  const path = qs ? `${route}?${qs}` : route;\n  return path;\n};\n\nexport const clientHostname = () =>\n  `${window.location.protocol}//${window.location.hostname}:${window.location.port}`;\n","import { Entry } from 'contensis-delivery-api/lib/models';\nimport { StateType } from '~/config';\nimport { AppState } from '~/redux/appstate';\nimport { getImmutableOrJS as getIn } from '~/redux/util';\nimport { queryParams } from '~/util/navigation';\n\nexport const selectRouteEntry = (state: AppState, returnType?: StateType) =>\n  getIn(state, ['routing', 'entry'], {} as Entry, returnType);\n\nexport const selectMappedEntry = (state: AppState, returnType?: StateType) =>\n  getIn(state, ['routing', 'mappedEntry'], null, returnType);\n\nexport const selectNodeDepends = (state: AppState) =>\n  getIn(state, ['routing', 'nodeDepends'], []);\n\nexport const selectCurrentHostname = (state: AppState) =>\n  getIn(state, ['routing', 'currentHostname']);\n\nexport const selectCurrentTreeID = (state: AppState) =>\n  getIn(state, ['routing', 'currentHostname']);\n\nexport const selectRouteEntryEntryId = (state: AppState) =>\n  getIn(state, ['routing', 'entry', 'sys', 'id'], null);\n\nexport const selectRouteEntryContentTypeId = (state: AppState) => {\n  const entry = selectRouteEntry(state);\n  return getIn(entry, ['sys', 'contentTypeId'], null);\n};\n\nexport const selectRouteEntryLanguage = (state: AppState) => {\n  const entry = selectRouteEntry(state);\n  return getIn(entry, ['sys', 'language'], null);\n};\n\nexport const selectRouteEntrySlug = (state: AppState) => {\n  const entry = selectRouteEntry(state);\n  return getIn(entry, ['sys', 'slug'], null);\n};\n\nexport const selectRouteEntryID = (state: AppState) =>\n  getIn(state, ['routing', 'entryID']);\n\nexport const selectCurrentPath = (state: AppState) =>\n  getIn(state, ['routing', 'currentPath']);\nexport const selectCurrentLocation = (state: AppState) =>\n  getIn(state, ['routing', 'location']);\nexport const selectCurrentSearch = (state: AppState) =>\n  getIn(state, ['routing', 'location', 'search']);\nexport const selectCurrentHash = (state: AppState) =>\n  getIn(state, ['routing', 'location', 'hash']);\nexport const selectQueryStringAsObject = (state: AppState) =>\n  queryParams(selectCurrentSearch(state));\nexport const selectCurrentProject = (state: AppState) =>\n  getIn(state, ['routing', 'currentProject']);\nexport const selectIsNotFound = (state: AppState) =>\n  getIn(state, ['routing', 'notFound']);\nexport const selectCurrentAncestors = (state: AppState) =>\n  getIn(state, ['routing', 'currentNodeAncestors'], []);\nexport const selectCurrentSiblings = (state: AppState) =>\n  getIn(state, ['routing', 'currentNodeSiblings'], []);\nexport const selectCurrentNode = (state: AppState, returnType?: StateType) =>\n  getIn(state, ['routing', 'currentNode'], null, returnType);\nexport const selectCurrentChildren = state =>\n  getIn(state, ['routing', 'currentNode', 'children'], []);\n\nexport const selectBreadcrumb = (state: AppState) => {\n  return selectCurrentAncestors(state).push(selectCurrentNode(state));\n};\nexport const selectRouteErrorMessage = (state: AppState) => {\n  const error = getIn(state, ['routing', 'error']);\n  return getIn(error, ['data', 'message'], getIn(error, 'statusText'));\n};\nexport const selectRouteIsError = (state: AppState) =>\n  getIn(state, ['routing', 'isError']);\nexport const selectRouteLoading = (state: AppState) =>\n  getIn(state, ['routing', 'isLoading']);\nexport const selectRouteStatusCode = (state: AppState) =>\n  getIn(state, ['routing', 'statusCode']);\nexport const selectStaticRoute = (state: AppState) =>\n  getIn(state, ['routing', 'staticRoute']);\n"],"names":["action","type","payload","getJS","state","stateKey","get","toJS","getImmutableOrJS","fallbackValue","returnType","globalThis","STATE_TYPE","fromJS","immutable","fromJSOrdered","v","getIn","Array","isArray","result","jpath","join","undefined","queryParams","search","queryString","parse","window","location","selectRouteEntry","selectMappedEntry","selectNodeDepends","selectCurrentHostname","selectCurrentTreeID","selectRouteEntryEntryId","selectRouteEntryContentTypeId","entry","selectRouteEntryLanguage","selectRouteEntrySlug","selectRouteEntryID","selectCurrentPath","selectCurrentLocation","selectCurrentSearch","selectCurrentHash","selectQueryStringAsObject","selectCurrentProject","selectIsNotFound","selectCurrentAncestors","selectCurrentSiblings","selectCurrentNode","selectCurrentChildren","selectBreadcrumb","push","selectRouteErrorMessage","error","selectRouteIsError","selectRouteLoading","selectRouteStatusCode","selectStaticRoute"],"mappings":"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"}